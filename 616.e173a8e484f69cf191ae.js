(self.webpackChunkwww_covidcast=self.webpackChunkwww_covidcast||[]).push([[616],{7278:(e,t,n)=>{"use strict";n.d(t,{Nc:()=>i});const i=("#c00",{description:"shows the current data injected via a signal",data:{values:[{date_value:null}]},transform:[{calculate:"toDate(".concat("currentDate",")"),as:"date_value"}],mark:{type:"rule",tooltip:!1},encoding:{color:{value:"#c00"},x:{field:"date_value",type:"temporal"}}});"toDate(".concat("currentDate",")")},2754:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(5117),a=n(7416),s=n(2630),r=n(7211);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let u=null;function d(){if(u)return u;const e=document.createElement("div");e.classList.add("viz-tooltip"),document.body.appendChild(e);let t={width:0,height:0,x:0,y:0};const n={getBoundingClientRect:()=>({left:t.x,right:t.x+t.width,width:t.width,top:t.y,bottom:t.y+t.height,height:t.height})},i=(0,r.fi)(n,e,{placement:"top-start",modifiers:[{name:"offset",options:{offset:({placement:e})=>e.endsWith("start")?[8,8]:[-8,8]}},{name:"flip",options:{padding:8}}]}),a=(n=0,a=0,s=0,r=0)=>{t.x=n,t.y=a,t.width=s,t.height=r,e.style.display="",i.update()},s=()=>"none"!==e.style.display&&(e.style.display="none",!0);return u={instance:i,popper:e,update:a,hide:s},{instance:i,popper:e,update:a,hide:s}}function p(e){return e&&null!=e.datum?p(e.datum):e}function h(e,t){const n=l({},t);Object.entries(t).forEach((([t,i])=>{null!=e.$$.props[t]&&e.$$.ctx[e.$$.props[t]]===i&&delete n[t]})),e.$set(n)}function g(e){let t,n,a;return{c(){t=(0,i.bG)("div"),(0,i.Lj)(t,"class",n="root vega-embed "+e[0]),(0,i.Lj)(t,"data-message",e[5]),(0,i.Lj)(t,"data-testid","vega"),(0,i.Lj)(t,"data-status",a=e[3]?"error":e[2]?"no-data":e[1]?"loading":"ready"),(0,i.VH)(t,"loading-bg",!e[3]&&e[1]),(0,i.VH)(t,"message-overlay",e[3]||e[2]&&!e[1])},m(n,a){(0,i.$T)(n,t,a),e[24](t)},p(e,s){1&s[0]&&n!==(n="root vega-embed "+e[0])&&(0,i.Lj)(t,"class",n),32&s[0]&&(0,i.Lj)(t,"data-message",e[5]),14&s[0]&&a!==(a=e[3]?"error":e[2]?"no-data":e[1]?"loading":"ready")&&(0,i.Lj)(t,"data-status",a),11&s[0]&&(0,i.VH)(t,"loading-bg",!e[3]&&e[1]),15&s[0]&&(0,i.VH)(t,"message-overlay",e[3]||e[2]&&!e[1])},i:i.ZT,o:i.ZT,d(n){n&&(0,i.og)(t),e[24](null)}}}function f(e,t,r){let o,c,u,{data:g=Promise.resolve([])}=t;const f=(0,a.x)();let{className:v=""}=t,{spec:y}=t,w=null,m=null,b=null,{signals:$={}}=t,{signalListeners:j=[]}=t,{dataListeners:L=[]}=t,{eventListeners:O=[]}=t,{scrollSpy:D=-1}=t,S=!1,P=!1,E=!1,{resetSignalsUponNoData:x=!0}=t,{noDataText:z="No data available"}=t,{patchSpec:N=null}=t,{tooltip:T}=t,{tooltipProps:A={}}=t,k={width:300,height:300};function U(e,t){e&&(r(1,S=!0),r(3,E=!1),r(2,P=!1),Promise.all([e,t]).then((([t,n])=>{e===b&&(t.view.change("values",t.view.changeset().remove((()=>!0)).insert(n||[])),r(2,P=!n||0===n.length),Object.entries($).forEach((([e,n])=>{"function"!=typeof n&&t.view.signal(e,x&&P?null:n)})),t.view.runAsync(),r(1,S=!1))})).catch((e=>{console.error("error while updating data",e),r(1,S=!1),r(2,P=!1),r(3,E=!0)})))}function _(e){if(!w)return;b&&b.then((e=>{e&&e.finalize()})),m=null,r(3,E=!1);const t=e=>(e.signals=e.signals||[],Object.entries($).forEach((([t,n])=>{const i={name:t},a=e.signals.find((e=>e.name===t));null==n||["string","number","boolean"].includes(typeof n)||n instanceof Date||Array.isArray(n)?i.value=n:Object.assign(i,"function"==typeof n?n(a):n),a?Object.assign(a,i):e.signals.push(i)})),e.signals.push({name:"width",init:"containerSize()[0]",on:[{events:{source:"window",type:"resize"},update:"containerSize()[0]"}]}),e.signals.push({name:"height",init:"containerSize()[1]",on:[{events:{source:"window",type:"resize"},update:"containerSize()[1]"}]}),e),i=Object.entries(e.datasets||{});r(20,b=Promise.all([Promise.all([n.e(711),n.e(457)]).then(n.bind(n,1017)),e,...i.map((e=>e[1]))]).then((([e,n,...a])=>w?(i.forEach(((e,t)=>{n.datasets[e[0]]=a[t]})),e.default(w,n,{tooltip:c,patch:t})):null))),b.then((e=>{w&&(m=e,w.setAttribute("role","figure"),j.forEach((t=>{e.view.addSignalListener(t,((t,n)=>{f("signal",{name:t,value:n,view:e.view,spec:e.spec})}))})),L.forEach((t=>{e.view.addDataListener(t,((t,n)=>{f("dataListener",{name:t,value:n,view:e.view,spec:e.spec})}))})),O.forEach((t=>{e.view.addEventListener(t,((n,i)=>{f(t,{event:n,item:i,view:e.view,spec:e.spec})}))})),U(b,g))})),b.catch((e=>{console.error("error while creating vega",e),r(3,E=!0)}))}let C=null;function H(){r(21,k=w.getBoundingClientRect()),(0,s.Xp)(w,(e=>{(Math.abs(e.width-k.width)>1||Math.abs(e.height-k.height)>1)&&(r(21,k=e),!N&&m&&m.view.resize().runAsync())})),N||_(y)}return(0,a.H3)((()=>{if(D>=0){UIkit.scrollspy(w,{offset:D});const e=()=>{H(),w.removeEventListener("inview",e)};w.addEventListener("inview",e)}else H()})),(0,a.ev)((()=>{(0,s.UR)(w),C&&(C.$destroy(),C=null),c&&c.destroy(),m?(m.finalize(),m=null,r(20,b=null)):b&&(b.then((e=>{e&&e.finalize()})),r(20,b=null))})),e.$$set=e=>{"data"in e&&r(6,g=e.data),"className"in e&&r(0,v=e.className),"spec"in e&&r(7,y=e.spec),"signals"in e&&r(8,$=e.signals),"signalListeners"in e&&r(9,j=e.signalListeners),"dataListeners"in e&&r(10,L=e.dataListeners),"eventListeners"in e&&r(11,O=e.eventListeners),"scrollSpy"in e&&r(12,D=e.scrollSpy),"resetSignalsUponNoData"in e&&r(13,x=e.resetSignalsUponNoData),"noDataText"in e&&r(14,z=e.noDataText),"patchSpec"in e&&r(15,N=e.patchSpec),"tooltip"in e&&r(16,T=e.tooltip),"tooltipProps"in e&&r(17,A=e.tooltipProps)},e.$$.update=()=>{16398&e.$$.dirty[0]&&r(5,o=E?"Error occurred":P&&!S?z:null),65536&e.$$.dirty[0]&&r(22,c=function(e,t={}){if(!e)return;let n=!1,i=null,a=t;function s(t,s,r,o){if(n)return;const c=this,{popper:u,update:g,hide:f}=d(),v=p(r);if(null!=o&&""!==o&&null!=v.value)g(s.clientX,s.clientY),i?h(i,{hidden:!1,item:p(r),view:c}):i=new e({target:u,props:l(l({},a),{},{hidden:!1,item:p(r),view:c})});else{if(function(e){return!(!e||!e.relatedTarget)&&"function"==typeof e.relatedTarget.matches&&(e.relatedTarget.matches(".viz-tooltip")||null!=e.relatedTarget.closest(".viz-tooltip"))}(s))return;f()&&i&&h(i,{hidden:!0,view:c})}}return s.destroy=()=>{i&&(i.$destroy(),i=null),n=!0},s.update=e=>{a=e,i&&i.$set(l({},a))},s}(T)),4325376&e.$$.dirty[0]&&c&&c.update(A),1048640&e.$$.dirty[0]&&U(b,g),2130048&e.$$.dirty[0]&&r(23,u=N?N(y,k):y),8388608&e.$$.dirty[0]&&_(u),1048832&e.$$.dirty[0]&&function(e,t){e&&m&&0!==Object.keys(t).length&&(r(3,E=!1),Object.entries(t).forEach((([e,t])=>{"function"!=typeof t&&m.view.signal(e,t)})),m.view.runAsync())}(b,$)},[v,S,P,E,w,o,g,y,$,j,L,O,D,x,z,N,T,A,()=>b.then((e=>e.view)),()=>m?m.view:null,b,k,c,u,function(e){i.Vn[e?"unshift":"push"]((()=>{w=e,r(4,w)}))}]}class v extends i.f_{constructor(e){super(),(0,i.S1)(this,e,f,g,i.N8,{data:6,className:0,spec:7,signals:8,signalListeners:9,dataListeners:10,eventListeners:11,scrollSpy:12,resetSignalsUponNoData:13,noDataText:14,patchSpec:15,tooltip:16,tooltipProps:17,vegaAccessor:18,vegaDirectAccessor:19},[-1,-1])}get vegaAccessor(){return this.$$.ctx[18]}get vegaDirectAccessor(){return this.$$.ctx[19]}}const y=v}}]);
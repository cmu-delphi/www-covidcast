(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{394:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c(3),a=c(462),i=c(461),s=c(453),l=c(163),r=c(364),b=c(455),O=c(367),j=c(118),u=c(6),d=c(459),h=c(456);c(369);function p(e){let t,c,o;return c=new d.a({props:{data:e[0].data,spec:e[0].spec,noDataText:e[0].noDataText,signals:{currentDate:e[4],highlightTimeValue:e[1]},signalListeners:["highlight"],eventListeners:["click"],tooltip:h.a,tooltipProps:{sensor:e[0].sensor}}}),c.$on("click",(function(){Object(n.H)(e[2])&&e[2].apply(this,arguments)})),c.$on("signal",(function(){Object(n.H)(e[3])&&e[3].apply(this,arguments)})),{c(){t=Object(n.v)("div"),Object(n.o)(c.$$.fragment),Object(n.h)(t,"class","single-sensor-chart vega-wrapper svelte-1dx38td")},m(e,a){Object(n.G)(e,t,a),Object(n.J)(c,t,null),o=!0},p(t,[n]){e=t;const o={};1&n&&(o.data=e[0].data),1&n&&(o.spec=e[0].spec),1&n&&(o.noDataText=e[0].noDataText),18&n&&(o.signals={currentDate:e[4],highlightTimeValue:e[1]}),1&n&&(o.tooltipProps={sensor:e[0].sensor}),c.$set(o)},i(e){o||(Object(n.db)(c.$$.fragment,e),o=!0)},o(e){Object(n.eb)(c.$$.fragment,e),o=!1},d(e){e&&Object(n.u)(t),Object(n.s)(c)}}}function f(e,t,c){let a;Object(n.m)(e,o.i,e=>c(4,a=e));let{s:i}=t,{highlightTimeValue:s}=t,{onClick:l}=t,{onHighlight:r}=t;return e.$$set=e=>{"s"in e&&c(0,i=e.s),"highlightTimeValue"in e&&c(1,s=e.highlightTimeValue),"onClick"in e&&c(2,l=e.onClick),"onHighlight"in e&&c(3,r=e.onHighlight)},[i,s,l,r,a]}class m extends n.b{constructor(e){super(),Object(n.F)(this,e,f,p,n.Q,{s:0,highlightTimeValue:1,onClick:2,onHighlight:3})}}var g=m,v=c(335),y=c(454);c(370);function $(e,t,c){const n=e.slice();return n[16]=t[c],n}function _(e){let t,c,o,a,i;function s(...t){return e[9](e[16],...t)}return c=new v.a({}),{c(){t=Object(n.v)("button"),Object(n.o)(c.$$.fragment),Object(n.h)(t,"title","Show sensor description"),Object(n.h)(t,"class","pg-button info svelte-ad8szz")},m(e,l){Object(n.G)(e,t,l),Object(n.J)(c,t,null),o=!0,a||(i=Object(n.I)(t,"click",s),a=!0)},p(t,c){e=t},i(e){o||(Object(n.db)(c.$$.fragment,e),o=!0)},o(e){Object(n.eb)(c.$$.fragment,e),o=!1},d(e){e&&Object(n.u)(t),Object(n.s)(c),a=!1,i()}}}function w(e){let t,c,o,a,i,s,l,r,b,j,u,d,h,p,f,m,v,$=("function"==typeof e[16].sensor.mapTitleText?e[16].sensor.mapTitleText():e[16].sensor.name)+"";function w(...t){return e[8](e[16],...t)}let x=e[16].sensor.description&&_(e);function S(...t){return e[10](e[16],...t)}return j=new O.a({}),d=new g({props:{s:e[16],highlightTimeValue:e[4],onClick:e[5],onHighlight:y.b}}),{c(){t=Object(n.v)("li"),c=Object(n.v)("div"),o=Object(n.v)("button"),a=Object(n.ab)($),s=Object(n.W)(),l=Object(n.v)("div"),x&&x.c(),r=Object(n.W)(),b=Object(n.v)("button"),Object(n.o)(j.$$.fragment),u=Object(n.W)(),Object(n.o)(d.$$.fragment),h=Object(n.W)(),Object(n.h)(o,"class","title-button svelte-ad8szz"),Object(n.h)(o,"title",i="function"==typeof e[16].sensor.tooltipText?e[16].sensor.tooltipText():e[16].sensor.tooltipText),Object(n.h)(b,"class","pg-button svelte-ad8szz"),Object(n.h)(b,"title","Show as detail view"),Object(n.cb)(b,"hidden",!e[1]),Object(n.cb)(b,"active",e[0]===e[16].sensor),Object(n.h)(l,"class","toolbar svelte-ad8szz"),Object(n.h)(c,"class","header svelte-ad8szz"),Object(n.h)(t,"data-testid",p=e[16].sensor.key),Object(n.h)(t,"class","svelte-ad8szz"),Object(n.cb)(t,"selected",e[3]===e[16].sensor.key)},m(e,i){Object(n.G)(e,t,i),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(o,a),Object(n.f)(c,s),Object(n.f)(c,l),x&&x.m(l,null),Object(n.f)(l,r),Object(n.f)(l,b),Object(n.J)(j,b,null),Object(n.f)(t,u),Object(n.J)(d,t,null),Object(n.f)(t,h),f=!0,m||(v=[Object(n.I)(o,"click",Object(n.O)(w)),Object(n.I)(b,"click",Object(n.X)(S))],m=!0)},p(c,s){e=c,(!f||4&s)&&$!==($=("function"==typeof e[16].sensor.mapTitleText?e[16].sensor.mapTitleText():e[16].sensor.name)+"")&&Object(n.T)(a,$),(!f||4&s&&i!==(i="function"==typeof e[16].sensor.tooltipText?e[16].sensor.tooltipText():e[16].sensor.tooltipText))&&Object(n.h)(o,"title",i),e[16].sensor.description?x?(x.p(e,s),4&s&&Object(n.db)(x,1)):(x=_(e),x.c(),Object(n.db)(x,1),x.m(l,r)):x&&(Object(n.C)(),Object(n.eb)(x,1,1,()=>{x=null}),Object(n.l)()),2&s&&Object(n.cb)(b,"hidden",!e[1]),5&s&&Object(n.cb)(b,"active",e[0]===e[16].sensor);const O={};4&s&&(O.s=e[16]),16&s&&(O.highlightTimeValue=e[4]),d.$set(O),(!f||4&s&&p!==(p=e[16].sensor.key))&&Object(n.h)(t,"data-testid",p),12&s&&Object(n.cb)(t,"selected",e[3]===e[16].sensor.key)},i(e){f||(Object(n.db)(x),Object(n.db)(j.$$.fragment,e),Object(n.db)(d.$$.fragment,e),f=!0)},o(e){Object(n.eb)(x),Object(n.eb)(j.$$.fragment,e),Object(n.eb)(d.$$.fragment,e),f=!1},d(e){e&&Object(n.u)(t),x&&x.d(),Object(n.s)(j),Object(n.s)(d),m=!1,Object(n.P)(v)}}}function x(e){let t,c,o=e[2],a=[];for(let t=0;t<o.length;t+=1)a[t]=w($(e,o,t));const i=e=>Object(n.eb)(a[e],1,1,()=>{a[e]=null});return{c(){t=Object(n.v)("ul");for(let e=0;e<a.length;e+=1)a[e].c();Object(n.h)(t,"class","root svelte-ad8szz")},m(e,o){Object(n.G)(e,t,o);for(let e=0;e<a.length;e+=1)a[e].m(t,null);c=!0},p(e,[c]){if(63&c){let s;for(o=e[2],s=0;s<o.length;s+=1){const i=$(e,o,s);a[s]?(a[s].p(i,c),Object(n.db)(a[s],1)):(a[s]=w(i),a[s].c(),Object(n.db)(a[s],1),a[s].m(t,null))}for(Object(n.C)(),s=o.length;s<a.length;s+=1)i(s);Object(n.l)()}},i(e){if(!c){for(let e=0;e<o.length;e+=1)Object(n.db)(a[e]);c=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)Object(n.eb)(a[e]);c=!1},d(e){e&&Object(n.u)(t),Object(n.t)(a,e)}}}function S(e,t,c){let a,i,s;Object(n.m)(e,o.G,e=>c(15,a=e)),Object(n.m)(e,o.p,e=>c(3,i=e)),Object(n.m)(e,o.u,e=>c(4,s=e));let{detail:l=null}=t,{levels:r=u.f}=t,b=a[0],O=a[1],{selections:d=[]}=t;let h,p,f,m;return e.$$set=e=>{"detail"in e&&c(0,l=e.detail),"levels"in e&&c(6,r=e.levels),"selections"in e&&c(7,d=e.selections)},e.$$.update=()=>{64&e.$$.dirty&&c(13,h=new Set(r.map(e=>e.id))),8192&e.$$.dirty&&c(14,p=o.D.filter(e=>e.levels.some(e=>h.has(e)))),38912&e.$$.dirty&&(b.getTime()!==a[0].getTime()&&c(11,b=a[0]),O.getTime()!==a[1].getTime()&&c(12,O=a[1])),128&e.$$.dirty&&c(1,f=d.length>0),22656&e.$$.dirty&&c(2,m=p.map(e=>Object(y.c)(e,d,b,O)))},[l,f,m,i,s,function(e){const t=Object(y.d)(e);t&&(Object(j.a)("side-panel","set-date",t),o.h.set(t))},r,d,e=>{Object(j.a)("side-panel","set-sensor",e.sensor.key),o.p.set(e.sensor.key)},e=>{o.j.set(e.sensor)},e=>{Object(j.a)("side-panel",l===e.sensor?"hide-detail":"show-detail",e.sensor.key),c(0,l=l===e.sensor?null:e.sensor)}]}class k extends n.b{constructor(e){super(),Object(n.F)(this,e,S,x,n.Q,{detail:0,levels:6,selections:7})}}var L=k,M=c(161),C=c(162),T=c(464),z=c(160),P=c(457),R=c(371);c(372);function V(e){let t,c,o,a,i;return c=new v.a({}),{c(){t=Object(n.v)("button"),Object(n.o)(c.$$.fragment),Object(n.h)(t,"title","Show sensor description"),Object(n.h)(t,"class","pg-button pg-button-circle info svelte-i1lzby")},m(s,l){Object(n.G)(s,t,l),Object(n.J)(c,t,null),o=!0,a||(i=Object(n.I)(t,"click",e[14]),a=!0)},p:n.K,i(e){o||(Object(n.db)(c.$$.fragment,e),o=!0)},o(e){Object(n.eb)(c.$$.fragment,e),o=!1},d(e){e&&Object(n.u)(t),Object(n.s)(c),a=!1,i()}}}function D(e){let t;return{c(){t=Object(n.v)("div"),t.innerHTML='<div class="legend-avg svelte-i1lzby"></div> \n    <div>7-day average</div> \n    <div class="legend-avg legend-count svelte-i1lzby"></div> \n    <div>Raw data</div>',Object(n.h)(t,"class","legend svelte-i1lzby")},m(e,c){Object(n.G)(e,t,c)},d(e){e&&Object(n.u)(t)}}}function A(e){let t,c,o,a,i,s,r,b,O,j,u,p,f,m,g,v,y,$,_;a=new R.a({});let w=e[0].description&&V(e);O=new l.a({});let x={data:e[4],spec:e[5],patchSpec:T.d,noDataText:e[3],signals:{currentDate:e[7]},signalListeners:["dateRange"],tooltip:h.a,tooltipProps:{sensor:e[0]}};p=new d.a({props:x}),e[17](p),p.$on("signal",e[9]);let S=e[0].isCasesOrDeath&&!e[6]&&D();return v=new P.a({props:{center:!0,sensor:e[0]}}),{c(){t=Object(n.v)("div"),c=Object(n.v)("div"),o=Object(n.v)("button"),Object(n.o)(a.$$.fragment),s=Object(n.W)(),w&&w.c(),r=Object(n.W)(),b=Object(n.v)("button"),Object(n.o)(O.$$.fragment),j=Object(n.W)(),u=Object(n.v)("div"),Object(n.o)(p.$$.fragment),f=Object(n.W)(),S&&S.c(),m=Object(n.W)(),g=Object(n.v)("div"),Object(n.o)(v.$$.fragment),Object(n.h)(o,"title","Download this view"),Object(n.h)(o,"class","pg-button pg-button-circle info svelte-i1lzby"),o.disabled=i=!e[2],Object(n.h)(b,"class","pg-button pg-button-circle info svelte-i1lzby"),Object(n.h)(b,"title","Close this detail view"),Object(n.h)(c,"class","buttons svelte-i1lzby"),Object(n.h)(t,"class","header svelte-i1lzby"),Object(n.h)(u,"class","single-sensor-chart vega-wrapper svelte-i1lzby"),Object(n.h)(g,"class","encoding svelte-i1lzby")},m(i,l){Object(n.G)(i,t,l),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.J)(a,o,null),Object(n.f)(c,s),w&&w.m(c,null),Object(n.f)(c,r),Object(n.f)(c,b),Object(n.J)(O,b,null),e[15](b),Object(n.G)(i,j,l),Object(n.G)(i,u,l),Object(n.J)(p,u,null),Object(n.G)(i,f,l),S&&S.m(i,l),Object(n.G)(i,m,l),Object(n.G)(i,g,l),Object(n.J)(v,g,null),y=!0,$||(_=[Object(n.I)(window,"keydown",e[10]),Object(n.I)(o,"click",e[12]),Object(n.I)(b,"click",e[16])],$=!0)},p(e,[t]){(!y||4&t&&i!==(i=!e[2]))&&(o.disabled=i),e[0].description?w?(w.p(e,t),1&t&&Object(n.db)(w,1)):(w=V(e),w.c(),Object(n.db)(w,1),w.m(c,r)):w&&(Object(n.C)(),Object(n.eb)(w,1,1,()=>{w=null}),Object(n.l)());const a={};16&t&&(a.data=e[4]),32&t&&(a.spec=e[5]),8&t&&(a.noDataText=e[3]),128&t&&(a.signals={currentDate:e[7]}),1&t&&(a.tooltipProps={sensor:e[0]}),p.$set(a),e[0].isCasesOrDeath&&!e[6]?S||(S=D(),S.c(),S.m(m.parentNode,m)):S&&(S.d(1),S=null);const s={};1&t&&(s.sensor=e[0]),v.$set(s)},i(e){y||(Object(n.db)(a.$$.fragment,e),Object(n.db)(w),Object(n.db)(O.$$.fragment,e),Object(n.db)(p.$$.fragment,e),Object(n.db)(v.$$.fragment,e),y=!0)},o(e){Object(n.eb)(a.$$.fragment,e),Object(n.eb)(w),Object(n.eb)(O.$$.fragment,e),Object(n.eb)(p.$$.fragment,e),Object(n.eb)(v.$$.fragment,e),y=!1},d(c){c&&Object(n.u)(t),Object(n.s)(a),w&&w.d(),Object(n.s)(O),e[15](null),c&&Object(n.u)(j),c&&Object(n.u)(u),e[17](null),Object(n.s)(p),c&&Object(n.u)(f),S&&S.d(c),c&&Object(n.u)(m),c&&Object(n.u)(g),Object(n.s)(v),$=!1,Object(n.P)(_)}}}function W(e,t,c){let a,i,s;Object(n.m)(e,o.E,e=>c(20,a=e)),Object(n.m)(e,o.G,e=>c(26,i=e)),Object(n.m)(e,o.i,e=>c(7,s=e));const l=Object(z.b)();let{sensor:r}=t;let{selections:b=[]}=t;let O=null,d=null;function h(){d&&(d.focus(),d=null)}Object(z.d)(()=>{O&&(d=document.activeElement,O.focus())});let p=null;let f,m,g,v,y,$,_,w,x,S,k,L;return e.$$set=e=>{"sensor"in e&&c(0,r=e.sensor),"selections"in e&&c(13,b=e.selections)},e.$$.update=()=>{1048577&e.$$.dirty&&c(19,f="function"==typeof r.mapTitleText?r.mapTitleText(a):r.mapTitleText),8192&e.$$.dirty&&c(21,m=b.length>0?b[0].info:null),8192&e.$$.dirty&&c(22,g=b.length>0),8192&e.$$.dirty&&c(23,v=b.length>1),2097152&e.$$.dirty&&c(24,y=Boolean(m)&&m.level===u.g.id),20971520&e.$$.dirty&&c(3,$=g?y?"Please select a county":"No data available":"No location selected"),27271169&e.$$.dirty&&c(4,_=v?function(e,t){return Promise.all(t.map(t=>{const c=t.info;return c.level===u.g.id?[]:Object(C.c)(e,c.level,c.propertyId,void 0,void 0,!1,{geo_value:c.propertyId}).then(C.a).then(e=>e.map(e=>(e.displayName=c.displayName,e)))})).then(e=>e.flat())}(r,b):m&&!y?Object(C.c)(r,m.level,m.propertyId,void 0,void 0,!1,{geo_value:m.propertyId}).then(e=>Object(C.a)(e,r)):[]),100663296&e.$$.dirty&&c(25,w=w||i),8193&e.$$.dirty&&c(27,x="".concat(r.name," in ").concat(b.length>0?b.map(e=>e.info.displayName).join(", "):"Unknown")),1048577&e.$$.dirty&&(S=Object(u.i)(r,a)),135798785&e.$$.dirty&&c(5,k=Object(T.c)(r,Object(u.i)(r,a),b,(0===w.length&&c(25,w=i),w),[x,f])),1048576&e.$$.dirty&&c(6,L=a.cumulative)},[r,O,p,$,_,k,L,s,l,function(e){if("dateRange"!==e.detail.name)return;const t=e.detail.value&&e.detail.value.date_value;t&&Array.isArray(t)&&t.length>0&&(!Number.isNaN(t[0])&&t[0]!==w[0].getTime()||!Number.isNaN(t[1])&&t[1]!==w[1].getTime())&&c(25,w=[new Date(t[0]),new Date(t[1])])},function(e){"Escape"!==e.key&&"Esc"!==e.key||(Object(j.a)("detail-view","close","keyboard"),h(),l("close"))},h,function(){p.vegaAccessor().then(e=>{const t=e.toImageURL("png",2),c=g?b.map(e=>e.info.displayName).join(", "):"Unknown";t.then(e=>{!function(e,t){const c=document.createElement("a");c.download=t,c.href=e,c.style.position="absolute",c.style.left="-10000px",c.style.top="-10000px",document.body.appendChild(c),c.click(),c.remove()}(e,"".concat(r.name," in ").concat(c,".png"))})})},b,()=>{o.j.set(r)},function(e){n.j[e?"unshift":"push"](()=>{O=e,c(1,O)})},()=>{Object(j.a)("detail-view","close","button"),h(),l("close")},function(e){n.j[e?"unshift":"push"](()=>{p=e,c(2,p)})}]}class E extends n.b{constructor(e){super(),Object(n.F)(this,e,W,A,n.Q,{sensor:0,selections:13})}}var I=E,G=c(463),N=c(373),F=c(86);c(374);function B(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function Z(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function H(e,t,c){const n=e.slice();return n[16]=t[c],n}function J(e,t,c){const n=e.slice();return n[19]=t[c],n}function U(e){let t,c,o,a,i,s,l,r,b,O,j=e[19].displayName+"",u=e[6].formatValue(e[19].value)+"";function d(...t){return e[12](e[19],...t)}function h(...t){return e[13](e[19],...t)}return{c(){t=Object(n.v)("li"),c=Object(n.v)("button"),o=Object(n.ab)(j),a=Object(n.ab)(" ("),i=Object(n.ab)(u),s=Object(n.ab)(")"),r=Object(n.W)(),Object(n.h)(c,"class","button svelte-cbe009"),c.disabled=l=!e[19].info||e[1].some(d),Object(n.h)(t,"class","svelte-cbe009")},m(e,l){Object(n.G)(e,t,l),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(c,a),Object(n.f)(c,i),Object(n.f)(c,s),Object(n.f)(t,r),b||(O=Object(n.I)(c,"click",h),b=!0)},p(t,a){e=t,8&a&&j!==(j=e[19].displayName+"")&&Object(n.T)(o,j),72&a&&u!==(u=e[6].formatValue(e[19].value)+"")&&Object(n.T)(i,u),10&a&&l!==(l=!e[19].info||e[1].some(d))&&(c.disabled=l)},d(e){e&&Object(n.u)(t),b=!1,O()}}}function K(e){let t,c,o,a,i=e[5].reverse(),s=[];for(let t=0;t<i.length;t+=1)s[t]=Q(H(e,i,t));let l=0===e[5].length&&Y(e);return{c(){t=Object(n.v)("h5"),t.textContent="Select from recent locations",c=Object(n.W)(),o=Object(n.v)("ul");for(let e=0;e<s.length;e+=1)s[e].c();a=Object(n.W)(),l&&l.c(),Object(n.h)(o,"class","svelte-cbe009"),Object(n.cb)(o,"empty",0===e[5].length)},m(e,i){Object(n.G)(e,t,i),Object(n.G)(e,c,i),Object(n.G)(e,o,i);for(let e=0;e<s.length;e+=1)s[e].m(o,null);Object(n.f)(o,a),l&&l.m(o,null)},p(e,t){if(160&t){let c;for(i=e[5].reverse(),c=0;c<i.length;c+=1){const n=H(e,i,c);s[c]?s[c].p(n,t):(s[c]=Q(n),s[c].c(),s[c].m(o,a))}for(;c<s.length;c+=1)s[c].d(1);s.length=i.length}0===e[5].length?l||(l=Y(e),l.c(),l.m(o,null)):l&&(l.d(1),l=null),32&t&&Object(n.cb)(o,"empty",0===e[5].length)},d(e){e&&Object(n.u)(t),e&&Object(n.u)(c),e&&Object(n.u)(o),Object(n.t)(s,e),l&&l.d()}}}function Q(e){let t,c,o,a,i,s=e[16].displayName+"";function l(...t){return e[14](e[16],...t)}return{c(){t=Object(n.v)("li"),c=Object(n.v)("button"),o=Object(n.ab)(s),Object(n.h)(c,"class","button svelte-cbe009"),Object(n.h)(t,"class","svelte-cbe009")},m(e,s){Object(n.G)(e,t,s),Object(n.f)(t,c),Object(n.f)(c,o),a||(i=Object(n.I)(c,"click",l),a=!0)},p(t,c){e=t,32&c&&s!==(s=e[16].displayName+"")&&Object(n.T)(o,s)},d(e){e&&Object(n.u)(t),a=!1,i()}}}function Y(e){let t;return{c(){t=Object(n.v)("li"),t.textContent="No recent locations founds",Object(n.h)(t,"class","svelte-cbe009")},m(e,c){Object(n.G)(e,t,c)},d(e){e&&Object(n.u)(t)}}}function q(e){let t,c,o,a,i,s,l,r,O,j,u,d,h,p,f,m,g,v,y,$=e[6].name+"";a=new b.a({props:{className:"container-bg",placeholder:"Search by name...",selectedItem:(e[4],null),items:e[4],labelFieldName:"displayName",maxItemsToShowInList:"5"}}),a.$on("change",e[10]);let _=e[3],w=[];for(let t=0;t<_.length;t+=1)w[t]=U(J(e,_,t));let x=e[5].length>0&&K(e);return{c(){t=Object(n.v)("section"),c=Object(n.v)("h4"),c.textContent="Add Another",o=Object(n.W)(),Object(n.o)(a.$$.fragment),i=Object(n.W)(),s=Object(n.v)("p"),l=Object(n.v)("button"),r=Object(n.ab)("Select on map"),O=Object(n.W)(),j=Object(n.v)("h5"),u=Object(n.ab)("Select from Top for "),d=Object(n.v)("span"),h=Object(n.ab)($),p=Object(n.W)(),f=Object(n.v)("ol");for(let e=0;e<w.length;e+=1)w[e].c();m=Object(n.W)(),x&&x.c(),Object(n.h)(c,"class","svelte-cbe009"),Object(n.h)(l,"class","pg-button pg-text-button svelte-cbe009"),Object(n.h)(l,"aria-pressed",e[0]),Object(n.cb)(l,"selected",e[0]),Object(n.h)(s,"id","select-on-map"),Object(n.h)(s,"class","svelte-cbe009"),Object(n.h)(d,"class","current svelte-cbe009"),Object(n.h)(f,"class","svelte-cbe009"),Object(n.cb)(f,"loading",e[2]),Object(n.h)(t,"class","container-bg container-style root svelte-cbe009")},m(b,$){Object(n.G)(b,t,$),Object(n.f)(t,c),Object(n.f)(t,o),Object(n.J)(a,t,null),Object(n.f)(t,i),Object(n.f)(t,s),Object(n.f)(s,l),Object(n.f)(l,r),Object(n.f)(t,O),Object(n.f)(t,j),Object(n.f)(j,u),Object(n.f)(j,d),Object(n.f)(d,h),Object(n.f)(t,p),Object(n.f)(t,f);for(let e=0;e<w.length;e+=1)w[e].m(f,null);Object(n.f)(t,m),x&&x.m(t,null),g=!0,v||(y=Object(n.I)(l,"click",e[11]),v=!0)},p(e,[c]){const o={};if(16&c&&(o.selectedItem=(e[4],null)),16&c&&(o.items=e[4]),a.$set(o),(!g||1&c)&&Object(n.h)(l,"aria-pressed",e[0]),1&c&&Object(n.cb)(l,"selected",e[0]),(!g||64&c)&&$!==($=e[6].name+"")&&Object(n.T)(h,$),202&c){let t;for(_=e[3],t=0;t<_.length;t+=1){const n=J(e,_,t);w[t]?w[t].p(n,c):(w[t]=U(n),w[t].c(),w[t].m(f,null))}for(;t<w.length;t+=1)w[t].d(1);w.length=_.length}4&c&&Object(n.cb)(f,"loading",e[2]),e[5].length>0?x?x.p(e,c):(x=K(e),x.c(),x.m(t,null)):x&&(x.d(1),x=null)},i(e){g||(Object(n.db)(a.$$.fragment,e),g=!0)},o(e){Object(n.eb)(a.$$.fragment,e),g=!1},d(e){e&&Object(n.u)(t),Object(n.s)(a),Object(n.t)(w,e),x&&x.d(),v=!1,y()}}}function X(e,t,c){let a,i;Object(n.m)(e,o.z,e=>c(15,a=e)),Object(n.m)(e,o.q,e=>c(6,i=e));const s=Object(z.b)();let{mapData:l}=t,{regionSearchList:r}=t,{pickMapMode:b=!1}=t,{selections:O=[]}=t,j=!0,d=[];let h,p;return e.$$set=e=>{"mapData"in e&&c(8,l=e.mapData),"regionSearchList"in e&&c(9,r=e.regionSearchList),"pickMapMode"in e&&c(0,b=e.pickMapMode),"selections"in e&&c(1,O=e.selections)},e.$$.update=()=>{514&e.$$.dirty&&c(4,h=r.filter(e=>e.level!==u.g.id&&!O.some(t=>t.info.id===e.id)&&(0===O.length||O.some(t=>t.info.level===e.level)))),32770&e.$$.dirty&&c(5,p=a.filter(e=>!O.some(t=>t.info.id===e.id))),256&e.$$.dirty&&(c(2,j=!0),l.then(e=>{c(2,j=!1),c(3,d=e.map(e=>{const t=Object(F.b)(e.geo_value);return function(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?B(Object(c),!0).forEach((function(t){Z(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):B(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}({displayName:t?t.displayName:e.geo_value,info:t},e)}).sort((e,t)=>e.value!==t.value?e.value<t.value?1:-1:e.displayName.localeCompare(t.displayName)).slice(0,10))}))},[b,O,j,d,h,p,i,s,l,r,e=>{e.detail&&s("add",e.detail)},()=>c(0,b=!b),(e,t)=>t.info.id===e.info.id,e=>s("add",e.info),e=>s("add",e)]}class ee extends n.b{constructor(e){super(),Object(n.F)(this,e,X,q,n.Q,{mapData:8,regionSearchList:9,pickMapMode:0,selections:1})}}var te=ee;c(375);function ce(e,t,c){const n=e.slice();return n[44]=t[c],n}function ne(e){let t,c,o,a,i,s;t=new b.a({props:{className:"search-container container-bg container-style",placeholder:"Search for a location...",items:e[1],selectedItem:e[16],labelFieldName:"displayName",maxItemsToShowInList:"5"}}),t.$on("change",e[23]);const l=[ae,oe],r=[];function O(e,t){return e[15]?1:0}return a=O(e),i=r[a]=l[a](e),{c(){Object(n.o)(t.$$.fragment),c=Object(n.W)(),o=Object(n.v)("div"),i.c(),Object(n.h)(o,"class","view-switcher svelte-19yl1er")},m(e,i){Object(n.J)(t,e,i),Object(n.G)(e,c,i),Object(n.G)(e,o,i),r[a].m(o,null),s=!0},p(e,c){const s={};2&c[0]&&(s.items=e[1]),65536&c[0]&&(s.selectedItem=e[16]),t.$set(s);let b=a;a=O(e),a===b?r[a].p(e,c):(Object(n.C)(),Object(n.eb)(r[b],1,1,()=>{r[b]=null}),Object(n.l)(),i=r[a],i||(i=r[a]=l[a](e),i.c()),Object(n.db)(i,1),i.m(o,null))},i(e){s||(Object(n.db)(t.$$.fragment,e),Object(n.db)(i),s=!0)},o(e){Object(n.eb)(t.$$.fragment,e),Object(n.eb)(i),s=!1},d(e){Object(n.s)(t,e),e&&Object(n.u)(c),e&&Object(n.u)(o),r[a].d()}}}function oe(e){let t,c,o,a,i,s,l,b,O,j,u,d,h,p,f;return i=new r.a({}),u=new r.a({}),{c(){t=Object(n.v)("div"),c=Object(n.v)("button"),o=Object(n.v)("span"),o.textContent="Switch to Map",a=Object(n.W)(),Object(n.o)(i.$$.fragment),l=Object(n.W)(),b=Object(n.v)("button"),O=Object(n.v)("span"),O.textContent="Switch to Line Charts",j=Object(n.W)(),Object(n.o)(u.$$.fragment),Object(n.h)(o,"aria-hidden",""),Object(n.h)(c,"aria-pressed",s=String(e[6])),Object(n.h)(c,"class","pg-button map-button svelte-19yl1er"),Object(n.h)(c,"title","Switch to Map"),Object(n.cb)(c,"selected",e[6]),Object(n.h)(O,"aria-hidden",""),Object(n.h)(b,"aria-pressed",d=String(!e[6])),Object(n.h)(b,"class","pg-button chart-button svelte-19yl1er"),Object(n.h)(b,"title","Switch to Line Charts"),Object(n.cb)(b,"selected",!e[6]),Object(n.h)(t,"class","pg-button-group")},m(s,r){Object(n.G)(s,t,r),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(c,a),Object(n.J)(i,c,null),Object(n.f)(t,l),Object(n.f)(t,b),Object(n.f)(b,O),Object(n.f)(b,j),Object(n.J)(u,b,null),h=!0,p||(f=[Object(n.I)(c,"click",e[25]),Object(n.I)(b,"click",e[26])],p=!0)},p(e,t){(!h||64&t[0]&&s!==(s=String(e[6])))&&Object(n.h)(c,"aria-pressed",s),64&t[0]&&Object(n.cb)(c,"selected",e[6]),(!h||64&t[0]&&d!==(d=String(!e[6])))&&Object(n.h)(b,"aria-pressed",d),64&t[0]&&Object(n.cb)(b,"selected",!e[6])},i(e){h||(Object(n.db)(i.$$.fragment,e),Object(n.db)(u.$$.fragment,e),h=!0)},o(e){Object(n.eb)(i.$$.fragment,e),Object(n.eb)(u.$$.fragment,e),h=!1},d(e){e&&Object(n.u)(t),Object(n.s)(i),Object(n.s)(u),p=!1,Object(n.P)(f)}}}function ae(e){let t,c,o,a,i,s,l,b,O,j,u,d,h,p=e[7]?"Hide":"Show";return s=new r.a({}),b=new N.a({}),{c(){t=Object(n.v)("button"),c=Object(n.v)("span"),o=Object(n.ab)(p),a=Object(n.ab)(" Line Charts panel"),i=Object(n.W)(),Object(n.o)(s.$$.fragment),l=Object(n.W)(),Object(n.o)(b.$$.fragment),Object(n.h)(c,"aria-hidden",""),Object(n.h)(t,"aria-pressed",O=String(!e[7])),Object(n.h)(t,"class","pg-button chart-button single-toggle svelte-19yl1er"),Object(n.h)(t,"title",j=(e[7]?"Hide":"Show")+" Line Charts panel"),Object(n.cb)(t,"selected",e[7])},m(r,O){Object(n.G)(r,t,O),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(c,a),Object(n.f)(t,i),Object(n.J)(s,t,null),Object(n.f)(t,l),Object(n.J)(b,t,null),u=!0,d||(h=Object(n.I)(t,"click",e[24]),d=!0)},p(e,c){(!u||128&c[0])&&p!==(p=e[7]?"Hide":"Show")&&Object(n.T)(o,p),(!u||128&c[0]&&O!==(O=String(!e[7])))&&Object(n.h)(t,"aria-pressed",O),(!u||128&c[0]&&j!==(j=(e[7]?"Hide":"Show")+" Line Charts panel"))&&Object(n.h)(t,"title",j),128&c[0]&&Object(n.cb)(t,"selected",e[7])},i(e){u||(Object(n.db)(s.$$.fragment,e),Object(n.db)(b.$$.fragment,e),u=!0)},o(e){Object(n.eb)(s.$$.fragment,e),Object(n.eb)(b.$$.fragment,e),u=!1},d(e){e&&Object(n.u)(t),Object(n.s)(s),Object(n.s)(b),d=!1,h()}}}function ie(e){let t,c,o;return c=new I({props:{sensor:e[4],selections:e[14]}}),c.$on("close",e[33]),{c(){t=Object(n.v)("div"),Object(n.o)(c.$$.fragment),Object(n.h)(t,"class","detail-container container-bg container-style svelte-19yl1er")},m(e,a){Object(n.G)(e,t,a),Object(n.J)(c,t,null),o=!0},p(e,t){const n={};16&t[0]&&(n.sensor=e[4]),16384&t[0]&&(n.selections=e[14]),c.$set(n)},i(e){o||(Object(n.db)(c.$$.fragment,e),o=!0)},o(e){Object(n.eb)(c.$$.fragment,e),o=!1},d(e){e&&Object(n.u)(t),Object(n.s)(c)}}}function se(e){let t,c,o,a,i,s,l,r,b,O,j,u,d,h=e[13]?"Exit":"Open";function p(t){e[34].call(null,t)}let f={levels:e[2],selections:e[14]};return void 0!==e[4]&&(f.detail=e[4]),a=new L({props:f}),n.j.push(()=>Object(n.i)(a,"detail",p)),{c(){t=Object(n.v)("div"),c=Object(n.v)("div"),o=Object(n.v)("div"),Object(n.o)(a.$$.fragment),s=Object(n.W)(),l=Object(n.v)("div"),r=Object(n.v)("button"),b=Object(n.ab)(h),O=Object(n.ab)(" compare mode"),Object(n.h)(o,"class","panel-scroll-container svelte-19yl1er"),Object(n.h)(c,"class","panel-wrapper container-bg container-style svelte-19yl1er"),Object(n.h)(r,"class","pg-button pg-text-button"),Object(n.h)(l,"class","panel-bottom-wrapper mobileHide svelte-19yl1er"),Object(n.h)(t,"class","panel-container svelte-19yl1er")},m(i,h){Object(n.G)(i,t,h),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.J)(a,o,null),Object(n.f)(t,s),Object(n.f)(t,l),Object(n.f)(l,r),Object(n.f)(r,b),Object(n.f)(r,O),j=!0,u||(d=Object(n.I)(r,"click",e[35]),u=!0)},p(e,t){const c={};4&t[0]&&(c.levels=e[2]),16384&t[0]&&(c.selections=e[14]),!i&&16&t[0]&&(i=!0,c.detail=e[4],Object(n.c)(()=>i=!1)),a.$set(c),(!j||8192&t[0])&&h!==(h=e[13]?"Exit":"Open")&&Object(n.T)(b,h)},i(e){j||(Object(n.db)(a.$$.fragment,e),j=!0)},o(e){Object(n.eb)(a.$$.fragment,e),j=!1},d(e){e&&Object(n.u)(t),Object(n.s)(a),u=!1,d()}}}function le(e){let t,c,o,a,i,s,l,r=e[14],b=[];for(let t=0;t<r.length;t+=1)b[t]=re(ce(e,r,t));const O=e=>Object(n.eb)(b[e],1,1,()=>{b[e]=null});function j(t){e[37].call(null,t)}let u={regionSearchList:e[1],selections:e[14],mapData:e[12]};return void 0!==e[8]&&(u.pickMapMode=e[8]),i=new te({props:u}),n.j.push(()=>Object(n.i)(i,"pickMapMode",j)),i.$on("add",e[38]),{c(){t=Object(n.v)("div"),c=Object(n.v)("div"),o=Object(n.v)("ul");for(let e=0;e<b.length;e+=1)b[e].c();a=Object(n.W)(),Object(n.o)(i.$$.fragment),Object(n.h)(o,"class","svelte-19yl1er"),Object(n.h)(c,"class","selection-container container-bg container-style svelte-19yl1er"),Object(n.h)(t,"class","add-container svelte-19yl1er")},m(e,s){Object(n.G)(e,t,s),Object(n.f)(t,c),Object(n.f)(c,o);for(let e=0;e<b.length;e+=1)b[e].m(o,null);Object(n.f)(t,a),Object(n.J)(i,t,null),l=!0},p(e,t){if(16384&t[0]){let c;for(r=e[14],c=0;c<r.length;c+=1){const a=ce(e,r,c);b[c]?(b[c].p(a,t),Object(n.db)(b[c],1)):(b[c]=re(a),b[c].c(),Object(n.db)(b[c],1),b[c].m(o,null))}for(Object(n.C)(),c=r.length;c<b.length;c+=1)O(c);Object(n.l)()}const c={};2&t[0]&&(c.regionSearchList=e[1]),16384&t[0]&&(c.selections=e[14]),4096&t[0]&&(c.mapData=e[12]),!s&&256&t[0]&&(s=!0,c.pickMapMode=e[8],Object(n.c)(()=>s=!1)),i.$set(c)},i(e){if(!l){for(let e=0;e<r.length;e+=1)Object(n.db)(b[e]);Object(n.db)(i.$$.fragment,e),l=!0}},o(e){b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)Object(n.eb)(b[e]);Object(n.eb)(i.$$.fragment,e),l=!1},d(e){e&&Object(n.u)(t),Object(n.t)(b,e),Object(n.s)(i)}}}function re(e){let t,c,o,a,i,s,r,b,O,j,u=e[44].info.displayName+"";function d(...t){return e[36](e[44],...t)}return o=new l.a({}),{c(){t=Object(n.v)("li"),c=Object(n.v)("button"),Object(n.o)(o.$$.fragment),a=Object(n.W)(),i=Object(n.v)("span"),s=Object(n.ab)(u),r=Object(n.W)(),Object(n.h)(c,"class","selection-toolbar pg-button svelte-19yl1er"),Object(n.h)(c,"title","Remove selected"),Object(n.h)(t,"class","selection-legend svelte-19yl1er"),Object(n.V)(t,"color",e[44].color)},m(e,l){Object(n.G)(e,t,l),Object(n.f)(t,c),Object(n.J)(o,c,null),Object(n.f)(t,a),Object(n.f)(t,i),Object(n.f)(i,s),Object(n.f)(t,r),b=!0,O||(j=Object(n.I)(c,"click",d),O=!0)},p(c,o){e=c,(!b||16384&o[0])&&u!==(u=e[44].info.displayName+"")&&Object(n.T)(s,u),(!b||16384&o[0])&&Object(n.V)(t,"color",e[44].color)},i(e){b||(Object(n.db)(o.$$.fragment,e),b=!0)},o(e){Object(n.eb)(o.$$.fragment,e),b=!1},d(e){e&&Object(n.u)(t),Object(n.s)(o),O=!1,j()}}}function be(e){let t,c,o,a,l,r,b,O,j,u,d,h;c=new s.a({props:{className:"options-container",levels:e[2]}});let p=!e[13]&&ne(e);r=new G.a({props:{map:e[3],mapLoading:e[5],legendLoading:e[5],zoom:e[9],summary:{data:e[12],level:e[11],items:e[1]}}});let f={data:e[12],sensor:e[17],level:e[11],signalType:e[18],signalOptions:e[19],selections:e[14],encoding:e[10],wrapperClass:e[0],title:e[20]};O=new i.a({props:f}),e[27](O),O.$on("loading",e[28]),O.$on("ready",e[29]),O.$on("zoom",e[30]),O.$on("updatedEncoding",e[31]),O.$on("select",e[32]);let m=null!=e[4]&&!e[15]&&e[7]&&ie(e),g=(e[15]&&!e[6]||!e[15]&&e[7])&&se(e),v=e[13]&&le(e);return{c(){t=Object(n.v)("main"),Object(n.o)(c.$$.fragment),o=Object(n.W)(),p&&p.c(),a=Object(n.W)(),l=Object(n.v)("div"),Object(n.o)(r.$$.fragment),b=Object(n.W)(),Object(n.o)(O.$$.fragment),j=Object(n.W)(),m&&m.c(),u=Object(n.W)(),g&&g.c(),d=Object(n.W)(),v&&v.c(),Object(n.h)(l,"class","map-container svelte-19yl1er"),Object(n.cb)(l,"mobileHide",!e[6]),Object(n.cb)(l,"pick",e[8]),Object(n.h)(t,"class","root base-font-size svelte-19yl1er"),Object(n.cb)(t,"hiddenPanel",!e[15]&&!e[7]),Object(n.cb)(t,"compare",e[13])},m(e,i){Object(n.G)(e,t,i),Object(n.J)(c,t,null),Object(n.f)(t,o),p&&p.m(t,null),Object(n.f)(t,a),Object(n.f)(t,l),Object(n.J)(r,l,null),Object(n.f)(l,b),Object(n.J)(O,l,null),Object(n.f)(l,j),m&&m.m(l,null),Object(n.f)(t,u),g&&g.m(t,null),Object(n.f)(t,d),v&&v.m(t,null),h=!0},p(e,o){const i={};4&o[0]&&(i.levels=e[2]),c.$set(i),e[13]?p&&(Object(n.C)(),Object(n.eb)(p,1,1,()=>{p=null}),Object(n.l)()):p?(p.p(e,o),8192&o[0]&&Object(n.db)(p,1)):(p=ne(e),p.c(),Object(n.db)(p,1),p.m(t,a));const s={};8&o[0]&&(s.map=e[3]),32&o[0]&&(s.mapLoading=e[5]),32&o[0]&&(s.legendLoading=e[5]),512&o[0]&&(s.zoom=e[9]),6146&o[0]&&(s.summary={data:e[12],level:e[11],items:e[1]}),r.$set(s);const b={};4096&o[0]&&(b.data=e[12]),131072&o[0]&&(b.sensor=e[17]),2048&o[0]&&(b.level=e[11]),262144&o[0]&&(b.signalType=e[18]),524288&o[0]&&(b.signalOptions=e[19]),16384&o[0]&&(b.selections=e[14]),1024&o[0]&&(b.encoding=e[10]),1&o[0]&&(b.wrapperClass=e[0]),1048576&o[0]&&(b.title=e[20]),O.$set(b),null!=e[4]&&!e[15]&&e[7]?m?(m.p(e,o),32912&o[0]&&Object(n.db)(m,1)):(m=ie(e),m.c(),Object(n.db)(m,1),m.m(l,null)):m&&(Object(n.C)(),Object(n.eb)(m,1,1,()=>{m=null}),Object(n.l)()),64&o[0]&&Object(n.cb)(l,"mobileHide",!e[6]),256&o[0]&&Object(n.cb)(l,"pick",e[8]),e[15]&&!e[6]||!e[15]&&e[7]?g?(g.p(e,o),32960&o[0]&&Object(n.db)(g,1)):(g=se(e),g.c(),Object(n.db)(g,1),g.m(t,d)):g&&(Object(n.C)(),Object(n.eb)(g,1,1,()=>{g=null}),Object(n.l)()),e[13]?v?(v.p(e,o),8192&o[0]&&Object(n.db)(v,1)):(v=le(e),v.c(),Object(n.db)(v,1),v.m(t,null)):v&&(Object(n.C)(),Object(n.eb)(v,1,1,()=>{v=null}),Object(n.l)()),32896&o[0]&&Object(n.cb)(t,"hiddenPanel",!e[15]&&!e[7]),8192&o[0]&&Object(n.cb)(t,"compare",e[13])},i(e){h||(Object(n.db)(c.$$.fragment,e),Object(n.db)(p),Object(n.db)(r.$$.fragment,e),Object(n.db)(O.$$.fragment,e),Object(n.db)(m),Object(n.db)(g),Object(n.db)(v),h=!0)},o(e){Object(n.eb)(c.$$.fragment,e),Object(n.eb)(p),Object(n.eb)(r.$$.fragment,e),Object(n.eb)(O.$$.fragment,e),Object(n.eb)(m),Object(n.eb)(g),Object(n.eb)(v),h=!1},d(o){o&&Object(n.u)(t),Object(n.s)(c),p&&p.d(),Object(n.s)(r),e[27](null),Object(n.s)(O),m&&m.d(),g&&g.d(),v&&v.d()}}}function Oe(e,t,c){let a,i,s,l,r,b,O,u,d,h,p,f,m;Object(n.m)(e,o.n,e=>c(39,a=e)),Object(n.m)(e,o.s,e=>c(10,i=e)),Object(n.m)(e,o.k,e=>c(11,s=e)),Object(n.m)(e,o.q,e=>c(40,l=e)),Object(n.m)(e,o.i,e=>c(41,r=e)),Object(n.m)(e,o.g,e=>c(42,b=e)),Object(n.m)(e,o.m,e=>c(43,O=e)),Object(n.m)(e,o.w,e=>c(15,u=e)),Object(n.m)(e,o.o,e=>c(16,d=e)),Object(n.m)(e,o.p,e=>c(17,h=e)),Object(n.m)(e,o.F,e=>c(18,p=e)),Object(n.m)(e,o.E,e=>c(19,f=e)),Object(n.m)(e,o.r,e=>c(20,m=e));let g,{wrapperClass:v}=t,{regionSearchList:y}=t,{levelList:$}=t;function _(){a||g.selectRandom()}function w(e){e&&(e.scale&&o.e.set(e.scale),o.f.set(e.stops),"bubble"===i&&e.custom&&o.d.set(e.custom),"spike"===i&&e.custom&&o.H.set(e.custom))}let x=null,S=!0,k=!0,L=!0,C=!1,T=1;let z,P,R;return e.$$set=e=>{"wrapperClass"in e&&c(0,v=e.wrapperClass),"regionSearchList"in e&&c(1,y=e.regionSearchList),"levelList"in e&&c(2,$=e.levelList)},e.$$.update=()=>{2052&e.$$.dirty[0]&&($.find(e=>e.id===s)||o.k.set($[0].id)),2048&e.$$.dirty[0]|1536&e.$$.dirty[1]&&c(12,z=Object(M.b)(l,s,r,{stderr:null})),2048&e.$$.dirty[1]&&c(13,P=null!=b),4096&e.$$.dirty[1]&&c(14,R=O)},[v,y,$,g,x,S,k,L,C,T,i,s,z,P,R,u,d,h,p,f,m,_,w,e=>{Object(o.C)(e.detail),Object(j.a)("search","select",e.detail?e.detail.id:"")},()=>{Object(j.a)("overview","show-panel",String(!L)),c(7,L=!L)},()=>{Object(j.a)("overview","show-map","true"),c(6,k=!0)},()=>{Object(j.a)("overview","show-map","false"),c(6,k=!1)},function(e){n.j[e?"unshift":"push"](()=>{g=e,c(3,g)})},e=>c(5,S=e.detail),()=>_(),e=>c(9,T=e.detail),e=>w(e.detail),e=>{if(C){const t=Object(F.b)(e.detail.feature.properties.id);Object(o.b)(t),c(8,C=!1)}else Object(o.B)(e.detail.feature,!0),e.detail.feature&&Object(j.a)("map","select",e.detail.feature.id)},()=>c(4,x=null),function(e){x=e,c(4,x)},()=>o.g.set(P?null:[]),e=>Object(o.A)(e.info),function(e){C=e,c(8,C)},e=>Object(o.b)(e.detail)]}class je extends n.b{constructor(e){super(),Object(n.F)(this,e,Oe,be,n.Q,{wrapperClass:0,regionSearchList:1,levelList:2},[-1,-1])}}var ue=je;function de(e){let t,c;return t=new ue({props:{wrapperClass:a.a,regionSearchList:F.d,levelList:o.y}}),{c(){Object(n.o)(t.$$.fragment)},m(e,o){Object(n.J)(t,e,o),c=!0},p:n.K,i(e){c||(Object(n.db)(t.$$.fragment,e),c=!0)},o(e){Object(n.eb)(t.$$.fragment,e),c=!1},d(e){Object(n.s)(t,e)}}}class he extends n.b{constructor(e){super(),Object(n.F)(this,e,null,de,n.Q,{})}}t.default=he},451:function(e,t,c){"use strict";c.d(t,"b",(function(){return j})),c.d(t,"a",(function(){return u})),c.d(t,"c",(function(){return h}));var n=c(71),o=c(346),a=c.n(o),i=c(61),s=c(450),l=c(452),r=c(6);const b={min:0,max:100,mean:50,std:10};function O(e,t){if(!e||!e.has(t))return b;const c=e.get(t);return[c.max,c.std,c.mean].some(e=>null==e||Number.isNaN(e))?(console.warn("invalid stats detected for",t),b):c}function j(e,t,c,n,o=!1){let a=t.key;if("count"===t.getType(n)){a+="_".concat(c),t.isCasesOrDeath&&(a+="_".concat(Object(r.i)(t,n)));const i=O(e,a);return o?[0,i.max]:[Math.max(.14,i.mean-3*i.std),i.mean+3*i.std]}t.isCasesOrDeath&&(a+="_".concat(Object(r.i)(t,n)));const i=O(e,a);return o?[0,i.max]:[Math.max(0,i.mean-3*i.std),i.mean+3*i.std]}function u(e,t,c,o){return"value"===t?function(e,t,c){if("count"===c)return function(e,t){const c=Object(n.c)(t.colorScale).domain(e),o=a()(Math.log10(e[0]),Math.log10(e[1]),7),i=o.map(e=>c(e).toString());return{stops:Object(s.g)(o,i),scale:c}}(e,t);if("prop"===c)return function(e,t){const c=Math.max(e[0],0),o=Math.max(c+.01,e[1]),a=c+(o-c)/2,i=c+(a-c)/2,l=a+(o-a)/2,r=Object(n.b)(t.colorScale).domain(e),b=[c,i,a,l,o],O=b.map(e=>r(e).toString());return{stops:Object(s.g)(b,O),scale:r}}(e,t);return function(e,t){const c=e[0]+(e[1]-e[0])/2,o=e[0]+(c-e[0])/2,a=c+(e[1]-c)/2,i=Object(n.b)(t.colorScale).domain(e),l=[e[0],o,c,a,e[1]],r=l.map(e=>i(e).toString());return{stops:Object(s.g)(l,r),scale:i}}(e,t)}(e,c,o):function(){const e=[[l.a,i.e],[-1,i.a.decreasing],[0,i.a.steady],[1,i.a.increasing]],t=[[l.a,i.e],[-1,i.a.gradientMinMega],[0,i.a.gradientMiddleMega],[1,i.a.gradientMaxMega]];return{stops:e,stopsMega:t}}()}function d(e,t,c){const n=[e],o=(t-e)/c;for(let e=1;e<c;e++)n.push(n[e-1]+o);return n.push(t),n}function h(e,t,c,n,o,s=!1){const l=e?j(e,t,c,o):null;if(!l)return{labels:[],high:"",valueMinMax:[0,0]};const r=function(e,t,c,n){const o=n?5:7;if("count"===e.getType(t)){const e=Math.log10(Math.max(.01,c[0])),t=Math.log10(Math.max(.1,c[1]));return a()(e,t,o)}return"raw"===e.format?(c[0]=Math.max(0,c[0]),d(c[0],c[1],o)):(c[0]=Math.max(0,c[0]),c[1]=Math.min(100,c[1]),d(c[0],c[1],o))}(t,o,l,s);return{low:t.formatValue(0),lowValue:0,lowColor:i.f,labels:r.slice(0,-1).map((e,c)=>({label:t.formatValue(e),value:e,color:n(e),nextColor:n(r[c+1])})),high:"".concat(t.formatValue(l[1]),"+"),highValue:l[1],highColor:n(l[1]),valueMinMax:l}}},452:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return a}));var n=c(61);const o=-100;function a(e){return["case",["==",["to-number",["feature-state","value"],o],o],n.e,["==",["to-number",["feature-state","value"],o],0],n.f,["interpolate",["linear"],["to-number",["feature-state","value"],0],...e.flat()]]}},453:function(e,t,c){"use strict";var n=c(1),o=c(3),a=c(458),i=c(211),s=c(83),l=c(161),r=c(337),b=c(338),O=c(339);c(340);function j(e,t,c){const n=e.slice();return n[22]=t[c],n}function u(e,t,c){const n=e.slice();return n[28]=t[c],n}function d(e,t,c){const n=e.slice();return n[25]=t[c],n}function h(e){let t,c,o,a,i,s=e[28].name+"";return{c(){t=Object(n.v)("option"),c=Object(n.ab)(s),o=Object(n.W)(),Object(n.h)(t,"title",a="function"==typeof e[28].tooltipText?e[28].tooltipText():e[28].tooltipText),t.__value=i=e[28].key,t.value=t.__value},m(e,a){Object(n.G)(e,t,a),Object(n.f)(t,c),Object(n.f)(t,o)},p(e,o){128&o[0]&&s!==(s=e[28].name+"")&&Object(n.T)(c,s),128&o[0]&&a!==(a="function"==typeof e[28].tooltipText?e[28].tooltipText():e[28].tooltipText)&&Object(n.h)(t,"title",a),128&o[0]&&i!==(i=e[28].key)&&(t.__value=i,t.value=t.__value)},d(e){e&&Object(n.u)(t)}}}function p(e){let t,c,o=e[25].sensors,a=[];for(let t=0;t<o.length;t+=1)a[t]=h(u(e,o,t));return{c(){t=Object(n.v)("optgroup");for(let e=0;e<a.length;e+=1)a[e].c();Object(n.h)(t,"label",c=e[25].label)},m(e,c){Object(n.G)(e,t,c);for(let e=0;e<a.length;e+=1)a[e].m(t,null)},p(e,i){if(128&i[0]){let c;for(o=e[25].sensors,c=0;c<o.length;c+=1){const n=u(e,o,c);a[c]?a[c].p(n,i):(a[c]=h(n),a[c].c(),a[c].m(t,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}128&i[0]&&c!==(c=e[25].label)&&Object(n.h)(t,"label",c)},d(e){e&&Object(n.u)(t),Object(n.t)(a,e)}}}function f(e){let t,c,o,a,i=e[22].labelPlural+"";return{c(){t=Object(n.v)("option"),c=Object(n.ab)(i),t.__value=o=e[22].id,t.value=t.__value,t.disabled=a=!e[9].levels.includes(e[22].id)},m(e,o){Object(n.G)(e,t,o),Object(n.f)(t,c)},p(e,s){1&s[0]&&i!==(i=e[22].labelPlural+"")&&Object(n.T)(c,i),1&s[0]&&o!==(o=e[22].id)&&(t.__value=o,t.value=t.__value),513&s[0]&&a!==(a=!e[9].levels.includes(e[22].id))&&(t.disabled=a)},d(e){e&&Object(n.u)(t)}}}function m(e){let t,c,o,a,i,s,l,j,u,d,h,p,f,m,y,$,_,w,x,S,k,L;const M=[v,g],C=[];function T(e,t){return null!=e[4]&&0!==e[5].length?0:1}return a=T(e),i=C[a]=M[a](e),u=new b.a({}),f=new r.a({}),w=new O.a({}),{c(){t=Object(n.v)("div"),c=Object(n.v)("span"),c.textContent="on",o=Object(n.W)(),i.c(),s=Object(n.W)(),l=Object(n.v)("div"),j=Object(n.v)("button"),Object(n.o)(u.$$.fragment),h=Object(n.W)(),p=Object(n.v)("button"),Object(n.o)(f.$$.fragment),$=Object(n.W)(),_=Object(n.v)("button"),Object(n.o)(w.$$.fragment),Object(n.h)(c,"class","option-title svelte-1jjcvfp"),Object(n.h)(j,"class","pg-button"),j.disabled=d=null==e[4]||0===e[5].length||e[4]<=e[5][0],Object(n.h)(j,"title","Go to the previous day"),Object(n.h)(p,"class","pg-button"),p.disabled=m=null==e[4]||0===e[5].length||e[4].valueOf()===e[5][1].valueOf(),Object(n.h)(p,"title",y="Go to the latest date for which '"+e[9].name+"' is available"),Object(n.h)(_,"class","pg-button"),_.disabled=x=null==e[4]||0===e[5].length||e[4]>=e[5][1],Object(n.h)(_,"title","Go to the next day"),Object(n.h)(l,"class","shortcuts pg-button-group svelte-1jjcvfp"),Object(n.h)(t,"class","option-wrapper svelte-1jjcvfp")},m(i,r){Object(n.G)(i,t,r),Object(n.f)(t,c),Object(n.f)(t,o),C[a].m(t,null),Object(n.f)(t,s),Object(n.f)(t,l),Object(n.f)(l,j),Object(n.J)(u,j,null),Object(n.f)(l,h),Object(n.f)(l,p),Object(n.J)(f,p,null),Object(n.f)(l,$),Object(n.f)(l,_),Object(n.J)(w,_,null),S=!0,k||(L=[Object(n.I)(j,"click",e[15]),Object(n.I)(p,"click",e[16]),Object(n.I)(_,"click",e[17])],k=!0)},p(e,c){let o=a;a=T(e),a===o?C[a].p(e,c):(Object(n.C)(),Object(n.eb)(C[o],1,1,()=>{C[o]=null}),Object(n.l)(),i=C[a],i||(i=C[a]=M[a](e),i.c()),Object(n.db)(i,1),i.m(t,s)),(!S||48&c[0]&&d!==(d=null==e[4]||0===e[5].length||e[4]<=e[5][0]))&&(j.disabled=d),(!S||48&c[0]&&m!==(m=null==e[4]||0===e[5].length||e[4].valueOf()===e[5][1].valueOf()))&&(p.disabled=m),(!S||512&c[0]&&y!==(y="Go to the latest date for which '"+e[9].name+"' is available"))&&Object(n.h)(p,"title",y),(!S||48&c[0]&&x!==(x=null==e[4]||0===e[5].length||e[4]>=e[5][1]))&&(_.disabled=x)},i(e){S||(Object(n.db)(i),Object(n.db)(u.$$.fragment,e),Object(n.db)(f.$$.fragment,e),Object(n.db)(w.$$.fragment,e),S=!0)},o(e){Object(n.eb)(i),Object(n.eb)(u.$$.fragment,e),Object(n.eb)(f.$$.fragment,e),Object(n.eb)(w.$$.fragment,e),S=!1},d(e){e&&Object(n.u)(t),C[a].d(),Object(n.s)(u),Object(n.s)(f),Object(n.s)(w),k=!1,Object(n.P)(L)}}}function g(e){let t,c,o,a,i=e[3](e[4])+"";return{c(){t=Object(n.v)("button"),c=Object(n.ab)(i),Object(n.h)(t,"aria-label","selected date"),Object(n.h)(t,"class","calendar base-font-size svelte-1jjcvfp")},m(i,s){Object(n.G)(i,t,s),Object(n.f)(t,c),o||(a=Object(n.I)(t,"",e[11]),o=!0)},p(e,t){24&t[0]&&i!==(i=e[3](e[4])+"")&&Object(n.T)(c,i)},i:n.K,o:n.K,d(e){e&&Object(n.u)(t),o=!1,a()}}}function v(e){let t,c,o;function i(t){e[14].call(null,t)}let s={start:e[5][0],end:e[5][1],formattedSelected:e[3](e[4]),$$slots:{default:[y]},$$scope:{ctx:e}};return void 0!==e[4]&&(s.selected=e[4]),t=new a.a({props:s}),n.j.push(()=>Object(n.i)(t,"selected",i)),{c(){Object(n.o)(t.$$.fragment)},m(e,c){Object(n.J)(t,e,c),o=!0},p(e,o){const a={};32&o[0]&&(a.start=e[5][0]),32&o[0]&&(a.end=e[5][1]),24&o[0]&&(a.formattedSelected=e[3](e[4])),24&o[0]|1&o[1]&&(a.$$scope={dirty:o,ctx:e}),!c&&16&o[0]&&(c=!0,a.selected=e[4],Object(n.c)(()=>c=!1)),t.$set(a)},i(e){o||(Object(n.db)(t.$$.fragment,e),o=!0)},o(e){Object(n.eb)(t.$$.fragment,e),o=!1},d(e){Object(n.s)(t,e)}}}function y(e){let t,c,o,a,i=e[3](e[4])+"";return{c(){t=Object(n.v)("button"),c=Object(n.ab)(i),Object(n.h)(t,"aria-label","selected date"),Object(n.h)(t,"class","calendar base-font-size svelte-1jjcvfp")},m(i,s){Object(n.G)(i,t,s),Object(n.f)(t,c),o||(a=Object(n.I)(t,"",e[10]),o=!0)},p(e,t){24&t[0]&&i!==(i=e[3](e[4])+"")&&Object(n.T)(c,i)},d(e){e&&Object(n.u)(t),o=!1,a()}}}function $(e){let t,c,o,a,i,s,l,r,b,O,u,h,g,v,y,$=e[7],_=[];for(let t=0;t<$.length;t+=1)_[t]=p(d(e,$,t));let w=e[0],x=[];for(let t=0;t<w.length;t+=1)x[t]=f(j(e,w,t));let S=e[2]&&m(e);return{c(){t=Object(n.v)("div"),c=Object(n.v)("div"),o=Object(n.v)("span"),o.textContent="Displaying",a=Object(n.W)(),i=Object(n.v)("select");for(let e=0;e<_.length;e+=1)_[e].c();s=Object(n.W)(),l=Object(n.v)("div"),r=Object(n.v)("span"),r.textContent="for",b=Object(n.W)(),O=Object(n.v)("select");for(let e=0;e<x.length;e+=1)x[e].c();u=Object(n.W)(),S&&S.c(),Object(n.h)(o,"class","option-title svelte-1jjcvfp"),Object(n.h)(i,"id","option-indicator"),Object(n.h)(i,"aria-label","indicator options"),Object(n.h)(i,"class","indicators base-font-size svelte-1jjcvfp"),void 0===e[6]&&Object(n.d)(()=>e[12].call(i)),Object(n.h)(c,"class","option-wrapper svelte-1jjcvfp"),Object(n.h)(r,"class","option-title svelte-1jjcvfp"),Object(n.h)(O,"id","option-geo-level"),Object(n.h)(O,"aria-label","geographic level"),Object(n.h)(O,"class","geo-level base-font-size svelte-1jjcvfp"),void 0===e[8]&&Object(n.d)(()=>e[13].call(O)),Object(n.h)(l,"class","option-wrapper svelte-1jjcvfp"),Object(n.h)(t,"class",h="options base-font-size container-bg container-style "+e[1]+" svelte-1jjcvfp")},m(j,d){Object(n.G)(j,t,d),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(c,a),Object(n.f)(c,i);for(let e=0;e<_.length;e+=1)_[e].m(i,null);Object(n.R)(i,e[6]),Object(n.f)(t,s),Object(n.f)(t,l),Object(n.f)(l,r),Object(n.f)(l,b),Object(n.f)(l,O);for(let e=0;e<x.length;e+=1)x[e].m(O,null);Object(n.R)(O,e[8]),Object(n.f)(t,u),S&&S.m(t,null),g=!0,v||(y=[Object(n.I)(i,"change",e[12]),Object(n.I)(O,"change",e[13])],v=!0)},p(e,c){if(128&c[0]){let t;for($=e[7],t=0;t<$.length;t+=1){const n=d(e,$,t);_[t]?_[t].p(n,c):(_[t]=p(n),_[t].c(),_[t].m(i,null))}for(;t<_.length;t+=1)_[t].d(1);_.length=$.length}if(192&c[0]&&Object(n.R)(i,e[6]),513&c[0]){let t;for(w=e[0],t=0;t<w.length;t+=1){const n=j(e,w,t);x[t]?x[t].p(n,c):(x[t]=f(n),x[t].c(),x[t].m(O,null))}for(;t<x.length;t+=1)x[t].d(1);x.length=w.length}257&c[0]&&Object(n.R)(O,e[8]),e[2]?S?(S.p(e,c),4&c[0]&&Object(n.db)(S,1)):(S=m(e),S.c(),Object(n.db)(S,1),S.m(t,null)):S&&(Object(n.C)(),Object(n.eb)(S,1,1,()=>{S=null}),Object(n.l)()),(!g||2&c[0]&&h!==(h="options base-font-size container-bg container-style "+e[1]+" svelte-1jjcvfp"))&&Object(n.h)(t,"class",h)},i(e){g||(Object(n.db)(S),g=!0)},o(e){Object(n.eb)(S),g=!1},d(e){e&&Object(n.u)(t),Object(n.t)(_,e),Object(n.t)(x,e),S&&S.d(),v=!1,Object(n.P)(y)}}}function _(e,t,c){let a,r,b,O,j,u;Object(n.m)(e,o.w,e=>c(18,a=e)),Object(n.m)(e,o.h,e=>c(19,r=e)),Object(n.m)(e,o.J,e=>c(20,b=e)),Object(n.m)(e,o.p,e=>c(6,O=e)),Object(n.m)(e,o.k,e=>c(8,j=e)),Object(n.m)(e,o.q,e=>c(9,u=e));let{levels:d=o.y}=t,{className:h=""}=t,{showDate:p=!0}=t;let f,m,g,v,y;return e.$$set=e=>{"levels"in e&&c(0,d=e.levels),"className"in e&&c(1,h=e.className),"showDate"in e&&c(2,p=e.showDate)},e.$$.update=()=>{if(262144&e.$$.dirty[0]&&c(3,f=a?Object(i.a)("%x"):Object(i.a)("%B %-d, %Y")),524288&e.$$.dirty[0]&&c(4,m=Object(l.f)(r)),1048640&e.$$.dirty[0]&&null!==b){const e=b.get(O);c(5,g=e?e.map(l.f):[])}16&e.$$.dirty[0]&&void 0!==m&&o.h.set(Object(l.d)(m)),1&e.$$.dirty[0]&&c(21,v=new Set(d.map(e=>e.id))),2097152&e.$$.dirty[0]&&c(7,y=o.t.map(e=>({label:e.label,sensors:e.sensors.filter(e=>e.levels.some(e=>v.has(e)))})).filter(e=>e.sensors.length>0))},c(5,g=[]),[d,h,p,f,m,g,O,y,j,u,function(t){Object(n.k)(e,t)},function(t){Object(n.k)(e,t)},function(){O=Object(n.S)(this),o.p.set(O),c(7,y),c(21,v),c(0,d)},function(){j=Object(n.S)(this),o.k.set(j),c(0,d)},function(e){m=e,c(4,m),c(19,r)},()=>c(4,m=s.a.offset(m,-1)),()=>c(4,m=g[1]),()=>c(4,m=s.a.offset(m,1))]}class w extends n.b{constructor(e){super(),Object(n.F)(this,e,_,$,n.Q,{levels:0,className:1,showDate:2},[-1,-1])}}t.a=w},457:function(e,t,c){"use strict";var n=c(1),o=c(3);c(348);function a(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function i(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?a(Object(c),!0).forEach((function(t){s(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):a(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function s(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function l(e){let t,c,o,a,i,s,l,r,b,O,j,u,d,h,p,f,m,g,v,y,$;return{c(){t=Object(n.v)("div"),c=Object(n.v)("div"),o=Object(n.v)("button"),a=Object(n.ab)("New"),s=Object(n.W)(),l=Object(n.v)("button"),r=Object(n.ab)("Cumulative"),O=Object(n.W)(),j=Object(n.v)("div"),u=Object(n.v)("button"),d=Object(n.ab)("Counts"),p=Object(n.W)(),f=Object(n.v)("button"),m=Object(n.ab)("Ratios (per 100,000)"),Object(n.h)(o,"aria-pressed",i=String(!e[3].cumulative)),Object(n.h)(o,"class","pg-button button svelte-9gh462"),Object(n.cb)(o,"selected",!e[3].cumulative),Object(n.h)(l,"aria-pressed",b=e[3].cumulative),Object(n.h)(l,"class","pg-button button svelte-9gh462"),Object(n.cb)(l,"selected",e[3].cumulative),Object(n.h)(c,"aria-label","display cumulative or new incidents"),Object(n.h)(c,"class","pg-button-group button-group svelte-9gh462"),Object(n.h)(u,"aria-pressed",h=String(!e[3].ratio)),Object(n.h)(u,"class","pg-button button svelte-9gh462"),Object(n.cb)(u,"selected",!e[3].ratio),Object(n.h)(f,"aria-pressed",g=String(e[3].ratio)),Object(n.h)(f,"class","pg-button button svelte-9gh462"),Object(n.cb)(f,"selected",e[3].ratio),Object(n.h)(j,"aria-label","display counts or ratios per 100,000 people"),Object(n.h)(j,"class","pg-button-group button-group svelte-9gh462"),Object(n.h)(t,"class",v="root "+e[2]+" svelte-9gh462"),Object(n.cb)(t,"center",e[0])},m(i,b){Object(n.G)(i,t,b),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(o,a),Object(n.f)(c,s),Object(n.f)(c,l),Object(n.f)(l,r),Object(n.f)(t,O),Object(n.f)(t,j),Object(n.f)(j,u),Object(n.f)(u,d),Object(n.f)(j,p),Object(n.f)(j,f),Object(n.f)(f,m),y||($=[Object(n.I)(o,"click",e[4]),Object(n.I)(l,"click",e[5]),Object(n.I)(u,"click",e[6]),Object(n.I)(f,"click",e[7])],y=!0)},p(e,c){8&c&&i!==(i=String(!e[3].cumulative))&&Object(n.h)(o,"aria-pressed",i),8&c&&Object(n.cb)(o,"selected",!e[3].cumulative),8&c&&b!==(b=e[3].cumulative)&&Object(n.h)(l,"aria-pressed",b),8&c&&Object(n.cb)(l,"selected",e[3].cumulative),8&c&&h!==(h=String(!e[3].ratio))&&Object(n.h)(u,"aria-pressed",h),8&c&&Object(n.cb)(u,"selected",!e[3].ratio),8&c&&g!==(g=String(e[3].ratio))&&Object(n.h)(f,"aria-pressed",g),8&c&&Object(n.cb)(f,"selected",e[3].ratio),4&c&&v!==(v="root "+e[2]+" svelte-9gh462")&&Object(n.h)(t,"class",v),5&c&&Object(n.cb)(t,"center",e[0])},d(e){e&&Object(n.u)(t),y=!1,Object(n.P)($)}}}function r(e){let t,c=e[1].isCasesOrDeath&&l(e);return{c(){c&&c.c(),t=Object(n.w)()},m(e,o){c&&c.m(e,o),Object(n.G)(e,t,o)},p(e,[n]){e[1].isCasesOrDeath?c?c.p(e,n):(c=l(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null)},i:n.K,o:n.K,d(e){c&&c.d(e),e&&Object(n.u)(t)}}}function b(e,t,c){let a,s;Object(n.m)(e,o.q,e=>c(8,a=e)),Object(n.m)(e,o.E,e=>c(3,s=e));let{center:l=!1}=t,{sensor:r=a}=t,{className:b=""}=t;return e.$$set=e=>{"center"in e&&c(0,l=e.center),"sensor"in e&&c(1,r=e.sensor),"className"in e&&c(2,b=e.className)},[l,r,b,s,()=>{s.cumulative&&o.E.set(i(i({},s),{},{cumulative:!1}))},()=>{s.cumulative||o.E.set(i(i({},s),{},{cumulative:!0}))},()=>{s.ratio&&o.E.set(i(i({},s),{},{ratio:!1}))},()=>{s.ratio||o.E.set(i(i({},s),{},{ratio:!0}))}]}class O extends n.b{constructor(e){super(),Object(n.F)(this,e,b,r,n.Q,{center:0,sensor:1,className:2})}}t.a=O},460:function(e){e.exports=JSON.parse('{"version":8,"name":"Albers USA","metadata":{"mapbox:autocomposite":true,"mapbox:type":"template","mapbox:sdk-support":{"js":"1.6.0","android":"8.6.0","ios":"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},"center":[-1.9392753230472408,-1.4351091963094262],"zoom":4.035119632783768,"bearing":0,"pitch":0,"glyphs":"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf","sources":{},"layers":[]}')},461:function(e,t,c){"use strict";var n=c(1),o=c(160),a=c(3),i=c(451),s=c(6);c(347);function l(e){let t,c,o;return{c(){t=Object(n.v)("div"),Object(n.h)(t,"class","map-wrapper svelte-54x2e1")},m(a,i){Object(n.G)(a,t,i),e[14](t),c||(o=Object(n.I)(window,"resize",e[1]),c=!0)},p:n.K,i:n.K,o:n.K,d(a){a&&Object(n.u)(t),e[14](null),c=!1,o()}}}function r(e,t,c){let l;Object(n.m)(e,a.I,e=>c(17,l=e));let{wrapperClass:r}=t,b=null;const O=Object(o.b)(),j=new r((e,t)=>O(e,t)),u=j.zoom;let{data:d=Promise.resolve([])}=t,{sensor:h=""}=t,{level:p="state"}=t,{encoding:f="color"}=t,{signalType:m="value"}=t,{signalOptions:g={}}=t,{animationDuration:v=0}=t,{title:y=""}=t,{selections:$=[]}=t,_=!1;return Object(o.d)(()=>{c(15,j.animationDuration=v,j),j.initMap(b,y).then(()=>{c(16,_=!0)})}),Object(o.c)(()=>{j.destroy()}),e.$$set=e=>{"wrapperClass"in e&&c(2,r=e.wrapperClass),"data"in e&&c(5,d=e.data),"sensor"in e&&c(6,h=e.sensor),"level"in e&&c(7,p=e.level),"encoding"in e&&c(8,f=e.encoding),"signalType"in e&&c(9,m=e.signalType),"signalOptions"in e&&c(10,g=e.signalOptions),"animationDuration"in e&&c(11,v=e.animationDuration),"title"in e&&c(12,y=e.title),"selections"in e&&c(13,$=e.selections)},e.$$.update=()=>{34016&e.$$.dirty&&j.updateSources(p,d,Object(s.i)(s.l.get(h),g)),198592&e.$$.dirty&&l&&function(e,t,c,n,o,a){const l=s.l.get(c),r=l.getType(a),b=Object(i.b)(o,l,e,a),{stops:u,scale:d}=Object(i.a)(b,n,l,r),h="county"===e,p=j.updateOptions(t,e,n,c,r,b,u,h&&u,d);O("updatedEncoding",{range:"value"===n?b:[-1,1],custom:p,scale:d,stops:u})}(p,f,h,m,l,g),106496&e.$$.dirty&&j.selectMulti($),36864&e.$$.dirty&&j.setTitle(y)},[b,function(){j.zoom.resized()},r,u,function(){j.selectRandom()},d,h,p,f,m,g,v,y,$,function(e){n.j[e?"unshift":"push"](()=>{b=e,c(0,b)})}]}class b extends n.b{constructor(e){super(),Object(n.F)(this,e,r,l,n.Q,{wrapperClass:2,zoom:3,selectRandom:4,data:5,sensor:6,level:7,encoding:8,signalType:9,signalOptions:10,animationDuration:11,title:12,selections:13})}get zoom(){return this.$$.ctx[3]}get selectRandom(){return this.$$.ctx[4]}}t.a=b},462:function(e,t,c){"use strict";c.d(t,"a",(function(){return ie}));c(336);var n=c(86),o=c(6),a=c(61),i=c(343),s=c.n(i),l=c(334),r=c(452);function b(e){return"".concat(e,"-border")}function O(e){return"".concat(e,"-centers")}const j="city-point";function u(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function d(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?u(Object(c),!0).forEach((function(t){h(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):u(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function h(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function p(e){return"".concat(e,"-fill")}function f(e){return"".concat(e,"-hover")}function m(e){return"".concat(e,"-bubble")}function g(e){return"".concat(e,"-spike")}const v="state-stroke",y="state-names",$={pit:"city-point-unclustered-pit",1:"city-point-unclustered-1",2:"city-point-unclustered-2",3:"city-point-unclustered-3",4:"city-point-unclustered-4",5:"city-point-unclustered-5"};var _=c(1),w=c(211),x=c(3),S=c(450);c(345);function k(e){let t,c,n,o,a,i,s,l,r,b,O,j=e[1].displayName+"",u=("number"==typeof e[1].population?e[1].population.toLocaleString():"Unknown")+"";function d(e,t){return e[4]?z:e[5].isCasesOrDeath?T:C}let h=d(e),p=h(e);return{c(){t=Object(_.v)("h5"),c=Object(_.ab)(j),n=Object(_.W)(),o=Object(_.v)("table"),a=Object(_.v)("tbody"),i=Object(_.v)("tr"),s=Object(_.v)("th"),s.textContent="Population",l=Object(_.W)(),r=Object(_.v)("td"),b=Object(_.ab)(u),O=Object(_.W)(),p.c(),Object(_.h)(t,"class","svelte-1u8gn73"),Object(_.h)(s,"class","svelte-1u8gn73"),Object(_.h)(r,"class","right svelte-1u8gn73"),Object(_.h)(o,"class","svelte-1u8gn73")},m(e,j){Object(_.G)(e,t,j),Object(_.f)(t,c),Object(_.G)(e,n,j),Object(_.G)(e,o,j),Object(_.f)(o,a),Object(_.f)(a,i),Object(_.f)(i,s),Object(_.f)(i,l),Object(_.f)(i,r),Object(_.f)(r,b),Object(_.f)(a,O),p.m(a,null)},p(e,t){2&t&&j!==(j=e[1].displayName+"")&&Object(_.T)(c,j),2&t&&u!==(u=("number"==typeof e[1].population?e[1].population.toLocaleString():"Unknown")+"")&&Object(_.T)(b,u),h===(h=d(e))&&p?p.p(e,t):(p.d(1),p=h(e),p&&(p.c(),p.m(a,null)))},d(e){e&&Object(_.u)(t),e&&Object(_.u)(n),e&&Object(_.u)(o),p.d()}}}function L(e){let t,c,n,o=e[1].displayName+"";return{c(){t=Object(_.v)("h5"),c=Object(_.ab)("Estimate unavailable for rest of "),n=Object(_.ab)(o),Object(_.h)(t,"class","svelte-1u8gn73")},m(e,o){Object(_.G)(e,t,o),Object(_.f)(t,c),Object(_.f)(t,n)},p(e,t){2&t&&o!==(o=e[1].displayName+"")&&Object(_.T)(n,o)},d(e){e&&Object(_.u)(t)}}}function M(e){let t;return{c(){t=Object(_.v)("h5"),t.textContent="Estimate unavailable",Object(_.h)(t,"class","svelte-1u8gn73")},m(e,c){Object(_.G)(e,t,c)},p:_.K,d(e){e&&Object(_.u)(t)}}}function C(e){let t,c,n,o,a,i,s,l=e[5].yAxis+"",r=e[5].formatValue(e[2])+"";return{c(){t=Object(_.v)("tr"),c=Object(_.v)("th"),n=Object(_.ab)(l),o=Object(_.W)(),a=Object(_.v)("td"),i=Object(_.ab)(r),Object(_.h)(c,"class","svelte-1u8gn73"),Object(_.h)(a,"class","right svelte-1u8gn73"),Object(_.h)(a,"style",s=e[8](e[2]))},m(e,s){Object(_.G)(e,t,s),Object(_.f)(t,c),Object(_.f)(c,n),Object(_.f)(t,o),Object(_.f)(t,a),Object(_.f)(a,i)},p(e,t){32&t&&l!==(l=e[5].yAxis+"")&&Object(_.T)(n,l),36&t&&r!==(r=e[5].formatValue(e[2])+"")&&Object(_.T)(i,r),4&t&&s!==(s=e[8](e[2]))&&Object(_.h)(a,"style",s)},d(e){e&&Object(_.u)(t)}}}function T(e){let t,c,n,o,a,i,s,l,r,b,O,j,u,d,h,p,f,m,g,v,y,$,w,x,S,k,L,M,C,T,z,P,R,V,D,A,W,E,I,G,N,F,B,Z=e[5].yAxis+"",H=e[7](e[6])+"",J=e[5].formatValue(e[1].count)+"",U=e[5].formatValue(e[1].countRatio)+"",K=e[5].formatValue(e[1].avg)+"",Q=e[5].formatValue(e[1].avgRatio)+"",Y=e[7](e[6])+"",q=e[5].formatValue(e[1].countCumulative)+"",X=e[5].formatValue(e[1].countRatioCumulative)+"";return{c(){t=Object(_.v)("tr"),c=Object(_.v)("th"),n=Object(_.ab)(Z),o=Object(_.W)(),a=Object(_.v)("th"),a.textContent="Count",i=Object(_.W)(),s=Object(_.v)("th"),s.textContent="Ratios (per 100,000)",l=Object(_.W)(),r=Object(_.v)("tr"),b=Object(_.v)("th"),O=Object(_.ab)(H),j=Object(_.W)(),u=Object(_.v)("td"),d=Object(_.ab)(J),p=Object(_.W)(),f=Object(_.v)("td"),m=Object(_.ab)(U),v=Object(_.W)(),y=Object(_.v)("tr"),$=Object(_.v)("th"),$.textContent="7-day avg",w=Object(_.W)(),x=Object(_.v)("td"),S=Object(_.ab)(K),L=Object(_.W)(),M=Object(_.v)("td"),C=Object(_.ab)(Q),z=Object(_.W)(),P=Object(_.v)("tr"),R=Object(_.v)("th"),V=Object(_.ab)("Cumulative "),D=Object(_.ab)(Y),A=Object(_.W)(),W=Object(_.v)("td"),E=Object(_.ab)(q),G=Object(_.W)(),N=Object(_.v)("td"),F=Object(_.ab)(X),Object(_.h)(c,"class","svelte-1u8gn73"),Object(_.h)(a,"class","area svelte-1u8gn73"),Object(_.h)(s,"class","area svelte-1u8gn73"),Object(_.h)(b,"class","svelte-1u8gn73"),Object(_.h)(u,"class","right svelte-1u8gn73"),Object(_.h)(u,"style",h=e[3].cumulative||e[3].ratio?"":e[8](e[1].count)),Object(_.h)(f,"class","right svelte-1u8gn73"),Object(_.h)(f,"style",g=!e[3].cumulative&&e[3].ratio?e[8](e[1].countRatio):""),Object(_.h)($,"class","svelte-1u8gn73"),Object(_.h)(x,"class","right svelte-1u8gn73"),Object(_.h)(x,"style",k=e[3].cumulative||e[3].ratio?"":e[8](e[1].avg)),Object(_.h)(M,"class","right svelte-1u8gn73"),Object(_.h)(M,"style",T=!e[3].cumulative&&e[3].ratio?e[8](e[1].avgRatio):""),Object(_.h)(R,"class","svelte-1u8gn73"),Object(_.h)(W,"class","right svelte-1u8gn73"),Object(_.h)(W,"style",I=e[3].cumulative&&!e[3].ratio?e[8](e[1].countCumulative):""),Object(_.h)(N,"class","right svelte-1u8gn73"),Object(_.h)(N,"style",B=e[3].cumulative&&e[3].ratio?e[8](e[1].countRatioCumulative):"")},m(e,h){Object(_.G)(e,t,h),Object(_.f)(t,c),Object(_.f)(c,n),Object(_.f)(t,o),Object(_.f)(t,a),Object(_.f)(t,i),Object(_.f)(t,s),Object(_.G)(e,l,h),Object(_.G)(e,r,h),Object(_.f)(r,b),Object(_.f)(b,O),Object(_.f)(r,j),Object(_.f)(r,u),Object(_.f)(u,d),Object(_.f)(r,p),Object(_.f)(r,f),Object(_.f)(f,m),Object(_.G)(e,v,h),Object(_.G)(e,y,h),Object(_.f)(y,$),Object(_.f)(y,w),Object(_.f)(y,x),Object(_.f)(x,S),Object(_.f)(y,L),Object(_.f)(y,M),Object(_.f)(M,C),Object(_.G)(e,z,h),Object(_.G)(e,P,h),Object(_.f)(P,R),Object(_.f)(R,V),Object(_.f)(R,D),Object(_.f)(P,A),Object(_.f)(P,W),Object(_.f)(W,E),Object(_.f)(P,G),Object(_.f)(P,N),Object(_.f)(N,F)},p(e,t){32&t&&Z!==(Z=e[5].yAxis+"")&&Object(_.T)(n,Z),64&t&&H!==(H=e[7](e[6])+"")&&Object(_.T)(O,H),34&t&&J!==(J=e[5].formatValue(e[1].count)+"")&&Object(_.T)(d,J),10&t&&h!==(h=e[3].cumulative||e[3].ratio?"":e[8](e[1].count))&&Object(_.h)(u,"style",h),34&t&&U!==(U=e[5].formatValue(e[1].countRatio)+"")&&Object(_.T)(m,U),10&t&&g!==(g=!e[3].cumulative&&e[3].ratio?e[8](e[1].countRatio):"")&&Object(_.h)(f,"style",g),34&t&&K!==(K=e[5].formatValue(e[1].avg)+"")&&Object(_.T)(S,K),10&t&&k!==(k=e[3].cumulative||e[3].ratio?"":e[8](e[1].avg))&&Object(_.h)(x,"style",k),34&t&&Q!==(Q=e[5].formatValue(e[1].avgRatio)+"")&&Object(_.T)(C,Q),10&t&&T!==(T=!e[3].cumulative&&e[3].ratio?e[8](e[1].avgRatio):"")&&Object(_.h)(M,"style",T),64&t&&Y!==(Y=e[7](e[6])+"")&&Object(_.T)(D,Y),34&t&&q!==(q=e[5].formatValue(e[1].countCumulative)+"")&&Object(_.T)(E,q),10&t&&I!==(I=e[3].cumulative&&!e[3].ratio?e[8](e[1].countCumulative):"")&&Object(_.h)(W,"style",I),34&t&&X!==(X=e[5].formatValue(e[1].countRatioCumulative)+"")&&Object(_.T)(F,X),10&t&&B!==(B=e[3].cumulative&&e[3].ratio?e[8](e[1].countRatioCumulative):"")&&Object(_.h)(N,"style",B)},d(e){e&&Object(_.u)(t),e&&Object(_.u)(l),e&&Object(_.u)(r),e&&Object(_.u)(v),e&&Object(_.u)(y),e&&Object(_.u)(z),e&&Object(_.u)(P)}}}function z(e){let t;function c(e,t){return 1===e[1].value?D:0===e[2]?V:-1===e[2]?R:P}let n=c(e),o=n(e);return{c(){t=Object(_.v)("tr"),o.c()},m(e,c){Object(_.G)(e,t,c),o.m(t,null)},p(e,a){n===(n=c(e))&&o?o.p(e,a):(o.d(1),o=n(e),o&&(o.c(),o.m(t,null)))},d(e){e&&Object(_.u)(t),o.d()}}}function P(e){let t;return{c(){t=Object(_.v)("td"),t.textContent="Unknown",Object(_.h)(t,"colspan","2"),Object(_.h)(t,"class","svelte-1u8gn73")},m(e,c){Object(_.G)(e,t,c)},p:_.K,d(e){e&&Object(_.u)(t)}}}function R(e){let t,c,n,o=a.a.decreasingIcon+"";return{c(){t=Object(_.v)("td"),n=Object(_.ab)("\n                Decreasing"),c=new _.a(n),Object(_.h)(t,"colspan","2"),Object(_.V)(t,"background-color",a.a.decreasing),Object(_.h)(t,"class","svelte-1u8gn73")},m(e,a){Object(_.G)(e,t,a),c.m(o,t),Object(_.f)(t,n)},p:_.K,d(e){e&&Object(_.u)(t)}}}function V(e){let t,c,n,o=a.a.steadyIcon+"";return{c(){t=Object(_.v)("td"),n=Object(_.ab)("\n                Steady"),c=new _.a(n),Object(_.h)(t,"colspan","2"),Object(_.V)(t,"background-color",a.a.steady),Object(_.h)(t,"class","svelte-1u8gn73")},m(e,a){Object(_.G)(e,t,a),c.m(o,t),Object(_.f)(t,n)},p:_.K,d(e){e&&Object(_.u)(t)}}}function D(e){let t,c,n,o=a.a.increasingIcon+"";return{c(){t=Object(_.v)("td"),n=Object(_.ab)("\n                Increasing"),c=new _.a(n),Object(_.h)(t,"colspan","2"),Object(_.V)(t,"background-color",a.a.increasing),Object(_.h)(t,"class","svelte-1u8gn73")},m(e,a){Object(_.G)(e,t,a),c.m(o,t),Object(_.f)(t,n)},p:_.K,d(e){e&&Object(_.u)(t)}}}function A(e){let t;function c(e,t){return e[1]?e[0]?L:k:M}let n=c(e),o=n(e);return{c(){t=Object(_.v)("div"),o.c(),Object(_.h)(t,"aria-label","tooltip"),Object(_.h)(t,"class","tooltip svelte-1u8gn73")},m(e,c){Object(_.G)(e,t,c),o.m(t,null)},p(e,[a]){n===(n=c(e))&&o?o.p(e,a):(o.d(1),o=n(e),o&&(o.c(),o.m(t,null)))},i:_.K,o:_.K,d(e){e&&Object(_.u)(t),o.d()}}}function W(e,t,c){let n,o,i,s,l;Object(_.m)(e,x.E,e=>c(9,n=e)),Object(_.m)(e,x.e,e=>c(10,o=e)),Object(_.m)(e,x.v,e=>c(4,i=e)),Object(_.m)(e,x.q,e=>c(5,s=e)),Object(_.m)(e,x.i,e=>c(6,l=e));let{invalid:r=!1}=t,{properties:b}=t;const O=Object(w.a)("%B %d");let j,u;return e.$$set=e=>{"invalid"in e&&c(0,r=e.invalid),"properties"in e&&c(1,b=e.properties)},e.$$.update=()=>{2&e.$$.dirty&&c(2,j=b?b.value:0),512&e.$$.dirty&&c(3,u=n)},[r,b,j,u,i,s,l,O,function(e){const t=0===e?a.f:o(e);return"background-color: ".concat(t,"; color: ").concat(Object(S.c)(t))}]}class E extends _.b{constructor(e){super(),Object(_.F)(this,e,W,A,_.Q,{invalid:0,properties:1})}}var I=E;function G(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function N(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?G(Object(c),!0).forEach((function(t){F(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):G(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function F(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}class B{constructor(e,t){this.adapter=t,this.map=e,this.data=new Map,this.popup=new l.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup"}),this.topPopup=new l.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup",anchor:"top"}),this.selection=[],this.hovered={id:null,level:null},this.tooltipElement=document.createElement("div"),this.tooltip=new I({target:this.tooltipElement,props:{properties:null,invalid:!0}}),this.initListeners()}initListeners(){if(this.map.on("mouseenter",v,this._onMapMouseEnter.bind(this)),this.map.on("mouseleave",v,this._onMapMouseLeave.bind(this)),this.map.on("mousemove",v,this._onMapMouseMove.bind(this)),this.adapter.levels.forEach(e=>{const t=p(e);this.map.on("mouseleave",t,this._onLevelMouseLeave.bind(this)),this.map.on("mousemove",t,this._onLevelMouseMove.bind(this)),this.map.on("click",t,this._onLevelMouseClick.bind(this))}),this.adapter.hasMegaCountyLevel){const e=p(o.g.id);this.map.on("mouseleave",e,this._onMegaMouseLeave.bind(this)),this.map.on("mousemove",e,this._onMegaMouseMove.bind(this)),this.map.on("click",e,this._onMegaMouseClick.bind(this))}}get activePopup(){return"spike"===this.adapter.encoding.id?this.topPopup:this.popup}_onMapMouseEnter(){this.map.getCanvas().style.cursor="pointer"}_onLevelMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMegaMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMapMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove()}_onLevelMouseMove(e){const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this._updateHoverHighlight(t.id,t.properties.level),this._renderTooltip(e))}_onMegaMouseMove(e){if(e.defaultPrevented)return;const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this._updateHoverHighlight(t.id,t.properties.level),this._renderTooltip(e))}_onMapMouseMove(e){e.defaultPrevented||this._renderTooltip(e,!0)}_onLevelMouseClick(e){const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this.adapter.dispatch("select",{feature:t,originalEvent:e.originalEvent}))}_onMegaMouseClick(e){if(e.defaultPrevented)return;const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this.adapter.dispatch("select",{feature:t,originalEvent:e.originalEvent}))}_renderTooltip(e,t=!1){this.map.getCanvas().style.cursor="pointer";const c=e.features[0],n=this.activePopup;this.tooltip.$set({properties:N(N({},c.properties),this.data.get(c.properties.id)||{}),invalid:t}),n.setLngLat(e.lngLat).setDOMContent(this.tooltipElement).addTo(this.map)}_updateState(e,t,c){this.map.setFeatureState({source:e,id:"string"==typeof t?Number.parseInt(t,10):t},c)}_updateHoverLayerVisibility(){const e=new Set(this.selection.map(e=>e.level));null!=this.hovered.id&&e.add(this.hovered.level);const t=t=>{"none"!==this.map.getLayoutProperty(f(t),"visibility")!==e.has(t)&&this.map.setLayoutProperty(f(t),"visibility",e.has(t)?"visible":"none")};for(const e of this.adapter.levels)t(e);this.adapter.hasMegaCountyLevel&&t(o.g.id)}_updateHoverHighlight(e=null,t=null){this.hovered.id!=e&&(this.hovered.id&&this._updateState(b(this.hovered.level),this.hovered.id,{hover:!1}),e&&this._updateState(b(t),e,{hover:!0}),this.hovered.id=e,this.hovered.level=t,this._updateHoverLayerVisibility())}select(e){return this.selectMulti(e?[{info:e,color:a.d.selectedRegionOutline}]:[])[0]}selectMulti(e){const t=this.selection.slice();for(const e of this.selection)this._updateState(b(e.level),e.id,{select:!1});return this.selection=e.map(e=>{const t=Number(e.info.id);return this._updateState(b(e.info.level),t,{select:e.color}),{id:t,level:e.info.level,color:e.color}}),this._updateHoverLayerVisibility(),t}forceHover(e){this._updateHoverHighlight(e.id,e.properties.level)}isHovered(e){return!!e&&(e.id==this.hovered.id&&e.level===this.hovered.level)}}var Z=c(460);class H{constructor(e,t){this.map=null,this.onZoom=e,this.resetBounds=new l.LngLatBounds(t),this.resetBoundsOptions={padding:20,linear:!1},this.stateZoom=1,this.initialZoomView=!0}_triggerZoom(e){const t=this.map.getZoom(),c=this.stateZoom,n=Math.pow(2,.75*(t-c));this.onZoom(n,e)}setMap(e){this.map=e,this.stateZoom=this.map.getZoom(),this.map.on("zoom",()=>{this._triggerZoom()})}ready(){this.stateZoom=this.map.getZoom(),this._triggerZoom()}getZoom(){return this.map?this.map.getZoom():0}getMaxZoom(){return this.map?this.map.getMaxZoom():100}getMinZoom(){return this.map?this.map.getMinZoom():-100}zoomIn(){this.map&&(this.initialZoomView=!1,this.map.zoomIn())}zoomOut(){this.map&&(this.initialZoomView=!1,this.map.zoomOut())}resetZoom(){this.map&&(this.initialZoomView=!0,this.map.fitBounds(this.resetBounds,this.resetBoundsOptions),this.map.once("idle",()=>{this.stateZoom=this.map.getZoom(),this._triggerZoom(!0)}))}resized(){this.initialZoomView&&this.map&&requestAnimationFrame(()=>{this.map&&this.map.fitBounds(this.resetBounds,this.resetBoundsOptions)})}showStateLabels(e){this.map&&this.map.getLayer(y)&&this.map.setLayoutProperty(y,"visibility",e?"visible":"none")}toggleStateLabels(){this.map&&this.map.getLayer(y)&&this.showStateLabels("visible"!==this.map.getLayoutProperty(y,"visibility"))}}var J=c(448);function U(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function K(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?U(Object(c),!0).forEach((function(t){Q(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):U(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function Q(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}class Y{constructor(){this.id="color",this.layers=[]}getVisibleLayers(e){return[p(e),"county"===e&&p(o.g.id)].filter(Boolean)}addLayers(){}encode(e,{level:t,stops:c,stopsMega:n}){e.setPaintProperty(p(t),"fill-color",Object(r.b)(c)),n&&e.setPaintProperty(p(o.g.id),"fill-color",Object(r.b)(n))}updateSources(){}}var q=c(119),X=c(16);class ee{constructor(e,t,c,n){this._sourceId=e,this._level=t,this._colorsDirty=!0,this.featureIds=[],this._valueLookup=new Map,this._valuePrimaryValue="value",this._valueToColor=()=>a.e,this._valueToSize=()=>0,this._vertexSource=c,this._fragmentSource=n,this._map=null,this.zoom=1}asLayer(e){return{id:e,type:"custom",renderingMode:"2d",onAdd:(e,t)=>this.onAdd(e,t),render:(e,t)=>this.render(e,t),onRemove:(e,t)=>this.onRemove(e,t),prerender:(e,t)=>this.preRender(e,t)}}_createVertices(e){return[e.x,e.y]}onAdd(e,t){this._map=e,this._vertexShader=t.createShader(t.VERTEX_SHADER),t.shaderSource(this._vertexShader,this._vertexSource),t.compileShader(this._vertexShader),this._fragmentShader=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(this._fragmentShader,this._fragmentSource),t.compileShader(this._fragmentShader),this._program=t.createProgram(),t.attachShader(this._program,this._vertexShader),t.attachShader(this._program,this._fragmentShader),t.linkProgram(this._program),this._uPos=t.getUniformLocation(this._program,"u_matrix"),this._uOpacity=t.getUniformLocation(this._program,"u_opacity"),this._uPixelToClip=t.getUniformLocation(this._program,"u_pixelToClip"),this._uZoom=t.getUniformLocation(this._program,"u_zoom"),this._uDevicePixelRatio=t.getUniformLocation(this._program,"u_device_pixel_ratio"),this._aPos=t.getAttribLocation(this._program,"a_pos"),this._centerBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._centerBuffer);const c=e.getSource(this._sourceId)._data.features.map(e=>{const t=e.geometry.coordinates,c=t[0],n=t[1];if(null==n||Number.isNaN(n))return[];this.featureIds.push(e.properties.id);const o=l.MercatorCoordinate.fromLngLat({lat:n,lng:c});return this._createVertices(o)}).flat();t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),this._verticesPerFeatures=c.length/3/this.featureIds.length,this._aColorAndValue=t.getAttribLocation(this._program,"a_colorAndValue"),this._colorAndValueBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._colorAndValueBuffer),this._colorAndValueData=new Float32Array(4*this.featureIds.length*this._verticesPerFeatures),this._colorAndValueData.fill(0),t.bufferData(t.ARRAY_BUFFER,this._colorAndValueData,t.STATIC_DRAW)}onRemove(e,t){this._map=null,t.deleteBuffer(this._centerBuffer),t.deleteBuffer(this._colorAndValueBuffer),t.deleteShader(this._fragmentShader),t.deleteShader(this._vertexShader),t.deleteProgram(this._program)}_prepareRender(e,t){e.useProgram(this._program),e.uniformMatrix4fv(this._uPos,!1,t);const c=this._map.painter.transform;e.uniform1f(this._uZoom,this.zoom),e.uniform2f(this._uPixelToClip,c.pixelsToGLUnits[0],c.pixelsToGLUnits[1]),e.uniform1f(this._uDevicePixelRatio,window.devicePixelRatio),e.bindBuffer(e.ARRAY_BUFFER,this._colorAndValueBuffer),e.enableVertexAttribArray(this._aColorAndValue),e.vertexAttribPointer(this._aColorAndValue,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._centerBuffer),e.enableVertexAttribArray(this._aPos),e.vertexAttribPointer(this._aPos,3,e.FLOAT,!1,0,0),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}preRender(e){if(this._colorsDirty){this._colorsDirty=!1;for(let e=0;e<this.featureIds.length;e++){const t=this.featureIds[e],c=this._valueLookup.has(t)?this._valueLookup.get(t)[this._valuePrimaryValue]:null,n=this._verticesPerFeatures;if(null==c||Number.isNaN(c)){for(let t=0;t<n;t++){const c=4*e*n+4*t;this._colorAndValueData[c]=0,this._colorAndValueData[c+1]=0,this._colorAndValueData[c+2]=0,this._colorAndValueData[c+3]=0}continue}const o=Object(X.g)(this._valueToColor(c)),a=this._valueToSize(c);for(let t=0;t<n;t++){const c=4*e*n+4*t;this._colorAndValueData[c]=o.r,this._colorAndValueData[c+1]=o.g,this._colorAndValueData[c+2]=o.b,this._colorAndValueData[c+3]=a}}e.bindBuffer(e.ARRAY_BUFFER,this._colorAndValueBuffer),e.bufferData(e.ARRAY_BUFFER,this._colorAndValueData,e.STATIC_DRAW)}}encode(e,t){this._colorsDirty=!0,this._valueToSize=e,this._valueToColor=t}updateSources(e,t){this._colorsDirty=!0,this._valueLookup=e,this._valuePrimaryValue=t}}class te extends ee{constructor(e,t){super(e,t,"\nuniform mat4 u_matrix;\nuniform float u_zoom;\nuniform vec2 u_pixelToClip;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n\n  vec2 pos = vec2(a_pos.z < 0.0 ? -1.0 : 1.0, abs(a_pos.z) < 2.0 ? -1.0 : 1.0);\n  p.xy += pos * u_pixelToClip * (u_zoom * a_colorAndValue.a + 1.0) * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n\n  v_data = vec4(pos, a_colorAndValue.a * u_zoom, 1.0);\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n}","\nprecision mediump float;\nuniform float u_opacity;\nuniform float u_device_pixel_ratio;\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n\n  float extrude_length = length(v_data.xy);\n  float radius = v_data.z;\n  float stroke_width = v_data.w;\n\n  float blur = -(1.0 / u_device_pixel_ratio / (radius + stroke_width));\n  float opacity_t = smoothstep(0.0, blur, extrude_length - 1.0);\n\n  float color_t = smoothstep(\n      blur,\n      0.0,\n      extrude_length - radius / (radius + stroke_width)\n  );\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = opacity_t * mix(fill_color, stroke_color, color_t);\n}")}_createVertices(e){return[e.x,e.y,-2,e.x,e.y,-1,e.x,e.y,1,e.x,e.y,2]}onAdd(e,t){super.onAdd(e,t),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);const c=new Uint16Array(6*this.featureIds.length);for(let e=0;e<this.featureIds.length;e++){const t=6*e,n=4*e;c[t]=n,c[t+1]=n+1,c[t+2]=n+2,c[t+3]=n+2,c[t+4]=n+3,c[t+5]=n}t.bufferData(t.ELEMENT_ARRAY_BUFFER,c,t.STATIC_DRAW)}onRemove(e,t){super.onRemove(e,t),t.deleteBuffer(this._indexBuffer)}render(e,t){super._prepareRender(e,t),e.uniform1f(this._uOpacity,a.b.fillOpacity),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.drawElements(e.TRIANGLES,6*this.featureIds.length,e.UNSIGNED_SHORT,0)}}class ce{constructor(e,t){this.id="bubble",this.theme=e,this.layers=t.map(e=>m(e)),this.customLayers=new Map(t.map(e=>[e,new te(O(e),e)]))}getVisibleLayers(e,t){return"direction"===t?[]:[p(e),m(e)]}onZoom(e){this.customLayers.forEach(t=>t.zoom=e)}getMaxZoom(e){return 50/this.theme.maxRadius[e]}addLayers(e,t){t.levels.forEach(t=>{e.addLayer(this.customLayers.get(t).asLayer(m(t)))})}encode(e,{level:t,sensorType:c,valueMinMax:n,scale:o}){e.setPaintProperty(p(t),"fill-color",this.theme.countyFill);const a=this.theme.maxRadius[t],i=this.theme.radiusScale[c],s=Object(q.c)(i).domain([0,n[1]]).range([0,a]).clamp(!0);return this.customLayers.get(t).encode(s,o),s}updateSources(e,t,c,n){this.customLayers.get(t).updateSources(c,n)}}class ne extends ee{constructor(e,t){super(e,t,"\nuniform mat4 u_matrix;\nuniform vec2 u_pixelToClip;\nuniform float u_zoom;\n\nuniform float u_size;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n  float height = (a_colorAndValue.a * u_zoom + 1.0);\n  float shift = a_pos.z * (u_size * u_zoom + 1.0);\n\n  p.y -= (1.0 - abs(a_pos.z)) * height * u_pixelToClip.y * p.w;\n  p.x += shift * u_pixelToClip.x * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n  float thickness = 1.0;\n  // encode the barycentric coordinate but such that the bottom line is not shown\n  v_data = vec4(-min(shift, 0.0), height, max(shift, 0.0), thickness);\n\n}","\n#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\nuniform float u_device_pixel_ratio;\nuniform float u_opacity;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\n// This is like\nfloat aastep (float threshold, float dist) {\n  float afwidth = fwidth(dist) * 0.5;\n  return smoothstep(threshold - afwidth, threshold + afwidth, dist);\n}\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n  vec3 barycentric = v_data.xyz;\n  float stroke_width = v_data.w;\n\n  // this will be our signed distance for the wireframe edge\n  float d = min(min(barycentric.x, barycentric.y), barycentric.z);\n  // compute the anti-aliased stroke edge\n  float edge = 1.0 - aastep(stroke_width, d);\n\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = mix(fill_color, stroke_color, edge);\n}")}_createVertices(e){return[e.x,e.y,-1,e.x,e.y,0,e.x,e.y,1]}asLayer(e){return{id:e,type:"custom",renderingMode:"2d",onAdd:(e,t)=>this.onAdd(e,t),render:(e,t)=>this.render(e,t),onRemove:(e,t)=>this.onRemove(e,t),prerender:(e,t)=>this.preRender(e,t)}}onAdd(e,t){t.getExtension("OES_standard_derivatives"),super.onAdd(e,t),this._uSize=t.getUniformLocation(this._program,"u_size")}onRemove(e,t){super.onRemove(e,t),t.deleteBuffer(this._indexBuffer)}render(e,t){super._prepareRender(e,t),e.uniform1f(this._uOpacity,a.c.fillOpacity),e.uniform1f(this._uSize,a.c.size[this._level]),e.drawArrays(e.TRIANGLES,0,this.featureIds.length*this._verticesPerFeatures)}}class oe{constructor(e,t){this.id="spike",this.theme=e,this.layers=t.map(e=>g(e)),this.customLayers=new Map(t.map(e=>[e,new ne(O(e),e)]))}getVisibleLayers(e,t){return"direction"===t?[]:[p(e),g(e)]}onZoom(e){this.customLayers.forEach(t=>t.zoom=e)}getMaxZoom(e){return 100/this.theme.maxHeight[e]}addLayers(e,t){t.levels.forEach(t=>{e.addLayer(this.customLayers.get(t).asLayer(g(t)))})}encode(e,{level:t,sensorType:c,valueMinMax:n,scale:o}){e.setPaintProperty(p(t),"fill-color",this.theme.countyFill);const a=n[1],i=this.theme.maxHeight[t],s=this.theme.heightScale[c],l=Object(q.c)(s).range([0,i]).domain([0,a]).clamp(!0);return this.customLayers.get(t).encode(l,o),l}updateSources(e,t,c,n){this.customLayers.get(t).updateSources(c,n)}}const ae=Object(n.c)();class ie extends class{constructor(e,t){this.dispatch=e,this.map=null,this.mapSetupReady=!1,this.mapSetupReadyPromiseResolver=()=>{},this.mapSetupReadyPromise=new Promise(e=>{this.mapSetupReadyPromiseResolver=e}),this.mapDataReady=!1,this.mapEncodingReady=!1,this.animationDuration=0,this.interactive=null,this.level=t.level,this.levels=t.levels,this.hasMegaCountyLevel=t.hasMegaCountyLevel,this.encodings=t.encodings,this.encoding=this.encodings[0];const c=Object(J.a)(e=>this.dispatch("zoom",e),100);this.zoom=new H((e,t)=>{const n="function"==typeof this.encoding.getMaxZoom?this.encoding.getMaxZoom(this.level):Number.POSITIVE_INFINITY;e=Math.min(n,e);for(const t of this.encodings)"function"==typeof t.onZoom&&t.onZoom(e);t&&this.map.triggerRepaint(),c(e)},t.bounds)}initMap(e,t){this.map=new l.Map({attributionControl:!1,container:e,style:Z,bounds:this.zoom.resetBounds,fitBounds:this.zoom.resetBoundsOptions,doubleClickZoom:!1,dragRotate:!1,pitchWithRotate:!1,touchPitch:!1,touchZoomRotate:!0,renderWorldCopies:!1,antialias:!0}),this.zoom.setMap(this.map),this.map.touchZoomRotate.disableRotation();let c=null;const n=new Promise(e=>{c=e});return this.map.on("idle",()=>{this.dispatch("idle")}),this.map.on("load",()=>{this.addSprites(),this.addSources().then(()=>{this.addLayers(),this.interactive=new B(this.map,this)}).then(()=>{this._setupReady(),c(this)})}),Object(S.d)(e,()=>{this.map.resize()}),this.setTitle(t),n}_setupReady(){this.zoom.showStateLabels("state"===this.level),this.zoom.ready(),this.markReady("setup")}markReady(e){switch(e){case"data":if(this.mapDataReady)return;this.mapDataReady=!0,this.dispatch("readyData");break;case"setup":if(this.mapSetupReady)return;this.mapSetupReady=!0,this.mapSetupReadyPromiseResolver(),this.dispatch("readySetup");break;case"encoding":if(this.mapEncodingReady)return;this.mapEncodingReady=!0,this.dispatch("readyEncoding")}this.mapSetupReady&&this.mapEncodingReady&&this.mapDataReady&&(this.dispatch("ready"),this.map.getContainer().dataset.ready="ready")}addSprites(){const e=16,t=document.createElement("canvas");t.width=e,t.height=e;const c=t.getContext("2d");c.clearRect(0,0,e,e);const n=c.createLinearGradient(0,0,e,e);n.addColorStop(0,"white"),n.addColorStop(.25,a.e),n.addColorStop(.5,"white"),n.addColorStop(.75,a.e),n.addColorStop(1,"white"),c.fillStyle=n,c.fillRect(0,0,e,e);const o=c.getImageData(0,0,e,e);this.map.addImage("hatching",o,{sdf:!0})}addSources(){return Promise.resolve()}animationOptions(e){return this.animationDuration?{[e+"-transition"]:{duration:this.animationDuration,delay:0}}:{}}addLevelSource(e,t,c){this.map.addSource(b(e),{type:"geojson",data:t}),this.map.addSource(O(e),{type:"geojson",data:c})}addFillLevelLayer(e){this.map.addLayer({id:p(e),source:b(e),type:"fill",layout:{visibility:"none"},paint:K({"fill-outline-color":a.d.countyOutlineWhenFilled,"fill-color":a.d.countyFill,"fill-opacity":["case",["==",["to-number",["feature-state","value"],r.a],r.a],0,1]},this.animationOptions("fill-color"))})}addHoverLevelLayer(e){this.map.addLayer({id:f(e),source:b(e),type:"line",layout:{visibility:"none"},paint:{"line-color":["case",["to-boolean",["feature-state","select"]],["feature-state","select"],a.d.hoverRegionOutline],"line-width":["case",["any",["to-boolean",["feature-state","hover"]],["to-boolean",["feature-state","select"]]],4,0]}})}addLayers(){}destroy(){this.mapSetupReady=!1,this.map&&(Object(S.f)(this.map.getContainer()),this.map.remove(),this.zoom.map=null,this.map=null)}validateLevel(e){return this.levels.includes(e)?e:this.levels[0]}updateOptions(e,t,c,n,a,i,s,l,r){t=this.validateLevel(t);const b=this.level;if(this.level=t,this.encoding=this.encodings.find(t=>t.id===e),this.hasMegaCountyLevel||(l=null),!this.map||!this.mapSetupReady)return;b!==t&&this.zoom.showStateLabels("state"===t);const O=this.encodings.flatMap(e=>e.layers);O.push(...this.levels.map(e=>p(e))),this.hasMegaCountyLevel&&O.push(p(o.g.id));const j=new Set(this.encoding.getVisibleLayers(t,c));O.forEach(e=>{this.map.setLayoutProperty(e,"visibility",j.has(e)?"visible":"none")});const u=this.encoding.encode(this.map,{level:t,signalType:c,sensorType:a,sensor:n,valueMinMax:i,stops:s,stopsMega:l,scale:r,baseZoom:this.zoom.stateZoom});return this.markReady("encoding"),u}updateSources(e,t,c="value"){e=this.validateLevel(e);const n=Math.random().toString(36);this._mapDataFlag=n,this.dispatch("loading",!0),Promise.all([t,this.mapSetupReadyPromise]).then(([t])=>{if(this._mapDataFlag!==n)return;this.map.once("idle",()=>{this.dispatch("loading",!1)});const a=new Map(t.map(e=>[e.geo_value.toUpperCase(),e]));this.interactive.data=a,"county"===e&&this._updateSource(b(o.g.id),a,c),this._updateSource(b(e),a,c),this._updateSource(O(e),a,c);for(const t of this.encodings)t.updateSources(this.map,e,a,c);t.length>0&&this.markReady("data")})}_updateSource(e,t,c="value"){console.assert(null!=this.map);const n=this.map.getSource(e);if(!n)return void console.error("invalid source");n._data.features.forEach(n=>{const o=n.properties.id,a=t.get(o);this.map.setFeatureState({source:e,id:Number.parseInt(n.id,10)},{value:a?a[c]:r.a})})}selectMulti(e){if(this.map&&this.interactive){if(e.length<=1){const t=this.interactive.selection.slice();return this.select(e.length>0?e[0].info:null),t}return this.interactive.selectMulti(e)}}select(e){if(!this.map||!this.interactive)return;if(null!=this.interactive.select(e)&&!e)return void this.zoom.resetZoom();if(!e||this.interactive.isHovered(e))return;const t=this.map.getSource(b(e.level));if(!t)return;const c=t._data.features.find(t=>t.id===e.id);c&&this.map.fitBounds(s()(c),{maxZoom:1.5*this.zoom.getZoom(),linear:!1,essential:!0})}isMissing(e){const t=this.map.getFeatureState({source:b(e.properties.level),id:"string"==typeof id?Number.parseInt(e.id,10):e.id});return null==t.value||t.value===r.a}selectRandom(){if(!this.map||!this.mapSetupReady)return;const e=this.map.getSource(b(this.level));if(!e)return;const t=o.b[this.level],c=e._data.features.find(e=>e.properties.id===t);if(c&&!this.isMissing(c))return this.interactive.forceHover(c),void this.dispatch("select",{feature:c});const n=e._data.features.filter(e=>!this.isMissing(e));if(0===n.length)return;const a=n[Math.floor(Math.random()*(n.length-1))];this.interactive.forceHover(a),this.dispatch("select",{feature:a})}setTitle(e){if(!this.map)return;const t=this.map.getContainer().querySelector("canvas");t&&(t.setAttribute("role","figure"),t.setAttribute("aria-roledescription","visualization"),t.setAttribute("aria-label","US Map showing: ".concat(e)))}}{constructor(e){super(e,{bounds:n.a.states,encodings:[new Y(o.h),new ce(a.b,o.h),new oe(a.c,o.h)],level:"county",levels:o.h,hasMegaCountyLevel:!0})}addLevelSources(){const e=this.map;return ae.then(t=>{e.addSource(b(o.g.id),{type:"geojson",data:t.mega}),this.levels.forEach(e=>{this.addLevelSource(e,t[e].border,t[e].center)})})}addSources(){return Promise.all([(e=this.map,ae.then(t=>{e.addSource(j,{type:"geojson",data:t.cities})})),this.addLevelSources()]);var e}addLayers(){const e=this.map;e.addLayer({id:v,source:b("state"),type:"fill",paint:{"fill-color":a.e,"fill-outline-color":a.d.stateOutline,"fill-pattern":"hatching"}}),this.addFillLevelLayer(o.g.id),this.levels.forEach(e=>{this.addFillLevelLayer(e)}),this.addHoverLevelLayer(o.g.id),this.levels.forEach(e=>{this.addHoverLevelLayer(e)}),this.encodings.forEach(t=>{t.addLayers(e,this)}),function(e){const t=(t,c,n={})=>{e.addLayer(d(d(d({id:t,source:j,type:"symbol"},c?{filter:c}:{}),n),{},{layout:{"text-field":["get","name"],"text-font":["Open Sans Regular"],"text-size":12},paint:{"text-halo-color":"#fff","text-halo-width":1.5}}))};t($.pit,["==","name","Pittsburgh"],{maxzoom:8}),t($.pit[1],[">","population",9e5],{maxzoom:4}),t($.pit[2],[">","population",5e5],{maxzoom:6,minzoom:4}),t($.pit[3],[">","population",1e5],{maxzoom:8,minzoom:6}),t($.pit[4],void 0,{minzoom:8})}(e),function(e){e.addLayer({id:y,source:O("state"),type:"symbol",maxzoom:8,layout:{"text-field":["upcase",["get","name"]],"text-font":["Open Sans Bold"],"text-size":11},paint:{"text-opacity":.5,"text-halo-color":"#fff","text-halo-width":1}})}(e)}}},463:function(e,t,c){"use strict";var n=c(1),o=c(3),a=c(335);c(349);function i(e){let t,c,o=e[3].toLocaleDateString()+"";return{c(){t=Object(n.v)("span"),c=Object(n.ab)(o),Object(n.h)(t,"data-testid","currentdate")},m(e,o){Object(n.G)(e,t,o),Object(n.f)(t,c)},p(e,t){8&t&&o!==(o=e[3].toLocaleDateString()+"")&&Object(n.T)(c,o)},d(e){e&&Object(n.u)(t)}}}function s(e){let t,c,o,s,l,r,b,O,j,u;r=new a.a({});let d=e[0]&&i(e);return{c(){t=Object(n.v)("h2"),c=Object(n.v)("span"),o=Object(n.ab)(e[1]),s=Object(n.W)(),l=Object(n.v)("button"),Object(n.o)(r.$$.fragment),b=Object(n.W)(),d&&d.c(),Object(n.h)(l,"title","Show sensor description"),Object(n.h)(l,"class","pg-button pg-button-circle info svelte-15deon4"),Object(n.h)(t,"class","banner svelte-15deon4")},m(a,i){Object(n.G)(a,t,i),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(c,s),Object(n.f)(c,l),Object(n.J)(r,l,null),Object(n.f)(t,b),d&&d.m(t,null),O=!0,j||(u=Object(n.I)(l,"click",e[4]),j=!0)},p(e,[c]){(!O||2&c)&&Object(n.T)(o,e[1]),e[0]?d?d.p(e,c):(d=i(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i(e){O||(Object(n.db)(r.$$.fragment,e),O=!0)},o(e){Object(n.eb)(r.$$.fragment,e),O=!1},d(e){e&&Object(n.u)(t),Object(n.s)(r),d&&d.d(),j=!1,u()}}}function l(e,t,c){let a,i,s;Object(n.m)(e,o.r,e=>c(1,a=e)),Object(n.m)(e,o.q,e=>c(2,i=e)),Object(n.m)(e,o.i,e=>c(3,s=e));let{showDate:l=!1}=t;return e.$$set=e=>{"showDate"in e&&c(0,l=e.showDate)},[l,a,i,s,()=>{o.j.set(i)}]}class r extends n.b{constructor(e){super(),Object(n.F)(this,e,l,s,n.Q,{showDate:0})}}var b=r,O=c(350),j=c(341),u=c(351),d=c(118);c(352);function h(e){let t,c,o,a,i,s,l,r,b,O,j,d,h,p,f,m,g,v,y,$,_;return i=new u.a({}),j=new u.a({}),g=new u.a({}),{c(){t=Object(n.v)("div"),c=Object(n.v)("button"),o=Object(n.v)("span"),o.textContent="Switch to Choropleth",a=Object(n.W)(),Object(n.o)(i.$$.fragment),l=Object(n.W)(),r=Object(n.v)("button"),b=Object(n.v)("span"),b.textContent="Switch to Bubble Map",O=Object(n.W)(),Object(n.o)(j.$$.fragment),h=Object(n.W)(),p=Object(n.v)("button"),f=Object(n.v)("span"),f.textContent="Switch to Spike Map",m=Object(n.W)(),Object(n.o)(g.$$.fragment),Object(n.h)(o,"aria-hidden",""),Object(n.h)(c,"aria-pressed",s="color"===e[5]?"true":"false"),Object(n.h)(c,"class","pg-button encoding-button choropleth svelte-1ncn4fm"),Object(n.h)(c,"title","Switch to Choropleth"),Object(n.cb)(c,"selected","color"===e[5]),Object(n.h)(b,"aria-hidden",""),Object(n.h)(r,"aria-pressed",d="bubble"===e[5]?"true":"false"),Object(n.h)(r,"class","pg-button encoding-button bubble svelte-1ncn4fm"),Object(n.h)(r,"title","Switch to Bubble Map"),Object(n.cb)(r,"selected","bubble"===e[5]),Object(n.h)(f,"aria-hidden",""),Object(n.h)(p,"aria-pressed",v="spike"===e[5]?"true":"false"),Object(n.h)(p,"class","pg-button encoding-button spike svelte-1ncn4fm"),Object(n.h)(p,"title","Switch to Spike Map"),Object(n.cb)(p,"selected","spike"===e[5]),Object(n.h)(t,"class","pg-button-vertical-group svelte-1ncn4fm")},m(s,u){Object(n.G)(s,t,u),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(c,a),Object(n.J)(i,c,null),Object(n.f)(t,l),Object(n.f)(t,r),Object(n.f)(r,b),Object(n.f)(r,O),Object(n.J)(j,r,null),Object(n.f)(t,h),Object(n.f)(t,p),Object(n.f)(p,f),Object(n.f)(p,m),Object(n.J)(g,p,null),y=!0,$||(_=[Object(n.I)(c,"click",e[9]),Object(n.I)(r,"click",e[10]),Object(n.I)(p,"click",e[11])],$=!0)},p(e,t){(!y||32&t&&s!==(s="color"===e[5]?"true":"false"))&&Object(n.h)(c,"aria-pressed",s),32&t&&Object(n.cb)(c,"selected","color"===e[5]),(!y||32&t&&d!==(d="bubble"===e[5]?"true":"false"))&&Object(n.h)(r,"aria-pressed",d),32&t&&Object(n.cb)(r,"selected","bubble"===e[5]),(!y||32&t&&v!==(v="spike"===e[5]?"true":"false"))&&Object(n.h)(p,"aria-pressed",v),32&t&&Object(n.cb)(p,"selected","spike"===e[5])},i(e){y||(Object(n.db)(i.$$.fragment,e),Object(n.db)(j.$$.fragment,e),Object(n.db)(g.$$.fragment,e),y=!0)},o(e){Object(n.eb)(i.$$.fragment,e),Object(n.eb)(j.$$.fragment,e),Object(n.eb)(g.$$.fragment,e),y=!1},d(e){e&&Object(n.u)(t),Object(n.s)(i),Object(n.s)(j),Object(n.s)(g),$=!1,Object(n.P)(_)}}}function p(e){let t;return{c(){t=Object(n.v)("div"),Object(n.h)(t,"class","loader loading svelte-1ncn4fm")},m(e,c){Object(n.G)(e,t,c)},d(e){e&&Object(n.u)(t)}}}function f(e){let t,c,o,a,i,s,l,r,b,d,f,m,g,v,y,$,_,w,x,S;a=new O.a({}),r=new j.a({}),g=new u.a({});let k=e[2]&&e[4]&&h(e),L=e[3]&&p();return{c(){t=Object(n.v)("div"),c=Object(n.v)("div"),o=Object(n.v)("button"),Object(n.o)(a.$$.fragment),s=Object(n.W)(),l=Object(n.v)("button"),Object(n.o)(r.$$.fragment),d=Object(n.W)(),f=Object(n.v)("div"),m=Object(n.v)("button"),Object(n.o)(g.$$.fragment),y=Object(n.W)(),k&&k.c(),$=Object(n.W)(),L&&L.c(),Object(n.h)(o,"class","pg-button"),Object(n.h)(o,"type","button"),Object(n.h)(o,"title","Zoom in"),Object(n.h)(o,"aria-label","Zoom in"),o.disabled=i=!e[1]||e[1].getZoom()<=e[1].getMinZoom(),Object(n.h)(l,"class","pg-button"),Object(n.h)(l,"type","button"),Object(n.h)(l,"title","Zoom out"),Object(n.h)(l,"aria-label","Zoom out"),l.disabled=b=!e[1]||e[1].getZoom()>=e[1].getMaxZoom(),Object(n.h)(c,"class","pg-button-vertical-group svelte-1ncn4fm"),Object(n.h)(m,"class","pg-button"),Object(n.h)(m,"type","button"),Object(n.h)(m,"title","Show entire map"),Object(n.h)(m,"aria-label","Show entire map"),m.disabled=v=!e[1],Object(n.h)(f,"class","svelte-1ncn4fm"),Object(n.h)(t,"class",_="root base-font-size "+e[0]+" svelte-1ncn4fm")},m(i,b){Object(n.G)(i,t,b),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.J)(a,o,null),Object(n.f)(c,s),Object(n.f)(c,l),Object(n.J)(r,l,null),Object(n.f)(t,d),Object(n.f)(t,f),Object(n.f)(f,m),Object(n.J)(g,m,null),Object(n.f)(t,y),k&&k.m(t,null),Object(n.f)(t,$),L&&L.m(t,null),w=!0,x||(S=[Object(n.I)(o,"click",e[6]),Object(n.I)(l,"click",e[7]),Object(n.I)(m,"click",e[8])],x=!0)},p(e,[c]){(!w||2&c&&i!==(i=!e[1]||e[1].getZoom()<=e[1].getMinZoom()))&&(o.disabled=i),(!w||2&c&&b!==(b=!e[1]||e[1].getZoom()>=e[1].getMaxZoom()))&&(l.disabled=b),(!w||2&c&&v!==(v=!e[1]))&&(m.disabled=v),e[2]&&e[4]?k?(k.p(e,c),20&c&&Object(n.db)(k,1)):(k=h(e),k.c(),Object(n.db)(k,1),k.m(t,$)):k&&(Object(n.C)(),Object(n.eb)(k,1,1,()=>{k=null}),Object(n.l)()),e[3]?L||(L=p(),L.c(),L.m(t,null)):L&&(L.d(1),L=null),(!w||1&c&&_!==(_="root base-font-size "+e[0]+" svelte-1ncn4fm"))&&Object(n.h)(t,"class",_)},i(e){w||(Object(n.db)(a.$$.fragment,e),Object(n.db)(r.$$.fragment,e),Object(n.db)(g.$$.fragment,e),Object(n.db)(k),w=!0)},o(e){Object(n.eb)(a.$$.fragment,e),Object(n.eb)(r.$$.fragment,e),Object(n.eb)(g.$$.fragment,e),Object(n.eb)(k),w=!1},d(e){e&&Object(n.u)(t),Object(n.s)(a),Object(n.s)(r),Object(n.s)(g),k&&k.d(),L&&L.d(),x=!1,Object(n.P)(S)}}}function m(e,t,c){let a,i;Object(n.m)(e,o.x,e=>c(4,a=e)),Object(n.m)(e,o.s,e=>c(5,i=e));let{className:s=""}=t,{zoom:l}=t,{showEncodings:r=!1}=t,{loading:b=!1}=t;return e.$$set=e=>{"className"in e&&c(0,s=e.className),"zoom"in e&&c(1,l=e.zoom),"showEncodings"in e&&c(2,r=e.showEncodings),"loading"in e&&c(3,b=e.loading)},[s,l,r,b,a,i,()=>{Object(d.a)("map","zoomIn"),l.zoomIn()},()=>{Object(d.a)("map","zoomOut"),l.zoomOut()},()=>{Object(d.a)("map","zoomReset"),l.resetZoom()},()=>{o.s.set("color")},()=>{o.s.set("bubble")},()=>{o.s.set("spike")}]}class g extends n.b{constructor(e){super(),Object(n.F)(this,e,m,f,n.Q,{className:0,zoom:1,showEncodings:2,loading:3})}}var v=g,y=c(457),$=c(61);c(353);function _(e){let t,c,o,a,i,s,l,r,b,O,j,u,d,h,p,f,m,g,v=$.a.increasingIcon+"",y=$.a.steadyIcon+"",_=$.a.decreasingIcon+"";return{c(){t=Object(n.v)("ul"),c=Object(n.v)("li"),o=Object(n.v)("div"),a=Object(n.W)(),s=Object(n.ab)("\n    Increasing"),l=Object(n.W)(),r=Object(n.v)("li"),b=Object(n.v)("div"),O=Object(n.W)(),u=Object(n.ab)("\n    Steady"),d=Object(n.W)(),h=Object(n.v)("li"),p=Object(n.v)("div"),f=Object(n.W)(),g=Object(n.ab)("\n    Decreasing"),Object(n.h)(o,"class","color-block svelte-i5n6tl"),Object(n.V)(o,"background-color",$.a.increasing),i=new n.a(s),Object(n.h)(c,"class","svelte-i5n6tl"),Object(n.h)(b,"class","color-block svelte-i5n6tl"),Object(n.V)(b,"background-color",$.a.steady),j=new n.a(u),Object(n.h)(r,"class","svelte-i5n6tl"),Object(n.h)(p,"class","color-block svelte-i5n6tl"),Object(n.V)(p,"background-color",$.a.decreasing),m=new n.a(g),Object(n.h)(h,"class","svelte-i5n6tl"),Object(n.h)(t,"class","svelte-i5n6tl")},m(e,$){Object(n.G)(e,t,$),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(c,a),i.m(v,c),Object(n.f)(c,s),Object(n.f)(t,l),Object(n.f)(t,r),Object(n.f)(r,b),Object(n.f)(r,O),j.m(y,r),Object(n.f)(r,u),Object(n.f)(t,d),Object(n.f)(t,h),Object(n.f)(h,p),Object(n.f)(h,f),m.m(_,h),Object(n.f)(h,g)},p:n.K,i:n.K,o:n.K,d(e){e&&Object(n.u)(t)}}}class w extends n.b{constructor(e){super(),Object(n.F)(this,e,null,_,n.Q,{})}}var x=w,S=c(451);c(354);function k(e,t,c){const n=e.slice();return n[8]=t[c],n}function L(e){let t,c,o,a=e[1].high+"";return{c(){t=Object(n.v)("li"),c=Object(n.ab)(a),Object(n.h)(t,"class","tick svelte-uoycec"),Object(n.V)(t,"background-image","linear-gradient(to right, "+e[8].color+", "+e[8].nextColor+")"),Object(n.h)(t,"title",o=e[8].label)},m(e,o){Object(n.G)(e,t,o),Object(n.f)(t,c)},p(e,i){2&i&&a!==(a=e[1].high+"")&&Object(n.T)(c,a),2&i&&Object(n.V)(t,"background-image","linear-gradient(to right, "+e[8].color+", "+e[8].nextColor+")"),2&i&&o!==(o=e[8].label)&&Object(n.h)(t,"title",o)},d(e){e&&Object(n.u)(t)}}}function M(e){let t,c,o,a,i,s,l,r,b,O,j,u=e[1].high+"",d=e[1].high+"",h=e[1].labels,p=[];for(let t=0;t<h.length;t+=1)p[t]=L(k(e,h,t));return{c(){t=Object(n.v)("ul"),c=Object(n.v)("li"),o=Object(n.ab)(u),a=Object(n.W)(),i=Object(n.v)("li"),s=Object(n.ab)(d),r=Object(n.W)();for(let e=0;e<p.length;e+=1)p[e].c();b=Object(n.W)(),O=Object(n.v)("li"),Object(n.h)(c,"class","tick tick-single svelte-uoycec"),Object(n.V)(c,"background","repeating-linear-gradient(-45deg, "+$.e+", white 30%)"),Object(n.h)(c,"title","NA"),Object(n.h)(i,"class","tick tick-single tick-space svelte-uoycec"),Object(n.V)(i,"background-color",$.f),Object(n.h)(i,"title",l=e[1].low),Object(n.h)(O,"class","tick tick-last svelte-uoycec"),Object(n.h)(O,"title",j=e[1].high),Object(n.h)(t,"data-testid","color-legend"),Object(n.h)(t,"class","svelte-uoycec"),Object(n.cb)(t,"loading-bg",e[0])},m(e,l){Object(n.G)(e,t,l),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(t,a),Object(n.f)(t,i),Object(n.f)(i,s),Object(n.f)(t,r);for(let e=0;e<p.length;e+=1)p[e].m(t,null);Object(n.f)(t,b),Object(n.f)(t,O)},p(e,[c]){if(2&c&&u!==(u=e[1].high+"")&&Object(n.T)(o,u),2&c&&d!==(d=e[1].high+"")&&Object(n.T)(s,d),2&c&&l!==(l=e[1].low)&&Object(n.h)(i,"title",l),2&c){let n;for(h=e[1].labels,n=0;n<h.length;n+=1){const o=k(e,h,n);p[n]?p[n].p(o,c):(p[n]=L(o),p[n].c(),p[n].m(t,b))}for(;n<p.length;n+=1)p[n].d(1);p.length=h.length}2&c&&j!==(j=e[1].high)&&Object(n.h)(O,"title",j),1&c&&Object(n.cb)(t,"loading-bg",e[0])},i:n.K,o:n.K,d(e){e&&Object(n.u)(t),Object(n.t)(p,e)}}}function C(e,t,c){let a,i,s,l,r,b;Object(n.m)(e,o.I,e=>c(2,a=e)),Object(n.m)(e,o.q,e=>c(3,i=e)),Object(n.m)(e,o.k,e=>c(4,s=e)),Object(n.m)(e,o.e,e=>c(5,l=e)),Object(n.m)(e,o.E,e=>c(6,r=e)),Object(n.m)(e,o.w,e=>c(7,b=e));let O,{loading:j=!1}=t;return e.$$set=e=>{"loading"in e&&c(0,j=e.loading)},e.$$.update=()=>{252&e.$$.dirty&&c(1,O=Object(S.c)(a,i,s,l,r,b))},[j,O]}class T extends n.b{constructor(e){super(),Object(n.F)(this,e,C,M,n.Q,{loading:0})}}var z=T,P=c(450);c(355);function R(e,t,c){const n=e.slice();return n[10]=t[c],n}function V(e){let t,c,o,a,i,s,l=e[10].label+"";return{c(){t=Object(n.v)("li"),c=Object(n.v)("div"),o=Object(n.v)("div"),a=Object(n.W)(),i=Object(n.v)("span"),s=Object(n.ab)(l),Object(n.h)(o,"class","bubble svelte-19hi244"),Object(n.V)(o,"width",2*e[3](e[10].value)*e[1]+"px"),Object(n.V)(o,"height",2*e[3](e[10].value)*e[1]+"px"),Object(n.V)(o,"background",Object(P.e)(e[10].color,$.b.fillOpacity)),Object(n.V)(o,"border-color",e[10].color),Object(n.h)(c,"class","bubble-wrapper svelte-19hi244"),Object(n.h)(t,"class","svelte-19hi244")},m(e,l){Object(n.G)(e,t,l),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(t,a),Object(n.f)(t,i),Object(n.f)(i,s)},p(e,t){14&t&&Object(n.V)(o,"width",2*e[3](e[10].value)*e[1]+"px"),14&t&&Object(n.V)(o,"height",2*e[3](e[10].value)*e[1]+"px"),4&t&&Object(n.V)(o,"background",Object(P.e)(e[10].color,$.b.fillOpacity)),4&t&&Object(n.V)(o,"border-color",e[10].color),4&t&&l!==(l=e[10].label+"")&&Object(n.T)(s,l)},d(e){e&&Object(n.u)(t)}}}function D(e){let t,c,o,a,i,s,l,r,b,O,j,u,d,h,p=e[2].high+"",f=e[2].labels,m=[];for(let t=0;t<f.length;t+=1)m[t]=V(R(e,f,t));return{c(){t=Object(n.v)("ul"),c=Object(n.v)("li"),o=Object(n.v)("div"),a=Object(n.v)("div"),i=Object(n.W)(),s=Object(n.v)("span"),s.textContent="NA",l=Object(n.W)();for(let e=0;e<m.length;e+=1)m[e].c();r=Object(n.W)(),b=Object(n.v)("li"),O=Object(n.v)("div"),j=Object(n.v)("div"),u=Object(n.W)(),d=Object(n.v)("span"),h=Object(n.ab)(p),Object(n.h)(a,"class","na svelte-19hi244"),Object(n.V)(a,"background","repeating-linear-gradient(-45deg, "+$.e+", white 30%)"),Object(n.h)(o,"class","bubble-wrapper svelte-19hi244"),Object(n.h)(c,"class","svelte-19hi244"),Object(n.V)(j,"width",2*e[3](e[2].highValue)*e[1]+"px"),Object(n.V)(j,"height",2*e[3](e[2].highValue)*e[1]+"px"),Object(n.V)(j,"background",Object(P.e)(e[2].highColor,$.b.fillOpacity)),Object(n.V)(j,"border-color",e[2].highColor),Object(n.h)(j,"class","bubble svelte-19hi244"),Object(n.h)(O,"class","bubble-wrapper svelte-19hi244"),Object(n.h)(b,"class","svelte-19hi244"),Object(n.h)(t,"data-testid","bubble-legend"),Object(n.h)(t,"class","svelte-19hi244"),Object(n.cb)(t,"loading-bg",e[0])},m(e,p){Object(n.G)(e,t,p),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(o,a),Object(n.f)(c,i),Object(n.f)(c,s),Object(n.f)(t,l);for(let e=0;e<m.length;e+=1)m[e].m(t,null);Object(n.f)(t,r),Object(n.f)(t,b),Object(n.f)(b,O),Object(n.f)(O,j),Object(n.f)(b,u),Object(n.f)(b,d),Object(n.f)(d,h)},p(e,[c]){if(14&c){let n;for(f=e[2].labels,n=0;n<f.length;n+=1){const o=R(e,f,n);m[n]?m[n].p(o,c):(m[n]=V(o),m[n].c(),m[n].m(t,r))}for(;n<m.length;n+=1)m[n].d(1);m.length=f.length}14&c&&Object(n.V)(j,"width",2*e[3](e[2].highValue)*e[1]+"px"),14&c&&Object(n.V)(j,"height",2*e[3](e[2].highValue)*e[1]+"px"),4&c&&Object(n.V)(j,"background",Object(P.e)(e[2].highColor,$.b.fillOpacity)),4&c&&Object(n.V)(j,"border-color",e[2].highColor),4&c&&p!==(p=e[2].high+"")&&Object(n.T)(h,p),1&c&&Object(n.cb)(t,"loading-bg",e[0])},i:n.K,o:n.K,d(e){e&&Object(n.u)(t),Object(n.t)(m,e)}}}function A(e,t,c){let a,i,s,l,r,b,O;Object(n.m)(e,o.I,e=>c(4,a=e)),Object(n.m)(e,o.q,e=>c(5,i=e)),Object(n.m)(e,o.k,e=>c(6,s=e)),Object(n.m)(e,o.e,e=>c(7,l=e)),Object(n.m)(e,o.E,e=>c(8,r=e)),Object(n.m)(e,o.w,e=>c(9,b=e)),Object(n.m)(e,o.d,e=>c(3,O=e));let j,{loading:u=!1}=t,{zoom:d=1}=t;return e.$$set=e=>{"loading"in e&&c(0,u=e.loading),"zoom"in e&&c(1,d=e.zoom)},e.$$.update=()=>{1008&e.$$.dirty&&c(2,j=Object(S.c)(a,i,s,l,r,b))},[u,d,j,O]}class W extends n.b{constructor(e){super(),Object(n.F)(this,e,A,D,n.Q,{loading:0,zoom:1})}}var E=W;c(356);function I(e,t,c){const n=e.slice();return n[14]=t[c],n}function G(e){let t,c,o,a,i,s,l,r,b,O,j,u,d=e[14].label+"";return{c(){t=Object(n.v)("li"),c=Object(n.Z)("svg"),o=Object(n.Z)("g"),a=Object(n.Z)("path"),O=Object(n.W)(),j=Object(n.v)("span"),u=Object(n.ab)(d),Object(n.h)(a,"d",i=e[2](e[14].value)),Object(n.h)(a,"class","spike svelte-f727e1"),Object(n.h)(a,"fill",s=Object(P.e)(e[14].color,$.c.fillOpacity)),Object(n.h)(a,"stroke",l=Object(P.e)(e[14].color,$.c.strokeOpacity)),Object(n.V)(o,"transform","translate("+F+"px, "+F+"px)"),Object(n.h)(c,"width",r=2*e[3]+2*F),Object(n.h)(c,"height",b=e[5](e[14].value)*e[1]+2*F),Object(n.h)(c,"class","svelte-f727e1"),Object(n.h)(t,"class","legend-direct-tick svelte-f727e1")},m(e,i){Object(n.G)(e,t,i),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(o,a),Object(n.f)(t,O),Object(n.f)(t,j),Object(n.f)(j,u)},p(e,t){20&t&&i!==(i=e[2](e[14].value))&&Object(n.h)(a,"d",i),16&t&&s!==(s=Object(P.e)(e[14].color,$.c.fillOpacity))&&Object(n.h)(a,"fill",s),16&t&&l!==(l=Object(P.e)(e[14].color,$.c.strokeOpacity))&&Object(n.h)(a,"stroke",l),8&t&&r!==(r=2*e[3]+2*F)&&Object(n.h)(c,"width",r),50&t&&b!==(b=e[5](e[14].value)*e[1]+2*F)&&Object(n.h)(c,"height",b),16&t&&d!==(d=e[14].label+"")&&Object(n.T)(u,d)},d(e){e&&Object(n.u)(t)}}}function N(e){let t,c,o,a,i,s,l,r,b,O,j,u,d,h,p,f,m,g,v,y=e[4].high+"",_=e[4].labels,w=[];for(let t=0;t<_.length;t+=1)w[t]=G(I(e,_,t));return{c(){t=Object(n.v)("ul"),c=Object(n.v)("li"),o=Object(n.v)("div"),a=Object(n.W)(),i=Object(n.v)("span"),i.textContent="NA",s=Object(n.W)();for(let e=0;e<w.length;e+=1)w[e].c();l=Object(n.W)(),r=Object(n.v)("li"),b=Object(n.Z)("svg"),O=Object(n.Z)("g"),j=Object(n.Z)("path"),m=Object(n.W)(),g=Object(n.v)("span"),v=Object(n.ab)(y),Object(n.h)(o,"class","na svelte-f727e1"),Object(n.V)(o,"background","repeating-linear-gradient(-45deg, "+$.e+", white 30%)"),Object(n.h)(c,"class","svelte-f727e1"),Object(n.h)(j,"d",u=e[2](e[4].highValue)),Object(n.h)(j,"class","spike svelte-f727e1"),Object(n.h)(j,"fill",d=Object(P.e)(e[4].highColor,$.c.fillOpacity)),Object(n.h)(j,"stroke",h=Object(P.e)(e[4].highColor,$.c.strokeOpacity)),Object(n.V)(O,"transform","translate("+F+"px, "+F+"px)"),Object(n.h)(b,"width",p=2*e[3]+2*F),Object(n.h)(b,"height",f=e[5](e[4].highValue)*e[1]+2*F),Object(n.h)(b,"class","svelte-f727e1"),Object(n.h)(r,"class","legend-direct-tick svelte-f727e1"),Object(n.h)(t,"class","legend-ticks svelte-f727e1"),Object(n.h)(t,"data-testid","spike-legend"),Object(n.cb)(t,"loading-bg",e[0])},m(e,u){Object(n.G)(e,t,u),Object(n.f)(t,c),Object(n.f)(c,o),Object(n.f)(c,a),Object(n.f)(c,i),Object(n.f)(t,s);for(let e=0;e<w.length;e+=1)w[e].m(t,null);Object(n.f)(t,l),Object(n.f)(t,r),Object(n.f)(r,b),Object(n.f)(b,O),Object(n.f)(O,j),Object(n.f)(r,m),Object(n.f)(r,g),Object(n.f)(g,v)},p(e,[c]){if(62&c){let n;for(_=e[4].labels,n=0;n<_.length;n+=1){const o=I(e,_,n);w[n]?w[n].p(o,c):(w[n]=G(o),w[n].c(),w[n].m(t,l))}for(;n<w.length;n+=1)w[n].d(1);w.length=_.length}20&c&&u!==(u=e[2](e[4].highValue))&&Object(n.h)(j,"d",u),16&c&&d!==(d=Object(P.e)(e[4].highColor,$.c.fillOpacity))&&Object(n.h)(j,"fill",d),16&c&&h!==(h=Object(P.e)(e[4].highColor,$.c.strokeOpacity))&&Object(n.h)(j,"stroke",h),8&c&&p!==(p=2*e[3]+2*F)&&Object(n.h)(b,"width",p),50&c&&f!==(f=e[5](e[4].highValue)*e[1]+2*F)&&Object(n.h)(b,"height",f),16&c&&y!==(y=e[4].high+"")&&Object(n.T)(v,y),1&c&&Object(n.cb)(t,"loading-bg",e[0])},i:n.K,o:n.K,d(e){e&&Object(n.u)(t),Object(n.t)(w,e)}}}const F=2;function B(e,t,c){let a,i,s,l,r,b,O;Object(n.m)(e,o.k,e=>c(6,a=e)),Object(n.m)(e,o.I,e=>c(8,i=e)),Object(n.m)(e,o.q,e=>c(9,s=e)),Object(n.m)(e,o.e,e=>c(10,l=e)),Object(n.m)(e,o.E,e=>c(11,r=e)),Object(n.m)(e,o.w,e=>c(12,b=e)),Object(n.m)(e,o.H,e=>c(5,O=e));let j,u,d,h,{loading:p=!1}=t,{zoom:f=1}=t,m=()=>"";return e.$$set=e=>{"loading"in e&&c(0,p=e.loading),"zoom"in e&&c(1,f=e.zoom)},e.$$.update=()=>{if(66&e.$$.dirty&&c(3,j=$.c.size[a]*f),66&e.$$.dirty&&c(7,u=$.c.maxHeight[a]*f),8e3&e.$$.dirty&&c(4,d=Object(S.c)(i,s,a,l,r,b)),128&e.$$.dirty&&(h=u+2*F),42&e.$$.dirty){const e=O,t=f,n=j;c(2,m=c=>"M 0 ".concat(e(c)*t," L ").concat(n," 0 L ").concat(2*n," ").concat(e(c)*t))}},[p,f,m,j,d,O]}class Z extends n.b{constructor(e){super(),Object(n.F)(this,e,B,N,n.Q,{loading:0,zoom:1})}}var H=Z,J=c(6);c(357);function U(e){let t,c,o,a,i=e[5](e[2])+"";return{c(){t=Object(n.v)("div"),c=Object(n.ab)(i),o=Object(n.ab)("% Coverage"),Object(n.h)(t,"class","root base-font-size container-style svelte-9d0ztf"),Object(n.h)(t,"data-testid","coverage"),Object(n.h)(t,"title",a="Showing data for ".concat(e[2]," ").concat(e[4].labelPlural," out of ").concat(e[3]," ").concat(e[4].labelPlural," (").concat(e[5](e[2]),"%)")),Object(n.cb)(t,"hidden",!e[0]||!e[0].data),Object(n.cb)(t,"loading-bg",e[1])},m(e,a){Object(n.G)(e,t,a),Object(n.f)(t,c),Object(n.f)(t,o)},p(e,[o]){4&o&&i!==(i=e[5](e[2])+"")&&Object(n.T)(c,i),28&o&&a!==(a="Showing data for ".concat(e[2]," ").concat(e[4].labelPlural," out of ").concat(e[3]," ").concat(e[4].labelPlural," (").concat(e[5](e[2]),"%)"))&&Object(n.h)(t,"title",a),1&o&&Object(n.cb)(t,"hidden",!e[0]||!e[0].data),2&o&&Object(n.cb)(t,"loading-bg",e[1])},i:n.K,o:n.K,d(e){e&&Object(n.u)(t)}}}function K(e,t,c){let n,o,{summary:a=null}=t,i=!0,s=0;return e.$$set=e=>{"summary"in e&&c(0,a=e.summary)},e.$$.update=()=>{1&e.$$.dirty&&c(3,n=a?a.items.reduce((e,t)=>e+(t.level===a.level?1:0),0):0),1&e.$$.dirty&&c(4,o=Object(J.d)(a?a.level:"county")),1&e.$$.dirty&&(c(1,i=!0),a&&a.data&&a.data.then(e=>{let t=0;for(const c of e)c.geo_value.endsWith("000")||null==c.value||Number.isNaN(c.value)||t++;c(1,i=!1),c(2,s=t)}))},[a,i,s,n,o,function(e){return Math.round(100*e/n)}]}class Q extends n.b{constructor(e){super(),Object(n.F)(this,e,K,U,n.Q,{summary:0})}}var Y=Q;c(358);function q(e){let t,c;return t=new H({props:{loading:e[2],zoom:e[3]}}),{c(){Object(n.o)(t.$$.fragment)},m(e,o){Object(n.J)(t,e,o),c=!0},p(e,c){const n={};4&c&&(n.loading=e[2]),8&c&&(n.zoom=e[3]),t.$set(n)},i(e){c||(Object(n.db)(t.$$.fragment,e),c=!0)},o(e){Object(n.eb)(t.$$.fragment,e),c=!1},d(e){Object(n.s)(t,e)}}}function X(e){let t,c;return t=new E({props:{loading:e[2],zoom:e[3]}}),{c(){Object(n.o)(t.$$.fragment)},m(e,o){Object(n.J)(t,e,o),c=!0},p(e,c){const n={};4&c&&(n.loading=e[2]),8&c&&(n.zoom=e[3]),t.$set(n)},i(e){c||(Object(n.db)(t.$$.fragment,e),c=!0)},o(e){Object(n.eb)(t.$$.fragment,e),c=!1},d(e){Object(n.s)(t,e)}}}function ee(e){let t,c;return t=new z({props:{loading:e[2]}}),{c(){Object(n.o)(t.$$.fragment)},m(e,o){Object(n.J)(t,e,o),c=!0},p(e,c){const n={};4&c&&(n.loading=e[2]),t.$set(n)},i(e){c||(Object(n.db)(t.$$.fragment,e),c=!0)},o(e){Object(n.eb)(t.$$.fragment,e),c=!1},d(e){Object(n.s)(t,e)}}}function te(e){let t,c;return t=new x({}),{c(){Object(n.o)(t.$$.fragment)},m(e,o){Object(n.J)(t,e,o),c=!0},p:n.K,i(e){c||(Object(n.db)(t.$$.fragment,e),c=!0)},o(e){Object(n.eb)(t.$$.fragment,e),c=!1},d(e){Object(n.s)(t,e)}}}function ce(e){let t,c,o,a,i,s,l,r,O,j,u,d,h,p,f,m,g,$,_;o=new b({props:{showDate:e[4]}}),s=new v({props:{zoom:e[0]?e[0].zoom:null,showEncodings:!0,loading:e[1]}}),O=new y.a({props:{sensor:e[6],className:"container-bg container-style encoding-wrapper"}});const w=[te,ee,X,q],x=[];function S(e,t){return e[7]?0:"color"===e[8]?1:"bubble"===e[8]?2:"spike"===e[8]?3:-1}return~(p=S(e))&&(f=x[p]=w[p](e)),$=new Y({props:{summary:e[5]}}),{c(){t=Object(n.v)("div"),c=Object(n.v)("div"),Object(n.o)(o.$$.fragment),a=Object(n.W)(),i=Object(n.v)("div"),Object(n.o)(s.$$.fragment),l=Object(n.W)(),r=Object(n.v)("div"),Object(n.o)(O.$$.fragment),j=Object(n.W)(),u=Object(n.v)("div"),d=Object(n.v)("div"),h=Object(n.W)(),f&&f.c(),m=Object(n.W)(),g=Object(n.v)("div"),Object(n.o)($.$$.fragment),Object(n.h)(c,"class","title-container container-bg svelte-linlhm"),Object(n.h)(i,"class","map-controls-container svelte-linlhm"),Object(n.h)(t,"class","map-top-overlay svelte-linlhm"),Object(n.h)(d,"class","signal-description svelte-linlhm"),Object(n.h)(u,"class","container-bg container-style"),Object(n.h)(r,"class","legend-container base-font-size svelte-linlhm"),Object(n.h)(r,"aria-label","map legend"),Object(n.h)(g,"class","summary-container svelte-linlhm"),Object(n.h)(g,"aria-label","map data summary")},m(e,b){Object(n.G)(e,t,b),Object(n.f)(t,c),Object(n.J)(o,c,null),Object(n.f)(t,a),Object(n.f)(t,i),Object(n.J)(s,i,null),Object(n.G)(e,l,b),Object(n.G)(e,r,b),Object(n.J)(O,r,null),Object(n.f)(r,j),Object(n.f)(r,u),Object(n.f)(u,d),Object(n.f)(u,h),~p&&x[p].m(u,null),Object(n.G)(e,m,b),Object(n.G)(e,g,b),Object(n.J)($,g,null),_=!0},p(e,[t]){const c={};16&t&&(c.showDate=e[4]),o.$set(c);const a={};1&t&&(a.zoom=e[0]?e[0].zoom:null),2&t&&(a.loading=e[1]),s.$set(a);const i={};64&t&&(i.sensor=e[6]),O.$set(i);let l=p;p=S(e),p===l?~p&&x[p].p(e,t):(f&&(Object(n.C)(),Object(n.eb)(x[l],1,1,()=>{x[l]=null}),Object(n.l)()),~p?(f=x[p],f||(f=x[p]=w[p](e),f.c()),Object(n.db)(f,1),f.m(u,null)):f=null);const r={};32&t&&(r.summary=e[5]),$.$set(r)},i(e){_||(Object(n.db)(o.$$.fragment,e),Object(n.db)(s.$$.fragment,e),Object(n.db)(O.$$.fragment,e),Object(n.db)(f),Object(n.db)($.$$.fragment,e),_=!0)},o(e){Object(n.eb)(o.$$.fragment,e),Object(n.eb)(s.$$.fragment,e),Object(n.eb)(O.$$.fragment,e),Object(n.eb)(f),Object(n.eb)($.$$.fragment,e),_=!1},d(e){e&&Object(n.u)(t),Object(n.s)(o),Object(n.s)(s),e&&Object(n.u)(l),e&&Object(n.u)(r),Object(n.s)(O),~p&&x[p].d(),e&&Object(n.u)(m),e&&Object(n.u)(g),Object(n.s)($)}}}function ne(e,t,c){let a,i,s;Object(n.m)(e,o.q,e=>c(6,a=e)),Object(n.m)(e,o.v,e=>c(7,i=e)),Object(n.m)(e,o.s,e=>c(8,s=e));let{map:l=null}=t,{mapLoading:r=!0}=t,{legendLoading:b=!0}=t,{zoom:O=1}=t,{showDate:j=!1}=t,{summary:u=null}=t;return e.$$set=e=>{"map"in e&&c(0,l=e.map),"mapLoading"in e&&c(1,r=e.mapLoading),"legendLoading"in e&&c(2,b=e.legendLoading),"zoom"in e&&c(3,O=e.zoom),"showDate"in e&&c(4,j=e.showDate),"summary"in e&&c(5,u=e.summary)},[l,r,b,O,j,u,a,i,s]}class oe extends n.b{constructor(e){super(),Object(n.F)(this,e,ne,ce,n.Q,{map:0,mapLoading:1,legendLoading:2,zoom:3,showDate:4,summary:5})}}t.a=oe}}]);
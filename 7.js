(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{402:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c(480),i=c(476),a=c(6),s=c(404),l=c(86),r=c(366),u=c.n(r),b=(c(367),c(465));c(368);function O(e){let t,c;return{c(){t=Object(n.Y)("svg"),c=Object(n.Y)("path"),Object(n.g)(c,"d","M140 52v408l320-204L140 52z"),Object(n.g)(t,"xmlns","http://www.w3.org/2000/svg"),Object(n.g)(t,"viewBox","0 0 512 512"),Object(n.g)(t,"class","svelte-c8tyih")},m(e,o){Object(n.F)(e,t,o),Object(n.e)(t,c)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t)}}}function d(e){let t,c;return t=new s.a({}),{c(){Object(n.n)(t.$$.fragment)},m(e,o){Object(n.I)(t,e,o),c=!0},i(e){c||(Object(n.cb)(t.$$.fragment,e),c=!0)},o(e){Object(n.db)(t.$$.fragment,e),c=!1},d(e){Object(n.r)(t,e)}}}function j(e){let t,c,o,i,a,s,l,r,u,b,j,h;const p=[d,O],m=[];function g(e,t){return e[1]?0:1}return o=g(e),i=m[o]=p[o](e),{c(){t=Object(n.u)("div"),c=Object(n.u)("button"),i.c(),l=Object(n.V)(),r=Object(n.u)("div"),Object(n.g)(c,"aria-pressed",a=e[1]?"true":"false"),Object(n.g)(c,"title",s=e[1]?"Stop timeline to a specific date":"Play timeline to see how data changes over time"),Object(n.g)(c,"class","play-button svelte-h2y8i3"),Object(n.g)(r,"class","slider svelte-h2y8i3"),Object(n.g)(t,"class",u="player container-bg container-style base-font-size "+e[0]+" svelte-h2y8i3")},m(i,a){Object(n.F)(i,t,a),Object(n.e)(t,c),m[o].m(c,null),e[10](c),Object(n.e)(t,l),Object(n.e)(t,r),e[11](r),b=!0,j||(h=[Object(n.H)(window,"keydown",e[5]),Object(n.H)(c,"click",e[4])],j=!0)},p(e,[l]){let r=o;o=g(e),o!==r&&(Object(n.B)(),Object(n.db)(m[r],1,1,(()=>{m[r]=null})),Object(n.k)(),i=m[o],i?i.p(e,l):(i=m[o]=p[o](e),i.c()),Object(n.cb)(i,1),i.m(c,null)),(!b||2&l&&a!==(a=e[1]?"true":"false"))&&Object(n.g)(c,"aria-pressed",a),(!b||2&l&&s!==(s=e[1]?"Stop timeline to a specific date":"Play timeline to see how data changes over time"))&&Object(n.g)(c,"title",s),(!b||1&l&&u!==(u="player container-bg container-style base-font-size "+e[0]+" svelte-h2y8i3"))&&Object(n.g)(t,"class",u)},i(e){b||(Object(n.cb)(i),b=!0)},o(e){Object(n.db)(i),b=!1},d(c){c&&Object(n.t)(t),m[o].d(),e[10](null),e[11](null),j=!1,Object(n.O)(h)}}}function h(e,t,c){let{className:o=""}=t;const i=864e5,a=Object(l.a)();let{running:s=!1}=t,{value:r=new Date}=t,{min:O=new Date}=t,{max:d=new Date}=t,j=null;function h(){a("toggle",!s)}function p(e){return Math.floor(e.getTime())/i}function m(e){return new Date(e*i)}let g=null,f=null;const v={to:e=>Object(b.b)(m(e)),from:e=>Number.parseInt(e,10)},y={to:e=>{const t=m(e);return t.getTime()===O.getTime()||t.getTime()===d.getTime()?Object(b.b)(t):Object(b.e)(t)},from:e=>Number.parseInt(e,10)};return Object(l.c)((()=>{c(9,f=u.a.create(g,{step:1,tooltips:[v],connect:"lower",range:{min:p(O),max:p(d)},start:p(r),pips:{mode:"positions",values:[0,25,50,75,100],density:4,format:y},ariaFormat:v})),f.on("change",(e=>{a("change",m(Number.parseInt(e[0],10)))}))})),Object(l.b)((()=>{f&&(f.destroy(),c(9,f=null))})),e.$$set=e=>{"className"in e&&c(0,o=e.className),"running"in e&&c(1,s=e.running),"value"in e&&c(6,r=e.value),"min"in e&&c(7,O=e.min),"max"in e&&c(8,d=e.max)},e.$$.update=()=>{if(576&e.$$.dirty){const e=p(r);f&&f.set(e)}384&e.$$.dirty&&function(e,t){if(!f)return;const c=p(e),n=p(t);f.updateOptions({range:{min:c,max:n},start:p(r)},!1)}(O,d)},[o,s,j,g,h,function(e){" "===e.key&&e.target!==j&&h()},r,O,d,f,function(e){n.i[e?"unshift":"push"]((()=>{j=e,c(2,j)}))},function(e){n.i[e?"unshift":"push"]((()=>{g=e,c(3,g)}))}]}class p extends n.b{constructor(e){super(),Object(n.E)(this,e,h,j,n.P,{className:0,running:1,value:6,min:7,max:8})}}var m=p,g=c(82),f=c(161),v=c(162),y=c(212),_=c(482),k=c(483);c(369);function w(e){let t,c,a,s,l,r,u,b,O,d;c=new i.a({props:{showDate:!1,className:"options-container"}}),s=new m({props:{className:"player-container",running:e[3],value:e[11],max:e[10],min:e[9]}}),s.$on("toggle",e[15]),s.$on("change",e[19]),u=new k.a({props:{map:e[2],mapLoading:e[3]||e[4],legendLoading:!1,zoom:e[7],showDate:!0}});let j={data:e[6],sensor:e[12],level:e[0],encoding:e[8],signalOptions:e[1],wrapperClass:_.a,title:e[13]};return O=new o.a({props:j}),e[20](O),O.$on("loading",e[21]),O.$on("zoom",e[22]),O.$on("updatedEncoding",e[23]),{c(){t=Object(n.u)("main"),Object(n.n)(c.$$.fragment),a=Object(n.V)(),Object(n.n)(s.$$.fragment),l=Object(n.V)(),r=Object(n.u)("div"),Object(n.n)(u.$$.fragment),b=Object(n.V)(),Object(n.n)(O.$$.fragment),Object(n.g)(r,"class","map-container svelte-227sr0"),Object(n.g)(t,"class","root svelte-227sr0")},m(e,o){Object(n.F)(e,t,o),Object(n.I)(c,t,null),Object(n.e)(t,a),Object(n.I)(s,t,null),Object(n.e)(t,l),Object(n.e)(t,r),Object(n.I)(u,r,null),Object(n.e)(r,b),Object(n.I)(O,r,null),d=!0},p(e,[t]){const c={};8&t&&(c.running=e[3]),2048&t&&(c.value=e[11]),1024&t&&(c.max=e[10]),512&t&&(c.min=e[9]),s.$set(c);const n={};4&t&&(n.map=e[2]),24&t&&(n.mapLoading=e[3]||e[4]),128&t&&(n.zoom=e[7]),u.$set(n);const o={};64&t&&(o.data=e[6]),4096&t&&(o.sensor=e[12]),1&t&&(o.level=e[0]),256&t&&(o.encoding=e[8]),2&t&&(o.signalOptions=e[1]),8192&t&&(o.title=e[13]),O.$set(o)},i(e){d||(Object(n.cb)(c.$$.fragment,e),Object(n.cb)(s.$$.fragment,e),Object(n.cb)(u.$$.fragment,e),Object(n.cb)(O.$$.fragment,e),d=!0)},o(e){Object(n.db)(c.$$.fragment,e),Object(n.db)(s.$$.fragment,e),Object(n.db)(u.$$.fragment,e),Object(n.db)(O.$$.fragment,e),d=!1},d(o){o&&Object(n.t)(t),Object(n.r)(c),Object(n.r)(s),Object(n.r)(u),e[20](null),Object(n.r)(O)}}}function $(e,t,c){let o,i,s,r,u,b,O,d,j;function h(e){e&&(e.scale&&a.e.set(e.scale),a.f.set(e.stops),"bubble"===o&&e.custom&&a.d.set(e.custom),"spike"===o&&e.custom&&a.E.set(e.custom))}Object(n.l)(e,a.s,(e=>c(8,o=e))),Object(n.l)(e,a.G,(e=>c(17,i=e))),Object(n.l)(e,a.q,(e=>c(18,s=e))),Object(n.l)(e,a.k,(e=>c(0,r=e))),Object(n.l)(e,a.i,(e=>c(11,u=e))),Object(n.l)(e,a.C,(e=>c(1,b=e))),Object(n.l)(e,a.p,(e=>c(12,O=e))),Object(n.l)(e,a.r,(e=>c(13,d=e)));let p=3;const m=new Map;let _=-1,k=!1,w=!0,$=()=>{},x=Promise.resolve([]);function S(e){const t="".concat(e,"-").concat(s.key,"-").concat(r);if(m.has(t)){const e=m.get(t);return m.delete(e),e}return Object(v.b)(s,r,e,{stderr:null})}function V(e,t=!1){if(_=-1,!t)return c(3,k=!1),c(6,x=S(e)),void x.then((()=>{a.h.set(Object(f.e)(e))}));const n=g.a.offset(e,1);!function(e){let t=g.a.offset(e,p);t>C&&(t=C);const c=g.a.range(g.a.floor(e),t);for(const e of c){const t="".concat(e,"-").concat(s.key,"-").concat(r);m.has(t)||m.set(t,Object(v.b)(s,r,e,{stderr:null}))}}(e);const o=new Promise((e=>c(5,$=e))),i=Date.now();c(6,x=S(e)),x.then((()=>{a.h.set(Object(f.e)(e))})),o.then((()=>{if(!k)return;const e=Date.now()-i;e>250&&p<7&&p++,_=setTimeout((()=>{V(n,n<C)}),Math.max(0,250-e))}))}function L(){if(c(3,k=!k),!k)return Object(y.a)("player","stop"),_>=0&&(clearTimeout(_),_=-1),void m.clear();Object(y.a)("player","start"),C.getTime()===u.getTime()?V(R,!0):V(g.a.offset(u,1),!0)}function M(e){k&&L(),Object(y.a)("player","jump",e.toString()),V(e,!1)}Object(l.c)((()=>{V(u,!1)}));let P=1;let R,C;return e.$$.update=()=>{393216&e.$$.dirty&&c(9,R=null!=i&&i.has(s.key)?Object(f.g)(i.get(s.key)[0]):new Date(2020,1,1)),393216&e.$$.dirty&&c(10,C=null!=i&&i.has(s.key)?Object(f.g)(i.get(s.key)[1]):new Date(2020,8,1)),262147&e.$$.dirty&&(k&&L(),V(u,!1))},[r,b,j,k,w,$,x,P,o,R,C,u,O,d,h,L,M,i,s,e=>M(e.detail),function(e){n.i[e?"unshift":"push"]((()=>{j=e,c(2,j)}))},e=>{c(4,w=e.detail),e.detail||$()},e=>c(7,P=e.detail),e=>h(e.detail)]}class x extends n.b{constructor(e){super(),Object(n.E)(this,e,$,w,n.P,{})}}t.default=x},464:function(e,t,c){"use strict";c.d(t,"b",(function(){return i})),c.d(t,"f",(function(){return a})),c.d(t,"d",(function(){return s})),c.d(t,"a",(function(){return l})),c.d(t,"c",(function(){return b})),c.d(t,"e",(function(){return O}));var n=c(16),o=c(335);function i(e){return Object(n.f)(e).l>.32?"#000":"#fff"}function a(e,t){return e.map(((e,c)=>[e,t[c]]))}function s(e,t){return Array.isArray(e)?e.map((e=>{const c=Object(n.g)(e);return c.opacity=t,c.toString()})):s([e],t)[0]}function l(e,t,c,n){null==n&&(n=c-t);const o={start:e-n/2,end:e.getTime()+n/2};let i=t-o.start;return i<=0&&(i=c-o.end,i>=0&&(i=0)),o.start=o.start+i,o.end=o.end+i,o}const r=new WeakMap,u=new o.a((e=>{for(const t of e){const e=r.get(t.target);e&&e(t.contentRect,t)}}));function b(e,t){r.set(e,t),u.observe(e)}function O(e){r.delete(e),u.unobserve(e)}},466:function(e,t,c){"use strict";var n=c(1),o=c(6);function i(e){let t,c,o,i;return{c(){t=Object(n.u)("button"),Object(n.g)(t,"title","Show sensor description"),Object(n.g)(t,"class",c="uk-icon-button "+e[2]),Object(n.g)(t,"data-uk-toggle","target: #info-dialog"),Object(n.g)(t,"data-uk-icon","icon: question-plain"),Object(n.bb)(t,"uk-icon-button-small",!e[1])},m(c,a){Object(n.F)(c,t,a),o||(i=Object(n.H)(t,"click",Object(n.W)(e[3])),o=!0)},p(e,o){4&o&&c!==(c="uk-icon-button "+e[2])&&Object(n.g)(t,"class",c),6&o&&Object(n.bb)(t,"uk-icon-button-small",!e[1])},d(e){e&&Object(n.t)(t),o=!1,i()}}}function a(e){let t,c=null!=e[0]&&e[0].description&&i(e);return{c(){c&&c.c(),t=Object(n.v)()},m(e,o){c&&c.m(e,o),Object(n.F)(e,t,o)},p(e,[n]){null!=e[0]&&e[0].description?c?c.p(e,n):(c=i(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null)},i:n.J,o:n.J,d(e){c&&c.d(e),e&&Object(n.t)(t)}}}function s(e,t,c){let{sensor:n}=t,{large:i=!1}=t,{className:a=""}=t;return e.$$set=e=>{"sensor"in e&&c(0,n=e.sensor),"large"in e&&c(1,i=e.large),"className"in e&&c(2,a=e.className)},[n,i,a,()=>{o.j.set(n)}]}class l extends n.b{constructor(e){super(),Object(n.E)(this,e,s,a,n.P,{sensor:0,large:1,className:2})}}t.a=l},468:function(e,t,c){"use strict";c.d(t,"b",(function(){return b})),c.d(t,"a",(function(){return O})),c.d(t,"c",(function(){return j}));var n=c(70),o=c(345),i=c.n(o),a=c(59),s=c(464),l=c(4);const r={min:0,max:100,mean:50,std:10};function u(e,t){if(!e||!e.has(t))return r;const c=e.get(t);return[c.max,c.std,c.mean].some((e=>null==e||Number.isNaN(e)))?(console.warn("invalid stats detected for",t),r):c}function b(e,t,c,n,o=!1){let i=t.key;if("count"===t.getType(n)){i+="_".concat(c),t.isCasesOrDeath&&(i+="_".concat(Object(l.l)(t,n)));const a=u(e,i);return o?[0,a.max]:[Math.max(.14,a.mean-3*a.std),a.mean+3*a.std]}t.isCasesOrDeath&&(i+="_".concat(Object(l.l)(t,n)));const a=u(e,i);return o?[0,a.max]:[Math.max(0,a.mean-3*a.std),a.mean+3*a.std]}function O(e,t,c){return"count"===c?function(e,t){const c=Object(n.c)(t.colorScale).domain(e),o=i()(Math.log10(e[0]),Math.log10(e[1]),7),a=o.map((e=>c(e).toString()));return{stops:Object(s.f)(o,a),scale:c}}(e,t):"prop"===c?function(e,t){const c=Math.max(e[0],0),o=Math.max(c+.01,e[1]),i=c+(o-c)/2,a=c+(i-c)/2,l=i+(o-i)/2,r=Object(n.b)(t.colorScale).domain(e),u=[c,a,i,l,o],b=u.map((e=>r(e).toString()));return{stops:Object(s.f)(u,b),scale:r}}(e,t):function(e,t){const c=e[0]+(e[1]-e[0])/2,o=e[0]+(c-e[0])/2,i=c+(e[1]-c)/2,a=Object(n.b)(t.colorScale).domain(e),l=[e[0],o,c,i,e[1]],r=l.map((e=>a(e).toString()));return{stops:Object(s.f)(l,r),scale:a}}(e,t)}function d(e,t,c){const n=[e],o=(t-e)/c;for(let e=1;e<c;e++)n.push(n[e-1]+o);return n.push(t),n}function j(e,t,c,n,o,s=!1){const l=e?b(e,t,c,o):null;if(!l)return{labels:[],high:"",valueMinMax:[0,0]};const r=function(e,t,c,n){const o=n?5:7;if("count"===e.getType(t)){const e=Math.log10(Math.max(.01,c[0])),t=Math.log10(Math.max(.1,c[1]));return i()(e,t,o)}return"raw"===e.format?(c[0]=Math.max(0,c[0]),d(c[0],c[1],o)):(c[0]=Math.max(0,c[0]),c[1]=Math.min(100,c[1]),d(c[0],c[1],o))}(t,o,l,s);return{low:t.formatValue(0),lowValue:0,lowColor:a.e,labels:r.slice(0,-1).map(((e,c)=>({label:t.formatValue(e),value:e,color:n(e),nextColor:n(r[c+1])}))),high:"".concat(t.formatValue(l[1]),"+"),highValue:l[1],highColor:n(l[1]),valueMinMax:l}}},476:function(e,t,c){"use strict";var n=c(1),o=c(6),i=c(161),a=c(210),s=c(475),l=c(82);c(337);function r(e){let t,c,o,i,a=e[2](e[0])+"";return{c(){t=Object(n.u)("button"),c=Object(n.Z)(a),Object(n.g)(t,"aria-label","selected date"),Object(n.g)(t,"class","uk-input")},m(a,s){Object(n.F)(a,t,s),Object(n.e)(t,c),o||(i=Object(n.H)(t,"",e[7]),o=!0)},p(e,t){5&t&&a!==(a=e[2](e[0])+"")&&Object(n.S)(c,a)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),o=!1,i()}}}function u(e){let t,c,o;function i(t){e[8].call(null,t)}let a={className:"uk-width-1-1",start:e[3][0],end:e[3][1],formattedSelected:e[2](e[0]),$$slots:{default:[b]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.selected=e[0]),t=new s.a({props:a}),n.i.push((()=>Object(n.h)(t,"selected",i))),{c(){Object(n.n)(t.$$.fragment)},m(e,c){Object(n.I)(t,e,c),o=!0},p(e,o){const i={};8&o&&(i.start=e[3][0]),8&o&&(i.end=e[3][1]),5&o&&(i.formattedSelected=e[2](e[0])),4101&o&&(i.$$scope={dirty:o,ctx:e}),!c&&1&o&&(c=!0,i.selected=e[0],Object(n.c)((()=>c=!1))),t.$set(i)},i(e){o||(Object(n.cb)(t.$$.fragment,e),o=!0)},o(e){Object(n.db)(t.$$.fragment,e),o=!1},d(e){Object(n.r)(t,e)}}}function b(e){let t,c,o,i,a=e[2](e[0])+"";return{c(){t=Object(n.u)("button"),c=Object(n.Z)(a),Object(n.g)(t,"aria-label","selected date"),Object(n.g)(t,"class","uk-input uk-text-nowrap")},m(a,s){Object(n.F)(a,t,s),Object(n.e)(t,c),o||(i=Object(n.H)(t,"",e[6]),o=!0)},p(e,t){5&t&&a!==(a=e[2](e[0])+"")&&Object(n.S)(c,a)},d(e){e&&Object(n.t)(t),o=!1,i()}}}function O(e){let t,c,o,i,a,s,l,b,O,d,j,h,p,m,g,f,v;const y=[u,r],_=[];function k(e,t){return null!=e[0]&&0!==e[3].length?0:1}return c=k(e),o=_[c]=y[c](e),{c(){t=Object(n.u)("div"),o.c(),i=Object(n.V)(),a=Object(n.u)("div"),s=Object(n.u)("button"),b=Object(n.V)(),O=Object(n.u)("button"),j=Object(n.V)(),h=Object(n.u)("button"),Object(n.g)(t,"class","uk-form-controls"),Object(n.g)(s,"class","uk-button uk-button-default svelte-qjzvyh"),s.disabled=l=null==e[0]||0===e[3].length||e[0]<=e[3][0],Object(n.g)(s,"title","Go to the previous day"),Object(n.g)(s,"data-uk-icon","icon: chevron-left"),Object(n.g)(O,"class","uk-button uk-button-default svelte-qjzvyh"),O.disabled=d=null==e[0]||0===e[3].length||e[0]>=e[3][1],Object(n.g)(O,"title","Go to the next day"),Object(n.g)(O,"data-uk-icon","icon: chevron-right"),Object(n.g)(h,"class","uk-button uk-button-default svelte-qjzvyh"),h.disabled=p=null==e[0]||0===e[3].length||e[0].valueOf()===e[3][1].valueOf(),Object(n.g)(h,"title",m="Go to the latest date for which '"+e[1].name+"' is available"),Object(n.g)(h,"data-uk-icon","icon: chevron-right-end"),Object(n.g)(a,"class","uk-button-group shortcuts svelte-qjzvyh")},m(o,l){Object(n.F)(o,t,l),_[c].m(t,null),Object(n.F)(o,i,l),Object(n.F)(o,a,l),Object(n.e)(a,s),Object(n.e)(a,b),Object(n.e)(a,O),Object(n.e)(a,j),Object(n.e)(a,h),g=!0,f||(v=[Object(n.H)(s,"click",e[9]),Object(n.H)(O,"click",e[10]),Object(n.H)(h,"click",e[11])],f=!0)},p(e,[i]){let a=c;c=k(e),c===a?_[c].p(e,i):(Object(n.B)(),Object(n.db)(_[a],1,1,(()=>{_[a]=null})),Object(n.k)(),o=_[c],o?o.p(e,i):(o=_[c]=y[c](e),o.c()),Object(n.cb)(o,1),o.m(t,null)),(!g||9&i&&l!==(l=null==e[0]||0===e[3].length||e[0]<=e[3][0]))&&(s.disabled=l),(!g||9&i&&d!==(d=null==e[0]||0===e[3].length||e[0]>=e[3][1]))&&(O.disabled=d),(!g||9&i&&p!==(p=null==e[0]||0===e[3].length||e[0].valueOf()===e[3][1].valueOf()))&&(h.disabled=p),(!g||2&i&&m!==(m="Go to the latest date for which '"+e[1].name+"' is available"))&&Object(n.g)(h,"title",m)},i(e){g||(Object(n.cb)(o),g=!0)},o(e){Object(n.db)(o),g=!1},d(e){e&&Object(n.t)(t),_[c].d(),e&&Object(n.t)(i),e&&Object(n.t)(a),f=!1,Object(n.O)(v)}}}function d(e,t,c){let s,r;Object(n.l)(e,o.v,(e=>c(4,s=e))),Object(n.l)(e,o.G,(e=>c(5,r=e)));let{sensor:u}=t,{value:b=null}=t;let O,d;return e.$$set=e=>{"sensor"in e&&c(1,u=e.sensor),"value"in e&&c(0,b=e.value)},e.$$.update=()=>{if(16&e.$$.dirty&&c(2,O=s?Object(a.a)("%x"):Object(a.a)("%B %-d, %Y")),34&e.$$.dirty&&null!==r){const e=r.get(u.key);c(3,d=e?e.map(i.g):[])}},c(3,d=[]),[b,u,O,d,s,r,function(t){Object(n.j)(e,t)},function(t){Object(n.j)(e,t)},function(e){b=e,c(0,b)},()=>c(0,b=l.a.offset(b,-1)),()=>c(0,b=l.a.offset(b,1)),()=>c(0,b=d[1])]}class j extends n.b{constructor(e){super(),Object(n.E)(this,e,d,O,n.P,{sensor:1,value:0})}}var h=j;c(338);function p(e,t,c){const n=e.slice();return n[13]=t[c],n}function m(e,t,c){const n=e.slice();return n[16]=t[c],n}function g(e,t,c){const n=e.slice();return n[19]=t[c],n}function f(e){let t,c,o,i,a,s=e[19].name+"";return{c(){t=Object(n.u)("option"),c=Object(n.Z)(s),o=Object(n.V)(),Object(n.g)(t,"title",i="function"==typeof e[19].tooltipText?e[19].tooltipText():e[19].tooltipText),t.__value=a=e[19].key,t.value=t.__value},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c),Object(n.e)(t,o)},p(e,o){16&o&&s!==(s=e[19].name+"")&&Object(n.S)(c,s),16&o&&i!==(i="function"==typeof e[19].tooltipText?e[19].tooltipText():e[19].tooltipText)&&Object(n.g)(t,"title",i),16&o&&a!==(a=e[19].key)&&(t.__value=a,t.value=t.__value)},d(e){e&&Object(n.t)(t)}}}function v(e){let t,c,o=e[16].sensors,i=[];for(let t=0;t<o.length;t+=1)i[t]=f(g(e,o,t));return{c(){t=Object(n.u)("optgroup");for(let e=0;e<i.length;e+=1)i[e].c();Object(n.g)(t,"label",c=e[16].label)},m(e,c){Object(n.F)(e,t,c);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,a){if(16&a){let c;for(o=e[16].sensors,c=0;c<o.length;c+=1){const n=g(e,o,c);i[c]?i[c].p(n,a):(i[c]=f(n),i[c].c(),i[c].m(t,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}16&a&&c!==(c=e[16].label)&&Object(n.g)(t,"label",c)},d(e){e&&Object(n.t)(t),Object(n.s)(i,e)}}}function y(e){let t,c,o,i,a,s=e[13].labelPlural+"";return{c(){t=Object(n.u)("option"),c=Object(n.Z)(s),o=Object(n.V)(),t.__value=i=e[13].id,t.value=t.__value,t.disabled=a=!e[7].levels.includes(e[13].id)},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c),Object(n.e)(t,o)},p(e,o){1&o&&s!==(s=e[13].labelPlural+"")&&Object(n.S)(c,s),1&o&&i!==(i=e[13].id)&&(t.__value=i,t.value=t.__value),129&o&&a!==(a=!e[7].levels.includes(e[13].id))&&(t.disabled=a)},d(e){e&&Object(n.t)(t)}}}function _(e){let t,c,o,i,a,s;function l(t){e[12].call(null,t)}let r={sensor:e[7]};return void 0!==e[3]&&(r.value=e[3]),i=new h({props:r}),n.i.push((()=>Object(n.h)(i,"value",l))),{c(){t=Object(n.u)("div"),c=Object(n.u)("span"),c.textContent="on",o=Object(n.V)(),Object(n.n)(i.$$.fragment),Object(n.g)(c,"class","uk-form-label svelte-vpx6lo"),Object(n.g)(t,"class","uk-width-1-1 uk-width-1-3@m block svelte-vpx6lo")},m(e,a){Object(n.F)(e,t,a),Object(n.e)(t,c),Object(n.e)(t,o),Object(n.I)(i,t,null),s=!0},p(e,t){const c={};128&t&&(c.sensor=e[7]),!a&&8&t&&(a=!0,c.value=e[3],Object(n.c)((()=>a=!1))),i.$set(c)},i(e){s||(Object(n.cb)(i.$$.fragment,e),s=!0)},o(e){Object(n.db)(i.$$.fragment,e),s=!1},d(e){e&&Object(n.t)(t),Object(n.r)(i)}}}function k(e){let t,c,o,i,a,s,l,r,u,b,O,d,j,h,g,f,k,w,$,x=e[4],S=[];for(let t=0;t<x.length;t+=1)S[t]=v(m(e,x,t));let V=e[0],L=[];for(let t=0;t<V.length;t+=1)L[t]=y(p(e,V,t));let M=e[2]&&_(e);return{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),o=Object(n.u)("span"),o.textContent="Displaying",i=Object(n.V)(),a=Object(n.u)("div"),s=Object(n.u)("select");for(let e=0;e<S.length;e+=1)S[e].c();r=Object(n.V)(),u=Object(n.u)("div"),b=Object(n.u)("span"),b.textContent="for",O=Object(n.V)(),d=Object(n.u)("div"),j=Object(n.u)("select");for(let e=0;e<L.length;e+=1)L[e].c();g=Object(n.V)(),M&&M.c(),Object(n.g)(o,"class","uk-form-label svelte-vpx6lo"),Object(n.g)(s,"id","option-indicator"),Object(n.g)(s,"aria-label","indicator options"),Object(n.g)(s,"class","uk-select"),void 0===e[5]&&Object(n.d)((()=>e[10].call(s))),Object(n.g)(a,"class","uk-form-controls svelte-vpx6lo"),Object(n.g)(c,"class",l="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"),Object(n.g)(b,"class","uk-form-label svelte-vpx6lo"),Object(n.g)(j,"id","option-geo-level"),Object(n.g)(j,"aria-label","geographic level"),Object(n.g)(j,"class","uk-select"),void 0===e[6]&&Object(n.d)((()=>e[11].call(j))),Object(n.g)(d,"class","uk-form-controls svelte-vpx6lo"),Object(n.g)(u,"class",h="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"),Object(n.g)(t,"class",f="container-bg container-style uk-grid-small "+e[1]+" svelte-vpx6lo"),Object(n.g)(t,"data-uk-grid","")},m(l,h){Object(n.F)(l,t,h),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(c,i),Object(n.e)(c,a),Object(n.e)(a,s);for(let e=0;e<S.length;e+=1)S[e].m(s,null);Object(n.Q)(s,e[5]),Object(n.e)(t,r),Object(n.e)(t,u),Object(n.e)(u,b),Object(n.e)(u,O),Object(n.e)(u,d),Object(n.e)(d,j);for(let e=0;e<L.length;e+=1)L[e].m(j,null);Object(n.Q)(j,e[6]),Object(n.e)(t,g),M&&M.m(t,null),k=!0,w||($=[Object(n.H)(s,"change",e[10]),Object(n.H)(j,"change",e[11])],w=!0)},p(e,[o]){if(16&o){let t;for(x=e[4],t=0;t<x.length;t+=1){const c=m(e,x,t);S[t]?S[t].p(c,o):(S[t]=v(c),S[t].c(),S[t].m(s,null))}for(;t<S.length;t+=1)S[t].d(1);S.length=x.length}if(48&o&&Object(n.Q)(s,e[5]),(!k||4&o&&l!==(l="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"))&&Object(n.g)(c,"class",l),129&o){let t;for(V=e[0],t=0;t<V.length;t+=1){const c=p(e,V,t);L[t]?L[t].p(c,o):(L[t]=y(c),L[t].c(),L[t].m(j,null))}for(;t<L.length;t+=1)L[t].d(1);L.length=V.length}65&o&&Object(n.Q)(j,e[6]),(!k||4&o&&h!==(h="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"))&&Object(n.g)(u,"class",h),e[2]?M?(M.p(e,o),4&o&&Object(n.cb)(M,1)):(M=_(e),M.c(),Object(n.cb)(M,1),M.m(t,null)):M&&(Object(n.B)(),Object(n.db)(M,1,1,(()=>{M=null})),Object(n.k)()),(!k||2&o&&f!==(f="container-bg container-style uk-grid-small "+e[1]+" svelte-vpx6lo"))&&Object(n.g)(t,"class",f)},i(e){k||(Object(n.cb)(M),k=!0)},o(e){Object(n.db)(M),k=!1},d(e){e&&Object(n.t)(t),Object(n.s)(S,e),Object(n.s)(L,e),M&&M.d(),w=!1,Object(n.O)($)}}}function w(e,t,c){let a,s,l,r;Object(n.l)(e,o.h,(e=>c(8,a=e))),Object(n.l)(e,o.p,(e=>c(5,s=e))),Object(n.l)(e,o.k,(e=>c(6,l=e))),Object(n.l)(e,o.q,(e=>c(7,r=e)));let u,b,O,{levels:d=o.w}=t,{className:j=""}=t,{showDate:h=!0}=t;return e.$$set=e=>{"levels"in e&&c(0,d=e.levels),"className"in e&&c(1,j=e.className),"showDate"in e&&c(2,h=e.showDate)},e.$$.update=()=>{256&e.$$.dirty&&c(3,u=Object(i.g)(a)),8&e.$$.dirty&&void 0!==u&&o.h.set(Object(i.e)(u)),1&e.$$.dirty&&c(9,b=new Set(d.map((e=>e.id)))),512&e.$$.dirty&&c(4,O=o.t.map((e=>({label:e.label,sensors:e.sensors.filter((e=>e.levels.some((e=>b.has(e)))))}))).filter((e=>e.sensors.length>0)))},[d,j,h,u,O,s,l,r,a,b,function(){s=Object(n.R)(this),o.p.set(s),c(4,O),c(9,b),c(0,d)},function(){l=Object(n.R)(this),o.k.set(l),c(0,d)},function(e){u=e,c(3,u),c(8,a)}]}class $ extends n.b{constructor(e){super(),Object(n.E)(this,e,w,k,n.P,{levels:0,className:1,showDate:2})}}t.a=$},477:function(e,t,c){"use strict";var n=c(1),o=c(6);c(347);function i(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function a(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?i(Object(c),!0).forEach((function(t){s(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):i(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function s(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function l(e){let t,c,o,i,a,s,l,r,u,b,O,d,j,h,p,m,g,f,v,y,_;return{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),o=Object(n.u)("button"),i=Object(n.Z)("New"),s=Object(n.V)(),l=Object(n.u)("button"),r=Object(n.Z)("Cumulative"),b=Object(n.V)(),O=Object(n.u)("div"),d=Object(n.u)("button"),j=Object(n.Z)("Ratios (per 100,000)"),p=Object(n.V)(),m=Object(n.u)("button"),g=Object(n.Z)("Counts"),Object(n.g)(o,"type","button"),Object(n.g)(o,"aria-pressed",a=String(!e[3].cumulative)),Object(n.g)(o,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(n.bb)(o,"uk-active",!e[3].cumulative),Object(n.g)(l,"type","button"),Object(n.g)(l,"aria-pressed",u=e[3].cumulative),Object(n.g)(l,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(n.bb)(l,"uk-active",e[3].cumulative),Object(n.g)(c,"aria-label","display cumulative or new incidents"),Object(n.g)(c,"class","uk-button-group"),Object(n.g)(d,"type","button"),Object(n.g)(d,"aria-pressed",h=String(!e[3].incidence)),Object(n.g)(d,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(n.bb)(d,"uk-active",!e[3].incidence),Object(n.g)(m,"type","button"),Object(n.g)(m,"aria-pressed",f=String(e[3].incidence)),Object(n.g)(m,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(n.bb)(m,"uk-active",e[3].incidence),Object(n.g)(O,"aria-label","display counts or ratios per 100,000 people"),Object(n.g)(O,"class","uk-button-group"),Object(n.g)(t,"class",v="root "+e[2]+" svelte-1iknxf6"),Object(n.bb)(t,"center",e[0])},m(a,u){Object(n.F)(a,t,u),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(o,i),Object(n.e)(c,s),Object(n.e)(c,l),Object(n.e)(l,r),Object(n.e)(t,b),Object(n.e)(t,O),Object(n.e)(O,d),Object(n.e)(d,j),Object(n.e)(O,p),Object(n.e)(O,m),Object(n.e)(m,g),y||(_=[Object(n.H)(o,"click",e[4]),Object(n.H)(l,"click",e[5]),Object(n.H)(d,"click",e[6]),Object(n.H)(m,"click",e[7])],y=!0)},p(e,c){8&c&&a!==(a=String(!e[3].cumulative))&&Object(n.g)(o,"aria-pressed",a),8&c&&Object(n.bb)(o,"uk-active",!e[3].cumulative),8&c&&u!==(u=e[3].cumulative)&&Object(n.g)(l,"aria-pressed",u),8&c&&Object(n.bb)(l,"uk-active",e[3].cumulative),8&c&&h!==(h=String(!e[3].incidence))&&Object(n.g)(d,"aria-pressed",h),8&c&&Object(n.bb)(d,"uk-active",!e[3].incidence),8&c&&f!==(f=String(e[3].incidence))&&Object(n.g)(m,"aria-pressed",f),8&c&&Object(n.bb)(m,"uk-active",e[3].incidence),4&c&&v!==(v="root "+e[2]+" svelte-1iknxf6")&&Object(n.g)(t,"class",v),5&c&&Object(n.bb)(t,"center",e[0])},d(e){e&&Object(n.t)(t),y=!1,Object(n.O)(_)}}}function r(e){let t,c=e[1].isCasesOrDeath&&l(e);return{c(){c&&c.c(),t=Object(n.v)()},m(e,o){c&&c.m(e,o),Object(n.F)(e,t,o)},p(e,[n]){e[1].isCasesOrDeath?c?c.p(e,n):(c=l(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null)},i:n.J,o:n.J,d(e){c&&c.d(e),e&&Object(n.t)(t)}}}function u(e,t,c){let i,s;Object(n.l)(e,o.q,(e=>c(8,i=e))),Object(n.l)(e,o.C,(e=>c(3,s=e)));let{center:l=!1}=t,{sensor:r=i}=t,{className:u=""}=t;return e.$$set=e=>{"center"in e&&c(0,l=e.center),"sensor"in e&&c(1,r=e.sensor),"className"in e&&c(2,u=e.className)},[l,r,u,s,()=>{s.cumulative&&o.C.set(a(a({},s),{},{cumulative:!1}))},()=>{s.cumulative||o.C.set(a(a({},s),{},{cumulative:!0}))},()=>{s.incidence&&o.C.set(a(a({},s),{},{incidence:!1}))},()=>{s.incidence||o.C.set(a(a({},s),{},{incidence:!0}))}]}class b extends n.b{constructor(e){super(),Object(n.E)(this,e,u,r,n.P,{center:0,sensor:1,className:2})}}t.a=b},479:function(e){e.exports=JSON.parse('{"version":8,"name":"Albers USA","metadata":{"mapbox:autocomposite":true,"mapbox:type":"template","mapbox:sdk-support":{"js":"1.6.0","android":"8.6.0","ios":"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},"center":[-1.9392753230472408,-1.4351091963094262],"zoom":4.035119632783768,"bearing":0,"pitch":0,"glyphs":"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf","sources":{},"layers":[]}')},480:function(e,t,c){"use strict";var n=c(1),o=c(86),i=c(6),a=c(468),s=c(4);c(346);function l(e){let t,c,o;return{c(){t=Object(n.u)("div"),Object(n.g)(t,"class","map-wrapper svelte-54x2e1")},m(i,a){Object(n.F)(i,t,a),e[17](t),c||(o=Object(n.H)(window,"resize",e[1]),c=!0)},p:n.J,i:n.J,o:n.J,d(i){i&&Object(n.t)(t),e[17](null),c=!1,o()}}}function r(e,t,c){let l;Object(n.l)(e,i.F,(e=>c(16,l=e)));let{wrapperClass:r}=t,u=null;const b=Object(o.a)(),O=new r(((e,t)=>b(e,t))),d=O.zoom;let{data:j=Promise.resolve([])}=t,{sensor:h=""}=t,{level:p="state"}=t,{encoding:m="color"}=t,{signalOptions:g={}}=t,{animationDuration:f=0}=t,{title:v=""}=t,{selections:y=[]}=t,{focusOn:_=null}=t,k=!1;return Object(o.c)((()=>{c(14,O.animationDuration=f,O),O.initMap(u,v).then((()=>{c(15,k=!0)}))})),Object(o.b)((()=>{O.destroy()})),e.$$set=e=>{"wrapperClass"in e&&c(2,r=e.wrapperClass),"data"in e&&c(5,j=e.data),"sensor"in e&&c(6,h=e.sensor),"level"in e&&c(7,p=e.level),"encoding"in e&&c(8,m=e.encoding),"signalOptions"in e&&c(9,g=e.signalOptions),"animationDuration"in e&&c(10,f=e.animationDuration),"title"in e&&c(11,v=e.title),"selections"in e&&c(12,y=e.selections),"focusOn"in e&&c(13,_=e.focusOn)},e.$$.update=()=>{17120&e.$$.dirty&&O.updateSources(p,j,Object(s.l)(s.o.get(h),g)),99264&e.$$.dirty&&l&&function(e,t,c,n,o){const i=s.o.get(c),l=i.getType(o),r=Object(a.b)(n,i,e,o),{stops:u,scale:d}=Object(a.a)(r,i,l),j="county"===e,h=O.updateOptions(t,e,c,l,r,u,j&&u,d);b("updatedEncoding",{range:r,custom:h,scale:d,stops:u})}(p,m,h,l,g),53248&e.$$.dirty&&O.selectMulti(y),57344&e.$$.dirty&&O.focusOn(_),18432&e.$$.dirty&&O.setTitle(v)},[u,function(){O.zoom.resized()},r,d,function(){O.selectRandom()},j,h,p,m,g,f,v,y,_,O,k,l,function(e){n.i[e?"unshift":"push"]((()=>{u=e,c(0,u)}))}]}class u extends n.b{constructor(e){super(),Object(n.E)(this,e,r,l,n.P,{wrapperClass:2,zoom:3,selectRandom:4,data:5,sensor:6,level:7,encoding:8,signalOptions:9,animationDuration:10,title:11,selections:12,focusOn:13})}get zoom(){return this.$$.ctx[3]}get selectRandom(){return this.$$.ctx[4]}}t.a=u},482:function(e,t,c){"use strict";c.d(t,"a",(function(){return ce}));var n=c(87),o=c(4),i=c(59),a=c(334);c(342);const s=-100;function l(e){return["case",["==",["to-number",["feature-state","value"],s],s],i.d,["==",["to-number",["feature-state","value"],s],0],i.e,["interpolate",["linear"],["to-number",["feature-state","value"],0],...e.flat()]]}function r(e){return"".concat(e,"-border")}function u(e){return"".concat(e,"-centers")}const b="city-point";function O(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function d(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?O(Object(c),!0).forEach((function(t){j(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):O(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function j(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function h(e){return"".concat(e,"-fill")}function p(e){return"".concat(e,"-hover")}function m(e){return"".concat(e,"-bubble")}function g(e){return"".concat(e,"-spike")}const f="state-stroke",v="state-names",y={pit:"city-point-unclustered-pit",1:"city-point-unclustered-1",2:"city-point-unclustered-2",3:"city-point-unclustered-3",4:"city-point-unclustered-4",5:"city-point-unclustered-5"};var _=c(1),k=c(465),w=c(6),$=c(464);c(343);function x(e){let t,c,n,o,i,a,s,l,r,u,b,O=e[1].displayName+"",d=Object(k.f)(e[1])+"";function j(e,t){return e[4].isCasesOrDeath?M:L}let h=j(e),p=h(e);return{c(){t=Object(_.u)("h5"),c=Object(_.Z)(O),n=Object(_.V)(),o=Object(_.u)("table"),i=Object(_.u)("tbody"),a=Object(_.u)("tr"),s=Object(_.u)("th"),s.textContent="Population",l=Object(_.V)(),r=Object(_.u)("td"),u=Object(_.Z)(d),b=Object(_.V)(),p.c(),Object(_.g)(t,"class","svelte-1u8gn73"),Object(_.g)(s,"class","svelte-1u8gn73"),Object(_.g)(r,"class","right svelte-1u8gn73"),Object(_.g)(o,"class","svelte-1u8gn73")},m(e,O){Object(_.F)(e,t,O),Object(_.e)(t,c),Object(_.F)(e,n,O),Object(_.F)(e,o,O),Object(_.e)(o,i),Object(_.e)(i,a),Object(_.e)(a,s),Object(_.e)(a,l),Object(_.e)(a,r),Object(_.e)(r,u),Object(_.e)(i,b),p.m(i,null)},p(e,t){2&t&&O!==(O=e[1].displayName+"")&&Object(_.S)(c,O),2&t&&d!==(d=Object(k.f)(e[1])+"")&&Object(_.S)(u,d),h===(h=j(e))&&p?p.p(e,t):(p.d(1),p=h(e),p&&(p.c(),p.m(i,null)))},d(e){e&&Object(_.t)(t),e&&Object(_.t)(n),e&&Object(_.t)(o),p.d()}}}function S(e){let t,c,n,o=e[1].displayName+"";return{c(){t=Object(_.u)("h5"),c=Object(_.Z)("Estimate unavailable for rest of "),n=Object(_.Z)(o),Object(_.g)(t,"class","svelte-1u8gn73")},m(e,o){Object(_.F)(e,t,o),Object(_.e)(t,c),Object(_.e)(t,n)},p(e,t){2&t&&o!==(o=e[1].displayName+"")&&Object(_.S)(n,o)},d(e){e&&Object(_.t)(t)}}}function V(e){let t;return{c(){t=Object(_.u)("h5"),t.textContent="Estimate unavailable",Object(_.g)(t,"class","svelte-1u8gn73")},m(e,c){Object(_.F)(e,t,c)},p:_.J,d(e){e&&Object(_.t)(t)}}}function L(e){let t,c,n,o,i,a,s,l=e[4].yAxis+"",r=e[4].formatValue(e[2])+"";return{c(){t=Object(_.u)("tr"),c=Object(_.u)("th"),n=Object(_.Z)(l),o=Object(_.V)(),i=Object(_.u)("td"),a=Object(_.Z)(r),Object(_.g)(c,"class","svelte-1u8gn73"),Object(_.g)(i,"class","right svelte-1u8gn73"),Object(_.g)(i,"style",s=e[6](e[2]))},m(e,s){Object(_.F)(e,t,s),Object(_.e)(t,c),Object(_.e)(c,n),Object(_.e)(t,o),Object(_.e)(t,i),Object(_.e)(i,a)},p(e,t){16&t&&l!==(l=e[4].yAxis+"")&&Object(_.S)(n,l),20&t&&r!==(r=e[4].formatValue(e[2])+"")&&Object(_.S)(a,r),4&t&&s!==(s=e[6](e[2]))&&Object(_.g)(i,"style",s)},d(e){e&&Object(_.t)(t)}}}function M(e){let t,c,n,o,i,a,s,l,r,u,b,O,d,j,h,p,m,g,f,v,y,w,$,x,S,V,L,M,P,R,C,z,A,D,F,Z,E,N,T,B,I,U,H,q=e[4].yAxis+"",J=Object(k.c)(e[5])+"",Y=e[4].formatValue(e[1].count)+"",G=e[4].formatValue(e[1].countRatio)+"",W=e[4].formatValue(e[1].avg)+"",Q=e[4].formatValue(e[1].avgRatio)+"",X=Object(k.c)(e[5])+"",K=e[4].formatValue(e[1].countCumulative)+"",ee=e[4].formatValue(e[1].countRatioCumulative)+"";return{c(){t=Object(_.u)("tr"),c=Object(_.u)("th"),n=Object(_.Z)(q),o=Object(_.V)(),i=Object(_.u)("th"),i.textContent="Count",a=Object(_.V)(),s=Object(_.u)("th"),s.textContent="Ratios (per 100,000)",l=Object(_.V)(),r=Object(_.u)("tr"),u=Object(_.u)("th"),b=Object(_.Z)(J),O=Object(_.V)(),d=Object(_.u)("td"),j=Object(_.Z)(Y),p=Object(_.V)(),m=Object(_.u)("td"),g=Object(_.Z)(G),v=Object(_.V)(),y=Object(_.u)("tr"),w=Object(_.u)("th"),w.textContent="7-day avg",$=Object(_.V)(),x=Object(_.u)("td"),S=Object(_.Z)(W),L=Object(_.V)(),M=Object(_.u)("td"),P=Object(_.Z)(Q),C=Object(_.V)(),z=Object(_.u)("tr"),A=Object(_.u)("th"),D=Object(_.Z)("Cumulative "),F=Object(_.Z)(X),Z=Object(_.V)(),E=Object(_.u)("td"),N=Object(_.Z)(K),B=Object(_.V)(),I=Object(_.u)("td"),U=Object(_.Z)(ee),Object(_.g)(c,"class","svelte-1u8gn73"),Object(_.g)(i,"class","area svelte-1u8gn73"),Object(_.g)(s,"class","area svelte-1u8gn73"),Object(_.g)(u,"class","svelte-1u8gn73"),Object(_.g)(d,"class","right svelte-1u8gn73"),Object(_.g)(d,"style",h=!e[3].cumulative&&e[3].incidence?e[6](e[1].count):""),Object(_.g)(m,"class","right svelte-1u8gn73"),Object(_.g)(m,"style",f=e[3].cumulative||e[3].incidence?"":e[6](e[1].countRatio)),Object(_.g)(w,"class","svelte-1u8gn73"),Object(_.g)(x,"class","right svelte-1u8gn73"),Object(_.g)(x,"style",V=!e[3].cumulative&&e[3].incidence?e[6](e[1].avg):""),Object(_.g)(M,"class","right svelte-1u8gn73"),Object(_.g)(M,"style",R=e[3].cumulative||e[3].incidence?"":e[6](e[1].avgRatio)),Object(_.g)(A,"class","svelte-1u8gn73"),Object(_.g)(E,"class","right svelte-1u8gn73"),Object(_.g)(E,"style",T=e[3].cumulative&&e[3].incidence?e[6](e[1].countCumulative):""),Object(_.g)(I,"class","right svelte-1u8gn73"),Object(_.g)(I,"style",H=e[3].cumulative&&!e[3].incidence?e[6](e[1].countRatioCumulative):"")},m(e,h){Object(_.F)(e,t,h),Object(_.e)(t,c),Object(_.e)(c,n),Object(_.e)(t,o),Object(_.e)(t,i),Object(_.e)(t,a),Object(_.e)(t,s),Object(_.F)(e,l,h),Object(_.F)(e,r,h),Object(_.e)(r,u),Object(_.e)(u,b),Object(_.e)(r,O),Object(_.e)(r,d),Object(_.e)(d,j),Object(_.e)(r,p),Object(_.e)(r,m),Object(_.e)(m,g),Object(_.F)(e,v,h),Object(_.F)(e,y,h),Object(_.e)(y,w),Object(_.e)(y,$),Object(_.e)(y,x),Object(_.e)(x,S),Object(_.e)(y,L),Object(_.e)(y,M),Object(_.e)(M,P),Object(_.F)(e,C,h),Object(_.F)(e,z,h),Object(_.e)(z,A),Object(_.e)(A,D),Object(_.e)(A,F),Object(_.e)(z,Z),Object(_.e)(z,E),Object(_.e)(E,N),Object(_.e)(z,B),Object(_.e)(z,I),Object(_.e)(I,U)},p(e,t){16&t&&q!==(q=e[4].yAxis+"")&&Object(_.S)(n,q),32&t&&J!==(J=Object(k.c)(e[5])+"")&&Object(_.S)(b,J),18&t&&Y!==(Y=e[4].formatValue(e[1].count)+"")&&Object(_.S)(j,Y),10&t&&h!==(h=!e[3].cumulative&&e[3].incidence?e[6](e[1].count):"")&&Object(_.g)(d,"style",h),18&t&&G!==(G=e[4].formatValue(e[1].countRatio)+"")&&Object(_.S)(g,G),10&t&&f!==(f=e[3].cumulative||e[3].incidence?"":e[6](e[1].countRatio))&&Object(_.g)(m,"style",f),18&t&&W!==(W=e[4].formatValue(e[1].avg)+"")&&Object(_.S)(S,W),10&t&&V!==(V=!e[3].cumulative&&e[3].incidence?e[6](e[1].avg):"")&&Object(_.g)(x,"style",V),18&t&&Q!==(Q=e[4].formatValue(e[1].avgRatio)+"")&&Object(_.S)(P,Q),10&t&&R!==(R=e[3].cumulative||e[3].incidence?"":e[6](e[1].avgRatio))&&Object(_.g)(M,"style",R),32&t&&X!==(X=Object(k.c)(e[5])+"")&&Object(_.S)(F,X),18&t&&K!==(K=e[4].formatValue(e[1].countCumulative)+"")&&Object(_.S)(N,K),10&t&&T!==(T=e[3].cumulative&&e[3].incidence?e[6](e[1].countCumulative):"")&&Object(_.g)(E,"style",T),18&t&&ee!==(ee=e[4].formatValue(e[1].countRatioCumulative)+"")&&Object(_.S)(U,ee),10&t&&H!==(H=e[3].cumulative&&!e[3].incidence?e[6](e[1].countRatioCumulative):"")&&Object(_.g)(I,"style",H)},d(e){e&&Object(_.t)(t),e&&Object(_.t)(l),e&&Object(_.t)(r),e&&Object(_.t)(v),e&&Object(_.t)(y),e&&Object(_.t)(C),e&&Object(_.t)(z)}}}function P(e){let t;function c(e,t){return e[1]?e[0]?S:x:V}let n=c(e),o=n(e);return{c(){t=Object(_.u)("div"),o.c(),Object(_.g)(t,"aria-label","tooltip"),Object(_.g)(t,"class","tooltip svelte-1u8gn73")},m(e,c){Object(_.F)(e,t,c),o.m(t,null)},p(e,[i]){n===(n=c(e))&&o?o.p(e,i):(o.d(1),o=n(e),o&&(o.c(),o.m(t,null)))},i:_.J,o:_.J,d(e){e&&Object(_.t)(t),o.d()}}}function R(e,t,c){let n,o,a,s;Object(_.l)(e,w.C,(e=>c(7,n=e))),Object(_.l)(e,w.e,(e=>c(8,o=e))),Object(_.l)(e,w.q,(e=>c(4,a=e))),Object(_.l)(e,w.i,(e=>c(5,s=e)));let l,r,{invalid:u=!1}=t,{properties:b}=t;return e.$$set=e=>{"invalid"in e&&c(0,u=e.invalid),"properties"in e&&c(1,b=e.properties)},e.$$.update=()=>{2&e.$$.dirty&&c(2,l=b?b.value:0),128&e.$$.dirty&&c(3,r=n)},[u,b,l,r,a,s,function(e){const t=0===e?i.e:o(e);return"background-color: ".concat(t,"; color: ").concat(Object($.b)(t))},n]}class C extends _.b{constructor(e){super(),Object(_.E)(this,e,R,P,_.P,{invalid:0,properties:1})}}var z=C;function A(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function D(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?A(Object(c),!0).forEach((function(t){F(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):A(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function F(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}class Z{constructor(e,t){this.adapter=t,this.map=e,this.data=new Map,this.popup=new a.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup"}),this.topPopup=new a.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup",anchor:"top"}),this.tooltipState=null,this.selection=[],this.hovered={id:null,level:null},this.tooltipElement=document.createElement("div"),this.tooltip=new z({target:this.tooltipElement,props:{properties:null,invalid:!0}}),this.initListeners()}setData(e){this.data=e,this.tooltipState=null}initListeners(){if(this.adapter.levels.forEach((e=>{const t=h(e);this.map.on("mouseleave",t,this._onLevelMouseLeave.bind(this)),this.map.on("mousemove",t,this._onLevelMouseMove.bind(this)),this.map.on("click",t,this._onLevelMouseClick.bind(this))})),this.adapter.hasMegaCountyLevel){const e=h(o.j.id);this.map.on("mouseleave",e,this._onMegaMouseLeave.bind(this)),this.map.on("mousemove",e,this._onMegaMouseMove.bind(this)),this.map.on("click",e,this._onMegaMouseClick.bind(this))}this.map.on("mouseenter",f,this._onMapMouseEnter.bind(this)),this.map.on("mouseleave",f,this._onMapMouseLeave.bind(this)),this.map.on("mousemove",f,this._onMapMouseMove.bind(this))}get activePopup(){return"spike"===this.adapter.encoding.id?this.topPopup:this.popup}_onMapMouseEnter(){this.map.getCanvas().style.cursor="pointer"}_onLevelMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMegaMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMapMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove()}_onLevelMouseMove(e){const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this._updateHoverHighlight(t.id,t.properties.level),this._renderTooltip(e))}_onMegaMouseMove(e){if(e.defaultPrevented)return;const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this._updateHoverHighlight(t.id,t.properties.level),this._renderTooltip(e))}_onMapMouseMove(e){e.defaultPrevented||this._renderTooltip(e,!0)}_onLevelMouseClick(e){const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this.adapter.dispatch("select",{feature:t,originalEvent:e.originalEvent}))}_onMegaMouseClick(e){if(e.defaultPrevented)return;const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this.adapter.dispatch("select",{feature:t,originalEvent:e.originalEvent}))}_renderTooltip(e,t=!1){this.map.getCanvas().style.cursor="pointer";const c=e.features[0],i=this.activePopup;if(!this.tooltipState||this.tooltipState.id!==c.properties.id||this.tooltipState.invalid!==t){this.tooltipState={id:c.properties.id,invalid:t};let e={};c.properties.level===o.j.id&&this.adapter.hasMegaCountyLevel&&(e.population=Object(n.b)(c.properties,this.data)),this.tooltip.$set({properties:D(D(D({},c.properties),e),this.data.get(c.properties.id)||{}),invalid:t})}i.setLngLat(e.lngLat).setDOMContent(this.tooltipElement).addTo(this.map)}_updateState(e,t,c){this.map.setFeatureState({source:e,id:"string"==typeof t?Number.parseInt(t,10):t},c)}_updateHoverLayerVisibility(){const e=new Set(this.selection.map((e=>e.level)));null!=this.hovered.id&&e.add(this.hovered.level);const t=t=>{"none"!==this.map.getLayoutProperty(p(t),"visibility")!==e.has(t)&&this.map.setLayoutProperty(p(t),"visibility",e.has(t)?"visible":"none")};for(const e of this.adapter.levels)t(e);this.adapter.hasMegaCountyLevel&&t(o.j.id)}_updateHoverHighlight(e=null,t=null){this.hovered.id!=e&&(this.hovered.id&&this._updateState(r(this.hovered.level),this.hovered.id,{hover:!1}),e&&this._updateState(r(t),e,{hover:!0}),this.hovered.id=e,this.hovered.level=t,this._updateHoverLayerVisibility())}select(e){return this.selectMulti(e?[{info:e,color:i.c.selectedRegionOutline}]:[])[0]}selectMulti(e){const t=this.selection.slice();for(const e of this.selection)this._updateState(r(e.level),e.id,{select:!1});return this.selection=e.map((e=>{const t=Number(e.info.id);return this._updateState(r(e.info.level),t,{select:e.color}),{id:t,level:e.info.level,color:e.color}})),this._updateHoverLayerVisibility(),t}forceHover(e){this._updateHoverHighlight(e.id,e.properties.level)}isHovered(e){return!!e&&(e.id==this.hovered.id&&e.level===this.hovered.level)}}var E=c(479),N=c(344),T=c.n(N);class B{constructor(e,t){this.map=null,this.onZoom=e,this.resetBounds=new a.LngLatBounds(t),this.resetBoundsOptions={padding:30,linear:!1},this.stateZoom=1,this.initialZoomView=!0}_triggerZoom(e){const t=this.map.getZoom(),c=this.stateZoom,n=Math.pow(2,.75*(t-c));this.onZoom(n,e)}setMap(e){this.map=e,this.stateZoom=this.map.getZoom(),this.map.setMinZoom(this.stateZoom-1),this.map.on("zoom",(()=>{this._triggerZoom()}))}ready(){this.stateZoom=this.map.getZoom(),this._triggerZoom()}getZoom(){return this.map?this.map.getZoom():0}getMaxZoom(){return this.map?this.map.getMaxZoom():100}getMinZoom(){return this.map?this.map.getMinZoom():-100}zoomIn(){this.map&&(this.initialZoomView=!1,this.map.zoomIn())}zoomOut(){this.map&&(this.initialZoomView=!1,this.map.zoomOut())}focusOn(e){if(!e||!this.map)return;this.initialZoomView=!1;const t=T()(e);this.map.fitBounds(t,{maxZoom:1.5*this.getZoom(),linear:!1,essential:!0})}resetZoom(){this.map&&(this.initialZoomView=!0,this.map.fitBounds(this.resetBounds,this.resetBoundsOptions),this.map.once("idle",(()=>{this.stateZoom=this.map.getZoom(),this.map.setMinZoom(this.stateZoom-1),this._triggerZoom(!0)})))}resized(){this.initialZoomView&&this.map&&requestAnimationFrame((()=>{this.map&&this.map.fitBounds(this.resetBounds,this.resetBoundsOptions)}))}showStateLabels(e){this.map&&this.map.getLayer(v)&&this.map.setLayoutProperty(v,"visibility",e?"visible":"none")}toggleStateLabels(){this.map&&this.map.getLayer(v)&&this.showStateLabels("visible"!==this.map.getLayoutProperty(v,"visibility"))}}var I=c(204);function U(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function H(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?U(Object(c),!0).forEach((function(t){q(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):U(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function q(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}class J{constructor(){this.id="color",this.layers=[]}getVisibleLayers(e){return[h(e),"county"===e&&h(o.j.id)].filter(Boolean)}addLayers(){}encode(e,{level:t,stops:c,stopsMega:n}){e.setPaintProperty(h(t),"fill-color",l(c)),n&&e.setPaintProperty(h(o.j.id),"fill-color",l(n))}updateSources(){}}var Y=c(120),G=c(16);class W{constructor(e,t,c,n){this._sourceId=e,this._level=t,this._colorsDirty=!0,this.featureIds=[],this._valueLookup=new Map,this._valuePrimaryValue="value",this._valueToColor=()=>i.d,this._valueToSize=()=>0,this._vertexSource=c,this._fragmentSource=n,this._map=null,this.zoom=1}asLayer(e){return{id:e,type:"custom",renderingMode:"2d",onAdd:(e,t)=>this.onAdd(e,t),render:(e,t)=>this.render(e,t),onRemove:(e,t)=>this.onRemove(e,t),prerender:(e,t)=>this.preRender(e,t)}}_createVertices(e){return[e.x,e.y]}onAdd(e,t){this._map=e,this._vertexShader=t.createShader(t.VERTEX_SHADER),t.shaderSource(this._vertexShader,this._vertexSource),t.compileShader(this._vertexShader),this._fragmentShader=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(this._fragmentShader,this._fragmentSource),t.compileShader(this._fragmentShader),this._program=t.createProgram(),t.attachShader(this._program,this._vertexShader),t.attachShader(this._program,this._fragmentShader),t.linkProgram(this._program),this._uPos=t.getUniformLocation(this._program,"u_matrix"),this._uOpacity=t.getUniformLocation(this._program,"u_opacity"),this._uPixelToClip=t.getUniformLocation(this._program,"u_pixelToClip"),this._uZoom=t.getUniformLocation(this._program,"u_zoom"),this._uDevicePixelRatio=t.getUniformLocation(this._program,"u_device_pixel_ratio"),this._aPos=t.getAttribLocation(this._program,"a_pos"),this._centerBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._centerBuffer);const c=e.getSource(this._sourceId)._data.features.map((e=>{const t=e.geometry.coordinates,c=t[0],n=t[1];if(null==n||Number.isNaN(n))return[];this.featureIds.push(e.properties.id);const o=a.MercatorCoordinate.fromLngLat({lat:n,lng:c});return this._createVertices(o)})).flat();t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),this._verticesPerFeatures=c.length/3/this.featureIds.length,this._aColorAndValue=t.getAttribLocation(this._program,"a_colorAndValue"),this._colorAndValueBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._colorAndValueBuffer),this._colorAndValueData=new Float32Array(4*this.featureIds.length*this._verticesPerFeatures),this._colorAndValueData.fill(0),t.bufferData(t.ARRAY_BUFFER,this._colorAndValueData,t.STATIC_DRAW)}onRemove(e,t){this._map=null,t.deleteBuffer(this._centerBuffer),t.deleteBuffer(this._colorAndValueBuffer),t.deleteShader(this._fragmentShader),t.deleteShader(this._vertexShader),t.deleteProgram(this._program)}_prepareRender(e,t){e.useProgram(this._program),e.uniformMatrix4fv(this._uPos,!1,t);const c=this._map.painter.transform;e.uniform1f(this._uZoom,this.zoom),e.uniform2f(this._uPixelToClip,c.pixelsToGLUnits[0],c.pixelsToGLUnits[1]),e.uniform1f(this._uDevicePixelRatio,window.devicePixelRatio),e.bindBuffer(e.ARRAY_BUFFER,this._colorAndValueBuffer),e.enableVertexAttribArray(this._aColorAndValue),e.vertexAttribPointer(this._aColorAndValue,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._centerBuffer),e.enableVertexAttribArray(this._aPos),e.vertexAttribPointer(this._aPos,3,e.FLOAT,!1,0,0),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}preRender(e){if(this._colorsDirty){this._colorsDirty=!1;for(let e=0;e<this.featureIds.length;e++){const t=this.featureIds[e],c=this._valueLookup.has(t)?this._valueLookup.get(t)[this._valuePrimaryValue]:null,n=this._verticesPerFeatures;if(null==c||Number.isNaN(c)){for(let t=0;t<n;t++){const c=4*e*n+4*t;this._colorAndValueData[c]=0,this._colorAndValueData[c+1]=0,this._colorAndValueData[c+2]=0,this._colorAndValueData[c+3]=0}continue}const o=Object(G.g)(this._valueToColor(c)),i=this._valueToSize(c);for(let t=0;t<n;t++){const c=4*e*n+4*t;this._colorAndValueData[c]=o.r,this._colorAndValueData[c+1]=o.g,this._colorAndValueData[c+2]=o.b,this._colorAndValueData[c+3]=i}}e.bindBuffer(e.ARRAY_BUFFER,this._colorAndValueBuffer),e.bufferData(e.ARRAY_BUFFER,this._colorAndValueData,e.STATIC_DRAW)}}encode(e,t){this._colorsDirty=!0,this._valueToSize=e,this._valueToColor=t}updateSources(e,t){this._colorsDirty=!0,this._valueLookup=e,this._valuePrimaryValue=t}}class Q extends W{constructor(e,t){super(e,t,"\nuniform mat4 u_matrix;\nuniform float u_zoom;\nuniform vec2 u_pixelToClip;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n\n  vec2 pos = vec2(a_pos.z < 0.0 ? -1.0 : 1.0, abs(a_pos.z) < 2.0 ? -1.0 : 1.0);\n  p.xy += pos * u_pixelToClip * (u_zoom * a_colorAndValue.a + 1.0) * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n\n  v_data = vec4(pos, a_colorAndValue.a * u_zoom, 1.0);\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n}","\nprecision mediump float;\nuniform float u_opacity;\nuniform float u_device_pixel_ratio;\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n\n  float extrude_length = length(v_data.xy);\n  float radius = v_data.z;\n  float stroke_width = v_data.w;\n\n  float blur = -(1.0 / u_device_pixel_ratio / (radius + stroke_width));\n  float opacity_t = smoothstep(0.0, blur, extrude_length - 1.0);\n\n  float color_t = smoothstep(\n      blur,\n      0.0,\n      extrude_length - radius / (radius + stroke_width)\n  );\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = opacity_t * mix(fill_color, stroke_color, color_t);\n}")}_createVertices(e){return[e.x,e.y,-2,e.x,e.y,-1,e.x,e.y,1,e.x,e.y,2]}onAdd(e,t){super.onAdd(e,t),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);const c=new Uint16Array(6*this.featureIds.length);for(let e=0;e<this.featureIds.length;e++){const t=6*e,n=4*e;c[t]=n,c[t+1]=n+1,c[t+2]=n+2,c[t+3]=n+2,c[t+4]=n+3,c[t+5]=n}t.bufferData(t.ELEMENT_ARRAY_BUFFER,c,t.STATIC_DRAW)}onRemove(e,t){super.onRemove(e,t),t.deleteBuffer(this._indexBuffer)}render(e,t){super._prepareRender(e,t),e.uniform1f(this._uOpacity,i.a.fillOpacity),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.drawElements(e.TRIANGLES,6*this.featureIds.length,e.UNSIGNED_SHORT,0)}}class X{constructor(e,t){this.id="bubble",this.theme=e,this.layers=t.map((e=>m(e))),this.customLayers=new Map(t.map((e=>[e,new Q(u(e),e)])))}getVisibleLayers(e){return[h(e),m(e)]}onZoom(e){this.customLayers.forEach((t=>t.zoom=e))}getMaxZoom(e){return 50/this.theme.maxRadius[e]}addLayers(e,t){t.levels.forEach((t=>{e.addLayer(this.customLayers.get(t).asLayer(m(t)))}))}encode(e,{level:t,sensorType:c,valueMinMax:n,scale:o}){e.setPaintProperty(h(t),"fill-color",this.theme.countyFill);const i=this.theme.maxRadius[t],a=this.theme.radiusScale[c],s=Object(Y.c)(a).domain([0,n[1]]).range([0,i]).clamp(!0);return this.customLayers.get(t).encode(s,o),s}updateSources(e,t,c,n){this.customLayers.get(t).updateSources(c,n)}}class K extends W{constructor(e,t){super(e,t,"\nuniform mat4 u_matrix;\nuniform vec2 u_pixelToClip;\nuniform float u_zoom;\n\nuniform float u_size;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n  float height = (a_colorAndValue.a * u_zoom + 1.0);\n  float shift = a_pos.z * (u_size * u_zoom + 1.0);\n\n  p.y -= (1.0 - abs(a_pos.z)) * height * u_pixelToClip.y * p.w;\n  p.x += shift * u_pixelToClip.x * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n  float thickness = 1.0;\n  // encode the barycentric coordinate but such that the bottom line is not shown\n  v_data = vec4(-min(shift, 0.0), height, max(shift, 0.0), thickness);\n\n}","\n#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\nuniform float u_device_pixel_ratio;\nuniform float u_opacity;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\n// This is like\nfloat aastep (float threshold, float dist) {\n  float afwidth = fwidth(dist) * 0.5;\n  return smoothstep(threshold - afwidth, threshold + afwidth, dist);\n}\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n  vec3 barycentric = v_data.xyz;\n  float stroke_width = v_data.w;\n\n  // this will be our signed distance for the wireframe edge\n  float d = min(min(barycentric.x, barycentric.y), barycentric.z);\n  // compute the anti-aliased stroke edge\n  float edge = 1.0 - aastep(stroke_width, d);\n\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = mix(fill_color, stroke_color, edge);\n}")}_createVertices(e){return[e.x,e.y,-1,e.x,e.y,0,e.x,e.y,1]}asLayer(e){return{id:e,type:"custom",renderingMode:"2d",onAdd:(e,t)=>this.onAdd(e,t),render:(e,t)=>this.render(e,t),onRemove:(e,t)=>this.onRemove(e,t),prerender:(e,t)=>this.preRender(e,t)}}onAdd(e,t){t.getExtension("OES_standard_derivatives"),super.onAdd(e,t),this._uSize=t.getUniformLocation(this._program,"u_size")}onRemove(e,t){super.onRemove(e,t),t.deleteBuffer(this._indexBuffer)}render(e,t){super._prepareRender(e,t),e.uniform1f(this._uOpacity,i.b.fillOpacity),e.uniform1f(this._uSize,i.b.size[this._level]),e.drawArrays(e.TRIANGLES,0,this.featureIds.length*this._verticesPerFeatures)}}class ee{constructor(e,t){this.id="spike",this.theme=e,this.layers=t.map((e=>g(e))),this.customLayers=new Map(t.map((e=>[e,new K(u(e),e)])))}getVisibleLayers(e){return[h(e),g(e)]}onZoom(e){this.customLayers.forEach((t=>t.zoom=e))}getMaxZoom(e){return 100/this.theme.maxHeight[e]}addLayers(e,t){t.levels.forEach((t=>{e.addLayer(this.customLayers.get(t).asLayer(g(t)))}))}encode(e,{level:t,sensorType:c,valueMinMax:n,scale:o}){e.setPaintProperty(h(t),"fill-color",this.theme.countyFill);const i=n[1],a=this.theme.maxHeight[t],s=this.theme.heightScale[c],l=Object(Y.c)(s).range([0,a]).domain([0,i]).clamp(!0);return this.customLayers.get(t).encode(l,o),l}updateSources(e,t,c,n){this.customLayers.get(t).updateSources(c,n)}}const te=Object(n.d)();class ce extends class{constructor(e,t){this.dispatch=e,this.map=null,this.mapSetupReady=!1,this.mapSetupReadyPromiseResolver=()=>{},this.mapSetupReadyPromise=new Promise((e=>{this.mapSetupReadyPromiseResolver=e})),this.mapDataReady=!1,this.mapEncodingReady=!1,this.animationDuration=0,this.interactive=null,this.level=t.level,this.levels=t.levels,this.hasMegaCountyLevel=t.hasMegaCountyLevel,this.encodings=t.encodings,this.encoding=this.encodings[0];const c=Object(I.a)((e=>this.dispatch("zoom",e)),100);this.zoom=new B(((e,t)=>{const n="function"==typeof this.encoding.getMaxZoom?this.encoding.getMaxZoom(this.level):Number.POSITIVE_INFINITY;e=Math.min(n,e);for(const t of this.encodings)"function"==typeof t.onZoom&&t.onZoom(e);t&&this.map.triggerRepaint(),c(e)}),t.bounds)}initMap(e,t){this.map=new a.Map({attributionControl:!1,container:e,style:E,bounds:this.zoom.resetBounds,fitBounds:this.zoom.resetBoundsOptions,doubleClickZoom:!1,dragRotate:!1,pitchWithRotate:!1,touchPitch:!1,touchZoomRotate:!0,renderWorldCopies:!1,antialias:!0,maxZoom:8,minZoom:1}),this.zoom.setMap(this.map),this.map.touchZoomRotate.disableRotation();let c=null;const n=new Promise((e=>{c=e}));return this.map.on("idle",(()=>{this.dispatch("idle")})),this.map.on("load",(()=>{this.addSprites(),this.addSources().then((()=>{this.addLayers(),this.interactive=new Z(this.map,this)})).then((()=>{this._setupReady(),c(this)}))})),Object($.c)(e,(()=>{this.map.resize()})),this.setTitle(t),n}_setupReady(){this.zoom.showStateLabels("state"===this.level),this.zoom.ready(),this.markReady("setup")}markReady(e){switch(e){case"data":if(this.mapDataReady)return;this.mapDataReady=!0,this.dispatch("readyData");break;case"setup":if(this.mapSetupReady)return;this.mapSetupReady=!0,this.mapSetupReadyPromiseResolver(),this.dispatch("readySetup");break;case"encoding":if(this.mapEncodingReady)return;this.mapEncodingReady=!0,this.dispatch("readyEncoding")}this.mapSetupReady&&this.mapEncodingReady&&this.mapDataReady&&(this.dispatch("ready"),this.map.getContainer().dataset.ready="ready")}addSprites(){const e=16,t=document.createElement("canvas");t.width=e,t.height=e;const c=t.getContext("2d");c.clearRect(0,0,e,e);const n=c.createLinearGradient(0,0,e,e);n.addColorStop(0,"white"),n.addColorStop(.25,i.d),n.addColorStop(.5,"white"),n.addColorStop(.75,i.d),n.addColorStop(1,"white"),c.fillStyle=n,c.fillRect(0,0,e,e);const o=c.getImageData(0,0,e,e);this.map.addImage("hatching",o,{sdf:!0})}addSources(){return Promise.resolve()}animationOptions(e){return this.animationDuration?{[e+"-transition"]:{duration:this.animationDuration,delay:0}}:{}}addLevelSource(e,t,c){this.map.addSource(r(e),{type:"geojson",data:t}),this.map.addSource(u(e),{type:"geojson",data:c})}addFillLevelLayer(e){this.map.addLayer({id:h(e),source:r(e),type:"fill",layout:{visibility:"none"},paint:H({"fill-outline-color":i.c.countyOutlineWhenFilled,"fill-color":i.c.countyFill,"fill-opacity":["case",["==",["to-number",["feature-state","value"],s],s],0,1]},this.animationOptions("fill-color"))})}addHoverLevelLayer(e){this.map.addLayer({id:p(e),source:r(e),type:"line",layout:{visibility:"none"},paint:{"line-color":["case",["to-boolean",["feature-state","select"]],["feature-state","select"],i.c.hoverRegionOutline],"line-width":["case",["any",["to-boolean",["feature-state","hover"]],["to-boolean",["feature-state","select"]]],4,0]}})}addLayers(){}destroy(){this.mapSetupReady=!1,this.map&&(Object($.e)(this.map.getContainer()),this.map.remove(),this.zoom.map=null,this.map=null)}validateLevel(e){return this.levels.includes(e)?e:this.levels[0]}updateOptions(e,t,c,n,i,a,s,l){t=this.validateLevel(t);const r=this.level;if(this.level=t,this.encoding=this.encodings.find((t=>t.id===e)),this.hasMegaCountyLevel||(s=null),!this.map||!this.mapSetupReady)return;r!==t&&this.zoom.showStateLabels("state"===t);const u=this.encodings.flatMap((e=>e.layers));u.push(...this.levels.map((e=>h(e)))),this.hasMegaCountyLevel&&u.push(h(o.j.id));const b=new Set(this.encoding.getVisibleLayers(t));u.forEach((e=>{this.map.setLayoutProperty(e,"visibility",b.has(e)?"visible":"none")}));const O=this.encoding.encode(this.map,{level:t,sensorType:n,sensor:c,valueMinMax:i,stops:a,stopsMega:s,scale:l,baseZoom:this.zoom.stateZoom});return this.markReady("encoding"),O}updateSources(e,t,c="value"){e=this.validateLevel(e);const n=Math.random().toString(36);this._mapDataFlag=n,this.dispatch("loading",!0),Promise.all([t,this.mapSetupReadyPromise]).then((([t])=>{if(this._mapDataFlag!==n)return;this.map.once("idle",(()=>{this.dispatch("loading",!1)}));const i=new Map(t.map((e=>[e.geo_value.toUpperCase(),e])));this.interactive.setData(i),"county"===e&&this._updateSource(r(o.j.id),i,c),this._updateSource(r(e),i,c),this._updateSource(u(e),i,c);for(const t of this.encodings)t.updateSources(this.map,e,i,c);t.length>0&&this.markReady("data")}))}_updateSource(e,t,c="value"){console.assert(null!=this.map);const n=this.map.getSource(e);if(!n)return void console.error("invalid source");n._data.features.forEach((n=>{const o=n.properties.id,i=t.get(o);this.map.setFeatureState({source:e,id:Number.parseInt(n.id,10)},{value:i?i[c]:s})}))}selectMulti(e){if(this.map&&this.interactive){if(e.length<=1){const t=this.interactive.selection.slice();return this.select(e.length>0?e[0].info:null),t}return this.interactive.selectMulti(e)}}select(e){this.map&&this.interactive&&this.interactive.select(e)}focusOn(e){if(!e||!this.map)return;const t=this.map.getSource(r(e.level));if(!t)return;const c=t._data.features.find((t=>t.id===e.id));c&&this.zoom.focusOn(c)}isMissing(e){const t=this.map.getFeatureState({source:r(e.properties.level),id:"string"==typeof id?Number.parseInt(e.id,10):e.id});return null==t.value||t.value===s}selectRandom(){if(!this.map||!this.mapSetupReady)return;const e=this.map.getSource(r(this.level));if(!e)return;const t=o.f[this.level],c=e._data.features.find((e=>e.properties.id===t));if(c&&!this.isMissing(c))return void this.dispatch("select",{feature:c});const n=e._data.features.filter((e=>!this.isMissing(e)));if(0===n.length)return;const i=n[Math.floor(Math.random()*(n.length-1))];this.dispatch("select",{feature:i})}setTitle(e){if(!this.map)return;const t=this.map.getContainer().querySelector("canvas");t&&(t.setAttribute("role","figure"),t.setAttribute("aria-roledescription","visualization"),t.setAttribute("aria-label","US Map showing: ".concat(e)))}}{constructor(e){super(e,{bounds:n.a.states,encodings:[new J(o.k),new X(i.a,o.k),new ee(i.b,o.k)],level:"county",levels:o.k,hasMegaCountyLevel:!0})}addLevelSources(){const e=this.map;return te.then((t=>{e.addSource(r(o.j.id),{type:"geojson",data:t.mega}),this.levels.forEach((e=>{this.addLevelSource(e,t[e].border,t[e].center)}))}))}addSources(){return Promise.all([(e=this.map,te.then((t=>{e.addSource(b,{type:"geojson",data:t.cities})}))),this.addLevelSources()]);var e}addLayers(){const e=this.map;e.addLayer({id:f,source:r("state"),type:"fill",paint:{"fill-color":i.d,"fill-outline-color":i.c.stateOutline,"fill-pattern":"hatching"}}),this.addFillLevelLayer(o.j.id),this.levels.forEach((e=>{this.addFillLevelLayer(e)})),this.addHoverLevelLayer(o.j.id),this.levels.forEach((e=>{this.addHoverLevelLayer(e)})),this.encodings.forEach((t=>{t.addLayers(e,this)})),function(e){const t=(t,c,n={})=>{e.addLayer(d(d(d({id:t,source:b,type:"symbol"},c?{filter:c}:{}),n),{},{layout:{"text-field":["get","name"],"text-font":["Open Sans Regular"],"text-size":12},paint:{"text-halo-color":"#fff","text-halo-width":1.5}}))};t(y.pit,["==","name","Pittsburgh"],{maxzoom:8}),t(y.pit[1],[">","population",9e5],{maxzoom:4}),t(y.pit[2],[">","population",5e5],{maxzoom:6,minzoom:4}),t(y.pit[3],[">","population",1e5],{maxzoom:8,minzoom:6}),t(y.pit[4],void 0,{minzoom:8})}(e),function(e){e.addLayer({id:v,source:u("state"),type:"symbol",maxzoom:8,layout:{"text-field":["upcase",["get","name"]],"text-font":["Open Sans Bold"],"text-size":11},paint:{"text-opacity":.5,"text-halo-color":"#fff","text-halo-width":1}})}(e)}}},483:function(e,t,c){"use strict";var n=c(1),o=c(6),i=c(466);c(348);function a(e){let t,c,o=e[3].toLocaleDateString()+"";return{c(){t=Object(n.u)("span"),c=Object(n.Z)(o),Object(n.g)(t,"data-testid","currentdate")},m(e,o){Object(n.F)(e,t,o),Object(n.e)(t,c)},p(e,t){8&t&&o!==(o=e[3].toLocaleDateString()+"")&&Object(n.S)(c,o)},d(e){e&&Object(n.t)(t)}}}function s(e){let t,c,o,s,l,r,u;l=new i.a({props:{sensor:e[2],className:"info"}});let b=e[0]&&a(e);return{c(){t=Object(n.u)("h2"),c=Object(n.u)("span"),o=Object(n.Z)(e[1]),s=Object(n.V)(),Object(n.n)(l.$$.fragment),r=Object(n.V)(),b&&b.c(),Object(n.g)(t,"class","banner svelte-11a77rv")},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(c,s),Object(n.I)(l,c,null),Object(n.e)(t,r),b&&b.m(t,null),u=!0},p(e,[c]){(!u||2&c)&&Object(n.S)(o,e[1]);const i={};4&c&&(i.sensor=e[2]),l.$set(i),e[0]?b?b.p(e,c):(b=a(e),b.c(),b.m(t,null)):b&&(b.d(1),b=null)},i(e){u||(Object(n.cb)(l.$$.fragment,e),u=!0)},o(e){Object(n.db)(l.$$.fragment,e),u=!1},d(e){e&&Object(n.t)(t),Object(n.r)(l),b&&b.d()}}}function l(e,t,c){let i,a,s;Object(n.l)(e,o.r,(e=>c(1,i=e))),Object(n.l)(e,o.q,(e=>c(2,a=e))),Object(n.l)(e,o.i,(e=>c(3,s=e)));let{showDate:l=!1}=t;return e.$$set=e=>{"showDate"in e&&c(0,l=e.showDate)},[l,i,a,s]}class r extends n.b{constructor(e){super(),Object(n.E)(this,e,l,s,n.P,{showDate:0})}}var u=r,b=c(212);c(349);function O(e){let t,c,o,i,a,s,l,r,u,b,O;return{c(){t=Object(n.u)("div"),c=Object(n.u)("button"),i=Object(n.V)(),a=Object(n.u)("button"),l=Object(n.V)(),r=Object(n.u)("button"),Object(n.g)(c,"aria-pressed",o="color"===e[4]?"true":"false"),Object(n.g)(c,"class","uk-button uk-button-default uk-button-small choropleth svelte-1eqd11i"),Object(n.g)(c,"data-uk-icon","icon: blank"),Object(n.g)(c,"title","Switch to Choropleth"),Object(n.bb)(c,"uk-active","color"===e[4]),Object(n.g)(a,"aria-pressed",s="bubble"===e[4]?"true":"false"),Object(n.g)(a,"class","uk-button uk-button-default uk-button-small bubble svelte-1eqd11i"),Object(n.g)(a,"data-uk-icon","icon: blank"),Object(n.g)(a,"title","Switch to Bubble Map"),Object(n.bb)(a,"uk-active","bubble"===e[4]),Object(n.g)(r,"aria-pressed",u="spike"===e[4]?"true":"false"),Object(n.g)(r,"class","uk-button uk-button-default uk-button-small spike svelte-1eqd11i"),Object(n.g)(r,"data-uk-icon","icon: blank"),Object(n.g)(r,"title","Switch to Spike Map"),Object(n.bb)(r,"uk-active","spike"===e[4]),Object(n.g)(t,"class","uk-vertical-button-group svelte-1eqd11i")},m(o,s){Object(n.F)(o,t,s),Object(n.e)(t,c),Object(n.e)(t,i),Object(n.e)(t,a),Object(n.e)(t,l),Object(n.e)(t,r),b||(O=[Object(n.H)(c,"click",e[8]),Object(n.H)(a,"click",e[9]),Object(n.H)(r,"click",e[10])],b=!0)},p(e,t){16&t&&o!==(o="color"===e[4]?"true":"false")&&Object(n.g)(c,"aria-pressed",o),16&t&&Object(n.bb)(c,"uk-active","color"===e[4]),16&t&&s!==(s="bubble"===e[4]?"true":"false")&&Object(n.g)(a,"aria-pressed",s),16&t&&Object(n.bb)(a,"uk-active","bubble"===e[4]),16&t&&u!==(u="spike"===e[4]?"true":"false")&&Object(n.g)(r,"aria-pressed",u),16&t&&Object(n.bb)(r,"uk-active","spike"===e[4])},d(e){e&&Object(n.t)(t),b=!1,Object(n.O)(O)}}}function d(e){let t;return{c(){t=Object(n.u)("div"),Object(n.g)(t,"class","loader loading svelte-1eqd11i")},m(e,c){Object(n.F)(e,t,c)},d(e){e&&Object(n.t)(t)}}}function j(e){let t,c,o,i,a,s,l,r,u,b,j,h,p,m,g,f,v=e[2]&&O(e),y=e[3]&&d();return{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),o=Object(n.u)("button"),a=Object(n.V)(),s=Object(n.u)("button"),r=Object(n.V)(),u=Object(n.u)("div"),b=Object(n.u)("button"),h=Object(n.V)(),v&&v.c(),p=Object(n.V)(),y&&y.c(),Object(n.g)(o,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),Object(n.g)(o,"data-uk-icon","icon: plus"),Object(n.g)(o,"type","button"),Object(n.g)(o,"title","Zoom in"),Object(n.g)(o,"aria-label","Zoom in"),o.disabled=i=!e[1]||e[1].getZoom()<=e[1].getMinZoom(),Object(n.g)(s,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),Object(n.g)(s,"data-uk-icon","icon: minus"),Object(n.g)(s,"type","button"),Object(n.g)(s,"title","Zoom out"),Object(n.g)(s,"aria-label","Zoom out"),s.disabled=l=!e[1]||e[1].getZoom()>=e[1].getMaxZoom(),Object(n.g)(c,"class","uk-vertical-button-group svelte-1eqd11i"),Object(n.g)(b,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),Object(n.g)(b,"type","button"),Object(n.g)(b,"data-uk-icon","icon: home"),Object(n.g)(b,"title","Show entire map"),Object(n.g)(b,"aria-label","Show entire map"),b.disabled=j=!e[1],Object(n.g)(u,"class","svelte-1eqd11i"),Object(n.g)(t,"class",m="root "+e[0]+" svelte-1eqd11i")},m(i,l){Object(n.F)(i,t,l),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(c,a),Object(n.e)(c,s),Object(n.e)(t,r),Object(n.e)(t,u),Object(n.e)(u,b),Object(n.e)(t,h),v&&v.m(t,null),Object(n.e)(t,p),y&&y.m(t,null),g||(f=[Object(n.H)(o,"click",e[5]),Object(n.H)(s,"click",e[6]),Object(n.H)(b,"click",e[7])],g=!0)},p(e,[c]){2&c&&i!==(i=!e[1]||e[1].getZoom()<=e[1].getMinZoom())&&(o.disabled=i),2&c&&l!==(l=!e[1]||e[1].getZoom()>=e[1].getMaxZoom())&&(s.disabled=l),2&c&&j!==(j=!e[1])&&(b.disabled=j),e[2]?v?v.p(e,c):(v=O(e),v.c(),v.m(t,p)):v&&(v.d(1),v=null),e[3]?y||(y=d(),y.c(),y.m(t,null)):y&&(y.d(1),y=null),1&c&&m!==(m="root "+e[0]+" svelte-1eqd11i")&&Object(n.g)(t,"class",m)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),v&&v.d(),y&&y.d(),g=!1,Object(n.O)(f)}}}function h(e,t,c){let i;Object(n.l)(e,o.s,(e=>c(4,i=e)));let{className:a=""}=t,{zoom:s}=t,{showEncodings:l=!1}=t,{loading:r=!1}=t;return e.$$set=e=>{"className"in e&&c(0,a=e.className),"zoom"in e&&c(1,s=e.zoom),"showEncodings"in e&&c(2,l=e.showEncodings),"loading"in e&&c(3,r=e.loading)},[a,s,l,r,i,()=>{Object(b.a)("map","zoomIn"),s.zoomIn()},()=>{Object(b.a)("map","zoomOut"),s.zoomOut()},()=>{Object(b.a)("map","zoomReset"),s.resetZoom()},()=>{o.s.set("color")},()=>{o.s.set("bubble")},()=>{o.s.set("spike")}]}class p extends n.b{constructor(e){super(),Object(n.E)(this,e,h,j,n.P,{className:0,zoom:1,showEncodings:2,loading:3})}}var m=p,g=c(477),f=c(468),v=c(59);c(350);function y(e,t,c){const n=e.slice();return n[7]=t[c],n}function _(e){let t,c,o,i=e[0].high+"";return{c(){t=Object(n.u)("li"),c=Object(n.Z)(i),Object(n.g)(t,"class","tick svelte-1u6a1mr"),Object(n.U)(t,"background-image","linear-gradient(to right, "+e[7].color+", "+e[7].nextColor+")"),Object(n.g)(t,"title",o=e[7].label)},m(e,o){Object(n.F)(e,t,o),Object(n.e)(t,c)},p(e,a){1&a&&i!==(i=e[0].high+"")&&Object(n.S)(c,i),1&a&&Object(n.U)(t,"background-image","linear-gradient(to right, "+e[7].color+", "+e[7].nextColor+")"),1&a&&o!==(o=e[7].label)&&Object(n.g)(t,"title",o)},d(e){e&&Object(n.t)(t)}}}function k(e){let t,c,o,i,a,s,l,r,u,b,O,d=e[0].high+"",j=e[0].high+"",h=e[0].labels,p=[];for(let t=0;t<h.length;t+=1)p[t]=_(y(e,h,t));return{c(){t=Object(n.u)("ul"),c=Object(n.u)("li"),o=Object(n.Z)(d),i=Object(n.V)(),a=Object(n.u)("li"),s=Object(n.Z)(j),r=Object(n.V)();for(let e=0;e<p.length;e+=1)p[e].c();u=Object(n.V)(),b=Object(n.u)("li"),Object(n.g)(c,"class","tick tick-single svelte-1u6a1mr"),Object(n.U)(c,"background","repeating-linear-gradient(-45deg, "+v.d+", white 30%)"),Object(n.g)(c,"title","NA"),Object(n.g)(a,"class","tick tick-single tick-space svelte-1u6a1mr"),Object(n.U)(a,"background-color",v.e),Object(n.g)(a,"title",l=e[0].low),Object(n.g)(b,"class","tick tick-last svelte-1u6a1mr"),Object(n.g)(b,"title",O=e[0].high),Object(n.g)(t,"data-testid","color-legend"),Object(n.g)(t,"class","svelte-1u6a1mr")},m(e,l){Object(n.F)(e,t,l),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(t,i),Object(n.e)(t,a),Object(n.e)(a,s),Object(n.e)(t,r);for(let e=0;e<p.length;e+=1)p[e].m(t,null);Object(n.e)(t,u),Object(n.e)(t,b)},p(e,[c]){if(1&c&&d!==(d=e[0].high+"")&&Object(n.S)(o,d),1&c&&j!==(j=e[0].high+"")&&Object(n.S)(s,j),1&c&&l!==(l=e[0].low)&&Object(n.g)(a,"title",l),1&c){let n;for(h=e[0].labels,n=0;n<h.length;n+=1){const o=y(e,h,n);p[n]?p[n].p(o,c):(p[n]=_(o),p[n].c(),p[n].m(t,u))}for(;n<p.length;n+=1)p[n].d(1);p.length=h.length}1&c&&O!==(O=e[0].high)&&Object(n.g)(b,"title",O)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),Object(n.s)(p,e)}}}function w(e,t,c){let i,a,s,l,r,u,b;return Object(n.l)(e,o.F,(e=>c(1,i=e))),Object(n.l)(e,o.q,(e=>c(2,a=e))),Object(n.l)(e,o.k,(e=>c(3,s=e))),Object(n.l)(e,o.e,(e=>c(4,l=e))),Object(n.l)(e,o.C,(e=>c(5,r=e))),Object(n.l)(e,o.v,(e=>c(6,u=e))),e.$$.update=()=>{126&e.$$.dirty&&c(0,b=Object(f.c)(i,a,s,l,r,u))},[b,i,a,s,l,r,u]}class $ extends n.b{constructor(e){super(),Object(n.E)(this,e,w,k,n.P,{})}}var x=$,S=c(464);c(351);function V(e,t,c){const n=e.slice();return n[9]=t[c],n}function L(e){let t,c,o,i,a,s,l=e[9].label+"";return{c(){t=Object(n.u)("li"),c=Object(n.u)("div"),o=Object(n.u)("div"),i=Object(n.V)(),a=Object(n.u)("span"),s=Object(n.Z)(l),Object(n.g)(o,"class","bubble svelte-19hi244"),Object(n.U)(o,"width",2*e[2](e[9].value)*e[0]+"px"),Object(n.U)(o,"height",2*e[2](e[9].value)*e[0]+"px"),Object(n.U)(o,"background",Object(S.d)(e[9].color,v.a.fillOpacity)),Object(n.U)(o,"border-color",e[9].color),Object(n.g)(c,"class","bubble-wrapper svelte-19hi244"),Object(n.g)(t,"class","svelte-19hi244")},m(e,l){Object(n.F)(e,t,l),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(t,i),Object(n.e)(t,a),Object(n.e)(a,s)},p(e,t){7&t&&Object(n.U)(o,"width",2*e[2](e[9].value)*e[0]+"px"),7&t&&Object(n.U)(o,"height",2*e[2](e[9].value)*e[0]+"px"),2&t&&Object(n.U)(o,"background",Object(S.d)(e[9].color,v.a.fillOpacity)),2&t&&Object(n.U)(o,"border-color",e[9].color),2&t&&l!==(l=e[9].label+"")&&Object(n.S)(s,l)},d(e){e&&Object(n.t)(t)}}}function M(e){let t,c,o,i,a,s,l,r,u,b,O,d,j,h,p=e[1].high+"",m=e[1].labels,g=[];for(let t=0;t<m.length;t+=1)g[t]=L(V(e,m,t));return{c(){t=Object(n.u)("ul"),c=Object(n.u)("li"),o=Object(n.u)("div"),i=Object(n.u)("div"),a=Object(n.V)(),s=Object(n.u)("span"),s.textContent="NA",l=Object(n.V)();for(let e=0;e<g.length;e+=1)g[e].c();r=Object(n.V)(),u=Object(n.u)("li"),b=Object(n.u)("div"),O=Object(n.u)("div"),d=Object(n.V)(),j=Object(n.u)("span"),h=Object(n.Z)(p),Object(n.g)(i,"class","na svelte-19hi244"),Object(n.U)(i,"background","repeating-linear-gradient(-45deg, "+v.d+", white 30%)"),Object(n.g)(o,"class","bubble-wrapper svelte-19hi244"),Object(n.g)(c,"class","svelte-19hi244"),Object(n.U)(O,"width",2*e[2](e[1].highValue)*e[0]+"px"),Object(n.U)(O,"height",2*e[2](e[1].highValue)*e[0]+"px"),Object(n.U)(O,"background",Object(S.d)(e[1].highColor,v.a.fillOpacity)),Object(n.U)(O,"border-color",e[1].highColor),Object(n.g)(O,"class","bubble svelte-19hi244"),Object(n.g)(b,"class","bubble-wrapper svelte-19hi244"),Object(n.g)(u,"class","svelte-19hi244"),Object(n.g)(t,"data-testid","bubble-legend"),Object(n.g)(t,"class","svelte-19hi244")},m(e,p){Object(n.F)(e,t,p),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(o,i),Object(n.e)(c,a),Object(n.e)(c,s),Object(n.e)(t,l);for(let e=0;e<g.length;e+=1)g[e].m(t,null);Object(n.e)(t,r),Object(n.e)(t,u),Object(n.e)(u,b),Object(n.e)(b,O),Object(n.e)(u,d),Object(n.e)(u,j),Object(n.e)(j,h)},p(e,[c]){if(7&c){let n;for(m=e[1].labels,n=0;n<m.length;n+=1){const o=V(e,m,n);g[n]?g[n].p(o,c):(g[n]=L(o),g[n].c(),g[n].m(t,r))}for(;n<g.length;n+=1)g[n].d(1);g.length=m.length}7&c&&Object(n.U)(O,"width",2*e[2](e[1].highValue)*e[0]+"px"),7&c&&Object(n.U)(O,"height",2*e[2](e[1].highValue)*e[0]+"px"),2&c&&Object(n.U)(O,"background",Object(S.d)(e[1].highColor,v.a.fillOpacity)),2&c&&Object(n.U)(O,"border-color",e[1].highColor),2&c&&p!==(p=e[1].high+"")&&Object(n.S)(h,p)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),Object(n.s)(g,e)}}}function P(e,t,c){let i,a,s,l,r,u,b;Object(n.l)(e,o.F,(e=>c(3,i=e))),Object(n.l)(e,o.q,(e=>c(4,a=e))),Object(n.l)(e,o.k,(e=>c(5,s=e))),Object(n.l)(e,o.e,(e=>c(6,l=e))),Object(n.l)(e,o.C,(e=>c(7,r=e))),Object(n.l)(e,o.v,(e=>c(8,u=e))),Object(n.l)(e,o.d,(e=>c(2,b=e)));let O,{zoom:d=1}=t;return e.$$set=e=>{"zoom"in e&&c(0,d=e.zoom)},e.$$.update=()=>{504&e.$$.dirty&&c(1,O=Object(f.c)(i,a,s,l,r,u))},[d,O,b,i,a,s,l,r,u]}class R extends n.b{constructor(e){super(),Object(n.E)(this,e,P,M,n.P,{zoom:0})}}var C=R;c(352);function z(e,t,c){const n=e.slice();return n[13]=t[c],n}function A(e){let t,c,o,i,a,s,l,r,u,b,O,d,j=e[13].label+"";return{c(){t=Object(n.u)("li"),c=Object(n.Y)("svg"),o=Object(n.Y)("g"),i=Object(n.Y)("path"),b=Object(n.V)(),O=Object(n.u)("span"),d=Object(n.Z)(j),Object(n.g)(i,"d",a=e[3](e[13].value)),Object(n.g)(i,"class","spike svelte-f727e1"),Object(n.g)(i,"fill",s=Object(S.d)(e[13].color,v.b.fillOpacity)),Object(n.g)(i,"stroke",l=Object(S.d)(e[13].color,v.b.strokeOpacity)),Object(n.U)(o,"transform","translate("+F+"px, "+F+"px)"),Object(n.g)(c,"width",r=2*e[1]+2*F),Object(n.g)(c,"height",u=e[2](e[13].value)*e[0]+2*F),Object(n.g)(c,"class","svelte-f727e1"),Object(n.g)(t,"class","legend-direct-tick svelte-f727e1")},m(e,a){Object(n.F)(e,t,a),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(o,i),Object(n.e)(t,b),Object(n.e)(t,O),Object(n.e)(O,d)},p(e,t){24&t&&a!==(a=e[3](e[13].value))&&Object(n.g)(i,"d",a),16&t&&s!==(s=Object(S.d)(e[13].color,v.b.fillOpacity))&&Object(n.g)(i,"fill",s),16&t&&l!==(l=Object(S.d)(e[13].color,v.b.strokeOpacity))&&Object(n.g)(i,"stroke",l),2&t&&r!==(r=2*e[1]+2*F)&&Object(n.g)(c,"width",r),21&t&&u!==(u=e[2](e[13].value)*e[0]+2*F)&&Object(n.g)(c,"height",u),16&t&&j!==(j=e[13].label+"")&&Object(n.S)(d,j)},d(e){e&&Object(n.t)(t)}}}function D(e){let t,c,o,i,a,s,l,r,u,b,O,d,j,h,p,m,g,f,y,_=e[4].high+"",k=e[4].labels,w=[];for(let t=0;t<k.length;t+=1)w[t]=A(z(e,k,t));return{c(){t=Object(n.u)("ul"),c=Object(n.u)("li"),o=Object(n.u)("div"),i=Object(n.V)(),a=Object(n.u)("span"),a.textContent="NA",s=Object(n.V)();for(let e=0;e<w.length;e+=1)w[e].c();l=Object(n.V)(),r=Object(n.u)("li"),u=Object(n.Y)("svg"),b=Object(n.Y)("g"),O=Object(n.Y)("path"),g=Object(n.V)(),f=Object(n.u)("span"),y=Object(n.Z)(_),Object(n.g)(o,"class","na svelte-f727e1"),Object(n.U)(o,"background","repeating-linear-gradient(-45deg, "+v.d+", white 30%)"),Object(n.g)(c,"class","svelte-f727e1"),Object(n.g)(O,"d",d=e[3](e[4].highValue)),Object(n.g)(O,"class","spike svelte-f727e1"),Object(n.g)(O,"fill",j=Object(S.d)(e[4].highColor,v.b.fillOpacity)),Object(n.g)(O,"stroke",h=Object(S.d)(e[4].highColor,v.b.strokeOpacity)),Object(n.U)(b,"transform","translate("+F+"px, "+F+"px)"),Object(n.g)(u,"width",p=2*e[1]+2*F),Object(n.g)(u,"height",m=e[2](e[4].highValue)*e[0]+2*F),Object(n.g)(u,"class","svelte-f727e1"),Object(n.g)(r,"class","legend-direct-tick svelte-f727e1"),Object(n.g)(t,"class","legend-ticks svelte-f727e1"),Object(n.g)(t,"data-testid","spike-legend")},m(e,d){Object(n.F)(e,t,d),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(c,i),Object(n.e)(c,a),Object(n.e)(t,s);for(let e=0;e<w.length;e+=1)w[e].m(t,null);Object(n.e)(t,l),Object(n.e)(t,r),Object(n.e)(r,u),Object(n.e)(u,b),Object(n.e)(b,O),Object(n.e)(r,g),Object(n.e)(r,f),Object(n.e)(f,y)},p(e,[c]){if(31&c){let n;for(k=e[4].labels,n=0;n<k.length;n+=1){const o=z(e,k,n);w[n]?w[n].p(o,c):(w[n]=A(o),w[n].c(),w[n].m(t,l))}for(;n<w.length;n+=1)w[n].d(1);w.length=k.length}24&c&&d!==(d=e[3](e[4].highValue))&&Object(n.g)(O,"d",d),16&c&&j!==(j=Object(S.d)(e[4].highColor,v.b.fillOpacity))&&Object(n.g)(O,"fill",j),16&c&&h!==(h=Object(S.d)(e[4].highColor,v.b.strokeOpacity))&&Object(n.g)(O,"stroke",h),2&c&&p!==(p=2*e[1]+2*F)&&Object(n.g)(u,"width",p),21&c&&m!==(m=e[2](e[4].highValue)*e[0]+2*F)&&Object(n.g)(u,"height",m),16&c&&_!==(_=e[4].high+"")&&Object(n.S)(y,_)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),Object(n.s)(w,e)}}}const F=2;function Z(e,t,c){let i,a,s,l,r,u,b;Object(n.l)(e,o.k,(e=>c(5,i=e))),Object(n.l)(e,o.F,(e=>c(7,a=e))),Object(n.l)(e,o.q,(e=>c(8,s=e))),Object(n.l)(e,o.e,(e=>c(9,l=e))),Object(n.l)(e,o.C,(e=>c(10,r=e))),Object(n.l)(e,o.v,(e=>c(11,u=e))),Object(n.l)(e,o.E,(e=>c(2,b=e)));let O,d,j,h,{zoom:p=1}=t,m=()=>"";return e.$$set=e=>{"zoom"in e&&c(0,p=e.zoom)},e.$$.update=()=>{if(33&e.$$.dirty&&c(1,O=v.b.size[i]*p),33&e.$$.dirty&&c(6,d=v.b.maxHeight[i]*p),4e3&e.$$.dirty&&c(4,j=Object(f.c)(a,s,i,l,r,u)),64&e.$$.dirty&&(h=d+2*F),7&e.$$.dirty){const e=b,t=p,n=O;c(3,m=c=>"M 0 ".concat(e(c)*t," L ").concat(n," 0 L ").concat(2*n," ").concat(e(c)*t))}},[p,O,b,m,j,i,d,a,s,l,r,u]}class E extends n.b{constructor(e){super(),Object(n.E)(this,e,Z,D,n.P,{zoom:0})}}var N=E,T=c(4);c(353);function B(e){let t,c,o,i,a=e[5](e[2])+"";return{c(){t=Object(n.u)("div"),c=Object(n.Z)(a),o=Object(n.Z)("% Coverage"),Object(n.g)(t,"class","root base-font-size container-style svelte-9d0ztf"),Object(n.g)(t,"data-testid","coverage"),Object(n.g)(t,"title",i="Showing data for ".concat(e[2]," ").concat(e[4].labelPlural," out of ").concat(e[3]," ").concat(e[4].labelPlural," (").concat(e[5](e[2]),"%)")),Object(n.bb)(t,"hidden",!e[0]||!e[0].data),Object(n.bb)(t,"loading-bg",e[1])},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c),Object(n.e)(t,o)},p(e,[o]){4&o&&a!==(a=e[5](e[2])+"")&&Object(n.S)(c,a),28&o&&i!==(i="Showing data for ".concat(e[2]," ").concat(e[4].labelPlural," out of ").concat(e[3]," ").concat(e[4].labelPlural," (").concat(e[5](e[2]),"%)"))&&Object(n.g)(t,"title",i),1&o&&Object(n.bb)(t,"hidden",!e[0]||!e[0].data),2&o&&Object(n.bb)(t,"loading-bg",e[1])},i:n.J,o:n.J,d(e){e&&Object(n.t)(t)}}}function I(e,t,c){let n,o,{summary:i=null}=t,a=!0,s=0;return e.$$set=e=>{"summary"in e&&c(0,i=e.summary)},e.$$.update=()=>{1&e.$$.dirty&&c(3,n=i?i.items.reduce(((e,t)=>e+(t.level===i.level?1:0)),0):0),1&e.$$.dirty&&c(4,o=Object(T.g)(i?i.level:"county")),1&e.$$.dirty&&(c(1,a=!0),i&&i.data&&i.data.then((e=>{let t=0;for(const c of e)c.geo_value.endsWith("000")||null==c.value||Number.isNaN(c.value)||t++;c(1,a=!1),c(2,s=t)})))},[i,a,s,n,o,function(e){return Math.round(100*e/n)}]}class U extends n.b{constructor(e){super(),Object(n.E)(this,e,I,B,n.P,{summary:0})}}var H=U;c(354);function q(e){let t,c;return t=new N({props:{zoom:e[3]}}),{c(){Object(n.n)(t.$$.fragment)},m(e,o){Object(n.I)(t,e,o),c=!0},p(e,c){const n={};8&c&&(n.zoom=e[3]),t.$set(n)},i(e){c||(Object(n.cb)(t.$$.fragment,e),c=!0)},o(e){Object(n.db)(t.$$.fragment,e),c=!1},d(e){Object(n.r)(t,e)}}}function J(e){let t,c;return t=new C({props:{zoom:e[3]}}),{c(){Object(n.n)(t.$$.fragment)},m(e,o){Object(n.I)(t,e,o),c=!0},p(e,c){const n={};8&c&&(n.zoom=e[3]),t.$set(n)},i(e){c||(Object(n.cb)(t.$$.fragment,e),c=!0)},o(e){Object(n.db)(t.$$.fragment,e),c=!1},d(e){Object(n.r)(t,e)}}}function Y(e){let t,c;return t=new x({}),{c(){Object(n.n)(t.$$.fragment)},m(e,o){Object(n.I)(t,e,o),c=!0},p:n.J,i(e){c||(Object(n.cb)(t.$$.fragment,e),c=!0)},o(e){Object(n.db)(t.$$.fragment,e),c=!1},d(e){Object(n.r)(t,e)}}}function G(e){let t,c,o,i,a,s,l,r,b,O,d,j,h,p,f,v,y;o=new u({props:{showDate:e[4]}}),s=new m({props:{zoom:e[0]?e[0].zoom:null,showEncodings:!0,loading:e[1]}}),b=new g.a({props:{sensor:e[6],className:"container-bg container-style encoding-wrapper"}});const _=[Y,J,q],k=[];function w(e,t){return"color"===e[7]?0:"bubble"===e[7]?1:"spike"===e[7]?2:-1}return~(j=w(e))&&(h=k[j]=_[j](e)),v=new H({props:{summary:e[5]}}),{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),Object(n.n)(o.$$.fragment),i=Object(n.V)(),a=Object(n.u)("div"),Object(n.n)(s.$$.fragment),l=Object(n.V)(),r=Object(n.u)("div"),Object(n.n)(b.$$.fragment),O=Object(n.V)(),d=Object(n.u)("div"),h&&h.c(),p=Object(n.V)(),f=Object(n.u)("div"),Object(n.n)(v.$$.fragment),Object(n.g)(c,"class","title-container container-bg svelte-azwlie"),Object(n.g)(a,"class","map-controls-container svelte-azwlie"),Object(n.g)(t,"class","map-top-overlay svelte-azwlie"),Object(n.g)(d,"class","container-bg container-style"),Object(n.bb)(d,"loading-bg",e[2]),Object(n.g)(r,"class","legend-container base-font-size svelte-azwlie"),Object(n.g)(r,"aria-label","map legend"),Object(n.g)(f,"class","summary-container svelte-azwlie"),Object(n.g)(f,"aria-label","map data summary")},m(e,u){Object(n.F)(e,t,u),Object(n.e)(t,c),Object(n.I)(o,c,null),Object(n.e)(t,i),Object(n.e)(t,a),Object(n.I)(s,a,null),Object(n.F)(e,l,u),Object(n.F)(e,r,u),Object(n.I)(b,r,null),Object(n.e)(r,O),Object(n.e)(r,d),~j&&k[j].m(d,null),Object(n.F)(e,p,u),Object(n.F)(e,f,u),Object(n.I)(v,f,null),y=!0},p(e,[t]){const c={};16&t&&(c.showDate=e[4]),o.$set(c);const i={};1&t&&(i.zoom=e[0]?e[0].zoom:null),2&t&&(i.loading=e[1]),s.$set(i);const a={};64&t&&(a.sensor=e[6]),b.$set(a);let l=j;j=w(e),j===l?~j&&k[j].p(e,t):(h&&(Object(n.B)(),Object(n.db)(k[l],1,1,(()=>{k[l]=null})),Object(n.k)()),~j?(h=k[j],h?h.p(e,t):(h=k[j]=_[j](e),h.c()),Object(n.cb)(h,1),h.m(d,null)):h=null),4&t&&Object(n.bb)(d,"loading-bg",e[2]);const r={};32&t&&(r.summary=e[5]),v.$set(r)},i(e){y||(Object(n.cb)(o.$$.fragment,e),Object(n.cb)(s.$$.fragment,e),Object(n.cb)(b.$$.fragment,e),Object(n.cb)(h),Object(n.cb)(v.$$.fragment,e),y=!0)},o(e){Object(n.db)(o.$$.fragment,e),Object(n.db)(s.$$.fragment,e),Object(n.db)(b.$$.fragment,e),Object(n.db)(h),Object(n.db)(v.$$.fragment,e),y=!1},d(e){e&&Object(n.t)(t),Object(n.r)(o),Object(n.r)(s),e&&Object(n.t)(l),e&&Object(n.t)(r),Object(n.r)(b),~j&&k[j].d(),e&&Object(n.t)(p),e&&Object(n.t)(f),Object(n.r)(v)}}}function W(e,t,c){let i,a;Object(n.l)(e,o.q,(e=>c(6,i=e))),Object(n.l)(e,o.s,(e=>c(7,a=e)));let{map:s=null}=t,{mapLoading:l=!0}=t,{legendLoading:r=!0}=t,{zoom:u=1}=t,{showDate:b=!1}=t,{summary:O=null}=t;return e.$$set=e=>{"map"in e&&c(0,s=e.map),"mapLoading"in e&&c(1,l=e.mapLoading),"legendLoading"in e&&c(2,r=e.legendLoading),"zoom"in e&&c(3,u=e.zoom),"showDate"in e&&c(4,b=e.showDate),"summary"in e&&c(5,O=e.summary)},[s,l,r,u,b,O,i,a]}class Q extends n.b{constructor(e){super(),Object(n.E)(this,e,W,G,n.P,{map:0,mapLoading:1,legendLoading:2,zoom:3,showDate:4,summary:5})}}t.a=Q}}]);
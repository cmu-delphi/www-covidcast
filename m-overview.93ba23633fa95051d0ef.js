(window.webpackJsonp=window.webpackJsonp||[]).push([[9,2,4],{298:function(e,t,c){"use strict";c.r(t);var n=c(0),i=c(3),o=c(60),a=c(349),l=c(324),s=c(314),r=c(162),b=c(1),u=c(315),d=c(318);c(270);function O(e){let t,c,i;return c=new u.a({props:{data:e[0].data,spec:e[0].spec,noDataText:e[0].noDataText,signals:{currentDate:e[4],highlightTimeValue:e[1]},signalListeners:["highlight"],eventListeners:["click"],tooltip:d.a,tooltipProps:{sensor:e[0].sensor}}}),c.$on("click",(function(){Object(n.G)(e[2])&&e[2].apply(this,arguments)})),c.$on("signal",(function(){Object(n.G)(e[3])&&e[3].apply(this,arguments)})),{c(){t=Object(n.u)("div"),Object(n.n)(c.$$.fragment),Object(n.g)(t,"class","single-sensor-chart vega-wrapper svelte-1dx38td")},m(e,o){Object(n.F)(e,t,o),Object(n.I)(c,t,null),i=!0},p(t,[n]){e=t;const i={};1&n&&(i.data=e[0].data),1&n&&(i.spec=e[0].spec),1&n&&(i.noDataText=e[0].noDataText),18&n&&(i.signals={currentDate:e[4],highlightTimeValue:e[1]}),1&n&&(i.tooltipProps={sensor:e[0].sensor}),c.$set(i)},i(e){i||(Object(n.cb)(c.$$.fragment,e),i=!0)},o(e){Object(n.db)(c.$$.fragment,e),i=!1},d(e){e&&Object(n.t)(t),Object(n.r)(c)}}}function j(e,t,c){let o;Object(n.l)(e,i.i,(e=>c(4,o=e)));let{s:a}=t,{highlightTimeValue:l}=t,{onClick:s}=t,{onHighlight:r}=t;return e.$$set=e=>{"s"in e&&c(0,a=e.s),"highlightTimeValue"in e&&c(1,l=e.highlightTimeValue),"onClick"in e&&c(2,s=e.onClick),"onHighlight"in e&&c(3,r=e.onHighlight)},[a,l,s,r,o]}class h extends n.b{constructor(e){super(),Object(n.E)(this,e,j,O,n.P,{s:0,highlightTimeValue:1,onClick:2,onHighlight:3})}}var g=h,p=c(316),m=c(309);c(271);function f(e,t,c){const n=e.slice();return n[15]=t[c],n}function v(e){let t,c,i,o,a,l,s,r,b,u,d,O,j,h,f,v,y,k,$,w=e[15].sensor.plotTitleText+"";function _(){return e[13](e[15])}function x(){return e[14](e[15])}return u=new m.a({props:{sensor:e[15].sensor}}),h=new g({props:{s:e[15],highlightTimeValue:e[4],onClick:e[5],onHighlight:p.b}}),{c(){t=Object(n.u)("li"),c=Object(n.u)("div"),i=Object(n.u)("button"),o=Object(n.Z)(w),l=Object(n.V)(),s=Object(n.u)("div"),r=Object(n.V)(),b=Object(n.u)("div"),Object(n.n)(u.$$.fragment),d=Object(n.V)(),O=Object(n.u)("button"),j=Object(n.V)(),Object(n.n)(h.$$.fragment),f=Object(n.V)(),Object(n.g)(i,"class","uk-button uk-button-text svelte-1gbkhdb"),Object(n.g)(i,"title",a="function"==typeof e[15].sensor.tooltipText?e[15].sensor.tooltipText():e[15].sensor.tooltipText),Object(n.g)(s,"class","grow svelte-1gbkhdb"),Object(n.g)(O,"class","uk-icon-button uk-icon-button-small svelte-1gbkhdb"),Object(n.g)(O,"title","Show as detail view"),Object(n.g)(O,"data-uk-icon","icon: search; ratio: 0.8"),Object(n.bb)(O,"hidden",!e[1]),Object(n.bb)(O,"uk-active",e[0]===e[15].sensor),Object(n.g)(b,"class","toolbar svelte-1gbkhdb"),Object(n.g)(c,"class","header svelte-1gbkhdb"),Object(n.g)(t,"data-testid",v=e[15].sensor.key),Object(n.g)(t,"class","svelte-1gbkhdb"),Object(n.bb)(t,"selected",e[3]===e[15].sensor.key)},m(e,a){Object(n.F)(e,t,a),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(i,o),Object(n.e)(c,l),Object(n.e)(c,s),Object(n.e)(c,r),Object(n.e)(c,b),Object(n.I)(u,b,null),Object(n.e)(b,d),Object(n.e)(b,O),Object(n.e)(t,j),Object(n.I)(h,t,null),Object(n.e)(t,f),y=!0,k||($=[Object(n.H)(i,"click",Object(n.N)(_)),Object(n.H)(O,"click",Object(n.W)(x))],k=!0)},p(c,l){e=c,(!y||4&l)&&w!==(w=e[15].sensor.plotTitleText+"")&&Object(n.S)(o,w),(!y||4&l&&a!==(a="function"==typeof e[15].sensor.tooltipText?e[15].sensor.tooltipText():e[15].sensor.tooltipText))&&Object(n.g)(i,"title",a);const s={};4&l&&(s.sensor=e[15].sensor),u.$set(s),2&l&&Object(n.bb)(O,"hidden",!e[1]),5&l&&Object(n.bb)(O,"uk-active",e[0]===e[15].sensor);const r={};4&l&&(r.s=e[15]),16&l&&(r.highlightTimeValue=e[4]),h.$set(r),(!y||4&l&&v!==(v=e[15].sensor.key))&&Object(n.g)(t,"data-testid",v),12&l&&Object(n.bb)(t,"selected",e[3]===e[15].sensor.key)},i(e){y||(Object(n.cb)(u.$$.fragment,e),Object(n.cb)(h.$$.fragment,e),y=!0)},o(e){Object(n.db)(u.$$.fragment,e),Object(n.db)(h.$$.fragment,e),y=!1},d(e){e&&Object(n.t)(t),Object(n.r)(u),Object(n.r)(h),k=!1,Object(n.O)($)}}}function y(e){let t,c,i=e[2],o=[];for(let t=0;t<i.length;t+=1)o[t]=v(f(e,i,t));const a=e=>Object(n.db)(o[e],1,1,(()=>{o[e]=null}));return{c(){t=Object(n.u)("ul");for(let e=0;e<o.length;e+=1)o[e].c();Object(n.g)(t,"class","root svelte-1gbkhdb")},m(e,i){Object(n.F)(e,t,i);for(let e=0;e<o.length;e+=1)o[e].m(t,null);c=!0},p(e,[c]){if(63&c){let l;for(i=e[2],l=0;l<i.length;l+=1){const a=f(e,i,l);o[l]?(o[l].p(a,c),Object(n.cb)(o[l],1)):(o[l]=v(a),o[l].c(),Object(n.cb)(o[l],1),o[l].m(t,null))}for(Object(n.B)(),l=i.length;l<o.length;l+=1)a(l);Object(n.k)()}},i(e){if(!c){for(let e=0;e<i.length;e+=1)Object(n.cb)(o[e]);c=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Object(n.db)(o[e]);c=!1},d(e){e&&Object(n.t)(t),Object(n.s)(o,e)}}}function k(e,t,c){let o,a,l;Object(n.l)(e,i.D,(e=>c(12,o=e))),Object(n.l)(e,i.p,(e=>c(3,a=e))),Object(n.l)(e,i.u,(e=>c(4,l=e)));let{detail:s=null}=t,{levels:u=b.j}=t,d=o[0],O=o[1],{selections:j=[]}=t;let h,g,m,f;return e.$$set=e=>{"detail"in e&&c(0,s=e.detail),"levels"in e&&c(6,u=e.levels),"selections"in e&&c(7,j=e.selections)},e.$$.update=()=>{64&e.$$.dirty&&c(10,h=new Set(u.map((e=>e.id)))),1024&e.$$.dirty&&c(11,g=i.B.filter((e=>e.levels.some((e=>h.has(e)))))),4864&e.$$.dirty&&(d.getTime()!==o[0].getTime()&&c(8,d=o[0]),O.getTime()!==o[1].getTime()&&c(9,O=o[1])),128&e.$$.dirty&&c(1,m=j.length>0),2944&e.$$.dirty&&c(2,f=g.map((e=>Object(p.c)(e,j,d,O))))},[s,m,f,a,l,function(e){const t=Object(p.d)(e);t&&(Object(r.a)("side-panel","set-date",t),i.h.set(t))},u,j,d,O,h,g,o,e=>{Object(r.a)("side-panel","set-sensor",e.sensor.key),i.p.set(e.sensor.key)},e=>{Object(r.a)("side-panel",s===e.sensor?"hide-detail":"show-detail",e.sensor.key),c(0,s=s===e.sensor?null:e.sensor)}]}class $ extends n.b{constructor(e){super(),Object(n.E)(this,e,k,y,n.P,{detail:0,levels:6,selections:7})}}var w=$,_=c(105),x=c(108),S=c(319),V=c(59),F=c(328);c(272);function D(e){let t;return{c(){t=Object(n.u)("div"),t.innerHTML='<div class="legend-avg svelte-feepaf"></div> \n    <div>7-day average</div> \n    <div class="legend-avg legend-count svelte-feepaf"></div> \n    <div>Raw data</div>',Object(n.g)(t,"class","legend svelte-feepaf")},m(e,c){Object(n.F)(e,t,c)},d(e){e&&Object(n.t)(t)}}}function M(e){let t,c,i,o,a,l,s,r,b,O,j,h,g,p,f,v,y;a=new m.a({props:{sensor:e[0],large:!0}});let k={data:e[4],spec:e[5],patchSpec:S.c,noDataText:e[3],signals:{currentDate:e[7]},signalListeners:["dateRange"],tooltip:d.a,tooltipProps:{sensor:e[0]}};O=new u.a({props:k}),e[25](O),O.$on("signal",e[9]);let $=e[0].isCasesOrDeath&&!e[6]&&D();return p=new F.a({props:{center:!0,sensor:e[0]}}),{c(){t=Object(n.u)("div"),c=Object(n.u)("button"),o=Object(n.V)(),Object(n.n)(a.$$.fragment),l=Object(n.V)(),s=Object(n.u)("button"),r=Object(n.V)(),b=Object(n.u)("div"),Object(n.n)(O.$$.fragment),j=Object(n.V)(),$&&$.c(),h=Object(n.V)(),g=Object(n.u)("div"),Object(n.n)(p.$$.fragment),Object(n.g)(c,"title","Download this view"),Object(n.g)(c,"class","uk-icon-button"),Object(n.g)(c,"data-uk-icon","icon: download"),c.disabled=i=!e[2],Object(n.g)(s,"class","uk-icon-button"),Object(n.g)(s,"data-uk-close",""),Object(n.g)(s,"title","Close this detail view"),Object(n.g)(t,"class","buttons svelte-feepaf"),Object(n.g)(b,"class","single-sensor-chart vega-wrapper svelte-feepaf"),Object(n.g)(g,"class","encoding svelte-feepaf")},m(i,u){Object(n.F)(i,t,u),Object(n.e)(t,c),Object(n.e)(t,o),Object(n.I)(a,t,null),Object(n.e)(t,l),Object(n.e)(t,s),e[23](s),Object(n.F)(i,r,u),Object(n.F)(i,b,u),Object(n.I)(O,b,null),Object(n.F)(i,j,u),$&&$.m(i,u),Object(n.F)(i,h,u),Object(n.F)(i,g,u),Object(n.I)(p,g,null),f=!0,v||(y=[Object(n.H)(window,"keydown",e[10]),Object(n.H)(c,"click",e[12]),Object(n.H)(s,"click",e[24])],v=!0)},p(e,[t]){(!f||4&t&&i!==(i=!e[2]))&&(c.disabled=i);const n={};1&t&&(n.sensor=e[0]),a.$set(n);const o={};16&t&&(o.data=e[4]),32&t&&(o.spec=e[5]),8&t&&(o.noDataText=e[3]),128&t&&(o.signals={currentDate:e[7]}),1&t&&(o.tooltipProps={sensor:e[0]}),O.$set(o),e[0].isCasesOrDeath&&!e[6]?$||($=D(),$.c(),$.m(h.parentNode,h)):$&&($.d(1),$=null);const l={};1&t&&(l.sensor=e[0]),p.$set(l)},i(e){f||(Object(n.cb)(a.$$.fragment,e),Object(n.cb)(O.$$.fragment,e),Object(n.cb)(p.$$.fragment,e),f=!0)},o(e){Object(n.db)(a.$$.fragment,e),Object(n.db)(O.$$.fragment,e),Object(n.db)(p.$$.fragment,e),f=!1},d(c){c&&Object(n.t)(t),Object(n.r)(a),e[23](null),c&&Object(n.t)(r),c&&Object(n.t)(b),e[25](null),Object(n.r)(O),c&&Object(n.t)(j),$&&$.d(c),c&&Object(n.t)(h),c&&Object(n.t)(g),Object(n.r)(p),v=!1,Object(n.O)(y)}}}function L(e,t,c){let o,a,l;Object(n.l)(e,i.C,(e=>c(15,o=e))),Object(n.l)(e,i.D,(e=>c(21,a=e))),Object(n.l)(e,i.i,(e=>c(7,l=e)));const s=Object(V.a)();let{sensor:u}=t;let{selections:d=[]}=t;let O=null,j=null;function h(){j&&(j.focus(),j=null)}Object(V.c)((()=>{O&&(j=document.activeElement,O.focus())}));let g=null;let p,m,f,v,y,k,$,w,_,F,D,M;return e.$$set=e=>{"sensor"in e&&c(0,u=e.sensor),"selections"in e&&c(13,d=e.selections)},e.$$.update=()=>{32769&e.$$.dirty&&c(14,p="function"==typeof u.mapTitleText?u.mapTitleText(o):u.mapTitleText),8192&e.$$.dirty&&c(16,m=d.length>0?d[0].info:null),8192&e.$$.dirty&&c(17,f=d.length>0),8192&e.$$.dirty&&c(18,v=d.length>1),65536&e.$$.dirty&&c(19,y=Boolean(m)&&m.level===b.k.id),655360&e.$$.dirty&&c(3,k=f?y?"Please select a county":"No data available":"No location selected"),860161&e.$$.dirty&&c(4,$=v?function(e,t){return Promise.all(t.map((t=>{const c=t.info;return c.level===b.k.id?[]:Object(x.d)(e,c.level,c.propertyId,void 0,void 0,!1,{geo_value:c.propertyId}).then(x.a).then((e=>e.map((e=>(e.displayName=c.displayName,e)))))}))).then((e=>e.flat()))}(u,d):m&&!y?Object(x.d)(u,m.level,m.propertyId,void 0,void 0,!1,{geo_value:m.propertyId}).then((e=>Object(x.a)(e,u))):[]),3145728&e.$$.dirty&&c(20,w=w||a),8193&e.$$.dirty&&c(22,_="".concat(u.name," in ").concat(d.length>0?d.map((e=>e.info.displayName)).join(", "):"Unknown")),32769&e.$$.dirty&&(F=Object(b.m)(u,o)),4251649&e.$$.dirty&&c(5,D=Object(S.b)(u,Object(b.m)(u,o),d,(0===w.length&&c(20,w=a),w),[_,p])),32768&e.$$.dirty&&c(6,M=o.cumulative)},[u,O,g,k,$,D,M,l,s,function(e){if("dateRange"!==e.detail.name)return;const t=e.detail.value&&e.detail.value.date_value;t&&Array.isArray(t)&&t.length>0&&(!Number.isNaN(t[0])&&t[0]!==w[0].getTime()||!Number.isNaN(t[1])&&t[1]!==w[1].getTime())&&c(20,w=[new Date(t[0]),new Date(t[1])])},function(e){"Escape"!==e.key&&"Esc"!==e.key||(Object(r.a)("detail-view","close","keyboard"),h(),s("close"))},h,function(){g.vegaAccessor().then((e=>{const t=e.toImageURL("png",2),c=f?d.map((e=>e.info.displayName)).join(", "):"Unknown";t.then((e=>{!function(e,t){const c=document.createElement("a");c.download=t,c.href=e,c.style.position="absolute",c.style.left="-10000px",c.style.top="-10000px",document.body.appendChild(c),c.click(),c.remove()}(e,"".concat(u.name," in ").concat(c,".png"))}))}))},d,p,o,m,f,v,y,w,a,_,function(e){n.i[e?"unshift":"push"]((()=>{O=e,c(1,O)}))},()=>{Object(r.a)("detail-view","close","button"),h(),s("close")},function(e){n.i[e?"unshift":"push"]((()=>{g=e,c(2,g)}))}]}class C extends n.b{constructor(e){super(),Object(n.E)(this,e,L,M,n.P,{sensor:0,selections:13})}}var P=C;c(273);function E(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function R(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function T(e,t,c){const n=e.slice();return n[16]=t[c],n}function z(e,t,c){const n=e.slice();return n[19]=t[c],n}function N(e){let t,c,i,o,a,l,s,r,b,u,d,O=e[19].displayName+"",j=e[6].formatValue(e[19].value)+"";function h(...t){return e[13](e[19],...t)}function g(){return e[14](e[19])}return{c(){t=Object(n.u)("li"),c=Object(n.u)("a"),i=Object(n.Z)(O),o=Object(n.Z)("\n          ("),a=Object(n.Z)(j),l=Object(n.Z)(")"),b=Object(n.V)(),Object(n.g)(c,"href",s="?region="+(e[19].info?e[19].info.propertyId:"")),Object(n.g)(c,"class","uk-link-text"),Object(n.g)(c,"disabled",r=!e[19].info||e[1].some(h))},m(e,s){Object(n.F)(e,t,s),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(c,o),Object(n.e)(c,a),Object(n.e)(c,l),Object(n.e)(t,b),u||(d=Object(n.H)(c,"click",Object(n.N)(g)),u=!0)},p(t,o){e=t,8&o&&O!==(O=e[19].displayName+"")&&Object(n.S)(i,O),72&o&&j!==(j=e[6].formatValue(e[19].value)+"")&&Object(n.S)(a,j),8&o&&s!==(s="?region="+(e[19].info?e[19].info.propertyId:""))&&Object(n.g)(c,"href",s),10&o&&r!==(r=!e[19].info||e[1].some(h))&&Object(n.g)(c,"disabled",r)},d(e){e&&Object(n.t)(t),u=!1,d()}}}function A(e){let t,c,i,o=e[5].reverse(),a=[];for(let t=0;t<o.length;t+=1)a[t]=Z(T(e,o,t));return{c(){t=Object(n.u)("h5"),t.textContent="Select from recent locations",c=Object(n.V)(),i=Object(n.u)("ul");for(let e=0;e<a.length;e+=1)a[e].c();Object(n.g)(i,"class","svelte-1i52rzm")},m(e,o){Object(n.F)(e,t,o),Object(n.F)(e,c,o),Object(n.F)(e,i,o);for(let e=0;e<a.length;e+=1)a[e].m(i,null)},p(e,t){if(160&t){let c;for(o=e[5].reverse(),c=0;c<o.length;c+=1){const n=T(e,o,c);a[c]?a[c].p(n,t):(a[c]=Z(n),a[c].c(),a[c].m(i,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}},d(e){e&&Object(n.t)(t),e&&Object(n.t)(c),e&&Object(n.t)(i),Object(n.s)(a,e)}}}function Z(e){let t,c,i,o,a,l,s,r=e[16].displayName+"";function b(){return e[15](e[16])}return{c(){t=Object(n.u)("li"),c=Object(n.u)("a"),i=Object(n.Z)(r),a=Object(n.V)(),Object(n.g)(c,"href",o="?region="+e[16].propertyId),Object(n.g)(c,"class","uk-link-text")},m(e,o){Object(n.F)(e,t,o),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(t,a),l||(s=Object(n.H)(c,"click",Object(n.N)(b)),l=!0)},p(t,a){e=t,32&a&&r!==(r=e[16].displayName+"")&&Object(n.S)(i,r),32&a&&o!==(o="?region="+e[16].propertyId)&&Object(n.g)(c,"href",o)},d(e){e&&Object(n.t)(t),l=!1,s()}}}function I(e){let t,c,i,o,a,l,r,b,u,d,O,j,h,g,p,m,f,v,y=e[6].name+"";o=new s.a({props:{className:"container-bg",placeholder:"Search by name...",selectedItem:(e[4],null),items:e[4],labelFieldName:"displayName",maxItemsToShowInList:"5"}}),o.$on("change",e[11]);let k=e[3],$=[];for(let t=0;t<k.length;t+=1)$[t]=N(z(e,k,t));let w=e[5].length>0&&A(e);return{c(){t=Object(n.u)("section"),c=Object(n.u)("h4"),c.textContent="Add Another",i=Object(n.V)(),Object(n.n)(o.$$.fragment),a=Object(n.V)(),l=Object(n.u)("button"),r=Object(n.Z)("Select on map"),b=Object(n.V)(),u=Object(n.u)("h5"),d=Object(n.Z)("Select from Top for "),O=Object(n.u)("strong"),j=Object(n.Z)(y),h=Object(n.V)(),g=Object(n.u)("ol");for(let e=0;e<$.length;e+=1)$[e].c();p=Object(n.V)(),w&&w.c(),Object(n.g)(c,"class","svelte-1i52rzm"),Object(n.g)(l,"class","uk-button uk-button-default uk-button-small uk-width-1-1 uk-margin-top"),Object(n.g)(l,"aria-pressed",e[0]),Object(n.bb)(l,"selected",e[0]),Object(n.g)(g,"class","svelte-1i52rzm"),Object(n.bb)(g,"loading",e[2]),Object(n.g)(t,"class","container-bg container-style root svelte-1i52rzm")},m(s,y){Object(n.F)(s,t,y),Object(n.e)(t,c),Object(n.e)(t,i),Object(n.I)(o,t,null),Object(n.e)(t,a),Object(n.e)(t,l),Object(n.e)(l,r),Object(n.e)(t,b),Object(n.e)(t,u),Object(n.e)(u,d),Object(n.e)(u,O),Object(n.e)(O,j),Object(n.e)(t,h),Object(n.e)(t,g);for(let e=0;e<$.length;e+=1)$[e].m(g,null);Object(n.e)(t,p),w&&w.m(t,null),m=!0,f||(v=Object(n.H)(l,"click",e[12]),f=!0)},p(e,[c]){const i={};if(16&c&&(i.selectedItem=(e[4],null)),16&c&&(i.items=e[4]),o.$set(i),(!m||1&c)&&Object(n.g)(l,"aria-pressed",e[0]),1&c&&Object(n.bb)(l,"selected",e[0]),(!m||64&c)&&y!==(y=e[6].name+"")&&Object(n.S)(j,y),202&c){let t;for(k=e[3],t=0;t<k.length;t+=1){const n=z(e,k,t);$[t]?$[t].p(n,c):($[t]=N(n),$[t].c(),$[t].m(g,null))}for(;t<$.length;t+=1)$[t].d(1);$.length=k.length}4&c&&Object(n.bb)(g,"loading",e[2]),e[5].length>0?w?w.p(e,c):(w=A(e),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},i(e){m||(Object(n.cb)(o.$$.fragment,e),m=!0)},o(e){Object(n.db)(o.$$.fragment,e),m=!1},d(e){e&&Object(n.t)(t),Object(n.r)(o),Object(n.s)($,e),w&&w.d(),f=!1,v()}}}function H(e,t,c){let a,l;Object(n.l)(e,i.x,(e=>c(10,a=e))),Object(n.l)(e,i.q,(e=>c(6,l=e)));const s=Object(V.a)();let{mapData:r}=t,{regionSearchList:u}=t,{pickMapMode:d=!1}=t,{selections:O=[]}=t,j=!0,h=[];let g,p;return e.$$set=e=>{"mapData"in e&&c(8,r=e.mapData),"regionSearchList"in e&&c(9,u=e.regionSearchList),"pickMapMode"in e&&c(0,d=e.pickMapMode),"selections"in e&&c(1,O=e.selections)},e.$$.update=()=>{514&e.$$.dirty&&c(4,g=u.filter((e=>e.level!==b.k.id&&!O.some((t=>t.info.id===e.id))&&(0===O.length||O.some((t=>t.info.level===e.level)))))),1026&e.$$.dirty&&c(5,p=a.filter((e=>!O.some((t=>t.info.id===e.id))))),256&e.$$.dirty&&(c(2,j=!0),r.then((e=>{c(2,j=!1),c(3,h=e.map((e=>{const t=Object(o.b)(e.geo_value);return function(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?E(Object(c),!0).forEach((function(t){R(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):E(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}({displayName:t?t.displayName:e.geo_value,info:t},e)})).sort(((e,t)=>e.value!==t.value?e.value<t.value?1:-1:e.displayName.localeCompare(t.displayName))).slice(0,10))})))},[d,O,j,h,g,p,l,s,r,u,a,e=>{e.detail&&s("add",e.detail)},()=>c(0,d=!d),(e,t)=>t.info.id===e.info.id,e=>s("add",e.info),e=>s("add",e)]}class B extends n.b{constructor(e){super(),Object(n.E)(this,e,H,I,n.P,{mapData:8,regionSearchList:9,pickMapMode:0,selections:1})}}var U=B;c(274);function Y(e,t,c){const n=e.slice();return n[28]=t[c],n}function q(e){let t,c,i,a,l;function r(e,t){return e[10]?J:W}c=new s.a({props:{placeholder:"Search for a location...",items:o.e,selectedItem:e[11],labelFieldName:"displayName",maxItemsToShowInList:"5"}}),c.$on("change",e[16]);let b=r(e),u=b(e);return{c(){t=Object(n.u)("div"),Object(n.n)(c.$$.fragment),i=Object(n.V)(),a=Object(n.u)("div"),u.c(),Object(n.g)(t,"class","search-container container-bg container-style svelte-y06a60"),Object(n.g)(a,"class","view-switcher svelte-y06a60")},m(e,o){Object(n.F)(e,t,o),Object(n.I)(c,t,null),Object(n.F)(e,i,o),Object(n.F)(e,a,o),u.m(a,null),l=!0},p(e,t){const n={};2048&t&&(n.selectedItem=e[11]),c.$set(n),b===(b=r(e))&&u?u.p(e,t):(u.d(1),u=b(e),u&&(u.c(),u.m(a,null)))},i(e){l||(Object(n.cb)(c.$$.fragment,e),l=!0)},o(e){Object(n.db)(c.$$.fragment,e),l=!1},d(e){e&&Object(n.t)(t),Object(n.r)(c),e&&Object(n.t)(i),e&&Object(n.t)(a),u.d()}}}function J(e){let t,c,i,o,a,l,s,r;return{c(){t=Object(n.u)("div"),c=Object(n.u)("button"),o=Object(n.V)(),a=Object(n.u)("button"),Object(n.g)(c,"aria-pressed",i=String(e[3])),Object(n.g)(c,"class","uk-button uk-button-default map-button svelte-y06a60"),Object(n.g)(c,"title","Switch to Map"),Object(n.g)(c,"data-uk-icon","icon: blank"),Object(n.bb)(c,"uk-active",e[3]),Object(n.g)(a,"aria-pressed",l=String(!e[3])),Object(n.g)(a,"class","uk-button uk-button-default chart-button svelte-y06a60"),Object(n.g)(a,"title","Switch to Line Charts"),Object(n.g)(a,"data-uk-icon","icon: chart-line"),Object(n.bb)(a,"uk-active",!e[3]),Object(n.g)(t,"class","uk-button-group")},m(i,l){Object(n.F)(i,t,l),Object(n.e)(t,c),Object(n.e)(t,o),Object(n.e)(t,a),s||(r=[Object(n.H)(c,"click",e[18]),Object(n.H)(a,"click",e[19])],s=!0)},p(e,t){8&t&&i!==(i=String(e[3]))&&Object(n.g)(c,"aria-pressed",i),8&t&&Object(n.bb)(c,"uk-active",e[3]),8&t&&l!==(l=String(!e[3]))&&Object(n.g)(a,"aria-pressed",l),8&t&&Object(n.bb)(a,"uk-active",!e[3])},d(e){e&&Object(n.t)(t),s=!1,Object(n.O)(r)}}}function W(e){let t,c,i,o,a,l;return{c(){t=Object(n.u)("button"),Object(n.g)(t,"aria-pressed",c=String(!e[4])),Object(n.g)(t,"class","uk-button uk-button-default chart-button single-toggle svelte-y06a60"),Object(n.g)(t,"title",i=(e[4]?"Hide":"Show")+" Line Charts panel"),Object(n.g)(t,"data-uk-icon",o="icon: "+(e[4]?"chart-line-ban":"chart-line"))},m(c,i){Object(n.F)(c,t,i),a||(l=Object(n.H)(t,"click",e[17]),a=!0)},p(e,a){16&a&&c!==(c=String(!e[4]))&&Object(n.g)(t,"aria-pressed",c),16&a&&i!==(i=(e[4]?"Hide":"Show")+" Line Charts panel")&&Object(n.g)(t,"title",i),16&a&&o!==(o="icon: "+(e[4]?"chart-line-ban":"chart-line"))&&Object(n.g)(t,"data-uk-icon",o)},d(e){e&&Object(n.t)(t),a=!1,l()}}}function G(e){let t,c,i;return c=new P({props:{sensor:e[1],selections:e[9]}}),c.$on("close",e[22]),{c(){t=Object(n.u)("div"),Object(n.n)(c.$$.fragment),Object(n.g)(t,"class","detail-container container-bg container-style svelte-y06a60")},m(e,o){Object(n.F)(e,t,o),Object(n.I)(c,t,null),i=!0},p(e,t){const n={};2&t&&(n.sensor=e[1]),512&t&&(n.selections=e[9]),c.$set(n)},i(e){i||(Object(n.cb)(c.$$.fragment,e),i=!0)},o(e){Object(n.db)(c.$$.fragment,e),i=!1},d(e){e&&Object(n.t)(t),Object(n.r)(c)}}}function Q(e){let t,c,o,a,l,s,r,b,u,d,O,j,h,g=e[8]?"Exit":"Open";function p(t){e[23].call(null,t)}let m={levels:i.w,selections:e[9]};return void 0!==e[1]&&(m.detail=e[1]),a=new w({props:m}),n.i.push((()=>Object(n.h)(a,"detail",p))),{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),o=Object(n.u)("div"),Object(n.n)(a.$$.fragment),s=Object(n.V)(),r=Object(n.u)("div"),b=Object(n.u)("button"),u=Object(n.Z)(g),d=Object(n.Z)("\n          compare mode"),Object(n.g)(o,"class","panel-scroll-container svelte-y06a60"),Object(n.g)(c,"class","panel-wrapper container-bg container-style svelte-y06a60"),Object(n.g)(b,"class","uk-button uk-button-default uk-button-small"),Object(n.g)(r,"class","panel-bottom-wrapper mobileHide svelte-y06a60"),Object(n.g)(t,"class","panel-container svelte-y06a60")},m(i,l){Object(n.F)(i,t,l),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.I)(a,o,null),Object(n.e)(t,s),Object(n.e)(t,r),Object(n.e)(r,b),Object(n.e)(b,u),Object(n.e)(b,d),O=!0,j||(h=Object(n.H)(b,"click",e[24]),j=!0)},p(e,t){const c={};512&t&&(c.selections=e[9]),!l&&2&t&&(l=!0,c.detail=e[1],Object(n.c)((()=>l=!1))),a.$set(c),(!O||256&t)&&g!==(g=e[8]?"Exit":"Open")&&Object(n.S)(u,g)},i(e){O||(Object(n.cb)(a.$$.fragment,e),O=!0)},o(e){Object(n.db)(a.$$.fragment,e),O=!1},d(e){e&&Object(n.t)(t),Object(n.r)(a),j=!1,h()}}}function X(e){let t,c,i,a,l,s,r,b=e[9],u=[];for(let t=0;t<b.length;t+=1)u[t]=K(Y(e,b,t));function d(t){e[26].call(null,t)}let O={regionSearchList:o.e,selections:e[9],mapData:e[7]};return void 0!==e[5]&&(O.pickMapMode=e[5]),l=new U({props:O}),n.i.push((()=>Object(n.h)(l,"pickMapMode",d))),l.$on("add",e[27]),{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),i=Object(n.u)("ul");for(let e=0;e<u.length;e+=1)u[e].c();a=Object(n.V)(),Object(n.n)(l.$$.fragment),Object(n.g)(i,"class","uk-list uk-list-square uk-margin-remove svelte-y06a60"),Object(n.g)(c,"class","selection-container container-bg container-style svelte-y06a60"),Object(n.g)(t,"class","add-container svelte-y06a60")},m(e,o){Object(n.F)(e,t,o),Object(n.e)(t,c),Object(n.e)(c,i);for(let e=0;e<u.length;e+=1)u[e].m(i,null);Object(n.e)(t,a),Object(n.I)(l,t,null),r=!0},p(e,t){if(512&t){let c;for(b=e[9],c=0;c<b.length;c+=1){const n=Y(e,b,c);u[c]?u[c].p(n,t):(u[c]=K(n),u[c].c(),u[c].m(i,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=b.length}const c={};512&t&&(c.selections=e[9]),128&t&&(c.mapData=e[7]),!s&&32&t&&(s=!0,c.pickMapMode=e[5],Object(n.c)((()=>s=!1))),l.$set(c)},i(e){r||(Object(n.cb)(l.$$.fragment,e),r=!0)},o(e){Object(n.db)(l.$$.fragment,e),r=!1},d(e){e&&Object(n.t)(t),Object(n.s)(u,e),Object(n.r)(l)}}}function K(e){let t,c,i,o,a,l,s,r,b=e[28].info.displayName+"";function u(){return e[25](e[28])}return{c(){t=Object(n.u)("li"),c=Object(n.u)("button"),i=Object(n.V)(),o=Object(n.u)("span"),a=Object(n.Z)(b),l=Object(n.V)(),Object(n.g)(c,"class","selection-toolbar uk-icon-button uk-icon-button-small svelte-y06a60"),Object(n.g)(c,"data-uk-icon","icon: close; ratio: 0.8"),Object(n.g)(c,"title","Remove selected"),Object(n.g)(t,"class","selection-legend svelte-y06a60"),Object(n.U)(t,"color",e[28].color)},m(e,b){Object(n.F)(e,t,b),Object(n.e)(t,c),Object(n.e)(t,i),Object(n.e)(t,o),Object(n.e)(o,a),Object(n.e)(t,l),s||(r=Object(n.H)(c,"click",u),s=!0)},p(c,i){e=c,512&i&&b!==(b=e[28].info.displayName+"")&&Object(n.S)(a,b),512&i&&Object(n.U)(t,"color",e[28].color)},d(e){e&&Object(n.t)(t),s=!1,r()}}}function ee(e){let t,c,s,r,b,u,d,O,j,h;c=new l.a({props:{className:"options-container",levels:i.w}});let g=!e[8]&&q(e);u=new a.a({props:{mapLoading:e[2],legendLoading:e[2],summary:{data:e[7],level:e[0],items:o.c[e[0]]||[]},data:e[7],selections:e[9],focusOn:e[6],selectRandomOnReady:!0}}),u.$on("loading",e[20]),u.$on("select",e[21]);let p=null!=e[1]&&!e[10]&&e[4]&&G(e),m=(e[10]&&!e[3]||!e[10]&&e[4])&&Q(e),f=e[8]&&X(e);return{c(){t=Object(n.u)("main"),Object(n.n)(c.$$.fragment),s=Object(n.V)(),g&&g.c(),r=Object(n.V)(),b=Object(n.u)("div"),Object(n.n)(u.$$.fragment),d=Object(n.V)(),p&&p.c(),O=Object(n.V)(),m&&m.c(),j=Object(n.V)(),f&&f.c(),Object(n.g)(b,"class","map-container svelte-y06a60"),Object(n.bb)(b,"mobileHide",!e[3]),Object(n.bb)(b,"pick",e[5]),Object(n.g)(t,"class","root base-font-size svelte-y06a60"),Object(n.bb)(t,"hiddenPanel",!e[10]&&!e[4]),Object(n.bb)(t,"compare",e[8])},m(e,i){Object(n.F)(e,t,i),Object(n.I)(c,t,null),Object(n.e)(t,s),g&&g.m(t,null),Object(n.e)(t,r),Object(n.e)(t,b),Object(n.I)(u,b,null),Object(n.e)(b,d),p&&p.m(b,null),Object(n.e)(t,O),m&&m.m(t,null),Object(n.e)(t,j),f&&f.m(t,null),h=!0},p(e,[c]){e[8]?g&&(Object(n.B)(),Object(n.db)(g,1,1,(()=>{g=null})),Object(n.k)()):g?(g.p(e,c),256&c&&Object(n.cb)(g,1)):(g=q(e),g.c(),Object(n.cb)(g,1),g.m(t,r));const i={};4&c&&(i.mapLoading=e[2]),4&c&&(i.legendLoading=e[2]),129&c&&(i.summary={data:e[7],level:e[0],items:o.c[e[0]]||[]}),128&c&&(i.data=e[7]),512&c&&(i.selections=e[9]),64&c&&(i.focusOn=e[6]),u.$set(i),null!=e[1]&&!e[10]&&e[4]?p?(p.p(e,c),1042&c&&Object(n.cb)(p,1)):(p=G(e),p.c(),Object(n.cb)(p,1),p.m(b,null)):p&&(Object(n.B)(),Object(n.db)(p,1,1,(()=>{p=null})),Object(n.k)()),8&c&&Object(n.bb)(b,"mobileHide",!e[3]),32&c&&Object(n.bb)(b,"pick",e[5]),e[10]&&!e[3]||!e[10]&&e[4]?m?(m.p(e,c),1048&c&&Object(n.cb)(m,1)):(m=Q(e),m.c(),Object(n.cb)(m,1),m.m(t,j)):m&&(Object(n.B)(),Object(n.db)(m,1,1,(()=>{m=null})),Object(n.k)()),e[8]?f?(f.p(e,c),256&c&&Object(n.cb)(f,1)):(f=X(e),f.c(),Object(n.cb)(f,1),f.m(t,null)):f&&(Object(n.B)(),Object(n.db)(f,1,1,(()=>{f=null})),Object(n.k)()),1040&c&&Object(n.bb)(t,"hiddenPanel",!e[10]&&!e[4]),256&c&&Object(n.bb)(t,"compare",e[8])},i(e){h||(Object(n.cb)(c.$$.fragment,e),Object(n.cb)(g),Object(n.cb)(u.$$.fragment,e),Object(n.cb)(p),Object(n.cb)(m),Object(n.cb)(f),h=!0)},o(e){Object(n.db)(c.$$.fragment,e),Object(n.db)(g),Object(n.db)(u.$$.fragment,e),Object(n.db)(p),Object(n.db)(m),Object(n.db)(f),h=!1},d(e){e&&Object(n.t)(t),Object(n.r)(c),g&&g.d(),Object(n.r)(u),p&&p.d(),m&&m.d(),f&&f.d()}}}function te(e,t,c){let a,l,s,b,u,d,O;Object(n.l)(e,i.k,(e=>c(0,a=e))),Object(n.l)(e,i.q,(e=>c(12,l=e))),Object(n.l)(e,i.i,(e=>c(13,s=e))),Object(n.l)(e,i.g,(e=>c(14,b=e))),Object(n.l)(e,i.m,(e=>c(15,u=e))),Object(n.l)(e,i.v,(e=>c(10,d=e))),Object(n.l)(e,i.o,(e=>c(11,O=e)));let j=null,h=!0,g=!0,p=!0,m=!1,f=null;let v,y,k;return e.$$.update=()=>{1&e.$$.dirty&&(i.w.find((e=>e.id===a))||i.k.set(i.w[0].id)),12289&e.$$.dirty&&c(7,v=Object(_.b)(l,a,s,{stderr:null})),16384&e.$$.dirty&&c(8,y=null!=b),32768&e.$$.dirty&&c(9,k=u)},[a,j,h,g,p,m,f,v,y,k,d,O,l,s,b,u,e=>{Object(i.A)(e.detail)&&c(6,f=e.detail||null),Object(r.a)("search","select",e.detail?e.detail.id:"")},()=>{Object(r.a)("overview","show-panel",String(!p)),c(4,p=!p)},()=>{Object(r.a)("overview","show-map","true"),c(3,g=!0)},()=>{Object(r.a)("overview","show-map","false"),c(3,g=!1)},e=>c(2,h=e.detail),e=>{if(null!=f&&c(6,f=null),m){const t=Object(o.b)(e.detail.feature.properties.id);Object(i.b)(t),c(5,m=!1)}else Object(i.z)(e.detail.feature,!0),e.detail.feature&&Object(r.a)("map","select",e.detail.feature.id)},()=>c(1,j=null),function(e){j=e,c(1,j)},()=>i.g.set(y?null:[]),e=>Object(i.y)(e.info),function(e){m=e,c(5,m)},e=>Object(i.b)(e.detail)]}class ce extends n.b{constructor(e){super(),Object(n.E)(this,e,te,ee,n.P,{})}}t.default=ce},306:function(e,t,c){"use strict";c.d(t,"b",(function(){return o})),c.d(t,"f",(function(){return a})),c.d(t,"d",(function(){return l})),c.d(t,"a",(function(){return s})),c.d(t,"c",(function(){return u})),c.d(t,"e",(function(){return d}));var n=c(15),i=c(323);function o(e){return Object(n.f)(e).l>.32?"#000":"#fff"}function a(e,t){return e.map(((e,c)=>[e,t[c]]))}function l(e,t){return Array.isArray(e)?e.map((e=>{const c=Object(n.g)(e);return c.opacity=t,c.toString()})):l([e],t)[0]}function s(e,t,c,n){null==n&&(n=c-t);const i={start:e-n/2,end:e.getTime()+n/2};let o=t-i.start;return o<=0&&(o=c-i.end,o>=0&&(o=0)),i.start=i.start+o,i.end=i.end+o,i}const r=new WeakMap,b=new i.a((e=>{for(const t of e){const e=r.get(t.target);e&&e(t.contentRect,t)}}));function u(e,t){r.set(e,t),b.observe(e)}function d(e){r.delete(e),b.unobserve(e)}},307:function(e,t,c){"use strict";c.d(t,"d",(function(){return r})),c.d(t,"c",(function(){return b})),c.d(t,"e",(function(){return u})),c.d(t,"a",(function(){return d})),c.d(t,"b",(function(){return O})),c.d(t,"f",(function(){return j}));var n=c(159);const i=Object(n.a)("%B %d"),o=(Object(n.a)("%b %d"),Object(n.a)("%m/%d")),a=Object(n.a)("%Y-%m-%d"),l=Object(n.a)("%m/%d/%Y"),s=Object(n.a)("%b %-d");function r(e){return e?o(e):"?"}function b(e){return e?i(e):"?"}function u(e,t=!0){return e?s(e)+(t?function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(e.getDate()):""):"?"}function d(e){return e?a(e):"?"}function O(e){return e?l(e):"?"}function j(e){return e&&"number"==typeof e.population?e.population.toLocaleString():"Unknown"}},309:function(e,t,c){"use strict";var n=c(0),i=c(3);function o(e){let t,c,i,o;return{c(){t=Object(n.u)("button"),Object(n.g)(t,"title","Show sensor description"),Object(n.g)(t,"class",c="uk-icon-button "+e[2]),Object(n.g)(t,"data-uk-toggle","target: #info-dialog"),Object(n.g)(t,"data-uk-icon","icon: question-plain"),Object(n.bb)(t,"uk-icon-button-small",!e[1])},m(c,a){Object(n.F)(c,t,a),i||(o=Object(n.H)(t,"click",Object(n.W)(e[3])),i=!0)},p(e,i){4&i&&c!==(c="uk-icon-button "+e[2])&&Object(n.g)(t,"class",c),6&i&&Object(n.bb)(t,"uk-icon-button-small",!e[1])},d(e){e&&Object(n.t)(t),i=!1,o()}}}function a(e){let t,c=null!=e[0]&&e[0].description&&o(e);return{c(){c&&c.c(),t=Object(n.v)()},m(e,i){c&&c.m(e,i),Object(n.F)(e,t,i)},p(e,[n]){null!=e[0]&&e[0].description?c?c.p(e,n):(c=o(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null)},i:n.J,o:n.J,d(e){c&&c.d(e),e&&Object(n.t)(t)}}}function l(e,t,c){let{sensor:n}=t,{large:o=!1}=t,{className:a=""}=t;return e.$$set=e=>{"sensor"in e&&c(0,n=e.sensor),"large"in e&&c(1,o=e.large),"className"in e&&c(2,a=e.className)},[n,o,a,()=>{i.j.set(n)}]}class s extends n.b{constructor(e){super(),Object(n.E)(this,e,l,a,n.P,{sensor:0,large:1,className:2})}}t.a=s},312:function(e,t,c){"use strict";function n(e,t){return{description:"shows the current data injected via a signal",data:{values:[{date_value:null}]},transform:[{calculate:"toDate(".concat(e,")"),as:"date_value"}],mark:{type:"rule",tooltip:!1},encoding:{color:{value:t},x:{field:"date_value",type:"temporal"}}}}function i(e,t="diamond",c="black"){return{description:"shows the current data injected via a signal",data:{values:[{date_value:null}]},transform:[{calculate:"toDate(".concat(e,")"),as:"date_value"}],mark:{type:"point",shape:t,color:c,fill:c,tooltip:!1},encoding:{y:{value:-7},x:{field:"date_value",type:"temporal"}}}}c.d(t,"c",(function(){return n})),c.d(t,"d",(function(){return i})),c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return a}));const o=n("currentDate","#c00"),a=i("currentDate","circle","#c00")},314:function(e,t,c){"use strict";var n=c(0),i=c(59);c(250);function o(e,t,c){const n=e.slice();return n[63]=t[c],n[65]=c,n}function a(e,t,c){const n=e.slice();return n[0]=t[c],n}function l(e){let t,c,i,o,l,s,u,d=e[9],O=[];for(let t=0;t<d.length;t+=1)O[t]=r(a(e,d,t));let j=(!e[19]||e[9].length<e[10])&&b(e);return{c(){t=Object(n.u)("span"),c=Object(n.V)();for(let e=0;e<O.length;e+=1)O[e].c();i=Object(n.V)(),j&&j.c(),o=Object(n.V)(),l=Object(n.u)("button"),Object(n.g)(t,"class","uk-search-icon search-multiple-icon search-icon svelte-1rkr4ei"),Object(n.g)(t,"data-uk-icon","icon: search"),Object(n.bb)(t,"modern",e[11]),Object(n.g)(l,"class","uk-search-icon clear-button svelte-1rkr4ei"),Object(n.g)(l,"title","Clear Search Field"),Object(n.g)(l,"data-uk-icon","icon: close"),Object(n.bb)(l,"modern",e[11]),Object(n.bb)(l,"hidden",0===e[9].length)},m(a,r){Object(n.F)(a,t,r),Object(n.F)(a,c,r);for(let e=0;e<O.length;e+=1)O[e].m(a,r);Object(n.F)(a,i,r),j&&j.m(a,r),Object(n.F)(a,o,r),Object(n.F)(a,l,r),s||(u=Object(n.H)(l,"click",e[22]),s=!0)},p(e,c){if(2048&c[0]&&Object(n.bb)(t,"modern",e[11]),1049094&c[0]){let t;for(d=e[9],t=0;t<d.length;t+=1){const n=a(e,d,t);O[t]?O[t].p(n,c):(O[t]=r(n),O[t].c(),O[t].m(i.parentNode,i))}for(;t<O.length;t+=1)O[t].d(1);O.length=d.length}!e[19]||e[9].length<e[10]?j?j.p(e,c):(j=b(e),j.c(),j.m(o.parentNode,o)):j&&(j.d(1),j=null),2048&c[0]&&Object(n.bb)(l,"modern",e[11]),512&c[0]&&Object(n.bb)(l,"hidden",0===e[9].length)},d(e){e&&Object(n.t)(t),e&&Object(n.t)(c),Object(n.s)(O,e),e&&Object(n.t)(i),j&&j.d(e),e&&Object(n.t)(o),e&&Object(n.t)(l),s=!1,u()}}}function s(e){let t,c,i,o,a,l,s;return{c(){t=Object(n.u)("span"),c=Object(n.V)(),i=Object(n.u)("input"),o=Object(n.V)(),a=Object(n.u)("button"),Object(n.g)(t,"class","uk-search-icon search-icon svelte-1rkr4ei"),Object(n.g)(t,"data-uk-icon","icon: search"),Object(n.bb)(t,"modern",e[11]),Object(n.g)(i,"class","uk-search-input svelte-1rkr4ei"),Object(n.g)(i,"placeholder",e[4]),Object(n.g)(i,"name",e[6]),i.disabled=e[7],Object(n.g)(i,"title",e[8]),Object(n.g)(i,"aria-label",e[4]),Object(n.bb)(i,"modern",e[11]),Object(n.g)(a,"class","uk-search-icon clear-button svelte-1rkr4ei"),Object(n.g)(a,"title","Clear Search Field"),Object(n.g)(a,"data-uk-icon","icon: close"),Object(n.bb)(a,"hidden",!e[12]),Object(n.bb)(a,"modern",e[11])},m(r,b){Object(n.F)(r,t,b),Object(n.F)(r,c,b),Object(n.F)(r,i,b),e[36](i),Object(n.T)(i,e[12]),Object(n.F)(r,o,b),Object(n.F)(r,a,b),l||(s=[Object(n.H)(i,"input",e[37]),Object(n.H)(i,"input",e[27]),Object(n.H)(i,"focus",e[29]),Object(n.H)(i,"keydown",e[25]),Object(n.H)(i,"click",e[28]),Object(n.H)(i,"keypress",e[26]),Object(n.H)(a,"click",e[22])],l=!0)},p(e,c){2048&c[0]&&Object(n.bb)(t,"modern",e[11]),16&c[0]&&Object(n.g)(i,"placeholder",e[4]),64&c[0]&&Object(n.g)(i,"name",e[6]),128&c[0]&&(i.disabled=e[7]),256&c[0]&&Object(n.g)(i,"title",e[8]),16&c[0]&&Object(n.g)(i,"aria-label",e[4]),4096&c[0]&&i.value!==e[12]&&Object(n.T)(i,e[12]),2048&c[0]&&Object(n.bb)(i,"modern",e[11]),4096&c[0]&&Object(n.bb)(a,"hidden",!e[12]),2048&c[0]&&Object(n.bb)(a,"modern",e[11])},d(r){r&&Object(n.t)(t),r&&Object(n.t)(c),r&&Object(n.t)(i),e[36](null),r&&Object(n.t)(o),r&&Object(n.t)(a),l=!1,Object(n.O)(s)}}}function r(e){let t,c,i,o,a,l,s,r=e[1](e[0])+"";function b(){return e[38](e[0])}return{c(){t=Object(n.u)("div"),c=Object(n.u)("span"),i=Object(n.Z)(r),o=Object(n.V)(),a=Object(n.u)("button"),Object(n.g)(a,"class",""),Object(n.g)(a,"data-uk-icon","icon: close"),Object(n.g)(a,"title","Remove selectecd item"),Object(n.g)(t,"class","search-tag svelte-1rkr4ei"),Object(n.U)(t,"border-color",e[2]?e[0][e[2]]:void 0)},m(e,r){Object(n.F)(e,t,r),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(t,o),Object(n.e)(t,a),l||(s=Object(n.H)(a,"click",b),l=!0)},p(c,o){e=c,514&o[0]&&r!==(r=e[1](e[0])+"")&&Object(n.S)(i,r),516&o[0]&&Object(n.U)(t,"border-color",e[2]?e[0][e[2]]:void 0)},d(e){e&&Object(n.t)(t),l=!1,s()}}}function b(e){let t,c,i;return{c(){t=Object(n.u)("input"),Object(n.g)(t,"class","uk-search-input search-multiple-input svelte-1rkr4ei"),Object(n.g)(t,"placeholder",e[4]),Object(n.g)(t,"name",e[6]),t.disabled=e[7],Object(n.g)(t,"title",e[8]),Object(n.g)(t,"aria-label",e[4]),Object(n.bb)(t,"modern",e[11])},m(o,a){Object(n.F)(o,t,a),e[39](t),Object(n.T)(t,e[12]),c||(i=[Object(n.H)(t,"input",e[40]),Object(n.H)(t,"input",e[27]),Object(n.H)(t,"focus",e[29]),Object(n.H)(t,"keydown",e[25]),Object(n.H)(t,"click",e[28]),Object(n.H)(t,"keypress",e[26])],c=!0)},p(e,c){16&c[0]&&Object(n.g)(t,"placeholder",e[4]),64&c[0]&&Object(n.g)(t,"name",e[6]),128&c[0]&&(t.disabled=e[7]),256&c[0]&&Object(n.g)(t,"title",e[8]),16&c[0]&&Object(n.g)(t,"aria-label",e[4]),4096&c[0]&&t.value!==e[12]&&Object(n.T)(t,e[12]),2048&c[0]&&Object(n.bb)(t,"modern",e[11])},d(o){o&&Object(n.t)(t),e[39](null),c=!1,Object(n.O)(i)}}}function u(e){let t,c;return{c(){t=Object(n.u)("li"),c=Object(n.Z)(e[3]),Object(n.g)(t,"class","uk-nav-header")},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c)},p(e,t){8&t[0]&&Object(n.S)(c,e[3])},d(e){e&&Object(n.t)(t)}}}function d(e){let t,c,i=e[17],a=[];for(let t=0;t<i.length;t+=1)a[t]=h(o(e,i,t));let l=e[18]>0&&g(e);return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=Object(n.V)(),l&&l.c(),c=Object(n.v)()},m(e,i){for(let t=0;t<a.length;t+=1)a[t].m(e,i);Object(n.F)(e,t,i),l&&l.m(e,i),Object(n.F)(e,c,i)},p(e,n){if(2293760&n[0]){let c;for(i=e[17],c=0;c<i.length;c+=1){const l=o(e,i,c);a[c]?a[c].p(l,n):(a[c]=h(l),a[c].c(),a[c].m(t.parentNode,t))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}e[18]>0?l?l.p(e,n):(l=g(e),l.c(),l.m(c.parentNode,c)):l&&(l.d(1),l=null)},d(e){Object(n.s)(a,e),e&&Object(n.t)(t),l&&l.d(e),e&&Object(n.t)(c)}}}function O(e){let t,c,i=e[63].label+"";return{c(){c=Object(n.v)(),t=new n.a(c)},m(e,o){t.m(i,e,o),Object(n.F)(e,c,o)},p(e,c){131072&c[0]&&i!==(i=e[63].label+"")&&t.p(i)},d(e){e&&Object(n.t)(c),e&&t.d()}}}function j(e){let t,c,i=e[63].highlighted.label+"";return{c(){c=Object(n.v)(),t=new n.a(c)},m(e,o){t.m(i,e,o),Object(n.F)(e,c,o)},p(e,c){131072&c[0]&&i!==(i=e[63].highlighted.label+"")&&t.p(i)},d(e){e&&Object(n.t)(c),e&&t.d()}}}function h(e){let t,c,i,o,a;function l(e,t){return e[63].highlighted?j:O}let s=l(e),r=s(e);function b(){return e[41](e[63])}return{c(){t=Object(n.u)("li"),c=Object(n.u)("a"),r.c(),Object(n.g)(c,"href",i="?region="+(e[63].item?e[63].item.id:"")),Object(n.bb)(t,"uk-active",e[65]===e[16])},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c),r.m(c,null),o||(a=Object(n.H)(c,"click",Object(n.N)(b)),o=!0)},p(o,a){s===(s=l(e=o))&&r?r.p(e,a):(r.d(1),r=s(e),r&&(r.c(),r.m(c,null))),131072&a[0]&&i!==(i="?region="+(e[63].item?e[63].item.id:""))&&Object(n.g)(c,"href",i),65536&a[0]&&Object(n.bb)(t,"uk-active",e[65]===e[16])},d(e){e&&Object(n.t)(t),r.d(),o=!1,a()}}}function g(e){let t,c,i,o,a,l;return{c(){t=Object(n.u)("li"),c=Object(n.V)(),i=Object(n.u)("li"),o=Object(n.Z)("â€¦ "),a=Object(n.Z)(e[18]),l=Object(n.Z)(" results not shown"),Object(n.g)(t,"class","uk-nav-divider"),Object(n.g)(i,"class","more-results svelte-1rkr4ei")},m(e,s){Object(n.F)(e,t,s),Object(n.F)(e,c,s),Object(n.F)(e,i,s),Object(n.e)(i,o),Object(n.e)(i,a),Object(n.e)(i,l)},p(e,t){262144&t[0]&&Object(n.S)(a,e[18])},d(e){e&&Object(n.t)(t),e&&Object(n.t)(c),e&&Object(n.t)(i)}}}function p(e){let t,c,i,o,a,r,b;function O(e,t){return e[19]?l:s}let j=O(e),h=j(e);function g(e,t){return e[17]&&e[17].length>0?d:e[3]?u:void 0}let p=g(e),m=p&&p(e);return{c(){t=Object(n.u)("div"),h.c(),c=Object(n.V)(),i=Object(n.u)("div"),o=Object(n.u)("ul"),m&&m.c(),Object(n.g)(o,"class","uk-nav uk-dropdown-nav"),Object(n.g)(i,"class","uk-dropdown uk-dropdown-bottom-left search-box-list svelte-1rkr4ei"),Object(n.bb)(i,"uk-open",e[15]),Object(n.g)(t,"class",a=e[5]+" uk-search search-box svelte-1rkr4ei"),Object(n.bb)(t,"uk-search-default",!e[19]),Object(n.bb)(t,"search-multiple",e[19]),Object(n.bb)(t,"modern",e[11])},m(a,l){Object(n.F)(a,t,l),h.m(t,null),Object(n.e)(t,c),Object(n.e)(t,i),Object(n.e)(i,o),m&&m.m(o,null),e[42](i),r||(b=[Object(n.H)(window,"click",e[24]),Object(n.H)(t,"click",e[23])],r=!0)},p(e,l){j===(j=O(e))&&h?h.p(e,l):(h.d(1),h=j(e),h&&(h.c(),h.m(t,c))),p===(p=g(e))&&m?m.p(e,l):(m&&m.d(1),m=p&&p(e),m&&(m.c(),m.m(o,null))),32768&l[0]&&Object(n.bb)(i,"uk-open",e[15]),32&l[0]&&a!==(a=e[5]+" uk-search search-box svelte-1rkr4ei")&&Object(n.g)(t,"class",a),524320&l[0]&&Object(n.bb)(t,"uk-search-default",!e[19]),524320&l[0]&&Object(n.bb)(t,"search-multiple",e[19]),2080&l[0]&&Object(n.bb)(t,"modern",e[11])},i:n.J,o:n.J,d(c){c&&Object(n.t)(t),h.d(),m&&m.d(),e[42](null),r=!1,Object(n.O)(b)}}}function m(e,t,c){const o=Object(i.a)();let a,l,s,{items:r}=t,{filterItem:b=null}=t,{labelFieldName:u}=t,{labelFunction:d=function(e){return null==e?"":u?e[u]:e}}=t,{colorFieldName:O}=t,{selectFirstIfEmpty:j=!1}=t,{minCharactersToSearch:h=1}=t,{maxItemsToShowInList:g=0}=t,{noResultsText:p="No results found"}=t,{placeholder:m}=t,{className:f=""}=t,{name:v}=t,{disabled:y=!1}=t,{title:k}=t,{selectedItem:$}=t,{selectedItems:w=null}=t,{maxSelections:_=Number.POSITIVE_INFINITY}=t,{modern:x=!1}=t,S=0;function V(e){o("remove",e)}let F=!1,D=-1,M=[],L=0;function C(e){return g<=0||e.length<g?e:e.slice(0,g)}function P(){const e=G.size>0||null!=b?W.filter((e=>!G.has(e.label)&&(null==b||b(e.item)))):W;c(17,M=C(e)),c(18,L=e.length-M.length)}function E(){const e=function(e){if(null==e)return"";const t=e.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();return S=t.length,h>1&&S<h?"":t.toLowerCase().trim()}(a);if(""===e)return P(),void q();const t=e.split(" "),n=function(e,t){const c="("+e.trim().replace(/\s/g,")(.*)(")+")",n=new RegExp(c,"ig");let i=1;const o=c.split(")(").length+1;let a="";for(;i<o;i++)a+=i%2?"<b>$".concat(i,"</b>"):"$".concat(i);return e=>{const c=Object.assign({highlighted:{}},e);return t&&t.forEach((e=>{c[e]&&(c.highlighted[e]=c[e].replace(n,a))})),c}}(e,["label"]),i=W.filter((e=>{const c=e.keywords;return t.every((e=>c.includes(e)))&&!G.has(e.label)&&(null==b||b(e.item))}));c(17,M=C(i).map(n)),c(18,L=i.length-M.length),q()}function R(e){c(0,$=e.item)}function T(){R(M[D]),U()}function z(){B(),D>0&&c(16,D--,D),A()}function N(){B(),D<M.length-1&&c(16,D++,D),A()}function A(){const e=s.querySelector(".selected");e&&"function"==typeof e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}function Z(e){R(e),U()}function I(e){e.stopPropagation(),F&&(l.focus(),U())}function H(){if(P(),B(),$)for(let e=0;e<W.length;e++){const t=W[e];if($==t.item){c(16,D=e),A();break}}}function B(){Y()||c(15,F=!0)}function U(){c(15,F=!1),!a&&j&&T()}function Y(){return h>1&&S<h}function q(){Y()&&U()}let J,W,G;return e.$$set=e=>{"items"in e&&c(30,r=e.items),"filterItem"in e&&c(31,b=e.filterItem),"labelFieldName"in e&&c(32,u=e.labelFieldName),"labelFunction"in e&&c(1,d=e.labelFunction),"colorFieldName"in e&&c(2,O=e.colorFieldName),"selectFirstIfEmpty"in e&&c(33,j=e.selectFirstIfEmpty),"minCharactersToSearch"in e&&c(34,h=e.minCharactersToSearch),"maxItemsToShowInList"in e&&c(35,g=e.maxItemsToShowInList),"noResultsText"in e&&c(3,p=e.noResultsText),"placeholder"in e&&c(4,m=e.placeholder),"className"in e&&c(5,f=e.className),"name"in e&&c(6,v=e.name),"disabled"in e&&c(7,y=e.disabled),"title"in e&&c(8,k=e.title),"selectedItem"in e&&c(0,$=e.selectedItem),"selectedItems"in e&&c(9,w=e.selectedItems),"maxSelections"in e&&c(10,_=e.maxSelections),"modern"in e&&c(11,x=e.modern)},e.$$.update=()=>{512&e.$$.dirty[0]&&c(19,J=null!=w),1&e.$$.dirty[0]&&(c(12,a=d($)),J?($&&o("add",$),c(0,$=null),c(12,a="")):o("change",$)),1073741826&e.$$.dirty[0]&&(W=r.map((e=>({keywords:d(e).toLowerCase().trim(),label:d(e),item:e})))),514&e.$$.dirty[0]&&(G=new Set((w||[]).map((e=>d(e)))))},[$,d,O,p,m,f,v,y,k,w,_,x,a,l,s,F,D,M,L,J,V,Z,function(){R({item:void 0}),U()},function(e){e.stopPropagation(),A()},function(){U()},function(e){let t=e.key;"Tab"===t&&e.shiftKey&&(t="ShiftTab");const c={Tab:F?N.bind(this):null,ShiftTab:F?z.bind(this):null,ArrowDown:N.bind(this),ArrowUp:z.bind(this),Escape:I.bind(this)}[t];"function"==typeof c&&(e.preventDefault(),c(e))},function(e){"Enter"===e.key&&(e.preventDefault(),T())},function(e){c(12,a=e.target.value),E(),c(16,D=0),B()},function(){H(),x&&l.select()},function(){H()},r,b,u,j,h,g,function(e){n.i[e?"unshift":"push"]((()=>{l=e,c(13,l)}))},function(){a=this.value,c(12,a)},e=>V(e),function(e){n.i[e?"unshift":"push"]((()=>{l=e,c(13,l)}))},function(){a=this.value,c(12,a)},e=>Z(e),function(e){n.i[e?"unshift":"push"]((()=>{s=e,c(14,s)}))}]}class f extends n.b{constructor(e){super(),Object(n.E)(this,e,m,p,n.P,{items:30,filterItem:31,labelFieldName:32,labelFunction:1,colorFieldName:2,selectFirstIfEmpty:33,minCharactersToSearch:34,maxItemsToShowInList:35,noResultsText:3,placeholder:4,className:5,name:6,disabled:7,title:8,selectedItem:0,selectedItems:9,maxSelections:10,modern:11},[-1,-1,-1])}}t.a=f},315:function(e,t,c){"use strict";var n=c(0),i=c(59),o=c(306),a=c(434);function l(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function s(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?l(Object(c),!0).forEach((function(t){r(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):l(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function r(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}let b=null;function u(e){return e&&null!=e.datum?u(e.datum):e}function d(e,t={}){if(!e)return;let c=!1,n=null,i=t;const o=(t,o,l,r)=>{if(c)return;const{popper:d,update:O,hide:j}=function(){if(b)return b;const e=document.createElement("div");e.classList.add("viz-tooltip","mapboxgl-popup-content","mapboxgl-map"),document.body.appendChild(e);let t={width:0,height:0,x:0,y:0};const c={getBoundingClientRect:()=>({left:t.x,right:t.x+t.width,width:t.width,top:t.y,bottom:t.y+t.height,height:t.height})},n=Object(a.a)(c,e,{placement:"top-start",modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"flip",options:{padding:8}}]}),i=(c=0,i=0,o=0,a=0)=>{t.x=c,t.y=i,t.width=o,t.height=a,e.style.display="",n.update()},o=()=>{e.style.display="none"};return b={instance:n,popper:e,update:i,hide:o},{instance:n,popper:e,update:i,hide:o}}(),h=u(l);if(null==r||""===r||null==h.value)return j(),void(n&&n.$set({hidden:!0}));O(o.clientX,o.clientY),n?n.$set({hidden:!1,item:u(l)}):n=new e({target:d,props:s(s({},i),{},{hidden:!1,item:u(l)})})};return o.destroy=()=>{n&&(n.$destroy(),n=null),c=!0},o.update=e=>{i=e,n&&n.$set(s({},i))},o}function O(e){let t,c;return{c(){t=Object(n.u)("div"),Object(n.g)(t,"class","root vega-embed"),Object(n.g)(t,"data-message",e[4]),Object(n.g)(t,"data-testid","vega"),Object(n.g)(t,"data-status",c=e[2]?"error":e[1]?"no-data":e[0]?"loading":"ready"),Object(n.bb)(t,"loading-bg",!e[2]&&e[0]),Object(n.bb)(t,"message-overlay",e[2]||e[1]&&!e[0])},m(c,i){Object(n.F)(c,t,i),e[22](t)},p(e,[i]){16&i&&Object(n.g)(t,"data-message",e[4]),7&i&&c!==(c=e[2]?"error":e[1]?"no-data":e[0]?"loading":"ready")&&Object(n.g)(t,"data-status",c),5&i&&Object(n.bb)(t,"loading-bg",!e[2]&&e[0]),7&i&&Object(n.bb)(t,"message-overlay",e[2]||e[1]&&!e[0])},i:n.J,o:n.J,d(c){c&&Object(n.t)(t),e[22](null)}}}function j(e,t,a){let{data:l=Promise.resolve([])}=t;const s=Object(i.a)();let{spec:r}=t,b=null,u=null,O=null,{signals:j={}}=t,{signalListeners:h=[]}=t,{dataListeners:g=[]}=t,{eventListeners:p=[]}=t,{scrollSpy:m=-1}=t,f=!1,v=!1,y=!1,{resetSignalsUponNoData:k=!0}=t,{noDataText:$="No data available"}=t,{patchSpec:w=null}=t,{tooltip:_}=t,{tooltipProps:x={}}=t,S={width:300,height:300};function V(e,t){e&&(a(0,f=!0),a(2,y=!1),a(1,v=!1),Promise.all([e,t]).then((([t,c])=>{e===O&&(t.view.change("values",t.view.changeset().remove((()=>!0)).insert(c||[])),a(1,v=!c||0===c.length),Object.entries(j).forEach((([e,c])=>{t.view.signal(e,k&&v?null:c)})),t.view.runAsync(),a(0,f=!1))})).catch((e=>{console.error("error while updating data",e),a(0,f=!1),a(1,v=!1),a(2,y=!0)})))}function F(e){if(!b)return;O&&O.then((e=>e.finalize())),u=null,a(2,y=!1);const t=e=>(e.signals=e.signals||[],Object.entries(j).forEach((([t,c])=>{e.signals.push({name:t,value:c})})),e.signals.push({name:"width",init:"containerSize()[0]",on:[{events:{source:"window",type:"resize"},update:"containerSize()[0]"}]}),e.signals.push({name:"height",init:"containerSize()[1]",on:[{events:{source:"window",type:"resize"},update:"containerSize()[1]"}]}),e);a(18,O=c.e(15).then(c.bind(null,433)).then((c=>c.default(b,e,{actions:!1,logLevel:Error,tooltip:M,patch:t})))),O.then((t=>{b&&(u=t,b.setAttribute("role","figure"),h.forEach((c=>{t.view.addSignalListener(c,((c,n)=>{s("signal",{name:c,value:n,view:t.view,spec:e})}))})),g.forEach((c=>{t.view.addDataListener(c,((c,n)=>{s("dataListener",{name:c,value:n,view:t.view,spec:e})}))})),p.forEach((c=>{t.view.addEventListener(c,((n,i)=>{s(c,{event:n,item:i,view:t.view,spec:e})}))})),V(O,l))})),O.catch((e=>{console.error("error while creating vega",e),a(2,y=!0)}))}let D,M,L,C=null;function P(){a(19,S=b.getBoundingClientRect()),Object(o.c)(b,(e=>{(Math.abs(e.width-S.width)>1||Math.abs(e.height-S.height)>1)&&(a(19,S=e),!w&&u&&u.view.resize().runAsync())})),w||F(r)}return Object(i.c)((()=>{if(m>=0){UIkit.scrollspy(b,{offset:m});const e=()=>{P(),b.removeEventListener("inview",e)};b.addEventListener("inview",e)}else P()})),Object(i.b)((()=>{Object(o.e)(b),C&&(C.$destroy(),C=null),M&&M.destroy(),u?(u.finalize(),u=null,a(18,O=null)):O&&(O.then((e=>e.finalize())),a(18,O=null))})),e.$$set=e=>{"data"in e&&a(5,l=e.data),"spec"in e&&a(6,r=e.spec),"signals"in e&&a(7,j=e.signals),"signalListeners"in e&&a(8,h=e.signalListeners),"dataListeners"in e&&a(9,g=e.dataListeners),"eventListeners"in e&&a(10,p=e.eventListeners),"scrollSpy"in e&&a(11,m=e.scrollSpy),"resetSignalsUponNoData"in e&&a(12,k=e.resetSignalsUponNoData),"noDataText"in e&&a(13,$=e.noDataText),"patchSpec"in e&&a(14,w=e.patchSpec),"tooltip"in e&&a(15,_=e.tooltip),"tooltipProps"in e&&a(16,x=e.tooltipProps)},e.$$.update=()=>{8199&e.$$.dirty&&a(4,D=y?"Error occurred":v&&!f?$:null),32768&e.$$.dirty&&a(20,M=d(_)),1114112&e.$$.dirty&&M&&M.update(x),262176&e.$$.dirty&&V(O,l),540736&e.$$.dirty&&a(21,L=w?w(r,S):r),2097152&e.$$.dirty&&F(L),262272&e.$$.dirty&&function(e,t){e&&u&&0!==Object.keys(t).length&&(a(2,y=!1),Object.entries(t).forEach((([e,t])=>{u.view.signal(e,t)})),u.view.runAsync())}(O,j)},[f,v,y,b,D,l,r,j,h,g,p,m,k,$,w,_,x,()=>O.then((e=>e.view)),O,S,M,L,function(e){n.i[e?"unshift":"push"]((()=>{b=e,a(3,b)}))}]}class h extends n.b{constructor(e){super(),Object(n.E)(this,e,j,O,n.P,{data:5,spec:6,signals:7,signalListeners:8,dataListeners:9,eventListeners:10,scrollSpy:11,resetSignalsUponNoData:12,noDataText:13,patchSpec:14,tooltip:15,tooltipProps:16,vegaAccessor:17})}get vegaAccessor(){return this.$$.ctx[17]}}t.a=h},316:function(e,t,c){"use strict";c.d(t,"c",(function(){return j})),c.d(t,"b",(function(){return g})),c.d(t,"d",(function(){return p})),c.d(t,"a",(function(){return f}));var n=c(319),i=c(105),o=c(1),a=c(3),l=c(77),s=c(312);function r(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function b(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?r(Object(c),!0).forEach((function(t){u(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):r(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function u(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function d(e,t,c,n){return Promise.all(t.map((t=>{const a=t.info;return a.level===o.k.id?[]:Object(i.d)(e,a.level,a.propertyId,c,n,!1,{geo_value:a.propertyId}).then((t=>Object(i.a)(t,e))).then((e=>e.map((e=>(e.displayName=a.displayName,e)))))}))).then((e=>e.flat()))}function O(e,t,c,n){return t&&t.level!==o.k.id?Object(i.d)(e,t.level,t.propertyId,c,n,!1,{geo_value:t.propertyId}).then((t=>Object(i.a)(t,e))).then((e=>e.map((e=>(e.displayName=t.displayName,e))))):Promise.resolve([])}function j(e,t,c,n){const i=t.length<2,a=0===t.length?null:t[0].info;return{sensor:e,data:i?O(e,a,c,n):d(e,t,c,n),spec:f(e,t,[c,n]),noDataText:a?a.level===o.k.id?"Please select a county":"No data available":"No location selected"}}const h=Object(l.a)((e=>{a.u.set(e)}),1,{leading:!1,trailing:!0});function g(e){const t=function(e){const t=e.detail.value;return t&&Array.isArray(t.date_value)&&t.date_value.length>0?Number.parseInt(Object(i.e)(t.date_value[0]),10):null}(e);t&&h(t)}function p(e){const t=e.detail.item;return t&&t.isVoronoi?t.datum.datum.time_value:null}const m=[{calculate:"datum.value == null ? null : (datum.value - datum.stderr) / 100",as:"value_lower_bound"},{calculate:"datum.value == null ? null : (datum.value + datum.stderr) / 100",as:"value_upper_bound"}];function f(e,t,c,i){const o="percent"===e.format,a=o?e=>e/100:e=>e,l=i&&i.field?i.field:o?"pValue":"value",r=!(!i||!i.domain),u=a(r?i.domain[1]:0),d=[{as:"clipped",calculate:"".concat(!r," || datum.").concat(l," == null ? false : datum.").concat(l," > ").concat(u)},{as:"clippedData",calculate:"datum.clipped ? datum.".concat(l," : null")}];return{$schema:"https://vega.github.io/schema/vega-lite/v4.json",data:{name:"values"},padding:{left:50,top:6,bottom:20,right:2},autosize:{type:"none",contains:"padding",resize:!0},transform:[...e.hasStdErr?o?m:n.e:[],{as:"pValue",calculate:"datum.value == null ? null : datum.value / 100"},...r?d:[]],resolve:{scale:{y:"shared"}},encoding:{color:Object(n.a)(t),x:{field:"date_value",type:"temporal",axis:{title:null,format:"%m/%d",formatType:"cachedTime",tickCount:"month"},scale:c?{domain:[c[0].getTime(),c[1].getTime()]}:{}}},layer:[...e.hasStdErr?[n.d]:[],{mark:{type:"line",interpolate:"linear"},encoding:{y:{field:l,type:"quantitative",scale:{domainMin:r?a(i.domain[0]):0,domainMax:r?a(i.domain[1]):void 0,clamp:!0,nice:!r},axis:b(b({},o?{format:".1%",formatType:"cachedNumber"}:{}),{},{title:null,tickCount:3,minExtent:25})}}},...r?[{mark:{type:"text",text:"âˆ¶",size:12,baseline:"bottom",dx:-.3,dy:3.5,stroke:"#FFAAAA",strokeOpacity:.5},encoding:{y:{field:"clippedData",type:"quantitative"}}}]:[],{selection:{highlight:{type:"single",empty:"none",on:"mouseover",nearest:!0,encodings:["x"],clear:"mouseout"}},mark:{type:"rule",strokeWidth:2.5,color:"white",opacity:.001,tooltip:!0}},{mark:{type:"point",radius:1,stroke:null,fill:"grey"},encoding:{opacity:{condition:[{selection:"highlight",value:1},{test:"datum.time_value == highlightTimeValue",value:1}],value:0},y:{field:l,type:"quantitative"}}},{mark:{type:"rule"},encoding:{opacity:{condition:[{selection:"highlight",value:1},{test:"datum.time_value == highlightTimeValue",value:1}],value:0},y:{field:l,type:"quantitative"}}},s.a],config:{customFormatTypes:!0,legend:{disable:!0}}}}},318:function(e,t,c){"use strict";var n=c(0),i=c(307);c(251);function o(e){let t,c,i=e[2].displayName+"";return{c(){t=Object(n.Z)(i),c=Object(n.Z)(" on")},m(e,i){Object(n.F)(e,t,i),Object(n.F)(e,c,i)},p(e,c){4&c&&i!==(i=e[2].displayName+"")&&Object(n.S)(t,i)},d(e){e&&Object(n.t)(t),e&&Object(n.t)(c)}}}function a(e){let t,c,i,o,a,l,r,b,u=e[0].yAxis+"",d=e[0].formatValue(e[2].value)+"",O=e[0].hasStdErr&&null!=e[2].stderr&&s(e);return{c(){t=Object(n.u)("tr"),c=Object(n.u)("th"),i=Object(n.Z)(u),o=Object(n.V)(),a=Object(n.u)("td"),l=Object(n.Z)(d),r=Object(n.V)(),O&&O.c(),b=Object(n.v)(),Object(n.g)(c,"class","svelte-1icnyvz"),Object(n.g)(a,"class","right svelte-1icnyvz")},m(e,s){Object(n.F)(e,t,s),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(t,o),Object(n.e)(t,a),Object(n.e)(a,l),Object(n.F)(e,r,s),O&&O.m(e,s),Object(n.F)(e,b,s)},p(e,t){1&t&&u!==(u=e[0].yAxis+"")&&Object(n.S)(i,u),5&t&&d!==(d=e[0].formatValue(e[2].value)+"")&&Object(n.S)(l,d),e[0].hasStdErr&&null!=e[2].stderr?O?O.p(e,t):(O=s(e),O.c(),O.m(b.parentNode,b)):O&&(O.d(1),O=null)},d(e){e&&Object(n.t)(t),e&&Object(n.t)(r),O&&O.d(e),e&&Object(n.t)(b)}}}function l(e){let t,c,o,a,l,s,r,b,u,d,O,j,h,g,p,m,f,v,y,k,$,w,_,x,S,V,F,D,M,L,C,P,E,R,T,z,N,A=e[0].yAxis+"",Z=Object(i.c)(e[2].date_value)+"",I=e[0].formatValue(e[2].count)+"",H=e[0].formatValue(e[2].countRatio)+"",B=e[0].formatValue(e[2].avg)+"",U=e[0].formatValue(e[2].avgRatio)+"",Y=Object(i.c)(e[2].date_value)+"",q=e[0].formatValue(e[2].countCumulative)+"",J=e[0].formatValue(e[2].countRatioCumulative)+"";return{c(){t=Object(n.u)("tr"),c=Object(n.u)("th"),o=Object(n.Z)(A),a=Object(n.V)(),l=Object(n.u)("th"),l.textContent="Count",s=Object(n.V)(),r=Object(n.u)("th"),r.textContent="Ratios (per 100,000)",b=Object(n.V)(),u=Object(n.u)("tr"),d=Object(n.u)("th"),O=Object(n.Z)(Z),j=Object(n.V)(),h=Object(n.u)("td"),g=Object(n.Z)(I),p=Object(n.V)(),m=Object(n.u)("td"),f=Object(n.Z)(H),v=Object(n.V)(),y=Object(n.u)("tr"),k=Object(n.u)("th"),k.textContent="7-day average",$=Object(n.V)(),w=Object(n.u)("td"),_=Object(n.Z)(B),x=Object(n.V)(),S=Object(n.u)("td"),V=Object(n.Z)(U),F=Object(n.V)(),D=Object(n.u)("tr"),M=Object(n.u)("th"),L=Object(n.Z)(Y),C=Object(n.Z)(" (cumulative)"),P=Object(n.V)(),E=Object(n.u)("td"),R=Object(n.Z)(q),T=Object(n.V)(),z=Object(n.u)("td"),N=Object(n.Z)(J),Object(n.g)(c,"class","svelte-1icnyvz"),Object(n.g)(l,"class","area svelte-1icnyvz"),Object(n.g)(r,"class","area svelte-1icnyvz"),Object(n.g)(d,"class","svelte-1icnyvz"),Object(n.g)(h,"class","right svelte-1icnyvz"),Object(n.g)(m,"class","right svelte-1icnyvz"),Object(n.g)(k,"class","svelte-1icnyvz"),Object(n.g)(w,"class","right svelte-1icnyvz"),Object(n.g)(S,"class","right svelte-1icnyvz"),Object(n.g)(M,"class","svelte-1icnyvz"),Object(n.g)(E,"class","right svelte-1icnyvz"),Object(n.g)(z,"class","right svelte-1icnyvz")},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c),Object(n.e)(c,o),Object(n.e)(t,a),Object(n.e)(t,l),Object(n.e)(t,s),Object(n.e)(t,r),Object(n.F)(e,b,i),Object(n.F)(e,u,i),Object(n.e)(u,d),Object(n.e)(d,O),Object(n.e)(u,j),Object(n.e)(u,h),Object(n.e)(h,g),Object(n.e)(u,p),Object(n.e)(u,m),Object(n.e)(m,f),Object(n.F)(e,v,i),Object(n.F)(e,y,i),Object(n.e)(y,k),Object(n.e)(y,$),Object(n.e)(y,w),Object(n.e)(w,_),Object(n.e)(y,x),Object(n.e)(y,S),Object(n.e)(S,V),Object(n.F)(e,F,i),Object(n.F)(e,D,i),Object(n.e)(D,M),Object(n.e)(M,L),Object(n.e)(M,C),Object(n.e)(D,P),Object(n.e)(D,E),Object(n.e)(E,R),Object(n.e)(D,T),Object(n.e)(D,z),Object(n.e)(z,N)},p(e,t){1&t&&A!==(A=e[0].yAxis+"")&&Object(n.S)(o,A),4&t&&Z!==(Z=Object(i.c)(e[2].date_value)+"")&&Object(n.S)(O,Z),5&t&&I!==(I=e[0].formatValue(e[2].count)+"")&&Object(n.S)(g,I),5&t&&H!==(H=e[0].formatValue(e[2].countRatio)+"")&&Object(n.S)(f,H),5&t&&B!==(B=e[0].formatValue(e[2].avg)+"")&&Object(n.S)(_,B),5&t&&U!==(U=e[0].formatValue(e[2].avgRatio)+"")&&Object(n.S)(V,U),4&t&&Y!==(Y=Object(i.c)(e[2].date_value)+"")&&Object(n.S)(L,Y),5&t&&q!==(q=e[0].formatValue(e[2].countCumulative)+"")&&Object(n.S)(R,q),5&t&&J!==(J=e[0].formatValue(e[2].countRatioCumulative)+"")&&Object(n.S)(N,J)},d(e){e&&Object(n.t)(t),e&&Object(n.t)(b),e&&Object(n.t)(u),e&&Object(n.t)(v),e&&Object(n.t)(y),e&&Object(n.t)(F),e&&Object(n.t)(D)}}}function s(e){let t,c,i,o,a,l=e[0].formatValue(e[2].stderr)+"";return{c(){t=Object(n.u)("tr"),c=Object(n.u)("th"),c.textContent="Standard Error",i=Object(n.V)(),o=Object(n.u)("td"),a=Object(n.Z)(l),Object(n.g)(c,"class","svelte-1icnyvz"),Object(n.g)(o,"class","right svelte-1icnyvz")},m(e,l){Object(n.F)(e,t,l),Object(n.e)(t,c),Object(n.e)(t,i),Object(n.e)(t,o),Object(n.e)(o,a)},p(e,t){5&t&&l!==(l=e[0].formatValue(e[2].stderr)+"")&&Object(n.S)(a,l)},d(e){e&&Object(n.t)(t)}}}function r(e){let t,c,s,r,b,u,d,O=Object(i.c)(e[2].date_value)+"",j=e[2].displayName&&o(e);function h(e,t){return e[0].isCasesOrDeath?l:a}let g=h(e),p=g(e);return{c(){t=Object(n.u)("div"),c=Object(n.u)("h5"),j&&j.c(),s=Object(n.V)(),r=Object(n.Z)(O),b=Object(n.V)(),u=Object(n.u)("table"),d=Object(n.u)("tbody"),p.c(),Object(n.g)(c,"class","svelte-1icnyvz"),Object(n.g)(t,"aria-label","tooltip"),Object(n.g)(t,"class","tooltip svelte-1icnyvz"),Object(n.bb)(t,"hidden",e[1])},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c),j&&j.m(c,null),Object(n.e)(c,s),Object(n.e)(c,r),Object(n.e)(t,b),Object(n.e)(t,u),Object(n.e)(u,d),p.m(d,null)},p(e,[a]){e[2].displayName?j?j.p(e,a):(j=o(e),j.c(),j.m(c,s)):j&&(j.d(1),j=null),4&a&&O!==(O=Object(i.c)(e[2].date_value)+"")&&Object(n.S)(r,O),g===(g=h(e))&&p?p.p(e,a):(p.d(1),p=g(e),p&&(p.c(),p.m(d,null))),2&a&&Object(n.bb)(t,"hidden",e[1])},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),j&&j.d(),p.d()}}}function b(e,t,c){let{sensor:n}=t,{hidden:i=!1}=t,{item:o}=t;return e.$$set=e=>{"sensor"in e&&c(0,n=e.sensor),"hidden"in e&&c(1,i=e.hidden),"item"in e&&c(2,o=e.item)},[n,i,o]}class u extends n.b{constructor(e){super(),Object(n.E)(this,e,b,r,n.P,{sensor:0,hidden:1,item:2})}}t.a=u},319:function(e,t,c){"use strict";c.d(t,"d",(function(){return s})),c.d(t,"e",(function(){return r})),c.d(t,"a",(function(){return d})),c.d(t,"b",(function(){return O})),c.d(t,"c",(function(){return j}));var n=c(348),i=c(312);function o(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function a(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?o(Object(c),!0).forEach((function(t){l(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function l(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}const s={mark:{type:"area",interpolate:"monotone"},encoding:{color:{field:"geo_value"},opacity:{value:.25},y:{field:"value_lower_bound",type:"quantitative"},y2:{field:"value_upper_bound"}}},r=[{calculate:"datum.value == null ? null : datum.value - datum.stderr",as:"value_lower_bound"},{calculate:"datum.value == null ? null : datum.value + datum.stderr",as:"value_upper_bound"}],b={field:"date_value",type:"temporal",axis:{orient:"bottom",labels:!1,title:null}},u=a(a({},b),{},{axis:{orient:"bottom",title:null,format:"%m/%d",formatType:"time",tickCount:"week",grid:!0,labelSeparation:10}});function d(e){return e?{field:"geo_value",type:"nominal",scale:{domain:e.map((e=>e.info.propertyId)),range:e.map(((e,t)=>0===t?"grey":e.color))}}:{value:"grey"}}function O(e,t,c,n,o){const l="countRatioCumulative"===t||"avgRatio"===t?" per 100,000 people":"",O=e.yAxis+l,j="countRatioCumulative"===t||"countCumulative"===t?60:50,h={$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:{text:o,font:'"Open Sans", Helvetica, sans-serif',fontSize:14.08,fontWeight:700,lineHeight:22,color:"#666"},data:{name:"values",values:n?[{date_value:n[0],value:0},{date_value:n[1],value:1}]:[]},autosize:{type:"none",contains:"padding",resize:!0},padding:{left:j,right:2,top:50,bottom:5},transform:e.hasStdErr?r:[],vconcat:[{encoding:{x:a(a({},b),{},{scale:{domain:{selection:"dateRange"}}})},resolve:{axis:{x:"independent"}},layer:[{mark:{type:"line",interpolate:"monotone"},encoding:{color:d(c),x:a({},u),y:{field:t,type:"quantitative",scale:{domainMin:0},axis:{minExtent:25,title:O}}}},{selection:{highlight:{type:"single",empty:"none",nearest:!0,encodings:["x"],on:"mouseover",clear:"mouseout"}},mark:{type:"circle",tooltip:!0},encoding:{color:{field:"geo_value"},x:a(a({},u),{},{axis:a(a({},u.axis),{},{labels:!1,grid:!1,tickCount:"day"})}),y:{field:t,type:"quantitative"}}},...e.hasStdErr?[s]:[],{transform:[{filter:{selection:"highlight"}}],mark:"rule",encoding:{y:{field:t,type:"quantitative"}}},i.a]},{height:40,padding:{top:0},view:{cursor:"col-resize"},encoding:{color:{field:"geo_value"},x:a({},u),y:{field:t,type:"quantitative",axis:{minExtent:25,tickCount:3,title:" "}}},layer:[{selection:{dateRange:{type:"interval",encodings:["x"],init:{x:[n[0].getTime(),n[1].getTime()]},mark:{cursor:"move"}}},mark:{type:"line",interpolate:"monotone"},encoding:{y:{field:t,type:"quantitative",axis:{minExtent:25,tickCount:3,title:" "}}}},...e.hasStdErr?[s]:[],{selection:{highlight2:{type:"single",empty:"none",nearest:!0,encodings:["x"],on:"mouseover",clear:"mouseout"}},transform:[{filter:{selection:"highlight2"}}],mark:"rule",encoding:{y:{field:t,type:"quantitative"}}},i.a]}],config:{customFormatTypes:!0,legend:{disable:!0}}};if(e.isCasesOrDeath){const e={mark:{type:"line",interpolate:"monotone",opacity:.2},encoding:{y:{field:t.replace("avg","count"),type:"quantitative"},color:{field:"geo_value"}}};h.vconcat[0].layer.unshift(e),h.vconcat[1].layer.unshift(e)}return h}function j(e,t){return Object(n.a)({},e,{vconcat:[{height:Math.floor(t.height-40-110)},{height:40}]})}},322:function(e,t,c){"use strict";var n=c(0);const i=(e,t,c,n=0)=>{let i=new Date(t,e,1);i.setDate(i.getDate()-i.getDay()+n);let o=11===e?0:e+1,a=[];for(;i.getMonth()!==o||i.getDay()!==n||6!==a.length;){i.getDay()===n&&a.unshift({days:[],id:"".concat(t).concat(e).concat(t).concat(a.length)});const o=Object.assign({partOfMonth:i.getMonth()===e,day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),date:new Date(i)},c(i));a[0].days.push(o),i.setDate(i.getDate()+1)}return a.reverse(),{month:e,year:t,weeks:a}};function o(e,t,c=null,n=0){e.setHours(0,0,0,0),t.setHours(0,0,0,0);let o=new Date(t.getFullYear(),t.getMonth()+1,1),a=[],l=new Date(e.getFullYear(),e.getMonth(),1),s=((e,t,c)=>{let n=new Date;return n.setHours(0,0,0,0),i=>{const o=i>=e&&i<=t;return{isInRange:o,selectable:o&&(!c||c(i)),isToday:i.getTime()===n.getTime()}}})(e,t,c);for(;l<o;)a.push(i(l.getMonth(),l.getFullYear(),s,n)),l.setMonth(l.getMonth()+1);return 0===a.length&&a.push(i(e.getMonth(),e.getFullYear(),s,n)),a}const a=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();var l=c(325),s=c(59);c(265);function r(e,t,c){const n=e.slice();return n[7]=t[c],n}function b(e){let t,c,i,o,l,s,r=e[7].date.getDate()+"";function b(){return e[6](e[7])}return{c(){t=Object(n.u)("div"),c=Object(n.u)("button"),i=Object(n.Z)(r),o=Object(n.V)(),Object(n.g)(c,"class","day--label svelte-1lvsugt"),Object(n.g)(c,"type","button"),Object(n.bb)(c,"selected",a(e[7].date,e[1])),Object(n.bb)(c,"highlighted",a(e[7].date,e[2])),Object(n.bb)(c,"shake-date",e[3]&&a(e[7].date,e[3])),Object(n.bb)(c,"disabled",!e[7].selectable),Object(n.g)(t,"class","day svelte-1lvsugt"),Object(n.bb)(t,"outside-month",!e[7].partOfMonth),Object(n.bb)(t,"is-today",e[7].isToday),Object(n.bb)(t,"is-disabled",!e[7].selectable)},m(e,a){Object(n.F)(e,t,a),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(t,o),l||(s=Object(n.H)(c,"click",b),l=!0)},p(o,l){e=o,1&l&&r!==(r=e[7].date.getDate()+"")&&Object(n.S)(i,r),3&l&&Object(n.bb)(c,"selected",a(e[7].date,e[1])),5&l&&Object(n.bb)(c,"highlighted",a(e[7].date,e[2])),9&l&&Object(n.bb)(c,"shake-date",e[3]&&a(e[7].date,e[3])),1&l&&Object(n.bb)(c,"disabled",!e[7].selectable),1&l&&Object(n.bb)(t,"outside-month",!e[7].partOfMonth),1&l&&Object(n.bb)(t,"is-today",e[7].isToday),1&l&&Object(n.bb)(t,"is-disabled",!e[7].selectable)},d(e){e&&Object(n.t)(t),l=!1,s()}}}function u(e){let t,c,i,o,a=e[0],s=[];for(let t=0;t<a.length;t+=1)s[t]=b(r(e,a,t));return{c(){t=Object(n.u)("div");for(let e=0;e<s.length;e+=1)s[e].c();Object(n.g)(t,"class","week svelte-1lvsugt")},m(e,c){Object(n.F)(e,t,c);for(let e=0;e<s.length;e+=1)s[e].m(t,null);o=!0},p(c,[n]){if(e=c,47&n){let c;for(a=e[0],c=0;c<a.length;c+=1){const i=r(e,a,c);s[c]?s[c].p(i,n):(s[c]=b(i),s[c].c(),s[c].m(t,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=a.length}},i(a){o||(a&&Object(n.d)((()=>{i&&i.end(1),c||(c=Object(n.o)(t,l.b,{x:50*e[4],duration:180,delay:90})),c.start()})),o=!0)},o(e){c&&c.invalidate(),e&&(i=Object(n.p)(t,l.a,{duration:180})),o=!1},d(e){e&&Object(n.t)(t),Object(n.s)(s,e),e&&i&&i.end()}}}function d(e,t,c){const n=Object(s.a)();let{days:i}=t,{selected:o}=t,{highlighted:a}=t,{shouldShakeDate:l}=t,{direction:r}=t;return e.$$set=e=>{"days"in e&&c(0,i=e.days),"selected"in e&&c(1,o=e.selected),"highlighted"in e&&c(2,a=e.highlighted),"shouldShakeDate"in e&&c(3,l=e.shouldShakeDate),"direction"in e&&c(4,r=e.direction)},[i,o,a,l,r,n,e=>n("dateSelected",e.date)]}class O extends n.b{constructor(e){super(),Object(n.E)(this,e,d,u,n.P,{days:0,selected:1,highlighted:2,shouldShakeDate:3,direction:4})}}var j=O;c(266);function h(e,t,c){const n=e.slice();return n[8]=t[c],n}function g(e,t){let c,i,o;return i=new j({props:{days:t[8].days,selected:t[1],highlighted:t[2],shouldShakeDate:t[3],direction:t[4]}}),i.$on("dateSelected",t[7]),{key:e,first:null,c(){c=Object(n.v)(),Object(n.n)(i.$$.fragment),this.first=c},m(e,t){Object(n.F)(e,c,t),Object(n.I)(i,e,t),o=!0},p(e,t){const c={};1&t&&(c.days=e[8].days),2&t&&(c.selected=e[1]),4&t&&(c.highlighted=e[2]),8&t&&(c.shouldShakeDate=e[3]),16&t&&(c.direction=e[4]),i.$set(c)},i(e){o||(Object(n.cb)(i.$$.fragment,e),o=!0)},o(e){Object(n.db)(i.$$.fragment,e),o=!1},d(e){e&&Object(n.t)(c),Object(n.r)(i,e)}}}function p(e){let t,c,i=[],o=new Map,a=e[0].weeks;const l=e=>e[8].id;for(let t=0;t<a.length;t+=1){let c=h(e,a,t),n=l(c);o.set(n,i[t]=g(n,c))}return{c(){t=Object(n.u)("div");for(let e=0;e<i.length;e+=1)i[e].c();Object(n.g)(t,"class","month-container svelte-dfjvzo")},m(e,o){Object(n.F)(e,t,o);for(let e=0;e<i.length;e+=1)i[e].m(t,null);c=!0},p(e,[c]){if(31&c){const a=e[0].weeks;Object(n.B)(),i=Object(n.eb)(i,c,l,1,e,a,o,t,n.M,g,null,h),Object(n.k)()}},i(e){if(!c){for(let e=0;e<a.length;e+=1)Object(n.cb)(i[e]);c=!0}},o(e){for(let e=0;e<i.length;e+=1)Object(n.db)(i[e]);c=!1},d(e){e&&Object(n.t)(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function m(e,t,c){let i,{id:o}=t,{visibleMonth:a}=t,{selected:l}=t,{highlighted:s}=t,{shouldShakeDate:r}=t,b=o;return e.$$set=e=>{"id"in e&&c(5,o=e.id),"visibleMonth"in e&&c(0,a=e.visibleMonth),"selected"in e&&c(1,l=e.selected),"highlighted"in e&&c(2,s=e.highlighted),"shouldShakeDate"in e&&c(3,r=e.shouldShakeDate)},e.$$.update=()=>{96&e.$$.dirty&&(c(4,i=b<o?1:-1),c(6,b=o))},[a,l,s,r,i,o,b,function(t){Object(n.j)(e,t)}]}class f extends n.b{constructor(e){super(),Object(n.E)(this,e,m,p,n.P,{id:5,visibleMonth:0,selected:1,highlighted:2,shouldShakeDate:3})}}var v=f;c(267);function y(e,t,c){const n=e.slice();return n[15]=t[c],n[17]=c,n}function k(e){let t,c,i,o,a,l,s=e[15].abbrev+"";function r(...t){return e[14](e[15],e[17],...t)}return{c(){t=Object(n.u)("div"),c=Object(n.u)("span"),i=Object(n.Z)(s),o=Object(n.V)(),Object(n.g)(c,"class","svelte-dn8kd0"),Object(n.g)(t,"class","month-selector--month svelte-dn8kd0"),Object(n.bb)(t,"selected",e[17]===e[0]),Object(n.bb)(t,"selectable",e[15].selectable)},m(e,s){Object(n.F)(e,t,s),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(t,o),a||(l=Object(n.H)(t,"click",r),a=!0)},p(c,o){e=c,64&o&&s!==(s=e[15].abbrev+"")&&Object(n.S)(i,s),1&o&&Object(n.bb)(t,"selected",e[17]===e[0]),64&o&&Object(n.bb)(t,"selectable",e[15].selectable)},d(e){e&&Object(n.t)(t),a=!1,l()}}}function $(e){let t,c,i,o,a,l,s,r,b,u,d,O,j,h,g=e[4][e[0]][0]+"",p=e[6],m=[];for(let t=0;t<p.length;t+=1)m[t]=k(y(e,p,t));return{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),i=Object(n.u)("div"),i.innerHTML='<i class="arrow left svelte-dn8kd0"></i>',o=Object(n.V)(),a=Object(n.u)("div"),l=Object(n.Z)(g),s=Object(n.V)(),r=Object(n.Z)(e[1]),b=Object(n.V)(),u=Object(n.u)("div"),u.innerHTML='<i class="arrow right svelte-dn8kd0"></i>',d=Object(n.V)(),O=Object(n.u)("div");for(let e=0;e<m.length;e+=1)m[e].c();Object(n.g)(i,"class","control svelte-dn8kd0"),Object(n.bb)(i,"enabled",e[3]),Object(n.g)(a,"class","label svelte-dn8kd0"),Object(n.g)(u,"class","control svelte-dn8kd0"),Object(n.bb)(u,"enabled",e[2]),Object(n.g)(c,"class","heading-section svelte-dn8kd0"),Object(n.g)(O,"class","month-selector svelte-dn8kd0"),Object(n.bb)(O,"open",e[5]),Object(n.g)(t,"class","cal-title")},m(g,p){Object(n.F)(g,t,p),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(c,o),Object(n.e)(c,a),Object(n.e)(a,l),Object(n.e)(a,s),Object(n.e)(a,r),Object(n.e)(c,b),Object(n.e)(c,u),Object(n.e)(t,d),Object(n.e)(t,O);for(let e=0;e<m.length;e+=1)m[e].m(O,null);j||(h=[Object(n.H)(i,"click",e[12]),Object(n.H)(a,"click",e[8]),Object(n.H)(u,"click",e[13])],j=!0)},p(e,[t]){if(8&t&&Object(n.bb)(i,"enabled",e[3]),17&t&&g!==(g=e[4][e[0]][0]+"")&&Object(n.S)(l,g),2&t&&Object(n.S)(r,e[1]),4&t&&Object(n.bb)(u,"enabled",e[2]),577&t){let c;for(p=e[6],c=0;c<p.length;c+=1){const n=y(e,p,c);m[c]?m[c].p(n,t):(m[c]=k(n),m[c].c(),m[c].m(O,null))}for(;c<m.length;c+=1)m[c].d(1);m.length=p.length}32&t&&Object(n.bb)(O,"open",e[5])},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),Object(n.s)(m,e),j=!1,Object(n.O)(h)}}}function w(e,t,c){const n=Object(s.a)();let i,{month:o}=t,{year:a}=t,{start:l}=t,{end:r}=t,{canIncrementMonth:b}=t,{canDecrementMonth:u}=t,{monthsOfYear:d}=t,O=!1;function j(){c(5,O=!O)}function h(e,{m:t,i:c}){e.stopPropagation(),t.selectable&&(n("monthSelected",c),j())}return e.$$set=e=>{"month"in e&&c(0,o=e.month),"year"in e&&c(1,a=e.year),"start"in e&&c(10,l=e.start),"end"in e&&c(11,r=e.end),"canIncrementMonth"in e&&c(2,b=e.canIncrementMonth),"canDecrementMonth"in e&&c(3,u=e.canDecrementMonth),"monthsOfYear"in e&&c(4,d=e.monthsOfYear)},e.$$.update=()=>{if(3090&e.$$.dirty){let e=l.getFullYear()===a,t=r.getFullYear()===a;c(6,i=d.map(((c,n)=>Object.assign({},{name:c[0],abbrev:c[1]},{selectable:!e&&!t||(!e||n>=l.getMonth())&&(!t||n<=r.getMonth())}))))}},[o,a,b,u,d,O,i,n,j,h,l,r,()=>n("incrementMonth",-1),()=>n("incrementMonth",1),(e,t,c)=>h(c,{m:e,i:t})]}class _ extends n.b{constructor(e){super(),Object(n.E)(this,e,w,$,n.P,{month:0,year:1,start:10,end:11,canIncrementMonth:2,canDecrementMonth:3,monthsOfYear:4})}}var x=_;c(268);const{window:S}=n.A,V=e=>({}),F=e=>({});function D(e){let t,c,i,o,a,l,s,r,b;Object(n.d)(e[14]);const u=e[13].trigger,d=Object(n.q)(u,e,e[12],F),O=e[13].default,j=Object(n.q)(O,e,e[12],null);return{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),d&&d.c(),i=Object(n.V)(),o=Object(n.u)("div"),a=Object(n.u)("div"),l=Object(n.u)("div"),j&&j.c(),Object(n.g)(c,"class","trigger"),Object(n.g)(l,"class","contents-inner svelte-wplbjj"),Object(n.g)(a,"class","contents svelte-wplbjj"),Object(n.g)(o,"class","contents-wrapper svelte-wplbjj"),Object(n.U)(o,"transform","translate(-50%,-50%) translate("+e[8]+"px, "+e[7]+"px)"),Object(n.bb)(o,"visible",e[0]),Object(n.bb)(o,"shrink",e[1]),Object(n.g)(t,"class","sc-popover svelte-wplbjj")},m(u,O){Object(n.F)(u,t,O),Object(n.e)(t,c),d&&d.m(c,null),e[15](c),Object(n.e)(t,i),Object(n.e)(t,o),Object(n.e)(o,a),Object(n.e)(a,l),j&&j.m(l,null),e[16](a),e[17](o),e[18](t),s=!0,r||(b=[Object(n.H)(S,"resize",e[14]),Object(n.H)(c,"click",e[9])],r=!0)},p(e,[t]){d&&d.p&&4096&t&&Object(n.fb)(d,u,e,e[12],t,V,F),j&&j.p&&4096&t&&Object(n.fb)(j,O,e,e[12],t,null,null),(!s||384&t)&&Object(n.U)(o,"transform","translate(-50%,-50%) translate("+e[8]+"px, "+e[7]+"px)"),1&t&&Object(n.bb)(o,"visible",e[0]),2&t&&Object(n.bb)(o,"shrink",e[1])},i(e){s||(Object(n.cb)(d,e),Object(n.cb)(j,e),s=!0)},o(e){Object(n.db)(d,e),Object(n.db)(j,e),s=!1},d(c){c&&Object(n.t)(t),d&&d.d(c),e[15](null),j&&j.d(c),e[16](null),e[17](null),e[18](null),r=!1,Object(n.O)(b)}}}function M(e,t,c){let{$$slots:i={},$$scope:o}=t;const a=Object(s.a)();let l,r,b,u,d,O=(e,t,c)=>{e.addEventListener(t,(function n(){c.apply(this,arguments),e.removeEventListener(t,n)}))},j=0,h=0,{open:g=!1}=t,{shrink:p}=t,{trigger:m}=t;const f=()=>{c(1,p=!0),O(u,"animationend",(()=>{c(1,p=!1),c(0,g=!1),a("closed")}))};function v(e){if(!g)return;let t=e.target;do{if(t===l)return}while(t=t.parentNode);f()}Object(s.c)((()=>{if(document.addEventListener("click",v),m)return b.appendChild(m.parentNode.removeChild(m)),()=>{document.removeEventListener("click",v)}}));const y=async()=>{let e,t,n=await(async()=>{g||c(0,g=!0),await Object(s.d)();let e=d.getBoundingClientRect();return{top:e.top+-1*j,bottom:window.innerHeight-e.bottom+j,left:e.left+-1*h,right:document.body.clientWidth-e.right+h}})();return t=r<480?n.bottom:n.top<0?Math.abs(n.top):n.bottom<0?n.bottom:0,e=n.left<0?Math.abs(n.left):n.right<0?n.right:0,{x:e,y:t}};return e.$$set=e=>{"open"in e&&c(0,g=e.open),"shrink"in e&&c(1,p=e.shrink),"trigger"in e&&c(10,m=e.trigger),"$$scope"in e&&c(12,o=e.$$scope)},[g,p,l,r,b,u,d,j,h,async()=>{const{x:e,y:t}=await y();c(8,h=e),c(7,j=t),c(0,g=!0),a("opened")},m,f,o,i,function(){c(3,r=S.innerWidth)},function(e){n.i[e?"unshift":"push"]((()=>{b=e,c(4,b)}))},function(e){n.i[e?"unshift":"push"]((()=>{u=e,c(5,u)}))},function(e){n.i[e?"unshift":"push"]((()=>{d=e,c(6,d)}))},function(e){n.i[e?"unshift":"push"]((()=>{l=e,c(2,l)}))}]}class L extends n.b{constructor(e){super(),Object(n.E)(this,e,M,D,n.P,{open:0,shrink:1,trigger:10,close:11})}get close(){return this.$$.ctx[11]}}var C=L;const P={left:37,up:38,right:39,down:40,pgup:33,pgdown:34,enter:13,escape:27,tab:9},E=Object.keys(P).map((e=>P[e]));c(269);function R(e,t,c){const n=e.slice();return n[62]=t[c],n}const T=e=>({selected:1&e[0],formattedSelected:64&e[0]}),z=e=>({selected:e[0],formattedSelected:e[6]});function N(e){let t,c;return{c(){t=Object(n.u)("button"),c=Object(n.Z)(e[6]),Object(n.g)(t,"class","calendar-button svelte-93hr8g"),Object(n.g)(t,"type","button")},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c)},p(e,t){64&t[0]&&Object(n.S)(c,e[6])},d(e){e&&Object(n.t)(t)}}}function A(e){let t,c;const i=e[40].default,o=Object(n.q)(i,e,e[47],z),a=o||function(e){let t,c=!e[1]&&N(e);return{c(){c&&c.c(),t=Object(n.v)()},m(e,i){c&&c.m(e,i),Object(n.F)(e,t,i)},p(e,n){e[1]?c&&(c.d(1),c=null):c?c.p(e,n):(c=N(e),c.c(),c.m(t.parentNode,t))},d(e){c&&c.d(e),e&&Object(n.t)(t)}}}(e);return{c(){t=Object(n.u)("div"),a&&a.c(),Object(n.g)(t,"slot","trigger"),Object(n.g)(t,"class","svelte-93hr8g")},m(e,i){Object(n.F)(e,t,i),a&&a.m(t,null),c=!0},p(e,t){o?o.p&&65&t[0]|65536&t[1]&&Object(n.fb)(o,i,e,e[47],t,T,z):a&&a.p&&66&t[0]&&a.p(e,t)},i(e){c||(Object(n.cb)(a,e),c=!0)},o(e){Object(n.db)(a,e),c=!1},d(e){e&&Object(n.t)(t),a&&a.d(e)}}}function Z(e){let t,c,i=e[62][1]+"";return{c(){t=Object(n.u)("span"),c=Object(n.Z)(i),Object(n.g)(t,"class","svelte-93hr8g")},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c)},p:n.J,d(e){e&&Object(n.t)(t)}}}function I(e){let t,c,i,o,a,l,s,r;i=new x({props:{month:e[7],year:e[8],canIncrementMonth:e[16],canDecrementMonth:e[17],start:e[3],end:e[4],monthsOfYear:e[5]}}),i.$on("monthSelected",e[41]),i.$on("incrementMonth",e[42]);let b=e[19],u=[];for(let t=0;t<b.length;t+=1)u[t]=Z(R(e,b,t));return s=new v({props:{visibleMonth:e[9],selected:e[0],highlighted:e[11],shouldShakeDate:e[12],id:e[15]}}),s.$on("dateSelected",e[43]),{c(){t=Object(n.V)(),c=Object(n.u)("div"),Object(n.n)(i.$$.fragment),o=Object(n.V)(),a=Object(n.u)("div");for(let e=0;e<u.length;e+=1)u[e].c();l=Object(n.V)(),Object(n.n)(s.$$.fragment),Object(n.g)(a,"class","legend svelte-93hr8g"),Object(n.g)(c,"class","calendar svelte-93hr8g")},m(e,b){Object(n.F)(e,t,b),Object(n.F)(e,c,b),Object(n.I)(i,c,null),Object(n.e)(c,o),Object(n.e)(c,a);for(let e=0;e<u.length;e+=1)u[e].m(a,null);Object(n.e)(c,l),Object(n.I)(s,c,null),r=!0},p(e,t){const c={};if(128&t[0]&&(c.month=e[7]),256&t[0]&&(c.year=e[8]),65536&t[0]&&(c.canIncrementMonth=e[16]),131072&t[0]&&(c.canDecrementMonth=e[17]),8&t[0]&&(c.start=e[3]),16&t[0]&&(c.end=e[4]),32&t[0]&&(c.monthsOfYear=e[5]),i.$set(c),524288&t[0]){let c;for(b=e[19],c=0;c<b.length;c+=1){const n=R(e,b,c);u[c]?u[c].p(n,t):(u[c]=Z(n),u[c].c(),u[c].m(a,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=b.length}const n={};512&t[0]&&(n.visibleMonth=e[9]),1&t[0]&&(n.selected=e[0]),2048&t[0]&&(n.highlighted=e[11]),4096&t[0]&&(n.shouldShakeDate=e[12]),32768&t[0]&&(n.id=e[15]),s.$set(n)},i(e){r||(Object(n.cb)(i.$$.fragment,e),Object(n.cb)(s.$$.fragment,e),r=!0)},o(e){Object(n.db)(i.$$.fragment,e),Object(n.db)(s.$$.fragment,e),r=!1},d(e){e&&Object(n.t)(t),e&&Object(n.t)(c),Object(n.r)(i),Object(n.s)(u,e),Object(n.r)(s)}}}function H(e){let t,c,i,o,a,l;function s(t){e[45].call(null,t)}function r(t){e[46].call(null,t)}let b={trigger:e[1],$$slots:{default:[I],trigger:[A]},$$scope:{ctx:e}};return void 0!==e[13]&&(b.open=e[13]),void 0!==e[14]&&(b.shrink=e[14]),c=new C({props:b}),e[44](c),n.i.push((()=>Object(n.h)(c,"open",s))),n.i.push((()=>Object(n.h)(c,"shrink",r))),c.$on("opened",e[24]),c.$on("closed",e[23]),{c(){t=Object(n.u)("div"),Object(n.n)(c.$$.fragment),Object(n.g)(t,"class",a="datepicker "+e[2]+" svelte-93hr8g"),Object(n.g)(t,"style",e[18]),Object(n.bb)(t,"open",e[13]),Object(n.bb)(t,"closing",e[14])},m(e,i){Object(n.F)(e,t,i),Object(n.I)(c,t,null),l=!0},p(e,s){const r={};2&s[0]&&(r.trigger=e[1]),236539&s[0]|65536&s[1]&&(r.$$scope={dirty:s,ctx:e}),!i&&8192&s[0]&&(i=!0,r.open=e[13],Object(n.c)((()=>i=!1))),!o&&16384&s[0]&&(o=!0,r.shrink=e[14],Object(n.c)((()=>o=!1))),c.$set(r),(!l||4&s[0]&&a!==(a="datepicker "+e[2]+" svelte-93hr8g"))&&Object(n.g)(t,"class",a),(!l||262144&s[0])&&Object(n.g)(t,"style",e[18]),8196&s[0]&&Object(n.bb)(t,"open",e[13]),16388&s[0]&&Object(n.bb)(t,"closing",e[14])},i(e){l||(Object(n.cb)(c.$$.fragment,e),l=!0)},o(e){Object(n.db)(c.$$.fragment,e),l=!1},d(i){i&&Object(n.t)(t),e[44](null),Object(n.r)(c)}}}function B(e,t,c){let{$$slots:i={},$$scope:a}=t;const l=Object(s.a)(),r=new Date;let b,u,{className:d=""}=t,{start:O=new Date(1987,0,1)}=t,{end:j=new Date(2030,0,1)}=t,{selected:h=r}=t,{dateChosen:g=!1}=t,{trigger:p=null}=t,{selectableCallback:m=null}=t,{weekStart:f=0}=t,{daysOfWeek:v=[["Sunday","Sun"],["Monday","Mon"],["Tuesday","Tue"],["Wednesday","Wed"],["Thursday","Thu"],["Friday","Fri"],["Saturday","Sat"]]}=t,{monthsOfYear:y=[["January","Jan"],["February","Feb"],["March","Mar"],["April","Apr"],["May","May"],["June","Jun"],["July","Jul"],["August","Aug"],["September","Sep"],["October","Oct"],["November","Nov"],["December","Dec"]]}=t,{style:k=""}=t,{buttonBackgroundColor:$="#fff"}=t,{buttonBorderColor:w="#eee"}=t,{buttonTextColor:_="#333"}=t,{highlightColor:x="#d32d1f"}=t,{dayBackgroundColor:S="none"}=t,{dayTextColor:V="#4a4a4a"}=t,{dayHighlightedBackgroundColor:F="#efefef"}=t,{dayHighlightedTextColor:D="#4a4a4a"}=t,M=0===f?v:(()=>{let e=v.slice();return e.push(e.shift()),e})(),L=r,C=!1,R=r.getMonth(),T=r.getFullYear(),z=!1,N=!1;r.setHours(0,0,0,0);let A=0,{formattedSelected:Z}=t;function I(e){c(7,R=e),c(11,L=new Date(T,R,1))}function H(e,t=1){if(1===e&&!ce)return;if(-1===e&&!ne)return;let n=new Date(T,R,1);n.setMonth(n.getMonth()+e),c(7,R=n.getMonth()),c(8,T=n.getFullYear()),c(11,L=new Date(T,R,t))}Object(s.c)((()=>{c(7,R=h.getMonth()),c(8,T=h.getFullYear())}));const B=(e,t,c)=>{let n=Q.find((t=>t.month===e&&t.year===c));if(!n)return null;for(let i=0;i<n.weeks.length;++i)for(let o=0;o<n.weeks[i].days.length;++o){let a=n.weeks[i].days[o];if(a.month===e&&a.day===t&&a.year===c)return a}return null};function U(e){let t=new Date(L);t.setDate(L.getDate()+e);let n=B(t.getMonth(),t.getDate(),t.getFullYear());n&&n.isInRange&&(c(11,L=t),e>0&&L>ee&&H(1,L.getDate()),e<0&&L<te&&H(-1,L.getDate()))}function Y(e){!function(e){p&&c(1,p.innerHTML=e,p)}(e)}function q(e){return function(e){const t=B(e.getMonth(),e.getDate(),e.getFullYear());return t&&t.selectable}(e)?(G(),c(0,h=e),c(25,g=!0),Y(Z),l("dateSelected",{date:e})):(t=e,clearTimeout(u),c(12,C=t),void(u=setTimeout((()=>{c(12,C=!1)}),700)));var t}function J(e){if(-1!==E.indexOf(e.keyCode))switch(e.preventDefault(),e.keyCode){case P.left:U(-1);break;case P.up:U(-7);break;case P.right:U(1);break;case P.down:U(7);break;case P.pgup:H(-1);break;case P.pgdown:H(1);break;case P.escape:G();break;case P.enter:q(L)}}function W(){document.removeEventListener("keydown",J),l("close")}function G(){b.close(),W()}let Q,X,K,ee,te,ce,ne,ie;return e.$$set=e=>{"className"in e&&c(2,d=e.className),"start"in e&&c(3,O=e.start),"end"in e&&c(4,j=e.end),"selected"in e&&c(0,h=e.selected),"dateChosen"in e&&c(25,g=e.dateChosen),"trigger"in e&&c(1,p=e.trigger),"selectableCallback"in e&&c(26,m=e.selectableCallback),"weekStart"in e&&c(27,f=e.weekStart),"daysOfWeek"in e&&c(28,v=e.daysOfWeek),"monthsOfYear"in e&&c(5,y=e.monthsOfYear),"style"in e&&c(29,k=e.style),"buttonBackgroundColor"in e&&c(30,$=e.buttonBackgroundColor),"buttonBorderColor"in e&&c(31,w=e.buttonBorderColor),"buttonTextColor"in e&&c(32,_=e.buttonTextColor),"highlightColor"in e&&c(33,x=e.highlightColor),"dayBackgroundColor"in e&&c(34,S=e.dayBackgroundColor),"dayTextColor"in e&&c(35,V=e.dayTextColor),"dayHighlightedBackgroundColor"in e&&c(36,F=e.dayHighlightedBackgroundColor),"dayHighlightedTextColor"in e&&c(37,D=e.dayHighlightedTextColor),"formattedSelected"in e&&c(6,Z=e.formattedSelected),"$$scope"in e&&c(47,a=e.$$scope)},e.$$.update=()=>{if(201326616&e.$$.dirty[0]&&c(39,Q=o(O,j,m,f)),384&e.$$.dirty[0]|384&e.$$.dirty[1]){c(38,A=-1);for(let e=0;e<Q.length;e+=1)Q[e].month===R&&Q[e].year===T&&c(38,A=e);A<0&&(T<Q[0].year||T===Q[0].year&&R<Q[0].month?c(38,A=0):c(38,A=Q.length-1))}384&e.$$.dirty[1]&&c(9,X=Q[A]),384&e.$$.dirty[0]&&c(15,K=T+R/100),512&e.$$.dirty[0]&&(ee=X.weeks[X.weeks.length-1].days[6].date),512&e.$$.dirty[0]&&(te=X.weeks[0].days[0].date),384&e.$$.dirty[1]&&c(16,ce=A<Q.length-1),128&e.$$.dirty[1]&&c(17,ne=A>0),1610612736&e.$$.dirty[0]|127&e.$$.dirty[1]&&c(18,ie="\n    --button-background-color: ".concat($,";\n    --button-border-color: ").concat(w,";\n    --button-text-color: ").concat(_,";\n    --highlight-color: ").concat(x,";\n    --day-background-color: ").concat(S,";\n    --day-text-color: ").concat(V,";\n    --day-highlighted-background-color: ").concat(F,";\n    --day-highlighted-text-color: ").concat(D,";\n    ").concat(k,"\n  "))},[h,p,d,O,j,y,Z,R,T,X,b,L,C,z,N,K,ce,ne,ie,M,I,H,q,W,function(){c(11,L=new Date(h)),c(7,R=h.getMonth()),c(8,T=h.getFullYear()),document.addEventListener("keydown",J),l("open")},g,m,f,v,k,$,w,_,x,S,V,F,D,A,Q,i,e=>I(e.detail),e=>H(e.detail),e=>q(e.detail),function(e){n.i[e?"unshift":"push"]((()=>{b=e,c(10,b)}))},function(e){z=e,c(13,z)},function(e){N=e,c(14,N)},a]}class U extends n.b{constructor(e){super(),Object(n.E)(this,e,B,H,n.P,{className:2,start:3,end:4,selected:0,dateChosen:25,trigger:1,selectableCallback:26,weekStart:27,daysOfWeek:28,monthsOfYear:5,style:29,buttonBackgroundColor:30,buttonBorderColor:31,buttonTextColor:32,highlightColor:33,dayBackgroundColor:34,dayTextColor:35,dayHighlightedBackgroundColor:36,dayHighlightedTextColor:37,formattedSelected:6},[-1,-1,-1])}}t.a=U},324:function(e,t,c){"use strict";var n=c(0),i=c(3),o=c(105),a=c(159),l=c(322),s=c(55);c(248);function r(e){let t,c,i,o,a=e[2](e[0])+"";return{c(){t=Object(n.u)("button"),c=Object(n.Z)(a),Object(n.g)(t,"aria-label","selected date"),Object(n.g)(t,"class","uk-input")},m(a,l){Object(n.F)(a,t,l),Object(n.e)(t,c),i||(o=Object(n.H)(t,"",e[7]),i=!0)},p(e,t){5&t&&a!==(a=e[2](e[0])+"")&&Object(n.S)(c,a)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),i=!1,o()}}}function b(e){let t,c,i;function o(t){e[8].call(null,t)}let a={className:"uk-width-1-1",start:e[3][0],end:e[3][1],formattedSelected:e[2](e[0]),$$slots:{default:[u]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.selected=e[0]),t=new l.a({props:a}),n.i.push((()=>Object(n.h)(t,"selected",o))),{c(){Object(n.n)(t.$$.fragment)},m(e,c){Object(n.I)(t,e,c),i=!0},p(e,i){const o={};8&i&&(o.start=e[3][0]),8&i&&(o.end=e[3][1]),5&i&&(o.formattedSelected=e[2](e[0])),4101&i&&(o.$$scope={dirty:i,ctx:e}),!c&&1&i&&(c=!0,o.selected=e[0],Object(n.c)((()=>c=!1))),t.$set(o)},i(e){i||(Object(n.cb)(t.$$.fragment,e),i=!0)},o(e){Object(n.db)(t.$$.fragment,e),i=!1},d(e){Object(n.r)(t,e)}}}function u(e){let t,c,i,o,a=e[2](e[0])+"";return{c(){t=Object(n.u)("button"),c=Object(n.Z)(a),Object(n.g)(t,"aria-label","selected date"),Object(n.g)(t,"class","uk-input uk-text-nowrap")},m(a,l){Object(n.F)(a,t,l),Object(n.e)(t,c),i||(o=Object(n.H)(t,"",e[6]),i=!0)},p(e,t){5&t&&a!==(a=e[2](e[0])+"")&&Object(n.S)(c,a)},d(e){e&&Object(n.t)(t),i=!1,o()}}}function d(e){let t,c,i,o,a,l,s,u,d,O,j,h,g,p,m,f,v;const y=[b,r],k=[];function $(e,t){return null!=e[0]&&0!==e[3].length?0:1}return c=$(e),i=k[c]=y[c](e),{c(){t=Object(n.u)("div"),i.c(),o=Object(n.V)(),a=Object(n.u)("div"),l=Object(n.u)("button"),u=Object(n.V)(),d=Object(n.u)("button"),j=Object(n.V)(),h=Object(n.u)("button"),Object(n.g)(t,"class","uk-form-controls"),Object(n.g)(l,"class","uk-button uk-button-default svelte-qjzvyh"),l.disabled=s=null==e[0]||0===e[3].length||e[0]<=e[3][0],Object(n.g)(l,"title","Go to the previous day"),Object(n.g)(l,"data-uk-icon","icon: chevron-left"),Object(n.g)(d,"class","uk-button uk-button-default svelte-qjzvyh"),d.disabled=O=null==e[0]||0===e[3].length||e[0]>=e[3][1],Object(n.g)(d,"title","Go to the next day"),Object(n.g)(d,"data-uk-icon","icon: chevron-right"),Object(n.g)(h,"class","uk-button uk-button-default svelte-qjzvyh"),h.disabled=g=null==e[0]||0===e[3].length||e[0].valueOf()===e[3][1].valueOf(),Object(n.g)(h,"title",p="Go to the latest date for which '"+e[1].name+"' is available"),Object(n.g)(h,"data-uk-icon","icon: chevron-right-end"),Object(n.g)(a,"class","uk-button-group shortcuts svelte-qjzvyh")},m(i,s){Object(n.F)(i,t,s),k[c].m(t,null),Object(n.F)(i,o,s),Object(n.F)(i,a,s),Object(n.e)(a,l),Object(n.e)(a,u),Object(n.e)(a,d),Object(n.e)(a,j),Object(n.e)(a,h),m=!0,f||(v=[Object(n.H)(l,"click",e[9]),Object(n.H)(d,"click",e[10]),Object(n.H)(h,"click",e[11])],f=!0)},p(e,[o]){let a=c;c=$(e),c===a?k[c].p(e,o):(Object(n.B)(),Object(n.db)(k[a],1,1,(()=>{k[a]=null})),Object(n.k)(),i=k[c],i?i.p(e,o):(i=k[c]=y[c](e),i.c()),Object(n.cb)(i,1),i.m(t,null)),(!m||9&o&&s!==(s=null==e[0]||0===e[3].length||e[0]<=e[3][0]))&&(l.disabled=s),(!m||9&o&&O!==(O=null==e[0]||0===e[3].length||e[0]>=e[3][1]))&&(d.disabled=O),(!m||9&o&&g!==(g=null==e[0]||0===e[3].length||e[0].valueOf()===e[3][1].valueOf()))&&(h.disabled=g),(!m||2&o&&p!==(p="Go to the latest date for which '"+e[1].name+"' is available"))&&Object(n.g)(h,"title",p)},i(e){m||(Object(n.cb)(i),m=!0)},o(e){Object(n.db)(i),m=!1},d(e){e&&Object(n.t)(t),k[c].d(),e&&Object(n.t)(o),e&&Object(n.t)(a),f=!1,Object(n.O)(v)}}}function O(e,t,c){let l,r;Object(n.l)(e,i.v,(e=>c(4,l=e))),Object(n.l)(e,i.G,(e=>c(5,r=e)));let{sensor:b}=t,{value:u=null}=t;let d,O;return e.$$set=e=>{"sensor"in e&&c(1,b=e.sensor),"value"in e&&c(0,u=e.value)},e.$$.update=()=>{if(16&e.$$.dirty&&c(2,d=l?Object(a.a)("%x"):Object(a.a)("%B %-d, %Y")),34&e.$$.dirty&&null!==r){const e=r.get(b.key);c(3,O=e?e.map(o.g):[])}},c(3,O=[]),[u,b,d,O,l,r,function(t){Object(n.j)(e,t)},function(t){Object(n.j)(e,t)},function(e){u=e,c(0,u)},()=>c(0,u=s.a.offset(u,-1)),()=>c(0,u=s.a.offset(u,1)),()=>c(0,u=O[1])]}class j extends n.b{constructor(e){super(),Object(n.E)(this,e,O,d,n.P,{sensor:1,value:0})}}var h=j;c(249);function g(e,t,c){const n=e.slice();return n[13]=t[c],n}function p(e,t,c){const n=e.slice();return n[16]=t[c],n}function m(e,t,c){const n=e.slice();return n[19]=t[c],n}function f(e){let t,c,i,o,a,l=e[19].name+"";return{c(){t=Object(n.u)("option"),c=Object(n.Z)(l),i=Object(n.V)(),Object(n.g)(t,"title",o="function"==typeof e[19].tooltipText?e[19].tooltipText():e[19].tooltipText),t.__value=a=e[19].key,t.value=t.__value},m(e,o){Object(n.F)(e,t,o),Object(n.e)(t,c),Object(n.e)(t,i)},p(e,i){16&i&&l!==(l=e[19].name+"")&&Object(n.S)(c,l),16&i&&o!==(o="function"==typeof e[19].tooltipText?e[19].tooltipText():e[19].tooltipText)&&Object(n.g)(t,"title",o),16&i&&a!==(a=e[19].key)&&(t.__value=a,t.value=t.__value)},d(e){e&&Object(n.t)(t)}}}function v(e){let t,c,i=e[16].sensors,o=[];for(let t=0;t<i.length;t+=1)o[t]=f(m(e,i,t));return{c(){t=Object(n.u)("optgroup");for(let e=0;e<o.length;e+=1)o[e].c();Object(n.g)(t,"label",c=e[16].label)},m(e,c){Object(n.F)(e,t,c);for(let e=0;e<o.length;e+=1)o[e].m(t,null)},p(e,a){if(16&a){let c;for(i=e[16].sensors,c=0;c<i.length;c+=1){const n=m(e,i,c);o[c]?o[c].p(n,a):(o[c]=f(n),o[c].c(),o[c].m(t,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}16&a&&c!==(c=e[16].label)&&Object(n.g)(t,"label",c)},d(e){e&&Object(n.t)(t),Object(n.s)(o,e)}}}function y(e){let t,c,i,o,a,l=e[13].labelPlural+"";return{c(){t=Object(n.u)("option"),c=Object(n.Z)(l),i=Object(n.V)(),t.__value=o=e[13].id,t.value=t.__value,t.disabled=a=!e[7].levels.includes(e[13].id)},m(e,o){Object(n.F)(e,t,o),Object(n.e)(t,c),Object(n.e)(t,i)},p(e,i){1&i&&l!==(l=e[13].labelPlural+"")&&Object(n.S)(c,l),1&i&&o!==(o=e[13].id)&&(t.__value=o,t.value=t.__value),129&i&&a!==(a=!e[7].levels.includes(e[13].id))&&(t.disabled=a)},d(e){e&&Object(n.t)(t)}}}function k(e){let t,c,i,o,a,l;function s(t){e[12].call(null,t)}let r={sensor:e[7]};return void 0!==e[3]&&(r.value=e[3]),o=new h({props:r}),n.i.push((()=>Object(n.h)(o,"value",s))),{c(){t=Object(n.u)("div"),c=Object(n.u)("span"),c.textContent="on",i=Object(n.V)(),Object(n.n)(o.$$.fragment),Object(n.g)(c,"class","uk-form-label svelte-vpx6lo"),Object(n.g)(t,"class","uk-width-1-1 uk-width-1-3@m block svelte-vpx6lo")},m(e,a){Object(n.F)(e,t,a),Object(n.e)(t,c),Object(n.e)(t,i),Object(n.I)(o,t,null),l=!0},p(e,t){const c={};128&t&&(c.sensor=e[7]),!a&&8&t&&(a=!0,c.value=e[3],Object(n.c)((()=>a=!1))),o.$set(c)},i(e){l||(Object(n.cb)(o.$$.fragment,e),l=!0)},o(e){Object(n.db)(o.$$.fragment,e),l=!1},d(e){e&&Object(n.t)(t),Object(n.r)(o)}}}function $(e){let t,c,i,o,a,l,s,r,b,u,d,O,j,h,m,f,$,w,_,x=e[4],S=[];for(let t=0;t<x.length;t+=1)S[t]=v(p(e,x,t));let V=e[0],F=[];for(let t=0;t<V.length;t+=1)F[t]=y(g(e,V,t));let D=e[2]&&k(e);return{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),i=Object(n.u)("span"),i.textContent="Displaying",o=Object(n.V)(),a=Object(n.u)("div"),l=Object(n.u)("select");for(let e=0;e<S.length;e+=1)S[e].c();r=Object(n.V)(),b=Object(n.u)("div"),u=Object(n.u)("span"),u.textContent="for",d=Object(n.V)(),O=Object(n.u)("div"),j=Object(n.u)("select");for(let e=0;e<F.length;e+=1)F[e].c();m=Object(n.V)(),D&&D.c(),Object(n.g)(i,"class","uk-form-label svelte-vpx6lo"),Object(n.g)(l,"id","option-indicator"),Object(n.g)(l,"aria-label","indicator options"),Object(n.g)(l,"class","uk-select"),void 0===e[5]&&Object(n.d)((()=>e[10].call(l))),Object(n.g)(a,"class","uk-form-controls svelte-vpx6lo"),Object(n.g)(c,"class",s="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"),Object(n.g)(u,"class","uk-form-label svelte-vpx6lo"),Object(n.g)(j,"id","option-geo-level"),Object(n.g)(j,"aria-label","geographic level"),Object(n.g)(j,"class","uk-select"),void 0===e[6]&&Object(n.d)((()=>e[11].call(j))),Object(n.g)(O,"class","uk-form-controls svelte-vpx6lo"),Object(n.g)(b,"class",h="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"),Object(n.g)(t,"class",f="container-bg container-style uk-grid-small "+e[1]+" svelte-vpx6lo"),Object(n.g)(t,"data-uk-grid","")},m(s,h){Object(n.F)(s,t,h),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(c,o),Object(n.e)(c,a),Object(n.e)(a,l);for(let e=0;e<S.length;e+=1)S[e].m(l,null);Object(n.Q)(l,e[5]),Object(n.e)(t,r),Object(n.e)(t,b),Object(n.e)(b,u),Object(n.e)(b,d),Object(n.e)(b,O),Object(n.e)(O,j);for(let e=0;e<F.length;e+=1)F[e].m(j,null);Object(n.Q)(j,e[6]),Object(n.e)(t,m),D&&D.m(t,null),$=!0,w||(_=[Object(n.H)(l,"change",e[10]),Object(n.H)(j,"change",e[11])],w=!0)},p(e,[i]){if(16&i){let t;for(x=e[4],t=0;t<x.length;t+=1){const c=p(e,x,t);S[t]?S[t].p(c,i):(S[t]=v(c),S[t].c(),S[t].m(l,null))}for(;t<S.length;t+=1)S[t].d(1);S.length=x.length}if(48&i&&Object(n.Q)(l,e[5]),(!$||4&i&&s!==(s="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"))&&Object(n.g)(c,"class",s),129&i){let t;for(V=e[0],t=0;t<V.length;t+=1){const c=g(e,V,t);F[t]?F[t].p(c,i):(F[t]=y(c),F[t].c(),F[t].m(j,null))}for(;t<F.length;t+=1)F[t].d(1);F.length=V.length}65&i&&Object(n.Q)(j,e[6]),(!$||4&i&&h!==(h="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"))&&Object(n.g)(b,"class",h),e[2]?D?(D.p(e,i),4&i&&Object(n.cb)(D,1)):(D=k(e),D.c(),Object(n.cb)(D,1),D.m(t,null)):D&&(Object(n.B)(),Object(n.db)(D,1,1,(()=>{D=null})),Object(n.k)()),(!$||2&i&&f!==(f="container-bg container-style uk-grid-small "+e[1]+" svelte-vpx6lo"))&&Object(n.g)(t,"class",f)},i(e){$||(Object(n.cb)(D),$=!0)},o(e){Object(n.db)(D),$=!1},d(e){e&&Object(n.t)(t),Object(n.s)(S,e),Object(n.s)(F,e),D&&D.d(),w=!1,Object(n.O)(_)}}}function w(e,t,c){let a,l,s,r;Object(n.l)(e,i.h,(e=>c(8,a=e))),Object(n.l)(e,i.p,(e=>c(5,l=e))),Object(n.l)(e,i.k,(e=>c(6,s=e))),Object(n.l)(e,i.q,(e=>c(7,r=e)));let b,u,d,{levels:O=i.w}=t,{className:j=""}=t,{showDate:h=!0}=t;return e.$$set=e=>{"levels"in e&&c(0,O=e.levels),"className"in e&&c(1,j=e.className),"showDate"in e&&c(2,h=e.showDate)},e.$$.update=()=>{256&e.$$.dirty&&c(3,b=Object(o.g)(a)),8&e.$$.dirty&&void 0!==b&&i.h.set(Object(o.e)(b)),1&e.$$.dirty&&c(9,u=new Set(O.map((e=>e.id)))),512&e.$$.dirty&&c(4,d=i.t.map((e=>({label:e.label,sensors:e.sensors.filter((e=>e.levels.some((e=>u.has(e)))))}))).filter((e=>e.sensors.length>0)))},[O,j,h,b,d,l,s,r,a,u,function(){l=Object(n.R)(this),i.p.set(l),c(4,d),c(9,u),c(0,O)},function(){s=Object(n.R)(this),i.k.set(s),c(0,O)},function(e){b=e,c(3,b),c(8,a)}]}class _ extends n.b{constructor(e){super(),Object(n.E)(this,e,w,$,n.P,{levels:0,className:1,showDate:2})}}t.a=_},328:function(e,t,c){"use strict";var n=c(0),i=c(3);c(259);function o(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function a(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?o(Object(c),!0).forEach((function(t){l(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function l(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function s(e){let t,c,i,o,a,l,s,r,b,u,d,O,j,h,g,p,m,f,v,y,k;return{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),i=Object(n.u)("button"),o=Object(n.Z)("New"),l=Object(n.V)(),s=Object(n.u)("button"),r=Object(n.Z)("Cumulative"),u=Object(n.V)(),d=Object(n.u)("div"),O=Object(n.u)("button"),j=Object(n.Z)("Ratios (per 100,000)"),g=Object(n.V)(),p=Object(n.u)("button"),m=Object(n.Z)("Counts"),Object(n.g)(i,"type","button"),Object(n.g)(i,"aria-pressed",a=String(!e[3].cumulative)),Object(n.g)(i,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(n.bb)(i,"uk-active",!e[3].cumulative),Object(n.g)(s,"type","button"),Object(n.g)(s,"aria-pressed",b=e[3].cumulative),Object(n.g)(s,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(n.bb)(s,"uk-active",e[3].cumulative),Object(n.g)(c,"aria-label","display cumulative or new incidents"),Object(n.g)(c,"class","uk-button-group"),Object(n.g)(O,"type","button"),Object(n.g)(O,"aria-pressed",h=String(!e[3].incidence)),Object(n.g)(O,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(n.bb)(O,"uk-active",!e[3].incidence),Object(n.g)(p,"type","button"),Object(n.g)(p,"aria-pressed",f=String(e[3].incidence)),Object(n.g)(p,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(n.bb)(p,"uk-active",e[3].incidence),Object(n.g)(d,"aria-label","display counts or ratios per 100,000 people"),Object(n.g)(d,"class","uk-button-group"),Object(n.g)(t,"class",v="root "+e[2]+" svelte-1iknxf6"),Object(n.bb)(t,"center",e[0])},m(a,b){Object(n.F)(a,t,b),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(i,o),Object(n.e)(c,l),Object(n.e)(c,s),Object(n.e)(s,r),Object(n.e)(t,u),Object(n.e)(t,d),Object(n.e)(d,O),Object(n.e)(O,j),Object(n.e)(d,g),Object(n.e)(d,p),Object(n.e)(p,m),y||(k=[Object(n.H)(i,"click",e[4]),Object(n.H)(s,"click",e[5]),Object(n.H)(O,"click",e[6]),Object(n.H)(p,"click",e[7])],y=!0)},p(e,c){8&c&&a!==(a=String(!e[3].cumulative))&&Object(n.g)(i,"aria-pressed",a),8&c&&Object(n.bb)(i,"uk-active",!e[3].cumulative),8&c&&b!==(b=e[3].cumulative)&&Object(n.g)(s,"aria-pressed",b),8&c&&Object(n.bb)(s,"uk-active",e[3].cumulative),8&c&&h!==(h=String(!e[3].incidence))&&Object(n.g)(O,"aria-pressed",h),8&c&&Object(n.bb)(O,"uk-active",!e[3].incidence),8&c&&f!==(f=String(e[3].incidence))&&Object(n.g)(p,"aria-pressed",f),8&c&&Object(n.bb)(p,"uk-active",e[3].incidence),4&c&&v!==(v="root "+e[2]+" svelte-1iknxf6")&&Object(n.g)(t,"class",v),5&c&&Object(n.bb)(t,"center",e[0])},d(e){e&&Object(n.t)(t),y=!1,Object(n.O)(k)}}}function r(e){let t,c=e[1].isCasesOrDeath&&s(e);return{c(){c&&c.c(),t=Object(n.v)()},m(e,i){c&&c.m(e,i),Object(n.F)(e,t,i)},p(e,[n]){e[1].isCasesOrDeath?c?c.p(e,n):(c=s(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null)},i:n.J,o:n.J,d(e){c&&c.d(e),e&&Object(n.t)(t)}}}function b(e,t,c){let o,l;Object(n.l)(e,i.q,(e=>c(8,o=e))),Object(n.l)(e,i.C,(e=>c(3,l=e)));let{center:s=!1}=t,{sensor:r=o}=t,{className:b=""}=t;return e.$$set=e=>{"center"in e&&c(0,s=e.center),"sensor"in e&&c(1,r=e.sensor),"className"in e&&c(2,b=e.className)},[s,r,b,l,()=>{l.cumulative&&i.C.set(a(a({},l),{},{cumulative:!1}))},()=>{l.cumulative||i.C.set(a(a({},l),{},{cumulative:!0}))},()=>{l.incidence&&i.C.set(a(a({},l),{},{incidence:!1}))},()=>{l.incidence||i.C.set(a(a({},l),{},{incidence:!0}))}]}class u extends n.b{constructor(e){super(),Object(n.E)(this,e,b,r,n.P,{center:0,sensor:1,className:2})}}t.a=u},337:function(e){e.exports=JSON.parse('{"states":[[-24.026114,-13.139448],[20.771771,12.76366]],"msa":[[-54.263546,-12.810824899501114],[20.443824516406067,12.76366]],"counties":[[-24.026114,-13.139448],[20.771771,12.76366]],"hrr":[[-22.371886914960523,-13.086989732096237],[20.69602138694648,12.765811283178328]]}')},338:function(e){e.exports=JSON.parse('{"version":8,"name":"Albers USA","metadata":{"mapbox:autocomposite":true,"mapbox:type":"template","mapbox:sdk-support":{"js":"1.6.0","android":"8.6.0","ios":"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},"center":[-1.9392753230472408,-1.4351091963094262],"zoom":4.035119632783768,"bearing":0,"pitch":0,"glyphs":"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf","sources":{},"layers":[]}')},349:function(e,t,c){"use strict";var n=c(0),i=c(59),o=c(3),a=c(238),l=c(351),s=c.n(l),r=c(37),b=c(306),u=c(1);const d={min:0,max:100,mean:50,std:10};function O(e,t){if(!e||!e.has(t))return d;const c=e.get(t);return[c.max,c.std,c.mean].some((e=>null==e||Number.isNaN(e)))?(console.warn("invalid stats detected for",t),d):c}function j(e,t,c,n,i=!1){let o=t.key;if("count"===t.getType(n)){o+="_".concat(c),t.isCasesOrDeath&&(o+="_".concat(Object(u.m)(t,n)));const a=O(e,o);return i?[0,a.max]:[Math.max(.14,a.mean-3*a.std),a.mean+3*a.std]}t.isCasesOrDeath&&(o+="_".concat(Object(u.m)(t,n)));const a=O(e,o);return i?[0,a.max]:[Math.max(0,a.mean-3*a.std),a.mean+3*a.std]}function h(e,t,c){return"count"===c?function(e,t){const c=Object(a.c)(t.colorScale).domain(e),n=s()(Math.log10(e[0]),Math.log10(e[1]),7),i=n.map((e=>c(e).toString()));return{stops:Object(b.f)(n,i),scale:c}}(e,t):"prop"===c?function(e,t){const c=Math.max(e[0],0),n=Math.max(c+.01,e[1]),i=c+(n-c)/2,o=c+(i-c)/2,l=i+(n-i)/2,s=Object(a.b)(t.colorScale).domain(e),r=[c,o,i,l,n],u=r.map((e=>s(e).toString()));return{stops:Object(b.f)(r,u),scale:s}}(e,t):function(e,t){const c=e[0]+(e[1]-e[0])/2,n=e[0]+(c-e[0])/2,i=c+(e[1]-c)/2,o=Object(a.b)(t.colorScale).domain(e),l=[e[0],n,c,i,e[1]],s=l.map((e=>o(e).toString()));return{stops:Object(b.f)(l,s),scale:o}}(e,t)}function g(e,t,c){const n=[e],i=(t-e)/c;for(let e=1;e<c;e++)n.push(n[e-1]+i);return n.push(t),n}function p(e,t,c,n,i,o=!1){const a=e?j(e,t,c,i):null;if(!a)return{labels:[],high:"",valueMinMax:[0,0]};const l=function(e,t,c,n){const i=n?5:7;if("count"===e.getType(t)){const e=Math.log10(Math.max(.01,c[0])),t=Math.log10(Math.max(.1,c[1]));return s()(e,t,i)}return"raw"===e.format?(c[0]=Math.max(0,c[0]),g(c[0],c[1],i)):(c[0]=Math.max(0,c[0]),c[1]=Math.min(100,c[1]),g(c[0],c[1],i))}(t,i,a,o);return{low:t.formatValue(0),lowValue:0,lowColor:r.e,labels:l.slice(0,-1).map(((e,c)=>({label:t.formatValue(e),value:e,color:n(e),nextColor:n(l[c+1])}))),high:"".concat(t.formatValue(a[1]),"+"),highValue:a[1],highColor:n(a[1]),valueMinMax:a}}c(254);function m(e){let t,c,i;return{c(){t=Object(n.u)("div"),Object(n.g)(t,"class","map-wrapper svelte-54x2e1")},m(o,a){Object(n.F)(o,t,a),e[17](t),c||(i=Object(n.H)(window,"resize",e[1]),c=!0)},p:n.J,i:n.J,o:n.J,d(o){o&&Object(n.t)(t),e[17](null),c=!1,i()}}}function f(e,t,c){let a;Object(n.l)(e,o.F,(e=>c(16,a=e)));let{wrapperClass:l}=t,s=null;const r=Object(i.a)(),b=new l(((e,t)=>r(e,t))),d=b.zoom;let{data:O=Promise.resolve([])}=t,{sensor:g=""}=t,{level:p="state"}=t,{encoding:m="color"}=t,{signalOptions:f={}}=t,{animationDuration:v=0}=t,{title:y=""}=t,{selections:k=[]}=t,{focusOn:$=null}=t,w=!1;return Object(i.c)((()=>{c(14,b.animationDuration=v,b),b.initMap(s,y).then((()=>{c(15,w=!0)}))})),Object(i.b)((()=>{b.destroy()})),e.$$set=e=>{"wrapperClass"in e&&c(2,l=e.wrapperClass),"data"in e&&c(5,O=e.data),"sensor"in e&&c(6,g=e.sensor),"level"in e&&c(7,p=e.level),"encoding"in e&&c(8,m=e.encoding),"signalOptions"in e&&c(9,f=e.signalOptions),"animationDuration"in e&&c(10,v=e.animationDuration),"title"in e&&c(11,y=e.title),"selections"in e&&c(12,k=e.selections),"focusOn"in e&&c(13,$=e.focusOn)},e.$$.update=()=>{17120&e.$$.dirty&&b.updateSources(p,O,Object(u.m)(u.p.get(g),f)),99264&e.$$.dirty&&a&&function(e,t,c,n,i){const o=u.p.get(c),a=o.getType(i),l=j(n,o,e,i),{stops:s,scale:d}=h(l,o,a),O="county"===e,g=b.updateOptions(t,e,c,a,l,s,O&&s,d);r("updatedEncoding",{range:l,custom:g,scale:d,stops:s})}(p,m,g,a,f),53248&e.$$.dirty&&b.selectMulti(k),57344&e.$$.dirty&&b.focusOn($),18432&e.$$.dirty&&b.setTitle(y)},[s,function(){b.zoom.resized()},l,d,function(){b.selectRandom()},O,g,p,m,f,v,y,k,$,b,w,a,function(e){n.i[e?"unshift":"push"]((()=>{s=e,c(0,s)}))}]}class v extends n.b{constructor(e){super(),Object(n.E)(this,e,f,m,n.P,{wrapperClass:2,zoom:3,selectRandom:4,data:5,sensor:6,level:7,encoding:8,signalOptions:9,animationDuration:10,title:11,selections:12,focusOn:13})}get zoom(){return this.$$.ctx[3]}get selectRandom(){return this.$$.ctx[4]}}var y=v,k=c(60),$=c(337),w=c(317);c(255);const _=-100;function x(e){return["case",["==",["to-number",["feature-state","value"],_],_],r.d,["==",["to-number",["feature-state","value"],_],0],r.e,["interpolate",["linear"],["to-number",["feature-state","value"],0],...e.flat()]]}function S(e){return"".concat(e,"-border")}function V(e){return"".concat(e,"-centers")}const F="city-point";function D(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function M(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?D(Object(c),!0).forEach((function(t){L(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):D(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function L(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function C(e){return"".concat(e,"-fill")}function P(e){return"".concat(e,"-hover")}function E(e){return"".concat(e,"-bubble")}function R(e){return"".concat(e,"-spike")}function T(e){return"".concat(e,"-border")}const z="state-stroke",N="state-names",A={pit:"city-point-unclustered-pit",1:"city-point-unclustered-1",2:"city-point-unclustered-2",3:"city-point-unclustered-3",4:"city-point-unclustered-4",5:"city-point-unclustered-5"};var Z=c(307);c(256);function I(e){let t,c,i,o,a,l,s,r,b,u,d,O=e[1].displayName+"",j=Object(Z.f)(e[1])+"";function h(e,t){return e[4].isCasesOrDeath?Y:U}let g=h(e),p=g(e);return{c(){t=Object(n.u)("h5"),c=Object(n.Z)(O),i=Object(n.V)(),o=Object(n.u)("table"),a=Object(n.u)("tbody"),l=Object(n.u)("tr"),s=Object(n.u)("th"),s.textContent="Population",r=Object(n.V)(),b=Object(n.u)("td"),u=Object(n.Z)(j),d=Object(n.V)(),p.c(),Object(n.g)(t,"class","svelte-1u8gn73"),Object(n.g)(s,"class","svelte-1u8gn73"),Object(n.g)(b,"class","right svelte-1u8gn73"),Object(n.g)(o,"class","svelte-1u8gn73")},m(e,O){Object(n.F)(e,t,O),Object(n.e)(t,c),Object(n.F)(e,i,O),Object(n.F)(e,o,O),Object(n.e)(o,a),Object(n.e)(a,l),Object(n.e)(l,s),Object(n.e)(l,r),Object(n.e)(l,b),Object(n.e)(b,u),Object(n.e)(a,d),p.m(a,null)},p(e,t){2&t&&O!==(O=e[1].displayName+"")&&Object(n.S)(c,O),2&t&&j!==(j=Object(Z.f)(e[1])+"")&&Object(n.S)(u,j),g===(g=h(e))&&p?p.p(e,t):(p.d(1),p=g(e),p&&(p.c(),p.m(a,null)))},d(e){e&&Object(n.t)(t),e&&Object(n.t)(i),e&&Object(n.t)(o),p.d()}}}function H(e){let t,c,i,o=e[1].displayName+"";return{c(){t=Object(n.u)("h5"),c=Object(n.Z)("Estimate unavailable for rest of "),i=Object(n.Z)(o),Object(n.g)(t,"class","svelte-1u8gn73")},m(e,o){Object(n.F)(e,t,o),Object(n.e)(t,c),Object(n.e)(t,i)},p(e,t){2&t&&o!==(o=e[1].displayName+"")&&Object(n.S)(i,o)},d(e){e&&Object(n.t)(t)}}}function B(e){let t;return{c(){t=Object(n.u)("h5"),t.textContent="Estimate unavailable",Object(n.g)(t,"class","svelte-1u8gn73")},m(e,c){Object(n.F)(e,t,c)},p:n.J,d(e){e&&Object(n.t)(t)}}}function U(e){let t,c,i,o,a,l,s,r=e[4].yAxis+"",b=e[4].formatValue(e[2])+"";return{c(){t=Object(n.u)("tr"),c=Object(n.u)("th"),i=Object(n.Z)(r),o=Object(n.V)(),a=Object(n.u)("td"),l=Object(n.Z)(b),Object(n.g)(c,"class","svelte-1u8gn73"),Object(n.g)(a,"class","right svelte-1u8gn73"),Object(n.g)(a,"style",s=e[6](e[2]))},m(e,s){Object(n.F)(e,t,s),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(t,o),Object(n.e)(t,a),Object(n.e)(a,l)},p(e,t){16&t&&r!==(r=e[4].yAxis+"")&&Object(n.S)(i,r),20&t&&b!==(b=e[4].formatValue(e[2])+"")&&Object(n.S)(l,b),4&t&&s!==(s=e[6](e[2]))&&Object(n.g)(a,"style",s)},d(e){e&&Object(n.t)(t)}}}function Y(e){let t,c,i,o,a,l,s,r,b,u,d,O,j,h,g,p,m,f,v,y,k,$,w,_,x,S,V,F,D,M,L,C,P,E,R,T,z,N,A,I,H,B,U,Y=e[4].yAxis+"",q=Object(Z.c)(e[5])+"",J=e[4].formatValue(e[1].count)+"",W=e[4].formatValue(e[1].countRatio)+"",G=e[4].formatValue(e[1].avg)+"",Q=e[4].formatValue(e[1].avgRatio)+"",X=Object(Z.c)(e[5])+"",K=e[4].formatValue(e[1].countCumulative)+"",ee=e[4].formatValue(e[1].countRatioCumulative)+"";return{c(){t=Object(n.u)("tr"),c=Object(n.u)("th"),i=Object(n.Z)(Y),o=Object(n.V)(),a=Object(n.u)("th"),a.textContent="Count",l=Object(n.V)(),s=Object(n.u)("th"),s.textContent="Ratios (per 100,000)",r=Object(n.V)(),b=Object(n.u)("tr"),u=Object(n.u)("th"),d=Object(n.Z)(q),O=Object(n.V)(),j=Object(n.u)("td"),h=Object(n.Z)(J),p=Object(n.V)(),m=Object(n.u)("td"),f=Object(n.Z)(W),y=Object(n.V)(),k=Object(n.u)("tr"),$=Object(n.u)("th"),$.textContent="7-day avg",w=Object(n.V)(),_=Object(n.u)("td"),x=Object(n.Z)(G),V=Object(n.V)(),F=Object(n.u)("td"),D=Object(n.Z)(Q),L=Object(n.V)(),C=Object(n.u)("tr"),P=Object(n.u)("th"),E=Object(n.Z)("Cumulative "),R=Object(n.Z)(X),T=Object(n.V)(),z=Object(n.u)("td"),N=Object(n.Z)(K),I=Object(n.V)(),H=Object(n.u)("td"),B=Object(n.Z)(ee),Object(n.g)(c,"class","svelte-1u8gn73"),Object(n.g)(a,"class","area svelte-1u8gn73"),Object(n.g)(s,"class","area svelte-1u8gn73"),Object(n.g)(u,"class","svelte-1u8gn73"),Object(n.g)(j,"class","right svelte-1u8gn73"),Object(n.g)(j,"style",g=!e[3].cumulative&&e[3].incidence?e[6](e[1].count):""),Object(n.g)(m,"class","right svelte-1u8gn73"),Object(n.g)(m,"style",v=e[3].cumulative||e[3].incidence?"":e[6](e[1].countRatio)),Object(n.g)($,"class","svelte-1u8gn73"),Object(n.g)(_,"class","right svelte-1u8gn73"),Object(n.g)(_,"style",S=!e[3].cumulative&&e[3].incidence?e[6](e[1].avg):""),Object(n.g)(F,"class","right svelte-1u8gn73"),Object(n.g)(F,"style",M=e[3].cumulative||e[3].incidence?"":e[6](e[1].avgRatio)),Object(n.g)(P,"class","svelte-1u8gn73"),Object(n.g)(z,"class","right svelte-1u8gn73"),Object(n.g)(z,"style",A=e[3].cumulative&&e[3].incidence?e[6](e[1].countCumulative):""),Object(n.g)(H,"class","right svelte-1u8gn73"),Object(n.g)(H,"style",U=e[3].cumulative&&!e[3].incidence?e[6](e[1].countRatioCumulative):"")},m(e,g){Object(n.F)(e,t,g),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(t,o),Object(n.e)(t,a),Object(n.e)(t,l),Object(n.e)(t,s),Object(n.F)(e,r,g),Object(n.F)(e,b,g),Object(n.e)(b,u),Object(n.e)(u,d),Object(n.e)(b,O),Object(n.e)(b,j),Object(n.e)(j,h),Object(n.e)(b,p),Object(n.e)(b,m),Object(n.e)(m,f),Object(n.F)(e,y,g),Object(n.F)(e,k,g),Object(n.e)(k,$),Object(n.e)(k,w),Object(n.e)(k,_),Object(n.e)(_,x),Object(n.e)(k,V),Object(n.e)(k,F),Object(n.e)(F,D),Object(n.F)(e,L,g),Object(n.F)(e,C,g),Object(n.e)(C,P),Object(n.e)(P,E),Object(n.e)(P,R),Object(n.e)(C,T),Object(n.e)(C,z),Object(n.e)(z,N),Object(n.e)(C,I),Object(n.e)(C,H),Object(n.e)(H,B)},p(e,t){16&t&&Y!==(Y=e[4].yAxis+"")&&Object(n.S)(i,Y),32&t&&q!==(q=Object(Z.c)(e[5])+"")&&Object(n.S)(d,q),18&t&&J!==(J=e[4].formatValue(e[1].count)+"")&&Object(n.S)(h,J),10&t&&g!==(g=!e[3].cumulative&&e[3].incidence?e[6](e[1].count):"")&&Object(n.g)(j,"style",g),18&t&&W!==(W=e[4].formatValue(e[1].countRatio)+"")&&Object(n.S)(f,W),10&t&&v!==(v=e[3].cumulative||e[3].incidence?"":e[6](e[1].countRatio))&&Object(n.g)(m,"style",v),18&t&&G!==(G=e[4].formatValue(e[1].avg)+"")&&Object(n.S)(x,G),10&t&&S!==(S=!e[3].cumulative&&e[3].incidence?e[6](e[1].avg):"")&&Object(n.g)(_,"style",S),18&t&&Q!==(Q=e[4].formatValue(e[1].avgRatio)+"")&&Object(n.S)(D,Q),10&t&&M!==(M=e[3].cumulative||e[3].incidence?"":e[6](e[1].avgRatio))&&Object(n.g)(F,"style",M),32&t&&X!==(X=Object(Z.c)(e[5])+"")&&Object(n.S)(R,X),18&t&&K!==(K=e[4].formatValue(e[1].countCumulative)+"")&&Object(n.S)(N,K),10&t&&A!==(A=e[3].cumulative&&e[3].incidence?e[6](e[1].countCumulative):"")&&Object(n.g)(z,"style",A),18&t&&ee!==(ee=e[4].formatValue(e[1].countRatioCumulative)+"")&&Object(n.S)(B,ee),10&t&&U!==(U=e[3].cumulative&&!e[3].incidence?e[6](e[1].countRatioCumulative):"")&&Object(n.g)(H,"style",U)},d(e){e&&Object(n.t)(t),e&&Object(n.t)(r),e&&Object(n.t)(b),e&&Object(n.t)(y),e&&Object(n.t)(k),e&&Object(n.t)(L),e&&Object(n.t)(C)}}}function q(e){let t;function c(e,t){return e[1]?e[0]?H:I:B}let i=c(e),o=i(e);return{c(){t=Object(n.u)("div"),o.c(),Object(n.g)(t,"aria-label","tooltip"),Object(n.g)(t,"class","tooltip svelte-1u8gn73")},m(e,c){Object(n.F)(e,t,c),o.m(t,null)},p(e,[n]){i===(i=c(e))&&o?o.p(e,n):(o.d(1),o=i(e),o&&(o.c(),o.m(t,null)))},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),o.d()}}}function J(e,t,c){let i,a,l,s;Object(n.l)(e,o.C,(e=>c(7,i=e))),Object(n.l)(e,o.e,(e=>c(8,a=e))),Object(n.l)(e,o.q,(e=>c(4,l=e))),Object(n.l)(e,o.i,(e=>c(5,s=e)));let u,d,{invalid:O=!1}=t,{properties:j}=t;return e.$$set=e=>{"invalid"in e&&c(0,O=e.invalid),"properties"in e&&c(1,j=e.properties)},e.$$.update=()=>{2&e.$$.dirty&&c(2,u=j?j.value:0),128&e.$$.dirty&&c(3,d=i)},[O,j,u,d,l,s,function(e){const t=0===e?r.e:a(e);return"background-color: ".concat(t,"; color: ").concat(Object(b.b)(t))},i]}class W extends n.b{constructor(e){super(),Object(n.E)(this,e,J,q,n.P,{invalid:0,properties:1})}}var G=W;function Q(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function X(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(c),!0).forEach((function(t){K(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):Q(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function K(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}class ee{constructor(e,t){this.adapter=t,this.map=e,this.data=new Map,this.popup=new w.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup"}),this.topPopup=new w.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup",anchor:"top"}),this.tooltipState=null,this.selection=[],this.hovered={id:null,level:null},this.tooltipElement=document.createElement("div"),this.tooltip=new G({target:this.tooltipElement,props:{properties:null,invalid:!0}}),this.initListeners()}setData(e){this.data=e,this.tooltipState=null}initListeners(){if(this.adapter.levels.forEach((e=>{const t=C(e);this.map.on("mouseleave",t,this._onLevelMouseLeave.bind(this)),this.map.on("mousemove",t,this._onLevelMouseMove.bind(this)),this.map.on("click",t,this._onLevelMouseClick.bind(this))})),this.adapter.hasMegaCountyLevel){const e=C(u.k.id);this.map.on("mouseleave",e,this._onMegaMouseLeave.bind(this)),this.map.on("mousemove",e,this._onMegaMouseMove.bind(this)),this.map.on("click",e,this._onMegaMouseClick.bind(this))}this.map.on("mouseenter",z,this._onMapMouseEnter.bind(this)),this.map.on("mouseleave",z,this._onMapMouseLeave.bind(this)),this.map.on("mousemove",z,this._onMapMouseMove.bind(this))}get activePopup(){return"spike"===this.adapter.encoding.id?this.topPopup:this.popup}_onMapMouseEnter(){this.map.getCanvas().style.cursor="pointer"}_onLevelMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMegaMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMapMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove()}_onLevelMouseMove(e){const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this._updateHoverHighlight(t.id,t.properties.level),this._renderTooltip(e))}_onMegaMouseMove(e){if(e.defaultPrevented)return;const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this._updateHoverHighlight(t.id,t.properties.level),this._renderTooltip(e))}_onMapMouseMove(e){e.defaultPrevented||this._renderTooltip(e,!0)}_onLevelMouseClick(e){const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this.adapter.dispatch("select",{feature:t,originalEvent:e.originalEvent}))}_onMegaMouseClick(e){if(e.defaultPrevented)return;const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this.adapter.dispatch("select",{feature:t,originalEvent:e.originalEvent}))}_renderTooltip(e,t=!1){this.map.getCanvas().style.cursor="pointer";const c=e.features[0],n=this.activePopup;if(!this.tooltipState||this.tooltipState.id!==c.properties.id||this.tooltipState.invalid!==t){this.tooltipState={id:c.properties.id,invalid:t};let e={};c.properties.level===u.k.id&&this.adapter.hasMegaCountyLevel&&(e.population=Object(k.a)(c.properties,this.data)),this.tooltip.$set({properties:X(X(X({},c.properties),e),this.data.get(c.properties.id)||{}),invalid:t})}n.setLngLat(e.lngLat).setDOMContent(this.tooltipElement).addTo(this.map)}_updateState(e,t,c){this.map.setFeatureState({source:e,id:"string"==typeof t?Number.parseInt(t,10):t},c)}_updateHoverLayerVisibility(){const e=new Set(this.selection.map((e=>e.level)));null!=this.hovered.id&&e.add(this.hovered.level);const t=t=>{"none"!==this.map.getLayoutProperty(P(t),"visibility")!==e.has(t)&&this.map.setLayoutProperty(P(t),"visibility",e.has(t)?"visible":"none")};for(const e of this.adapter.levels)t(e);this.adapter.hasMegaCountyLevel&&t(u.k.id)}_updateHoverHighlight(e=null,t=null){this.hovered.id!=e&&(this.hovered.id&&this._updateState(S(this.hovered.level),this.hovered.id,{hover:!1}),e&&this._updateState(S(t),e,{hover:!0}),this.hovered.id=e,this.hovered.level=t,this._updateHoverLayerVisibility())}select(e){return this.selectMulti(e?[{info:e,color:r.c.selectedRegionOutline}]:[])[0]}selectMulti(e){const t=this.selection.slice();for(const e of this.selection)this._updateState(S(e.level),e.id,{select:!1});return this.selection=e.map((e=>{const t=Number(e.info.id);return this._updateState(S(e.info.level),t,{select:e.color}),{id:t,level:e.info.level,color:e.color}})),this._updateHoverLayerVisibility(),t}forceHover(e){this._updateHoverHighlight(e.id,e.properties.level)}isHovered(e){return!!e&&(e.id==this.hovered.id&&e.level===this.hovered.level)}}var te=c(338),ce=c(352),ne=c.n(ce);class ie{constructor(e,t){this.map=null,this.onZoom=e,this.resetBounds=t,this.resetBoundsOptions={padding:30,linear:!1},this.stateZoom=1,this.initialZoomView=!0}_triggerZoom(e){const t=this.map.getZoom(),c=this.stateZoom,n=Math.pow(2,.75*(t-c));this.onZoom(n,e)}setMap(e){this.map=e,this.stateZoom=this.map.getZoom(),this.map.setMinZoom(this.stateZoom-1),this.map.on("zoom",(()=>{this._triggerZoom()}))}ready(){this.stateZoom=this.map.getZoom(),this._triggerZoom()}getZoom(){return this.map?this.map.getZoom():0}getMaxZoom(){return this.map?this.map.getMaxZoom():100}getMinZoom(){return this.map?this.map.getMinZoom():-100}zoomIn(){this.map&&(this.initialZoomView=!1,this.map.zoomIn())}zoomOut(){this.map&&(this.initialZoomView=!1,this.map.zoomOut())}focusOn(e){if(!e||!this.map)return;this.initialZoomView=!1;const t=ne()(e);this.map.fitBounds(t,{maxZoom:1.5*this.getZoom(),linear:!1,essential:!0})}resetZoom(){this.map&&(this.initialZoomView=!0,this.map.fitBounds(this.resetBounds,this.resetBoundsOptions),this.map.once("idle",(()=>{this.stateZoom=this.map.getZoom(),this.map.setMinZoom(this.stateZoom-1),this._triggerZoom(!0)})))}resized(){this.initialZoomView&&this.map&&requestAnimationFrame((()=>{this.map&&this.map.fitBounds(this.resetBounds,this.resetBoundsOptions)}))}showStateLabels(e){this.map&&this.map.getLayer(N)&&this.map.setLayoutProperty(N,"visibility",e?"visible":"none")}toggleStateLabels(){this.map&&this.map.getLayer(N)&&this.showStateLabels("visible"!==this.map.getLayoutProperty(N,"visibility"))}}var oe=c(157);function ae(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function le(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(c),!0).forEach((function(t){se(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):ae(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function se(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}class re{constructor(){this.id="color",this.layers=[]}getVisibleLayers(e){return[C(e),"county"===e&&C(u.k.id),"county"===e&&T("state")].filter(Boolean)}addLayers(){}encode(e,{level:t,stops:c,stopsMega:n}){e.setPaintProperty(C(t),"fill-color",x(c)),n&&e.setPaintProperty(C(u.k.id),"fill-color",x(n))}updateSources(){}}var be=c(75),ue=c(15);class de{constructor(e,t,c,n){this._sourceId=e,this._level=t,this._colorsDirty=!0,this.featureIds=[],this._valueLookup=new Map,this._valuePrimaryValue="value",this._valueToColor=()=>r.d,this._valueToSize=()=>0,this._vertexSource=c,this._fragmentSource=n,this._map=null,this.zoom=1}asLayer(e){return{id:e,type:"custom",renderingMode:"2d",onAdd:(e,t)=>this.onAdd(e,t),render:(e,t)=>this.render(e,t),onRemove:(e,t)=>this.onRemove(e,t),prerender:(e,t)=>this.preRender(e,t)}}_createVertices(e){return[e.x,e.y]}onAdd(e,t){this._map=e,this._vertexShader=t.createShader(t.VERTEX_SHADER),t.shaderSource(this._vertexShader,this._vertexSource),t.compileShader(this._vertexShader),this._fragmentShader=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(this._fragmentShader,this._fragmentSource),t.compileShader(this._fragmentShader),this._program=t.createProgram(),t.attachShader(this._program,this._vertexShader),t.attachShader(this._program,this._fragmentShader),t.linkProgram(this._program),this._uPos=t.getUniformLocation(this._program,"u_matrix"),this._uOpacity=t.getUniformLocation(this._program,"u_opacity"),this._uPixelToClip=t.getUniformLocation(this._program,"u_pixelToClip"),this._uZoom=t.getUniformLocation(this._program,"u_zoom"),this._uDevicePixelRatio=t.getUniformLocation(this._program,"u_device_pixel_ratio"),this._aPos=t.getAttribLocation(this._program,"a_pos"),this._centerBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._centerBuffer);const c=e.getSource(this._sourceId)._data.features.map((e=>{const t=e.geometry.coordinates,c=t[0],n=t[1];if(null==n||Number.isNaN(n))return[];this.featureIds.push(e.properties.id);const i=w.MercatorCoordinate.fromLngLat({lat:n,lng:c});return this._createVertices(i)})).flat();t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),this._verticesPerFeatures=c.length/3/this.featureIds.length,this._aColorAndValue=t.getAttribLocation(this._program,"a_colorAndValue"),this._colorAndValueBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._colorAndValueBuffer),this._colorAndValueData=new Float32Array(4*this.featureIds.length*this._verticesPerFeatures),this._colorAndValueData.fill(0),t.bufferData(t.ARRAY_BUFFER,this._colorAndValueData,t.STATIC_DRAW)}onRemove(e,t){this._map=null,t.deleteBuffer(this._centerBuffer),t.deleteBuffer(this._colorAndValueBuffer),t.deleteShader(this._fragmentShader),t.deleteShader(this._vertexShader),t.deleteProgram(this._program)}_prepareRender(e,t){e.useProgram(this._program),e.uniformMatrix4fv(this._uPos,!1,t);const c=this._map.painter.transform;e.uniform1f(this._uZoom,this.zoom),e.uniform2f(this._uPixelToClip,c.pixelsToGLUnits[0],c.pixelsToGLUnits[1]),e.uniform1f(this._uDevicePixelRatio,window.devicePixelRatio),e.bindBuffer(e.ARRAY_BUFFER,this._colorAndValueBuffer),e.enableVertexAttribArray(this._aColorAndValue),e.vertexAttribPointer(this._aColorAndValue,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._centerBuffer),e.enableVertexAttribArray(this._aPos),e.vertexAttribPointer(this._aPos,3,e.FLOAT,!1,0,0),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}preRender(e){if(this._colorsDirty){this._colorsDirty=!1;for(let e=0;e<this.featureIds.length;e++){const t=this.featureIds[e],c=this._valueLookup.has(t)?this._valueLookup.get(t)[this._valuePrimaryValue]:null,n=this._verticesPerFeatures;if(null==c||Number.isNaN(c)){for(let t=0;t<n;t++){const c=4*e*n+4*t;this._colorAndValueData[c]=0,this._colorAndValueData[c+1]=0,this._colorAndValueData[c+2]=0,this._colorAndValueData[c+3]=0}continue}const i=Object(ue.g)(this._valueToColor(c)),o=this._valueToSize(c);for(let t=0;t<n;t++){const c=4*e*n+4*t;this._colorAndValueData[c]=i.r,this._colorAndValueData[c+1]=i.g,this._colorAndValueData[c+2]=i.b,this._colorAndValueData[c+3]=o}}e.bindBuffer(e.ARRAY_BUFFER,this._colorAndValueBuffer),e.bufferData(e.ARRAY_BUFFER,this._colorAndValueData,e.STATIC_DRAW)}}encode(e,t){this._colorsDirty=!0,this._valueToSize=e,this._valueToColor=t}updateSources(e,t){this._colorsDirty=!0,this._valueLookup=e,this._valuePrimaryValue=t}}class Oe extends de{constructor(e,t){super(e,t,"\nuniform mat4 u_matrix;\nuniform float u_zoom;\nuniform vec2 u_pixelToClip;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n\n  vec2 pos = vec2(a_pos.z < 0.0 ? -1.0 : 1.0, abs(a_pos.z) < 2.0 ? -1.0 : 1.0);\n  p.xy += pos * u_pixelToClip * (u_zoom * a_colorAndValue.a + 1.0) * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n\n  v_data = vec4(pos, a_colorAndValue.a * u_zoom, 1.0);\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n}","\nprecision mediump float;\nuniform float u_opacity;\nuniform float u_device_pixel_ratio;\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n\n  float extrude_length = length(v_data.xy);\n  float radius = v_data.z;\n  float stroke_width = v_data.w;\n\n  float blur = -(1.0 / u_device_pixel_ratio / (radius + stroke_width));\n  float opacity_t = smoothstep(0.0, blur, extrude_length - 1.0);\n\n  float color_t = smoothstep(\n      blur,\n      0.0,\n      extrude_length - radius / (radius + stroke_width)\n  );\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = opacity_t * mix(fill_color, stroke_color, color_t);\n}")}_createVertices(e){return[e.x,e.y,-2,e.x,e.y,-1,e.x,e.y,1,e.x,e.y,2]}onAdd(e,t){super.onAdd(e,t),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);const c=new Uint16Array(6*this.featureIds.length);for(let e=0;e<this.featureIds.length;e++){const t=6*e,n=4*e;c[t]=n,c[t+1]=n+1,c[t+2]=n+2,c[t+3]=n+2,c[t+4]=n+3,c[t+5]=n}t.bufferData(t.ELEMENT_ARRAY_BUFFER,c,t.STATIC_DRAW)}onRemove(e,t){super.onRemove(e,t),t.deleteBuffer(this._indexBuffer)}render(e,t){super._prepareRender(e,t),e.uniform1f(this._uOpacity,r.a.fillOpacity),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.drawElements(e.TRIANGLES,6*this.featureIds.length,e.UNSIGNED_SHORT,0)}}class je{constructor(e,t){this.id="bubble",this.theme=e,this.layers=t.map((e=>E(e))),this.customLayers=new Map(t.map((e=>[e,new Oe(V(e),e)])))}getVisibleLayers(e){return[C(e),E(e)]}onZoom(e){this.customLayers.forEach((t=>t.zoom=e))}getMaxZoom(e){return 50/this.theme.maxRadius[e]}addLayers(e,t){t.levels.forEach((t=>{e.addLayer(this.customLayers.get(t).asLayer(E(t)))}))}encode(e,{level:t,sensorType:c,valueMinMax:n,scale:i}){e.setPaintProperty(C(t),"fill-color",this.theme.countyFill);const o=this.theme.maxRadius[t],a=this.theme.radiusScale[c],l=Object(be.c)(a).domain([0,n[1]]).range([0,o]).clamp(!0);return this.customLayers.get(t).encode(l,i),l}updateSources(e,t,c,n){this.customLayers.get(t).updateSources(c,n)}}class he extends de{constructor(e,t){super(e,t,"\nuniform mat4 u_matrix;\nuniform vec2 u_pixelToClip;\nuniform float u_zoom;\n\nuniform float u_size;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n  float height = (a_colorAndValue.a * u_zoom + 1.0);\n  float shift = a_pos.z * (u_size * u_zoom + 1.0);\n\n  p.y -= (1.0 - abs(a_pos.z)) * height * u_pixelToClip.y * p.w;\n  p.x += shift * u_pixelToClip.x * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n  float thickness = 1.0;\n  // encode the barycentric coordinate but such that the bottom line is not shown\n  v_data = vec4(-min(shift, 0.0), height, max(shift, 0.0), thickness);\n\n}","\n#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\nuniform float u_device_pixel_ratio;\nuniform float u_opacity;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\n// This is like\nfloat aastep (float threshold, float dist) {\n  float afwidth = fwidth(dist) * 0.5;\n  return smoothstep(threshold - afwidth, threshold + afwidth, dist);\n}\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n  vec3 barycentric = v_data.xyz;\n  float stroke_width = v_data.w;\n\n  // this will be our signed distance for the wireframe edge\n  float d = min(min(barycentric.x, barycentric.y), barycentric.z);\n  // compute the anti-aliased stroke edge\n  float edge = 1.0 - aastep(stroke_width, d);\n\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = mix(fill_color, stroke_color, edge);\n}")}_createVertices(e){return[e.x,e.y,-1,e.x,e.y,0,e.x,e.y,1]}asLayer(e){return{id:e,type:"custom",renderingMode:"2d",onAdd:(e,t)=>this.onAdd(e,t),render:(e,t)=>this.render(e,t),onRemove:(e,t)=>this.onRemove(e,t),prerender:(e,t)=>this.preRender(e,t)}}onAdd(e,t){t.getExtension("OES_standard_derivatives"),super.onAdd(e,t),this._uSize=t.getUniformLocation(this._program,"u_size")}onRemove(e,t){super.onRemove(e,t),t.deleteBuffer(this._indexBuffer)}render(e,t){super._prepareRender(e,t),e.uniform1f(this._uOpacity,r.b.fillOpacity),e.uniform1f(this._uSize,r.b.size[this._level]),e.drawArrays(e.TRIANGLES,0,this.featureIds.length*this._verticesPerFeatures)}}class ge{constructor(e,t){this.id="spike",this.theme=e,this.layers=t.map((e=>R(e))),this.customLayers=new Map(t.map((e=>[e,new he(V(e),e)])))}getVisibleLayers(e){return[C(e),R(e)]}onZoom(e){this.customLayers.forEach((t=>t.zoom=e))}getMaxZoom(e){return 100/this.theme.maxHeight[e]}addLayers(e,t){t.levels.forEach((t=>{e.addLayer(this.customLayers.get(t).asLayer(R(t)))}))}encode(e,{level:t,sensorType:c,valueMinMax:n,scale:i}){e.setPaintProperty(C(t),"fill-color",this.theme.countyFill);const o=n[1],a=this.theme.maxHeight[t],l=this.theme.heightScale[c],s=Object(be.c)(l).range([0,a]).domain([0,o]).clamp(!0);return this.customLayers.get(t).encode(s,i),s}updateSources(e,t,c,n){this.customLayers.get(t).updateSources(c,n)}}const pe=Object(k.d)();class me extends class{constructor(e,t){this.dispatch=e,this.map=null,this.mapSetupReady=!1,this.mapSetupReadyPromiseResolver=()=>{},this.mapSetupReadyPromise=new Promise((e=>{this.mapSetupReadyPromiseResolver=e})),this.mapDataReady=!1,this.mapEncodingReady=!1,this.animationDuration=0,this.interactive=null,this.level=t.level,this.levels=t.levels,this.hasMegaCountyLevel=t.hasMegaCountyLevel,this.encodings=t.encodings,this.encoding=this.encodings[0];const c=Object(oe.a)((e=>this.dispatch("zoom",e)),100);this.zoom=new ie(((e,t)=>{const n="function"==typeof this.encoding.getMaxZoom?this.encoding.getMaxZoom(this.level):Number.POSITIVE_INFINITY;e=Math.min(n,e);for(const t of this.encodings)"function"==typeof t.onZoom&&t.onZoom(e);t&&this.map.triggerRepaint(),c(e)}),t.bounds)}initMap(e,t){this.map=new w.Map({attributionControl:!1,container:e,style:te,bounds:this.zoom.resetBounds,fitBounds:this.zoom.resetBoundsOptions,doubleClickZoom:!1,dragRotate:!1,pitchWithRotate:!1,touchPitch:!1,touchZoomRotate:!0,renderWorldCopies:!1,antialias:!0,maxZoom:8,minZoom:1}),this.zoom.setMap(this.map),this.map.touchZoomRotate.disableRotation();let c=null;const n=new Promise((e=>{c=e}));return this.map.on("idle",(()=>{this.dispatch("idle")})),this.map.on("load",(()=>{this.addSprites(),this.addSources().then((()=>{this.addLayers(),this.interactive=new ee(this.map,this)})).then((()=>{this._setupReady(),c(this)}))})),Object(b.c)(e,(()=>{this.map.resize()})),this.setTitle(t),n}_setupReady(){this.zoom.showStateLabels("state"===this.level),this.zoom.ready(),this.markReady("setup")}markReady(e){switch(e){case"data":if(this.mapDataReady)return;this.mapDataReady=!0,this.dispatch("readyData");break;case"setup":if(this.mapSetupReady)return;this.mapSetupReady=!0,this.mapSetupReadyPromiseResolver(),this.dispatch("readySetup");break;case"encoding":if(this.mapEncodingReady)return;this.mapEncodingReady=!0,this.dispatch("readyEncoding")}this.mapSetupReady&&this.mapEncodingReady&&this.mapDataReady&&(this.dispatch("ready"),this.map.getContainer().dataset.ready="ready")}addSprites(){const e=16,t=document.createElement("canvas");t.width=e,t.height=e;const c=t.getContext("2d");c.clearRect(0,0,e,e);const n=c.createLinearGradient(0,0,e,e);n.addColorStop(0,"white"),n.addColorStop(.25,r.d),n.addColorStop(.5,"white"),n.addColorStop(.75,r.d),n.addColorStop(1,"white"),c.fillStyle=n,c.fillRect(0,0,e,e);const i=c.getImageData(0,0,e,e);this.map.addImage("hatching",i,{sdf:!0})}addSources(){return Promise.resolve()}animationOptions(e){return this.animationDuration?{[e+"-transition"]:{duration:this.animationDuration,delay:0}}:{}}addLevelSource(e,t,c){this.map.addSource(S(e),{type:"geojson",data:t}),this.map.addSource(V(e),{type:"geojson",data:c})}addFillLevelLayer(e,t=!0){this.map.addLayer({id:C(e),source:S(e),type:"fill",layout:{visibility:"none"},paint:le(le({"fill-color":r.c.countyFill,"fill-opacity":["case",["==",["to-number",["feature-state","value"],_],_],0,1]},this.animationOptions("fill-color")),t?{"fill-outline-color":r.c.countyOutlineWhenFilled}:{})})}addBorderLevelLayer(e){this.map.addLayer({id:T(e),source:S(e),type:"line",layout:{visibility:"none"},paint:{"line-color":r.c.countyOutlineWhenFilled,"line-width":1}})}addHoverLevelLayer(e){this.map.addLayer({id:P(e),source:S(e),type:"line",layout:{visibility:"none"},paint:{"line-color":["case",["to-boolean",["feature-state","select"]],["feature-state","select"],r.c.hoverRegionOutline],"line-width":["case",["any",["to-boolean",["feature-state","hover"]],["to-boolean",["feature-state","select"]]],4,0]}})}addLayers(){}destroy(){this.mapSetupReady=!1,this.map&&(Object(b.e)(this.map.getContainer()),this.map.remove(),this.zoom.map=null,this.map=null)}validateLevel(e){return this.levels.includes(e)?e:this.levels[0]}getAllEncodingLayers(){const e=this.encodings.flatMap((e=>e.layers));return e.push(...this.levels.map((e=>C(e)))),this.hasMegaCountyLevel&&e.push(C(u.k.id)),e}updateOptions(e,t,c,n,i,o,a,l){t=this.validateLevel(t);const s=this.level;if(this.level=t,this.encoding=this.encodings.find((t=>t.id===e)),this.hasMegaCountyLevel||(a=null),!this.map||!this.mapSetupReady)return;s!==t&&this.zoom.showStateLabels("state"===t);const r=this.getAllEncodingLayers(),b=new Set(this.encoding.getVisibleLayers(t));r.forEach((e=>{this.map.setLayoutProperty(e,"visibility",b.has(e)?"visible":"none")}));const u=this.encoding.encode(this.map,{level:t,sensorType:n,sensor:c,valueMinMax:i,stops:o,stopsMega:a,scale:l,baseZoom:this.zoom.stateZoom});return this.markReady("encoding"),u}updateSources(e,t,c="value"){e=this.validateLevel(e);const n=Math.random().toString(36);this._mapDataFlag=n,this.dispatch("loading",!0),Promise.all([t,this.mapSetupReadyPromise]).then((([t])=>{if(this._mapDataFlag!==n)return;this.map.once("idle",(()=>{this.dispatch("loading",!1)}));const i=new Map(t.map((e=>[e.geo_value.toUpperCase(),e])));this.interactive.setData(i),"county"===e&&this._updateSource(S(u.k.id),i,c),this._updateSource(S(e),i,c),this._updateSource(V(e),i,c);for(const t of this.encodings)t.updateSources(this.map,e,i,c);t.length>0&&this.markReady("data")}))}_updateSource(e,t,c="value"){console.assert(null!=this.map);const n=this.map.getSource(e);if(!n)return void console.error("invalid source");n._data.features.forEach((n=>{const i=n.properties.id,o=t.get(i);this.map.setFeatureState({source:e,id:Number.parseInt(n.id,10)},{value:o?o[c]:_})}))}selectMulti(e){if(this.map&&this.interactive){if(e.length<=1){const t=this.interactive.selection.slice();return this.select(e.length>0?e[0].info:null),t}return this.interactive.selectMulti(e)}}select(e){this.map&&this.interactive&&this.interactive.select(e)}focusOn(e){if(!e||!this.map)return;const t=this.map.getSource(S(e.level));if(!t)return;const c=t._data.features.find((t=>t.id===e.id));c&&this.zoom.focusOn(c)}isMissing(e){const t=this.map.getFeatureState({source:S(e.properties.level),id:"string"==typeof id?Number.parseInt(e.id,10):e.id});return null==t.value||t.value===_}selectRandom(){if(!this.map||!this.mapSetupReady)return;const e=this.map.getSource(S(this.level));if(!e)return;const t=u.g[this.level],c=e._data.features.find((e=>e.properties.id===t));if(c&&!this.isMissing(c))return void this.dispatch("select",{feature:c});const n=e._data.features.filter((e=>!this.isMissing(e)));if(0===n.length)return;const i=n[Math.floor(Math.random()*(n.length-1))];this.dispatch("select",{feature:i})}setTitle(e){if(!this.map)return;const t=this.map.getContainer().querySelector("canvas");t&&(t.setAttribute("role","figure"),t.setAttribute("aria-roledescription","visualization"),t.setAttribute("aria-label","US Map showing: ".concat(e)))}}{constructor(e){super(e,{bounds:$.states,encodings:[new re(u.l),new je(r.a,u.l),new ge(r.b,u.l)],level:"county",levels:u.l,hasMegaCountyLevel:!0})}addLevelSources(){const e=this.map;return pe.then((t=>{e.addSource(S(u.k.id),{type:"geojson",data:t.mega}),this.levels.forEach((e=>{this.addLevelSource(e,t[e].border,t[e].center)}))}))}addSources(){return Promise.all([(e=this.map,pe.then((t=>{e.addSource(F,{type:"geojson",data:t.cities})}))),this.addLevelSources()]);var e}addLayers(){const e=this.map;e.addLayer({id:z,source:S("state"),type:"fill",paint:{"fill-color":r.d,"fill-outline-color":r.c.stateOutline,"fill-pattern":"hatching"}}),this.addFillLevelLayer(u.k.id),this.levels.forEach((e=>{this.addFillLevelLayer(e,"county"!==e)})),this.addBorderLevelLayer("state"),this.addHoverLevelLayer(u.k.id),this.levels.forEach((e=>{this.addHoverLevelLayer(e)})),this.encodings.forEach((t=>{t.addLayers(e,this)})),function(e){const t=(t,c,n={})=>{e.addLayer(M(M(M({id:t,source:F,type:"symbol"},c?{filter:c}:{}),n),{},{layout:{"text-field":["get","name"],"text-font":["Open Sans Regular"],"text-size":12},paint:{"text-halo-color":"#fff","text-halo-width":1.5}}))};t(A.pit,["==","name","Pittsburgh"],{maxzoom:8}),t(A.pit[1],[">","population",9e5],{maxzoom:4}),t(A.pit[2],[">","population",5e5],{maxzoom:6,minzoom:4}),t(A.pit[3],[">","population",1e5],{maxzoom:8,minzoom:6}),t(A.pit[4],void 0,{minzoom:8})}(e),function(e){e.addLayer({id:N,source:V("state"),type:"symbol",maxzoom:8,layout:{"text-field":["upcase",["get","name"]],"text-font":["Open Sans Bold"],"text-size":11},paint:{"text-opacity":.5,"text-halo-color":"#fff","text-halo-width":1}})}(e)}getAllEncodingLayers(){const e=super.getAllEncodingLayers();return e.push(T("state")),e}}var fe=c(309);c(257);function ve(e){let t,c,i=e[3].toLocaleDateString()+"";return{c(){t=Object(n.u)("span"),c=Object(n.Z)(i),Object(n.g)(t,"data-testid","currentdate")},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c)},p(e,t){8&t&&i!==(i=e[3].toLocaleDateString()+"")&&Object(n.S)(c,i)},d(e){e&&Object(n.t)(t)}}}function ye(e){let t,c,i,o,a,l,s;a=new fe.a({props:{sensor:e[2],className:"info"}});let r=e[0]&&ve(e);return{c(){t=Object(n.u)("h2"),c=Object(n.u)("span"),i=Object(n.Z)(e[1]),o=Object(n.V)(),Object(n.n)(a.$$.fragment),l=Object(n.V)(),r&&r.c(),Object(n.g)(t,"class","banner svelte-11a77rv")},m(e,b){Object(n.F)(e,t,b),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(c,o),Object(n.I)(a,c,null),Object(n.e)(t,l),r&&r.m(t,null),s=!0},p(e,[c]){(!s||2&c)&&Object(n.S)(i,e[1]);const o={};4&c&&(o.sensor=e[2]),a.$set(o),e[0]?r?r.p(e,c):(r=ve(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i(e){s||(Object(n.cb)(a.$$.fragment,e),s=!0)},o(e){Object(n.db)(a.$$.fragment,e),s=!1},d(e){e&&Object(n.t)(t),Object(n.r)(a),r&&r.d()}}}function ke(e,t,c){let i,a,l;Object(n.l)(e,o.r,(e=>c(1,i=e))),Object(n.l)(e,o.q,(e=>c(2,a=e))),Object(n.l)(e,o.i,(e=>c(3,l=e)));let{showDate:s=!1}=t;return e.$$set=e=>{"showDate"in e&&c(0,s=e.showDate)},[s,i,a,l]}class $e extends n.b{constructor(e){super(),Object(n.E)(this,e,ke,ye,n.P,{showDate:0})}}var we=$e,_e=c(162);c(258);function xe(e){let t,c,i,o,a,l,s,r,b,u,d;return{c(){t=Object(n.u)("div"),c=Object(n.u)("button"),o=Object(n.V)(),a=Object(n.u)("button"),s=Object(n.V)(),r=Object(n.u)("button"),Object(n.g)(c,"aria-pressed",i="color"===e[4]?"true":"false"),Object(n.g)(c,"class","uk-button uk-button-default uk-button-small choropleth svelte-1eqd11i"),Object(n.g)(c,"data-uk-icon","icon: blank"),Object(n.g)(c,"title","Switch to Choropleth"),Object(n.bb)(c,"uk-active","color"===e[4]),Object(n.g)(a,"aria-pressed",l="bubble"===e[4]?"true":"false"),Object(n.g)(a,"class","uk-button uk-button-default uk-button-small bubble svelte-1eqd11i"),Object(n.g)(a,"data-uk-icon","icon: blank"),Object(n.g)(a,"title","Switch to Bubble Map"),Object(n.bb)(a,"uk-active","bubble"===e[4]),Object(n.g)(r,"aria-pressed",b="spike"===e[4]?"true":"false"),Object(n.g)(r,"class","uk-button uk-button-default uk-button-small spike svelte-1eqd11i"),Object(n.g)(r,"data-uk-icon","icon: blank"),Object(n.g)(r,"title","Switch to Spike Map"),Object(n.bb)(r,"uk-active","spike"===e[4]),Object(n.g)(t,"class","uk-vertical-button-group svelte-1eqd11i")},m(i,l){Object(n.F)(i,t,l),Object(n.e)(t,c),Object(n.e)(t,o),Object(n.e)(t,a),Object(n.e)(t,s),Object(n.e)(t,r),u||(d=[Object(n.H)(c,"click",e[8]),Object(n.H)(a,"click",e[9]),Object(n.H)(r,"click",e[10])],u=!0)},p(e,t){16&t&&i!==(i="color"===e[4]?"true":"false")&&Object(n.g)(c,"aria-pressed",i),16&t&&Object(n.bb)(c,"uk-active","color"===e[4]),16&t&&l!==(l="bubble"===e[4]?"true":"false")&&Object(n.g)(a,"aria-pressed",l),16&t&&Object(n.bb)(a,"uk-active","bubble"===e[4]),16&t&&b!==(b="spike"===e[4]?"true":"false")&&Object(n.g)(r,"aria-pressed",b),16&t&&Object(n.bb)(r,"uk-active","spike"===e[4])},d(e){e&&Object(n.t)(t),u=!1,Object(n.O)(d)}}}function Se(e){let t;return{c(){t=Object(n.u)("div"),Object(n.g)(t,"class","loader loading svelte-1eqd11i")},m(e,c){Object(n.F)(e,t,c)},d(e){e&&Object(n.t)(t)}}}function Ve(e){let t,c,i,o,a,l,s,r,b,u,d,O,j,h,g,p,m=e[2]&&xe(e),f=e[3]&&Se();return{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),i=Object(n.u)("button"),a=Object(n.V)(),l=Object(n.u)("button"),r=Object(n.V)(),b=Object(n.u)("div"),u=Object(n.u)("button"),O=Object(n.V)(),m&&m.c(),j=Object(n.V)(),f&&f.c(),Object(n.g)(i,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),Object(n.g)(i,"data-uk-icon","icon: plus"),Object(n.g)(i,"type","button"),Object(n.g)(i,"title","Zoom in"),Object(n.g)(i,"aria-label","Zoom in"),i.disabled=o=!e[1]||e[1].getZoom()<=e[1].getMinZoom(),Object(n.g)(l,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),Object(n.g)(l,"data-uk-icon","icon: minus"),Object(n.g)(l,"type","button"),Object(n.g)(l,"title","Zoom out"),Object(n.g)(l,"aria-label","Zoom out"),l.disabled=s=!e[1]||e[1].getZoom()>=e[1].getMaxZoom(),Object(n.g)(c,"class","uk-vertical-button-group svelte-1eqd11i"),Object(n.g)(u,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),Object(n.g)(u,"type","button"),Object(n.g)(u,"data-uk-icon","icon: home"),Object(n.g)(u,"title","Show entire map"),Object(n.g)(u,"aria-label","Show entire map"),u.disabled=d=!e[1],Object(n.g)(b,"class","svelte-1eqd11i"),Object(n.g)(t,"class",h="root "+e[0]+" svelte-1eqd11i")},m(o,s){Object(n.F)(o,t,s),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(c,a),Object(n.e)(c,l),Object(n.e)(t,r),Object(n.e)(t,b),Object(n.e)(b,u),Object(n.e)(t,O),m&&m.m(t,null),Object(n.e)(t,j),f&&f.m(t,null),g||(p=[Object(n.H)(i,"click",e[5]),Object(n.H)(l,"click",e[6]),Object(n.H)(u,"click",e[7])],g=!0)},p(e,[c]){2&c&&o!==(o=!e[1]||e[1].getZoom()<=e[1].getMinZoom())&&(i.disabled=o),2&c&&s!==(s=!e[1]||e[1].getZoom()>=e[1].getMaxZoom())&&(l.disabled=s),2&c&&d!==(d=!e[1])&&(u.disabled=d),e[2]?m?m.p(e,c):(m=xe(e),m.c(),m.m(t,j)):m&&(m.d(1),m=null),e[3]?f||(f=Se(),f.c(),f.m(t,null)):f&&(f.d(1),f=null),1&c&&h!==(h="root "+e[0]+" svelte-1eqd11i")&&Object(n.g)(t,"class",h)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),m&&m.d(),f&&f.d(),g=!1,Object(n.O)(p)}}}function Fe(e,t,c){let i;Object(n.l)(e,o.s,(e=>c(4,i=e)));let{className:a=""}=t,{zoom:l}=t,{showEncodings:s=!1}=t,{loading:r=!1}=t;return e.$$set=e=>{"className"in e&&c(0,a=e.className),"zoom"in e&&c(1,l=e.zoom),"showEncodings"in e&&c(2,s=e.showEncodings),"loading"in e&&c(3,r=e.loading)},[a,l,s,r,i,()=>{Object(_e.a)("map","zoomIn"),l.zoomIn()},()=>{Object(_e.a)("map","zoomOut"),l.zoomOut()},()=>{Object(_e.a)("map","zoomReset"),l.resetZoom()},()=>{o.s.set("color")},()=>{o.s.set("bubble")},()=>{o.s.set("spike")}]}class De extends n.b{constructor(e){super(),Object(n.E)(this,e,Fe,Ve,n.P,{className:0,zoom:1,showEncodings:2,loading:3})}}var Me=De,Le=c(328);c(260);function Ce(e,t,c){const n=e.slice();return n[7]=t[c],n}function Pe(e){let t,c,i,o=e[0].high+"";return{c(){t=Object(n.u)("li"),c=Object(n.Z)(o),Object(n.g)(t,"class","tick svelte-1u6a1mr"),Object(n.U)(t,"background-image","linear-gradient(to right, "+e[7].color+", "+e[7].nextColor+")"),Object(n.g)(t,"title",i=e[7].label)},m(e,i){Object(n.F)(e,t,i),Object(n.e)(t,c)},p(e,a){1&a&&o!==(o=e[0].high+"")&&Object(n.S)(c,o),1&a&&Object(n.U)(t,"background-image","linear-gradient(to right, "+e[7].color+", "+e[7].nextColor+")"),1&a&&i!==(i=e[7].label)&&Object(n.g)(t,"title",i)},d(e){e&&Object(n.t)(t)}}}function Ee(e){let t,c,i,o,a,l,s,b,u,d,O,j=e[0].high+"",h=e[0].high+"",g=e[0].labels,p=[];for(let t=0;t<g.length;t+=1)p[t]=Pe(Ce(e,g,t));return{c(){t=Object(n.u)("ul"),c=Object(n.u)("li"),i=Object(n.Z)(j),o=Object(n.V)(),a=Object(n.u)("li"),l=Object(n.Z)(h),b=Object(n.V)();for(let e=0;e<p.length;e+=1)p[e].c();u=Object(n.V)(),d=Object(n.u)("li"),Object(n.g)(c,"class","tick tick-single svelte-1u6a1mr"),Object(n.U)(c,"background","repeating-linear-gradient(-45deg, "+r.d+", white 30%)"),Object(n.g)(c,"title","NA"),Object(n.g)(a,"class","tick tick-single tick-space svelte-1u6a1mr"),Object(n.U)(a,"background-color",r.e),Object(n.g)(a,"title",s=e[0].low),Object(n.g)(d,"class","tick tick-last svelte-1u6a1mr"),Object(n.g)(d,"title",O=e[0].high),Object(n.g)(t,"data-testid","color-legend"),Object(n.g)(t,"class","svelte-1u6a1mr")},m(e,s){Object(n.F)(e,t,s),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(t,o),Object(n.e)(t,a),Object(n.e)(a,l),Object(n.e)(t,b);for(let e=0;e<p.length;e+=1)p[e].m(t,null);Object(n.e)(t,u),Object(n.e)(t,d)},p(e,[c]){if(1&c&&j!==(j=e[0].high+"")&&Object(n.S)(i,j),1&c&&h!==(h=e[0].high+"")&&Object(n.S)(l,h),1&c&&s!==(s=e[0].low)&&Object(n.g)(a,"title",s),1&c){let n;for(g=e[0].labels,n=0;n<g.length;n+=1){const i=Ce(e,g,n);p[n]?p[n].p(i,c):(p[n]=Pe(i),p[n].c(),p[n].m(t,u))}for(;n<p.length;n+=1)p[n].d(1);p.length=g.length}1&c&&O!==(O=e[0].high)&&Object(n.g)(d,"title",O)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),Object(n.s)(p,e)}}}function Re(e,t,c){let i,a,l,s,r,b,u;return Object(n.l)(e,o.F,(e=>c(1,i=e))),Object(n.l)(e,o.q,(e=>c(2,a=e))),Object(n.l)(e,o.k,(e=>c(3,l=e))),Object(n.l)(e,o.e,(e=>c(4,s=e))),Object(n.l)(e,o.C,(e=>c(5,r=e))),Object(n.l)(e,o.v,(e=>c(6,b=e))),e.$$.update=()=>{126&e.$$.dirty&&c(0,u=p(i,a,l,s,r,b))},[u,i,a,l,s,r,b]}class Te extends n.b{constructor(e){super(),Object(n.E)(this,e,Re,Ee,n.P,{})}}var ze=Te;c(261);function Ne(e,t,c){const n=e.slice();return n[9]=t[c],n}function Ae(e){let t,c,i,o,a,l,s=e[9].label+"";return{c(){t=Object(n.u)("li"),c=Object(n.u)("div"),i=Object(n.u)("div"),o=Object(n.V)(),a=Object(n.u)("span"),l=Object(n.Z)(s),Object(n.g)(i,"class","bubble svelte-19hi244"),Object(n.U)(i,"width",2*e[2](e[9].value)*e[0]+"px"),Object(n.U)(i,"height",2*e[2](e[9].value)*e[0]+"px"),Object(n.U)(i,"background",Object(b.d)(e[9].color,r.a.fillOpacity)),Object(n.U)(i,"border-color",e[9].color),Object(n.g)(c,"class","bubble-wrapper svelte-19hi244"),Object(n.g)(t,"class","svelte-19hi244")},m(e,s){Object(n.F)(e,t,s),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(t,o),Object(n.e)(t,a),Object(n.e)(a,l)},p(e,t){7&t&&Object(n.U)(i,"width",2*e[2](e[9].value)*e[0]+"px"),7&t&&Object(n.U)(i,"height",2*e[2](e[9].value)*e[0]+"px"),2&t&&Object(n.U)(i,"background",Object(b.d)(e[9].color,r.a.fillOpacity)),2&t&&Object(n.U)(i,"border-color",e[9].color),2&t&&s!==(s=e[9].label+"")&&Object(n.S)(l,s)},d(e){e&&Object(n.t)(t)}}}function Ze(e){let t,c,i,o,a,l,s,u,d,O,j,h,g,p,m=e[1].high+"",f=e[1].labels,v=[];for(let t=0;t<f.length;t+=1)v[t]=Ae(Ne(e,f,t));return{c(){t=Object(n.u)("ul"),c=Object(n.u)("li"),i=Object(n.u)("div"),o=Object(n.u)("div"),a=Object(n.V)(),l=Object(n.u)("span"),l.textContent="NA",s=Object(n.V)();for(let e=0;e<v.length;e+=1)v[e].c();u=Object(n.V)(),d=Object(n.u)("li"),O=Object(n.u)("div"),j=Object(n.u)("div"),h=Object(n.V)(),g=Object(n.u)("span"),p=Object(n.Z)(m),Object(n.g)(o,"class","na svelte-19hi244"),Object(n.U)(o,"background","repeating-linear-gradient(-45deg, "+r.d+", white 30%)"),Object(n.g)(i,"class","bubble-wrapper svelte-19hi244"),Object(n.g)(c,"class","svelte-19hi244"),Object(n.U)(j,"width",2*e[2](e[1].highValue)*e[0]+"px"),Object(n.U)(j,"height",2*e[2](e[1].highValue)*e[0]+"px"),Object(n.U)(j,"background",Object(b.d)(e[1].highColor,r.a.fillOpacity)),Object(n.U)(j,"border-color",e[1].highColor),Object(n.g)(j,"class","bubble svelte-19hi244"),Object(n.g)(O,"class","bubble-wrapper svelte-19hi244"),Object(n.g)(d,"class","svelte-19hi244"),Object(n.g)(t,"data-testid","bubble-legend"),Object(n.g)(t,"class","svelte-19hi244")},m(e,r){Object(n.F)(e,t,r),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(i,o),Object(n.e)(c,a),Object(n.e)(c,l),Object(n.e)(t,s);for(let e=0;e<v.length;e+=1)v[e].m(t,null);Object(n.e)(t,u),Object(n.e)(t,d),Object(n.e)(d,O),Object(n.e)(O,j),Object(n.e)(d,h),Object(n.e)(d,g),Object(n.e)(g,p)},p(e,[c]){if(7&c){let n;for(f=e[1].labels,n=0;n<f.length;n+=1){const i=Ne(e,f,n);v[n]?v[n].p(i,c):(v[n]=Ae(i),v[n].c(),v[n].m(t,u))}for(;n<v.length;n+=1)v[n].d(1);v.length=f.length}7&c&&Object(n.U)(j,"width",2*e[2](e[1].highValue)*e[0]+"px"),7&c&&Object(n.U)(j,"height",2*e[2](e[1].highValue)*e[0]+"px"),2&c&&Object(n.U)(j,"background",Object(b.d)(e[1].highColor,r.a.fillOpacity)),2&c&&Object(n.U)(j,"border-color",e[1].highColor),2&c&&m!==(m=e[1].high+"")&&Object(n.S)(p,m)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),Object(n.s)(v,e)}}}function Ie(e,t,c){let i,a,l,s,r,b,u;Object(n.l)(e,o.F,(e=>c(3,i=e))),Object(n.l)(e,o.q,(e=>c(4,a=e))),Object(n.l)(e,o.k,(e=>c(5,l=e))),Object(n.l)(e,o.e,(e=>c(6,s=e))),Object(n.l)(e,o.C,(e=>c(7,r=e))),Object(n.l)(e,o.v,(e=>c(8,b=e))),Object(n.l)(e,o.d,(e=>c(2,u=e)));let d,{zoom:O=1}=t;return e.$$set=e=>{"zoom"in e&&c(0,O=e.zoom)},e.$$.update=()=>{504&e.$$.dirty&&c(1,d=p(i,a,l,s,r,b))},[O,d,u,i,a,l,s,r,b]}class He extends n.b{constructor(e){super(),Object(n.E)(this,e,Ie,Ze,n.P,{zoom:0})}}var Be=He;c(262);function Ue(e,t,c){const n=e.slice();return n[13]=t[c],n}function Ye(e){let t,c,i,o,a,l,s,u,d,O,j,h,g=e[13].label+"";return{c(){t=Object(n.u)("li"),c=Object(n.Y)("svg"),i=Object(n.Y)("g"),o=Object(n.Y)("path"),O=Object(n.V)(),j=Object(n.u)("span"),h=Object(n.Z)(g),Object(n.g)(o,"d",a=e[3](e[13].value)),Object(n.g)(o,"class","spike svelte-f727e1"),Object(n.g)(o,"fill",l=Object(b.d)(e[13].color,r.b.fillOpacity)),Object(n.g)(o,"stroke",s=Object(b.d)(e[13].color,r.b.strokeOpacity)),Object(n.U)(i,"transform","translate("+Je+"px, "+Je+"px)"),Object(n.g)(c,"width",u=2*e[1]+2*Je),Object(n.g)(c,"height",d=e[2](e[13].value)*e[0]+2*Je),Object(n.g)(c,"class","svelte-f727e1"),Object(n.g)(t,"class","legend-direct-tick svelte-f727e1")},m(e,a){Object(n.F)(e,t,a),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(i,o),Object(n.e)(t,O),Object(n.e)(t,j),Object(n.e)(j,h)},p(e,t){24&t&&a!==(a=e[3](e[13].value))&&Object(n.g)(o,"d",a),16&t&&l!==(l=Object(b.d)(e[13].color,r.b.fillOpacity))&&Object(n.g)(o,"fill",l),16&t&&s!==(s=Object(b.d)(e[13].color,r.b.strokeOpacity))&&Object(n.g)(o,"stroke",s),2&t&&u!==(u=2*e[1]+2*Je)&&Object(n.g)(c,"width",u),21&t&&d!==(d=e[2](e[13].value)*e[0]+2*Je)&&Object(n.g)(c,"height",d),16&t&&g!==(g=e[13].label+"")&&Object(n.S)(h,g)},d(e){e&&Object(n.t)(t)}}}function qe(e){let t,c,i,o,a,l,s,u,d,O,j,h,g,p,m,f,v,y,k,$=e[4].high+"",w=e[4].labels,_=[];for(let t=0;t<w.length;t+=1)_[t]=Ye(Ue(e,w,t));return{c(){t=Object(n.u)("ul"),c=Object(n.u)("li"),i=Object(n.u)("div"),o=Object(n.V)(),a=Object(n.u)("span"),a.textContent="NA",l=Object(n.V)();for(let e=0;e<_.length;e+=1)_[e].c();s=Object(n.V)(),u=Object(n.u)("li"),d=Object(n.Y)("svg"),O=Object(n.Y)("g"),j=Object(n.Y)("path"),v=Object(n.V)(),y=Object(n.u)("span"),k=Object(n.Z)($),Object(n.g)(i,"class","na svelte-f727e1"),Object(n.U)(i,"background","repeating-linear-gradient(-45deg, "+r.d+", white 30%)"),Object(n.g)(c,"class","svelte-f727e1"),Object(n.g)(j,"d",h=e[3](e[4].highValue)),Object(n.g)(j,"class","spike svelte-f727e1"),Object(n.g)(j,"fill",g=Object(b.d)(e[4].highColor,r.b.fillOpacity)),Object(n.g)(j,"stroke",p=Object(b.d)(e[4].highColor,r.b.strokeOpacity)),Object(n.U)(O,"transform","translate("+Je+"px, "+Je+"px)"),Object(n.g)(d,"width",m=2*e[1]+2*Je),Object(n.g)(d,"height",f=e[2](e[4].highValue)*e[0]+2*Je),Object(n.g)(d,"class","svelte-f727e1"),Object(n.g)(u,"class","legend-direct-tick svelte-f727e1"),Object(n.g)(t,"class","legend-ticks svelte-f727e1"),Object(n.g)(t,"data-testid","spike-legend")},m(e,r){Object(n.F)(e,t,r),Object(n.e)(t,c),Object(n.e)(c,i),Object(n.e)(c,o),Object(n.e)(c,a),Object(n.e)(t,l);for(let e=0;e<_.length;e+=1)_[e].m(t,null);Object(n.e)(t,s),Object(n.e)(t,u),Object(n.e)(u,d),Object(n.e)(d,O),Object(n.e)(O,j),Object(n.e)(u,v),Object(n.e)(u,y),Object(n.e)(y,k)},p(e,[c]){if(31&c){let n;for(w=e[4].labels,n=0;n<w.length;n+=1){const i=Ue(e,w,n);_[n]?_[n].p(i,c):(_[n]=Ye(i),_[n].c(),_[n].m(t,s))}for(;n<_.length;n+=1)_[n].d(1);_.length=w.length}24&c&&h!==(h=e[3](e[4].highValue))&&Object(n.g)(j,"d",h),16&c&&g!==(g=Object(b.d)(e[4].highColor,r.b.fillOpacity))&&Object(n.g)(j,"fill",g),16&c&&p!==(p=Object(b.d)(e[4].highColor,r.b.strokeOpacity))&&Object(n.g)(j,"stroke",p),2&c&&m!==(m=2*e[1]+2*Je)&&Object(n.g)(d,"width",m),21&c&&f!==(f=e[2](e[4].highValue)*e[0]+2*Je)&&Object(n.g)(d,"height",f),16&c&&$!==($=e[4].high+"")&&Object(n.S)(k,$)},i:n.J,o:n.J,d(e){e&&Object(n.t)(t),Object(n.s)(_,e)}}}const Je=2;function We(e,t,c){let i,a,l,s,b,u,d;Object(n.l)(e,o.k,(e=>c(5,i=e))),Object(n.l)(e,o.F,(e=>c(7,a=e))),Object(n.l)(e,o.q,(e=>c(8,l=e))),Object(n.l)(e,o.e,(e=>c(9,s=e))),Object(n.l)(e,o.C,(e=>c(10,b=e))),Object(n.l)(e,o.v,(e=>c(11,u=e))),Object(n.l)(e,o.E,(e=>c(2,d=e)));let O,j,h,g,{zoom:m=1}=t,f=()=>"";return e.$$set=e=>{"zoom"in e&&c(0,m=e.zoom)},e.$$.update=()=>{if(33&e.$$.dirty&&c(1,O=r.b.size[i]*m),33&e.$$.dirty&&c(6,j=r.b.maxHeight[i]*m),4e3&e.$$.dirty&&c(4,h=p(a,l,i,s,b,u)),64&e.$$.dirty&&(g=j+2*Je),7&e.$$.dirty){const e=d,t=m,n=O;c(3,f=c=>"M 0 ".concat(e(c)*t," L ").concat(n," 0 L ").concat(2*n," ").concat(e(c)*t))}},[m,O,d,f,h,i,j,a,l,s,b,u]}class Ge extends n.b{constructor(e){super(),Object(n.E)(this,e,We,qe,n.P,{zoom:0})}}var Qe=Ge;c(263);function Xe(e){let t,c,i,o,a=e[5](e[2])+"";return{c(){t=Object(n.u)("div"),c=Object(n.Z)(a),i=Object(n.Z)("% Coverage"),Object(n.g)(t,"class","root base-font-size container-style svelte-9d0ztf"),Object(n.g)(t,"data-testid","coverage"),Object(n.g)(t,"title",o="Showing data for ".concat(e[2]," ").concat(e[4].labelPlural," out of ").concat(e[3]," ").concat(e[4].labelPlural," (").concat(e[5](e[2]),"%)")),Object(n.bb)(t,"hidden",!e[0]||!e[0].data),Object(n.bb)(t,"loading-bg",e[1])},m(e,o){Object(n.F)(e,t,o),Object(n.e)(t,c),Object(n.e)(t,i)},p(e,[i]){4&i&&a!==(a=e[5](e[2])+"")&&Object(n.S)(c,a),28&i&&o!==(o="Showing data for ".concat(e[2]," ").concat(e[4].labelPlural," out of ").concat(e[3]," ").concat(e[4].labelPlural," (").concat(e[5](e[2]),"%)"))&&Object(n.g)(t,"title",o),1&i&&Object(n.bb)(t,"hidden",!e[0]||!e[0].data),2&i&&Object(n.bb)(t,"loading-bg",e[1])},i:n.J,o:n.J,d(e){e&&Object(n.t)(t)}}}function Ke(e,t,c){let n,i,{summary:o=null}=t,a=!0,l=0;return e.$$set=e=>{"summary"in e&&c(0,o=e.summary)},e.$$.update=()=>{1&e.$$.dirty&&c(3,n=o&&o.items?o.items.length:0),1&e.$$.dirty&&c(4,i=Object(u.h)(o?o.level:"county")),1&e.$$.dirty&&(c(1,a=!0),o&&o.data&&o.data.then((e=>{let t=0;for(const c of e)c.geo_value.endsWith("000")||null==c.value||Number.isNaN(c.value)||t++;c(1,a=!1),c(2,l=t)})))},[o,a,l,n,i,function(e){return Math.round(100*e/n)}]}class et extends n.b{constructor(e){super(),Object(n.E)(this,e,Ke,Xe,n.P,{summary:0})}}var tt=et;c(264);function ct(e){let t,c;return t=new Qe({props:{zoom:e[3]}}),{c(){Object(n.n)(t.$$.fragment)},m(e,i){Object(n.I)(t,e,i),c=!0},p(e,c){const n={};8&c&&(n.zoom=e[3]),t.$set(n)},i(e){c||(Object(n.cb)(t.$$.fragment,e),c=!0)},o(e){Object(n.db)(t.$$.fragment,e),c=!1},d(e){Object(n.r)(t,e)}}}function nt(e){let t,c;return t=new Be({props:{zoom:e[3]}}),{c(){Object(n.n)(t.$$.fragment)},m(e,i){Object(n.I)(t,e,i),c=!0},p(e,c){const n={};8&c&&(n.zoom=e[3]),t.$set(n)},i(e){c||(Object(n.cb)(t.$$.fragment,e),c=!0)},o(e){Object(n.db)(t.$$.fragment,e),c=!1},d(e){Object(n.r)(t,e)}}}function it(e){let t,c;return t=new ze({}),{c(){Object(n.n)(t.$$.fragment)},m(e,i){Object(n.I)(t,e,i),c=!0},p:n.J,i(e){c||(Object(n.cb)(t.$$.fragment,e),c=!0)},o(e){Object(n.db)(t.$$.fragment,e),c=!1},d(e){Object(n.r)(t,e)}}}function ot(e){let t,c,i,o,a,l,s,r,b,u,d,O,j,h,g,p,m;i=new we({props:{showDate:e[4]}}),l=new Me({props:{zoom:e[0]?e[0].zoom:null,showEncodings:!0,loading:e[1]}}),b=new Le.a({props:{sensor:e[6],className:"container-bg container-style encoding-wrapper"}});const f=[it,nt,ct],v=[];function y(e,t){return"color"===e[7]?0:"bubble"===e[7]?1:"spike"===e[7]?2:-1}return~(O=y(e))&&(j=v[O]=f[O](e)),p=new tt({props:{summary:e[5]}}),{c(){t=Object(n.u)("div"),c=Object(n.u)("div"),Object(n.n)(i.$$.fragment),o=Object(n.V)(),a=Object(n.u)("div"),Object(n.n)(l.$$.fragment),s=Object(n.V)(),r=Object(n.u)("div"),Object(n.n)(b.$$.fragment),u=Object(n.V)(),d=Object(n.u)("div"),j&&j.c(),h=Object(n.V)(),g=Object(n.u)("div"),Object(n.n)(p.$$.fragment),Object(n.g)(c,"class","title-container container-bg svelte-azwlie"),Object(n.g)(a,"class","map-controls-container svelte-azwlie"),Object(n.g)(t,"class","map-top-overlay svelte-azwlie"),Object(n.g)(d,"class","container-bg container-style"),Object(n.bb)(d,"loading-bg",e[2]),Object(n.g)(r,"class","legend-container base-font-size svelte-azwlie"),Object(n.g)(r,"aria-label","map legend"),Object(n.g)(g,"class","summary-container svelte-azwlie"),Object(n.g)(g,"aria-label","map data summary")},m(e,j){Object(n.F)(e,t,j),Object(n.e)(t,c),Object(n.I)(i,c,null),Object(n.e)(t,o),Object(n.e)(t,a),Object(n.I)(l,a,null),Object(n.F)(e,s,j),Object(n.F)(e,r,j),Object(n.I)(b,r,null),Object(n.e)(r,u),Object(n.e)(r,d),~O&&v[O].m(d,null),Object(n.F)(e,h,j),Object(n.F)(e,g,j),Object(n.I)(p,g,null),m=!0},p(e,[t]){const c={};16&t&&(c.showDate=e[4]),i.$set(c);const o={};1&t&&(o.zoom=e[0]?e[0].zoom:null),2&t&&(o.loading=e[1]),l.$set(o);const a={};64&t&&(a.sensor=e[6]),b.$set(a);let s=O;O=y(e),O===s?~O&&v[O].p(e,t):(j&&(Object(n.B)(),Object(n.db)(v[s],1,1,(()=>{v[s]=null})),Object(n.k)()),~O?(j=v[O],j?j.p(e,t):(j=v[O]=f[O](e),j.c()),Object(n.cb)(j,1),j.m(d,null)):j=null),4&t&&Object(n.bb)(d,"loading-bg",e[2]);const r={};32&t&&(r.summary=e[5]),p.$set(r)},i(e){m||(Object(n.cb)(i.$$.fragment,e),Object(n.cb)(l.$$.fragment,e),Object(n.cb)(b.$$.fragment,e),Object(n.cb)(j),Object(n.cb)(p.$$.fragment,e),m=!0)},o(e){Object(n.db)(i.$$.fragment,e),Object(n.db)(l.$$.fragment,e),Object(n.db)(b.$$.fragment,e),Object(n.db)(j),Object(n.db)(p.$$.fragment,e),m=!1},d(e){e&&Object(n.t)(t),Object(n.r)(i),Object(n.r)(l),e&&Object(n.t)(s),e&&Object(n.t)(r),Object(n.r)(b),~O&&v[O].d(),e&&Object(n.t)(h),e&&Object(n.t)(g),Object(n.r)(p)}}}function at(e,t,c){let i,a;Object(n.l)(e,o.q,(e=>c(6,i=e))),Object(n.l)(e,o.s,(e=>c(7,a=e)));let{map:l=null}=t,{mapLoading:s=!0}=t,{legendLoading:r=!0}=t,{zoom:b=1}=t,{showDate:u=!1}=t,{summary:d=null}=t;return e.$$set=e=>{"map"in e&&c(0,l=e.map),"mapLoading"in e&&c(1,s=e.mapLoading),"legendLoading"in e&&c(2,r=e.legendLoading),"zoom"in e&&c(3,b=e.zoom),"showDate"in e&&c(4,u=e.showDate),"summary"in e&&c(5,d=e.summary)},[l,s,r,b,u,d,i,a]}class lt extends n.b{constructor(e){super(),Object(n.E)(this,e,at,ot,n.P,{map:0,mapLoading:1,legendLoading:2,zoom:3,showDate:4,summary:5})}}var st=lt;function rt(e){let t,c,i,o;t=new st({props:{map:e[7],mapLoading:e[0],legendLoading:e[1],zoom:e[8],summary:e[2],showDate:e[3]}});let a={data:e[4],sensor:e[10],level:e[11],signalOptions:e[12],selections:e[5],focusOn:e[6],encoding:e[9],wrapperClass:me,title:e[13]};return i=new y({props:a}),e[18](i),i.$on("zoom",e[19]),i.$on("updatedEncoding",e[20]),i.$on("loading",e[21]),i.$on("select",e[22]),i.$on("ready",e[16]),{c(){Object(n.n)(t.$$.fragment),c=Object(n.V)(),Object(n.n)(i.$$.fragment)},m(e,a){Object(n.I)(t,e,a),Object(n.F)(e,c,a),Object(n.I)(i,e,a),o=!0},p(e,[c]){const n={};128&c&&(n.map=e[7]),1&c&&(n.mapLoading=e[0]),2&c&&(n.legendLoading=e[1]),256&c&&(n.zoom=e[8]),4&c&&(n.summary=e[2]),8&c&&(n.showDate=e[3]),t.$set(n);const o={};16&c&&(o.data=e[4]),1024&c&&(o.sensor=e[10]),2048&c&&(o.level=e[11]),4096&c&&(o.signalOptions=e[12]),32&c&&(o.selections=e[5]),64&c&&(o.focusOn=e[6]),512&c&&(o.encoding=e[9]),8192&c&&(o.title=e[13]),i.$set(o)},i(e){o||(Object(n.cb)(t.$$.fragment,e),Object(n.cb)(i.$$.fragment,e),o=!0)},o(e){Object(n.db)(t.$$.fragment,e),Object(n.db)(i.$$.fragment,e),o=!1},d(o){Object(n.r)(t,o),o&&Object(n.t)(c),e[18](null),Object(n.r)(i,o)}}}function bt(e,t,c){let a,l,s,r,b,u;Object(n.l)(e,o.s,(e=>c(9,a=e))),Object(n.l)(e,o.n,(e=>c(23,l=e))),Object(n.l)(e,o.p,(e=>c(10,s=e))),Object(n.l)(e,o.k,(e=>c(11,r=e))),Object(n.l)(e,o.C,(e=>c(12,b=e))),Object(n.l)(e,o.r,(e=>c(13,u=e)));const d=Object(i.a)();let O,j=1,{mapLoading:h=!1}=t,{legendLoading:g=!1}=t,{summary:p=null}=t,{showDate:m=!1}=t,{data:f}=t,{selections:v=[]}=t,{focusOn:y=null}=t,{selectRandomOnReady:k=!1}=t;function $(e){e&&(e.scale&&o.e.set(e.scale),o.f.set(e.stops),"bubble"===a&&e.custom&&o.d.set(e.custom),"spike"===a&&e.custom&&o.E.set(e.custom))}return e.$$set=e=>{"mapLoading"in e&&c(0,h=e.mapLoading),"legendLoading"in e&&c(1,g=e.legendLoading),"summary"in e&&c(2,p=e.summary),"showDate"in e&&c(3,m=e.showDate),"data"in e&&c(4,f=e.data),"selections"in e&&c(5,v=e.selections),"focusOn"in e&&c(6,y=e.focusOn),"selectRandomOnReady"in e&&c(17,k=e.selectRandomOnReady)},[h,g,p,m,f,v,y,O,j,a,s,r,b,u,d,$,function(){!l&&k&&O.selectRandom()},k,function(e){n.i[e?"unshift":"push"]((()=>{O=e,c(7,O)}))},e=>c(8,j=e.detail),e=>$(e.detail),e=>d("loading",e.detail),e=>d("select",e.detail)]}class ut extends n.b{constructor(e){super(),Object(n.E)(this,e,bt,rt,n.P,{mapLoading:0,legendLoading:1,summary:2,showDate:3,data:4,selections:5,focusOn:6,selectRandomOnReady:17})}}t.a=ut}}]);
(self.webpackChunkwww_covidcast=self.webpackChunkwww_covidcast||[]).push([[822],{3700:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Kn});var o=n(5117),i=n(1853),a=n(5228),s=n(7416),l=n(4605),r=n(6354);function c(e){let t,n,i;return{c(){t=(0,o.bG)("div"),(0,o.Lj)(t,"class","map-wrapper svelte-54x2e1")},m(a,s){(0,o.$T)(a,t,s),e[17](t),n||(i=(0,o.oL)(window,"resize",e[1]),n=!0)},p:o.ZT,i:o.ZT,o:o.ZT,d(a){a&&(0,o.og)(t),e[17](null),n=!1,i()}}}function u(e,t,n){let a;(0,o.FI)(e,i.ot,(e=>n(16,a=e)));let{wrapperClass:c}=t,u=null;const d=(0,s.x)(),h=new c(((e,t)=>d(e,t))),p=h.zoom;let{data:m=Promise.resolve([])}=t,{sensor:g=""}=t,{level:f="state"}=t,{encoding:v="color"}=t,{signalOptions:b={}}=t,{animationDuration:y=0}=t,{title:L=""}=t,{selections:$=[]}=t,{focusOn:R=null}=t,j=!1;return(0,s.H3)((()=>{n(14,h.animationDuration=y,h),h.initMap(u,L).then((()=>{n(15,j=!0)}))})),(0,s.ev)((()=>{h.destroy()})),e.$$set=e=>{"wrapperClass"in e&&n(2,c=e.wrapperClass),"data"in e&&n(5,m=e.data),"sensor"in e&&n(6,g=e.sensor),"level"in e&&n(7,f=e.level),"encoding"in e&&n(8,v=e.encoding),"signalOptions"in e&&n(9,b=e.signalOptions),"animationDuration"in e&&n(10,y=e.animationDuration),"title"in e&&n(11,L=e.title),"selections"in e&&n(12,$=e.selections),"focusOn"in e&&n(13,R=e.focusOn)},e.$$.update=()=>{17120&e.$$.dirty&&h.updateSources(f,m,(0,r.primaryValue)(r.sensorMap.get(g),b)),99264&e.$$.dirty&&a&&function(e,t,n,o,i){const a=r.sensorMap.get(n),s=a.getType(i),c=(0,l.dU)(o,a,e,i),{stops:u,scale:p}=(0,l.oT)(c,a,s),m="county"===e,g=h.updateOptions(t,e,n,s,c,u,m&&u,p);d("updatedEncoding",{range:c,custom:g,scale:p,stops:u})}(f,v,g,a,b),53248&e.$$.dirty&&h.selectMulti($),57344&e.$$.dirty&&h.focusOn(R),18432&e.$$.dirty&&h.setTitle(L)},[u,function(){h.zoom.resized()},c,p,function(){h.selectRandom()},m,g,f,v,b,y,L,$,R,h,j,a,function(e){o.Vn[e?"unshift":"push"]((()=>{u=e,n(0,u)}))}]}class d extends o.f_{constructor(e){super(),(0,o.S1)(this,e,u,c,o.N8,{wrapperClass:2,zoom:3,selectRandom:4,data:5,sensor:6,level:7,encoding:8,signalOptions:9,animationDuration:10,title:11,selections:12,focusOn:13})}get zoom(){return this.$$.ctx[3]}get selectRandom(){return this.$$.ctx[4]}}const h=d,p=JSON.parse('{"$q":[[-24.026114,-13.139448],[20.771771,12.76366]]}');var m=n(4110),g=n(5211);const f=-100;function v(e){return["case",["==",["to-number",["feature-state","value"],f],f],m.Cr,["==",["to-number",["feature-state","value"],f],0],m.ER,["interpolate",["linear"],["to-number",["feature-state","value"],0],...e.flat()]]}function b(e){return"".concat(e,"-border")}function y(e){return"".concat(e,"-centers")}const L="city-point";function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){return"".concat(e,"-fill")}function k(e){return"".concat(e,"-hover")}function T(e){return"".concat(e,"-bubble")}function w(e){return"".concat(e,"-spike")}function x(e){return"".concat(e,"-border")}const D="state-stroke",O="state-names",S="city-point-unclustered-pit";var G=n(8758),C=n(2630);function V(e){let t,n,i,a,s,l,r,c,u,d,h,p=e[1].displayName+"",m=(0,G.B1)(e[1])+"";function g(e,t){return e[4].isCasesOrDeath?N:P}let f=g(e),v=f(e);return{c(){t=(0,o.bG)("h5"),n=(0,o.fL)(p),i=(0,o.Dh)(),a=(0,o.bG)("table"),s=(0,o.bG)("tbody"),l=(0,o.bG)("tr"),r=(0,o.bG)("th"),r.textContent="Population",c=(0,o.Dh)(),u=(0,o.bG)("td"),d=(0,o.fL)(m),h=(0,o.Dh)(),v.c(),(0,o.Lj)(t,"class","svelte-1u8gn73"),(0,o.Lj)(r,"class","svelte-1u8gn73"),(0,o.Lj)(u,"class","right svelte-1u8gn73"),(0,o.Lj)(a,"class","svelte-1u8gn73")},m(e,p){(0,o.$T)(e,t,p),(0,o.R3)(t,n),(0,o.$T)(e,i,p),(0,o.$T)(e,a,p),(0,o.R3)(a,s),(0,o.R3)(s,l),(0,o.R3)(l,r),(0,o.R3)(l,c),(0,o.R3)(l,u),(0,o.R3)(u,d),(0,o.R3)(s,h),v.m(s,null)},p(e,t){2&t&&p!==(p=e[1].displayName+"")&&(0,o.rT)(n,p),2&t&&m!==(m=(0,G.B1)(e[1])+"")&&(0,o.rT)(d,m),f===(f=g(e))&&v?v.p(e,t):(v.d(1),v=f(e),v&&(v.c(),v.m(s,null)))},d(e){e&&(0,o.og)(t),e&&(0,o.og)(i),e&&(0,o.og)(a),v.d()}}}function z(e){let t,n,i,a=e[1].displayName+"";return{c(){t=(0,o.bG)("h5"),n=(0,o.fL)("Estimate unavailable for rest of "),i=(0,o.fL)(a),(0,o.Lj)(t,"class","svelte-1u8gn73")},m(e,a){(0,o.$T)(e,t,a),(0,o.R3)(t,n),(0,o.R3)(t,i)},p(e,t){2&t&&a!==(a=e[1].displayName+"")&&(0,o.rT)(i,a)},d(e){e&&(0,o.og)(t)}}}function M(e){let t;return{c(){t=(0,o.bG)("h5"),t.textContent="Estimate unavailable",(0,o.Lj)(t,"class","svelte-1u8gn73")},m(e,n){(0,o.$T)(e,t,n)},p:o.ZT,d(e){e&&(0,o.og)(t)}}}function P(e){let t,n,i,a,s,l,r,c=e[4].yAxis+"",u=e[4].formatValue(e[2])+"";return{c(){t=(0,o.bG)("tr"),n=(0,o.bG)("th"),i=(0,o.fL)(c),a=(0,o.Dh)(),s=(0,o.bG)("td"),l=(0,o.fL)(u),(0,o.Lj)(n,"class","svelte-1u8gn73"),(0,o.Lj)(s,"class","right svelte-1u8gn73"),(0,o.Lj)(s,"style",r=e[6](e[2]))},m(e,r){(0,o.$T)(e,t,r),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(t,a),(0,o.R3)(t,s),(0,o.R3)(s,l)},p(e,t){16&t&&c!==(c=e[4].yAxis+"")&&(0,o.rT)(i,c),20&t&&u!==(u=e[4].formatValue(e[2])+"")&&(0,o.rT)(l,u),4&t&&r!==(r=e[6](e[2]))&&(0,o.Lj)(s,"style",r)},d(e){e&&(0,o.og)(t)}}}function N(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b,y,L,$,R,j,_,k,T,w,x,D,O,S,C,V,z,M,P,N,A,I,F,E,Z,H,U,B=e[4].yAxis+"",Y=(0,G.mn)(e[5])+"",q=e[4].formatValue(e[1].count)+"",X=e[4].formatValue(e[1].countRatio)+"",W=e[4].formatValue(e[1].avg)+"",J=e[4].formatValue(e[1].avgRatio)+"",K=(0,G.mn)(e[5])+"",Q=e[4].formatValue(e[1].countCumulative)+"",ee=e[4].formatValue(e[1].countRatioCumulative)+"";return{c(){t=(0,o.bG)("tr"),n=(0,o.bG)("th"),i=(0,o.fL)(B),a=(0,o.Dh)(),s=(0,o.bG)("th"),s.textContent="Count",l=(0,o.Dh)(),r=(0,o.bG)("th"),r.textContent="Ratios (per 100,000)",c=(0,o.Dh)(),u=(0,o.bG)("tr"),d=(0,o.bG)("th"),h=(0,o.fL)(Y),p=(0,o.Dh)(),m=(0,o.bG)("td"),g=(0,o.fL)(q),v=(0,o.Dh)(),b=(0,o.bG)("td"),y=(0,o.fL)(X),$=(0,o.Dh)(),R=(0,o.bG)("tr"),j=(0,o.bG)("th"),j.textContent="7-day avg",_=(0,o.Dh)(),k=(0,o.bG)("td"),T=(0,o.fL)(W),x=(0,o.Dh)(),D=(0,o.bG)("td"),O=(0,o.fL)(J),C=(0,o.Dh)(),V=(0,o.bG)("tr"),z=(0,o.bG)("th"),M=(0,o.fL)("Cumulative "),P=(0,o.fL)(K),N=(0,o.Dh)(),A=(0,o.bG)("td"),I=(0,o.fL)(Q),E=(0,o.Dh)(),Z=(0,o.bG)("td"),H=(0,o.fL)(ee),(0,o.Lj)(n,"class","svelte-1u8gn73"),(0,o.Lj)(s,"class","area svelte-1u8gn73"),(0,o.Lj)(r,"class","area svelte-1u8gn73"),(0,o.Lj)(d,"class","svelte-1u8gn73"),(0,o.Lj)(m,"class","right svelte-1u8gn73"),(0,o.Lj)(m,"style",f=!e[3].cumulative&&e[3].incidence?e[6](e[1].count):""),(0,o.Lj)(b,"class","right svelte-1u8gn73"),(0,o.Lj)(b,"style",L=e[3].cumulative||e[3].incidence?"":e[6](e[1].countRatio)),(0,o.Lj)(j,"class","svelte-1u8gn73"),(0,o.Lj)(k,"class","right svelte-1u8gn73"),(0,o.Lj)(k,"style",w=!e[3].cumulative&&e[3].incidence?e[6](e[1].avg):""),(0,o.Lj)(D,"class","right svelte-1u8gn73"),(0,o.Lj)(D,"style",S=e[3].cumulative||e[3].incidence?"":e[6](e[1].avgRatio)),(0,o.Lj)(z,"class","svelte-1u8gn73"),(0,o.Lj)(A,"class","right svelte-1u8gn73"),(0,o.Lj)(A,"style",F=e[3].cumulative&&e[3].incidence?e[6](e[1].countCumulative):""),(0,o.Lj)(Z,"class","right svelte-1u8gn73"),(0,o.Lj)(Z,"style",U=e[3].cumulative&&!e[3].incidence?e[6](e[1].countRatioCumulative):"")},m(e,f){(0,o.$T)(e,t,f),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(t,a),(0,o.R3)(t,s),(0,o.R3)(t,l),(0,o.R3)(t,r),(0,o.$T)(e,c,f),(0,o.$T)(e,u,f),(0,o.R3)(u,d),(0,o.R3)(d,h),(0,o.R3)(u,p),(0,o.R3)(u,m),(0,o.R3)(m,g),(0,o.R3)(u,v),(0,o.R3)(u,b),(0,o.R3)(b,y),(0,o.$T)(e,$,f),(0,o.$T)(e,R,f),(0,o.R3)(R,j),(0,o.R3)(R,_),(0,o.R3)(R,k),(0,o.R3)(k,T),(0,o.R3)(R,x),(0,o.R3)(R,D),(0,o.R3)(D,O),(0,o.$T)(e,C,f),(0,o.$T)(e,V,f),(0,o.R3)(V,z),(0,o.R3)(z,M),(0,o.R3)(z,P),(0,o.R3)(V,N),(0,o.R3)(V,A),(0,o.R3)(A,I),(0,o.R3)(V,E),(0,o.R3)(V,Z),(0,o.R3)(Z,H)},p(e,t){16&t&&B!==(B=e[4].yAxis+"")&&(0,o.rT)(i,B),32&t&&Y!==(Y=(0,G.mn)(e[5])+"")&&(0,o.rT)(h,Y),18&t&&q!==(q=e[4].formatValue(e[1].count)+"")&&(0,o.rT)(g,q),10&t&&f!==(f=!e[3].cumulative&&e[3].incidence?e[6](e[1].count):"")&&(0,o.Lj)(m,"style",f),18&t&&X!==(X=e[4].formatValue(e[1].countRatio)+"")&&(0,o.rT)(y,X),10&t&&L!==(L=e[3].cumulative||e[3].incidence?"":e[6](e[1].countRatio))&&(0,o.Lj)(b,"style",L),18&t&&W!==(W=e[4].formatValue(e[1].avg)+"")&&(0,o.rT)(T,W),10&t&&w!==(w=!e[3].cumulative&&e[3].incidence?e[6](e[1].avg):"")&&(0,o.Lj)(k,"style",w),18&t&&J!==(J=e[4].formatValue(e[1].avgRatio)+"")&&(0,o.rT)(O,J),10&t&&S!==(S=e[3].cumulative||e[3].incidence?"":e[6](e[1].avgRatio))&&(0,o.Lj)(D,"style",S),32&t&&K!==(K=(0,G.mn)(e[5])+"")&&(0,o.rT)(P,K),18&t&&Q!==(Q=e[4].formatValue(e[1].countCumulative)+"")&&(0,o.rT)(I,Q),10&t&&F!==(F=e[3].cumulative&&e[3].incidence?e[6](e[1].countCumulative):"")&&(0,o.Lj)(A,"style",F),18&t&&ee!==(ee=e[4].formatValue(e[1].countRatioCumulative)+"")&&(0,o.rT)(H,ee),10&t&&U!==(U=e[3].cumulative&&!e[3].incidence?e[6](e[1].countRatioCumulative):"")&&(0,o.Lj)(Z,"style",U)},d(e){e&&(0,o.og)(t),e&&(0,o.og)(c),e&&(0,o.og)(u),e&&(0,o.og)($),e&&(0,o.og)(R),e&&(0,o.og)(C),e&&(0,o.og)(V)}}}function A(e){let t;function n(e,t){return e[1]?e[0]?z:V:M}let i=n(e),a=i(e);return{c(){t=(0,o.bG)("div"),a.c(),(0,o.Lj)(t,"aria-label","tooltip"),(0,o.Lj)(t,"class","tooltip svelte-1u8gn73")},m(e,n){(0,o.$T)(e,t,n),a.m(t,null)},p(e,[o]){i===(i=n(e))&&a?a.p(e,o):(a.d(1),a=i(e),a&&(a.c(),a.m(t,null)))},i:o.ZT,o:o.ZT,d(e){e&&(0,o.og)(t),a.d()}}}function I(e,t,n){let a,s,l,r,c,u;(0,o.FI)(e,i.V_,(e=>n(7,l=e))),(0,o.FI)(e,i.OT,(e=>n(8,r=e))),(0,o.FI)(e,i.PC,(e=>n(4,c=e))),(0,o.FI)(e,i.tU,(e=>n(5,u=e)));let{invalid:d=!1}=t,{properties:h}=t;return e.$$set=e=>{"invalid"in e&&n(0,d=e.invalid),"properties"in e&&n(1,h=e.properties)},e.$$.update=()=>{2&e.$$.dirty&&n(2,a=h?h.value:0),128&e.$$.dirty&&n(3,s=l)},[d,h,a,s,c,u,function(e){const t=0===e?m.ER:r(e);return"background-color: ".concat(t,"; color: ").concat((0,C.VS)(t))},l]}class F extends o.f_{constructor(e){super(),(0,o.S1)(this,e,I,A,o.N8,{invalid:0,properties:1})}}const E=F;function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class B{constructor(e,t){this.adapter=t,this.map=e,this.data=new Map,this.popup=new g.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup"}),this.topPopup=new g.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup",anchor:"top"}),this.tooltipState=null,this.selection=[],this.hovered={id:null,level:null},this.tooltipElement=document.createElement("div"),this.tooltip=new E({target:this.tooltipElement,props:{properties:null,invalid:!0}}),this.initListeners()}setData(e){this.data=e,this.tooltipState=null}initListeners(){if(this.adapter.levels.forEach((e=>{const t=_(e);this.map.on("mouseleave",t,this._onLevelMouseLeave.bind(this)),this.map.on("mousemove",t,this._onLevelMouseMove.bind(this)),this.map.on("click",t,this._onLevelMouseClick.bind(this))})),this.adapter.hasMegaCountyLevel){const e=_(r.levelMegaCounty.id);this.map.on("mouseleave",e,this._onMegaMouseLeave.bind(this)),this.map.on("mousemove",e,this._onMegaMouseMove.bind(this)),this.map.on("click",e,this._onMegaMouseClick.bind(this))}this.map.on("mouseenter",D,this._onMapMouseEnter.bind(this)),this.map.on("mouseleave",D,this._onMapMouseLeave.bind(this)),this.map.on("mousemove",D,this._onMapMouseMove.bind(this))}get activePopup(){return"spike"===this.adapter.encoding.id?this.topPopup:this.popup}_onMapMouseEnter(){this.map.getCanvas().style.cursor="pointer"}_onLevelMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMegaMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMapMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove()}_onLevelMouseMove(e){const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this._updateHoverHighlight(t.id,t.properties.level),this._renderTooltip(e))}_onMegaMouseMove(e){if(e.defaultPrevented)return;const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this._updateHoverHighlight(t.id,t.properties.level),this._renderTooltip(e))}_onMapMouseMove(e){e.defaultPrevented||this._renderTooltip(e,!0)}_onLevelMouseClick(e){const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this.adapter.dispatch("select",{feature:t,originalEvent:e.originalEvent}))}_onMegaMouseClick(e){if(e.defaultPrevented)return;const t=e.features[0];this.adapter.isMissing(t)||(e.preventDefault(),this.adapter.dispatch("select",{feature:t,originalEvent:e.originalEvent}))}_renderTooltip(e,t=!1){this.map.getCanvas().style.cursor="pointer";const n=e.features[0],o=this.activePopup;if(!this.tooltipState||this.tooltipState.id!==n.properties.id||this.tooltipState.invalid!==t){this.tooltipState={id:n.properties.id,invalid:t};let e={};n.properties.level===r.levelMegaCounty.id&&this.adapter.hasMegaCountyLevel&&(e.population=(0,a.yv)(n.properties,this.data)),this.tooltip.$set({properties:H(H(H({},n.properties),e),this.data.get(n.properties.id)||{}),invalid:t})}o.setLngLat(e.lngLat).setDOMContent(this.tooltipElement).addTo(this.map)}_updateState(e,t,n){this.map.setFeatureState({source:e,id:"string"==typeof t?Number.parseInt(t,10):t},n)}_updateHoverLayerVisibility(){const e=new Set(this.selection.map((e=>e.level)));null!=this.hovered.id&&e.add(this.hovered.level);const t=t=>{"none"!==this.map.getLayoutProperty(k(t),"visibility")!==e.has(t)&&this.map.setLayoutProperty(k(t),"visibility",e.has(t)?"visible":"none")};for(const e of this.adapter.levels)t(e);this.adapter.hasMegaCountyLevel&&t(r.levelMegaCounty.id)}_updateHoverHighlight(e=null,t=null){this.hovered.id!=e&&(this.hovered.id&&this._updateState(b(this.hovered.level),this.hovered.id,{hover:!1}),e&&this._updateState(b(t),e,{hover:!0}),this.hovered.id=e,this.hovered.level=t,this._updateHoverLayerVisibility())}select(e){return this.selectMulti(e?[{info:e,color:m.Y2.selectedRegionOutline}]:[])[0]}selectMulti(e){const t=this.selection.slice();for(const e of this.selection)this._updateState(b(e.level),e.id,{select:!1});return this.selection=e.map((e=>{const t=Number(e.info.id);return this._updateState(b(e.info.level),t,{select:e.color}),{id:t,level:e.info.level,color:e.color}})),this._updateHoverLayerVisibility(),t}forceHover(e){this._updateHoverHighlight(e.id,e.properties.level)}isHovered(e){return!!e&&e.id==this.hovered.id&&e.level===this.hovered.level}}const Y=JSON.parse('{"version":8,"name":"Albers USA","metadata":{"mapbox:autocomposite":true,"mapbox:type":"template","mapbox:sdk-support":{"js":"1.6.0","android":"8.6.0","ios":"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},"center":[-1.9392753230472408,-1.4351091963094262],"zoom":4.035119632783768,"bearing":0,"pitch":0,"glyphs":"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf","sources":{},"layers":[]}');var q=n(5256);class X{constructor(e,t){this.map=null,this.onZoom=e,this.resetBounds=t,this.resetBoundsOptions={padding:30,linear:!1},this.stateZoom=1,this.initialZoomView=!0}_triggerZoom(e){const t=this.map.getZoom(),n=this.stateZoom,o=Math.pow(2,.75*(t-n));this.onZoom(o,e)}setMap(e){this.map=e,this.stateZoom=this.map.getZoom(),this.map.setMinZoom(this.stateZoom-1),this.map.on("zoom",(()=>{this._triggerZoom()}))}ready(){this.stateZoom=this.map.getZoom(),this._triggerZoom()}getZoom(){return this.map?this.map.getZoom():0}getMaxZoom(){return this.map?this.map.getMaxZoom():100}getMinZoom(){return this.map?this.map.getMinZoom():-100}zoomIn(){this.map&&(this.initialZoomView=!1,this.map.zoomIn())}zoomOut(){this.map&&(this.initialZoomView=!1,this.map.zoomOut())}focusOn(e){if(!e||!this.map)return;this.initialZoomView=!1;const t=(0,q.Z)(e);this.map.fitBounds(t,{maxZoom:1.5*this.getZoom(),linear:!1,essential:!0})}resetZoom(){this.map&&(this.initialZoomView=!0,this.map.fitBounds(this.resetBounds,this.resetBoundsOptions),this.map.once("idle",(()=>{this.stateZoom=this.map.getZoom(),this.map.setMinZoom(this.stateZoom-1),this._triggerZoom(!0)})))}resized(){this.initialZoomView&&this.map&&requestAnimationFrame((()=>{this.map&&this.map.fitBounds(this.resetBounds,this.resetBoundsOptions)}))}showStateLabels(e){this.map&&this.map.getLayer(O)&&this.map.setLayoutProperty(O,"visibility",e?"visible":"none")}toggleStateLabels(){this.map&&this.map.getLayer(O)&&this.showStateLabels("visible"!==this.map.getLayoutProperty(O,"visibility"))}}var W=n(8848);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ee{constructor(){this.id="color",this.layers=[]}getVisibleLayers(e){return[_(e),"county"===e&&_(r.levelMegaCounty.id),"county"===e&&x("state")].filter(Boolean)}addLayers(){}encode(e,{level:t,stops:n,stopsMega:o}){e.setPaintProperty(_(t),"fill-color",v(n)),o&&e.setPaintProperty(_(r.levelMegaCounty.id),"fill-color",v(o))}updateSources(){}}var te=n(2812),ne=n(6372);class oe{constructor(e,t,n,o){this._sourceId=e,this._level=t,this._colorsDirty=!0,this.featureIds=[],this._valueLookup=new Map,this._valuePrimaryValue="value",this._valueToColor=()=>m.Cr,this._valueToSize=()=>0,this._vertexSource=n,this._fragmentSource=o,this._map=null,this.zoom=1}asLayer(e){return{id:e,type:"custom",renderingMode:"2d",onAdd:(e,t)=>this.onAdd(e,t),render:(e,t)=>this.render(e,t),onRemove:(e,t)=>this.onRemove(e,t),prerender:(e,t)=>this.preRender(e,t)}}_createVertices(e){return[e.x,e.y]}onAdd(e,t){this._map=e,this._vertexShader=t.createShader(t.VERTEX_SHADER),t.shaderSource(this._vertexShader,this._vertexSource),t.compileShader(this._vertexShader),this._fragmentShader=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(this._fragmentShader,this._fragmentSource),t.compileShader(this._fragmentShader),this._program=t.createProgram(),t.attachShader(this._program,this._vertexShader),t.attachShader(this._program,this._fragmentShader),t.linkProgram(this._program),this._uPos=t.getUniformLocation(this._program,"u_matrix"),this._uOpacity=t.getUniformLocation(this._program,"u_opacity"),this._uPixelToClip=t.getUniformLocation(this._program,"u_pixelToClip"),this._uZoom=t.getUniformLocation(this._program,"u_zoom"),this._uDevicePixelRatio=t.getUniformLocation(this._program,"u_device_pixel_ratio"),this._aPos=t.getAttribLocation(this._program,"a_pos"),this._centerBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._centerBuffer);const n=e.getSource(this._sourceId)._data.features.map((e=>{const t=e.geometry.coordinates,n=t[0],o=t[1];if(null==o||Number.isNaN(o))return[];this.featureIds.push(e.properties.id);const i=g.MercatorCoordinate.fromLngLat({lat:o,lng:n});return this._createVertices(i)})).flat();t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),this._verticesPerFeatures=n.length/3/this.featureIds.length,this._aColorAndValue=t.getAttribLocation(this._program,"a_colorAndValue"),this._colorAndValueBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._colorAndValueBuffer),this._colorAndValueData=new Float32Array(4*this.featureIds.length*this._verticesPerFeatures),this._colorAndValueData.fill(0),t.bufferData(t.ARRAY_BUFFER,this._colorAndValueData,t.STATIC_DRAW)}onRemove(e,t){this._map=null,t.deleteBuffer(this._centerBuffer),t.deleteBuffer(this._colorAndValueBuffer),t.deleteShader(this._fragmentShader),t.deleteShader(this._vertexShader),t.deleteProgram(this._program)}_prepareRender(e,t){e.useProgram(this._program),e.uniformMatrix4fv(this._uPos,!1,t);const n=this._map.painter.transform;e.uniform1f(this._uZoom,this.zoom),e.uniform2f(this._uPixelToClip,n.pixelsToGLUnits[0],n.pixelsToGLUnits[1]),e.uniform1f(this._uDevicePixelRatio,window.devicePixelRatio),e.bindBuffer(e.ARRAY_BUFFER,this._colorAndValueBuffer),e.enableVertexAttribArray(this._aColorAndValue),e.vertexAttribPointer(this._aColorAndValue,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._centerBuffer),e.enableVertexAttribArray(this._aPos),e.vertexAttribPointer(this._aPos,3,e.FLOAT,!1,0,0),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}preRender(e){if(this._colorsDirty){this._colorsDirty=!1;for(let e=0;e<this.featureIds.length;e++){const t=this.featureIds[e],n=this._valueLookup.has(t)?this._valueLookup.get(t)[this._valuePrimaryValue]:null,o=this._verticesPerFeatures;if(null==n||Number.isNaN(n)){for(let t=0;t<o;t++){const n=4*e*o+4*t;this._colorAndValueData[n]=0,this._colorAndValueData[n+1]=0,this._colorAndValueData[n+2]=0,this._colorAndValueData[n+3]=0}continue}const i=(0,ne.B8)(this._valueToColor(n)),a=this._valueToSize(n);for(let t=0;t<o;t++){const n=4*e*o+4*t;this._colorAndValueData[n]=i.r,this._colorAndValueData[n+1]=i.g,this._colorAndValueData[n+2]=i.b,this._colorAndValueData[n+3]=a}}e.bindBuffer(e.ARRAY_BUFFER,this._colorAndValueBuffer),e.bufferData(e.ARRAY_BUFFER,this._colorAndValueData,e.STATIC_DRAW)}}encode(e,t){this._colorsDirty=!0,this._valueToSize=e,this._valueToColor=t}updateSources(e,t){this._colorsDirty=!0,this._valueLookup=e,this._valuePrimaryValue=t}}class ie extends oe{constructor(e,t){super(e,t,"\nuniform mat4 u_matrix;\nuniform float u_zoom;\nuniform vec2 u_pixelToClip;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n\n  vec2 pos = vec2(a_pos.z < 0.0 ? -1.0 : 1.0, abs(a_pos.z) < 2.0 ? -1.0 : 1.0);\n  p.xy += pos * u_pixelToClip * (u_zoom * a_colorAndValue.a + 1.0) * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n\n  v_data = vec4(pos, a_colorAndValue.a * u_zoom, 1.0);\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n}","\nprecision mediump float;\nuniform float u_opacity;\nuniform float u_device_pixel_ratio;\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n\n  float extrude_length = length(v_data.xy);\n  float radius = v_data.z;\n  float stroke_width = v_data.w;\n\n  float blur = -(1.0 / u_device_pixel_ratio / (radius + stroke_width));\n  float opacity_t = smoothstep(0.0, blur, extrude_length - 1.0);\n\n  float color_t = smoothstep(\n      blur,\n      0.0,\n      extrude_length - radius / (radius + stroke_width)\n  );\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = opacity_t * mix(fill_color, stroke_color, color_t);\n}")}_createVertices(e){return[e.x,e.y,-2,e.x,e.y,-1,e.x,e.y,1,e.x,e.y,2]}onAdd(e,t){super.onAdd(e,t),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);const n=new Uint16Array(6*this.featureIds.length);for(let e=0;e<this.featureIds.length;e++){const t=6*e,o=4*e;n[t]=o,n[t+1]=o+1,n[t+2]=o+2,n[t+3]=o+2,n[t+4]=o+3,n[t+5]=o}t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}onRemove(e,t){super.onRemove(e,t),t.deleteBuffer(this._indexBuffer)}render(e,t){super._prepareRender(e,t),e.uniform1f(this._uOpacity,m.nm.fillOpacity),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.drawElements(e.TRIANGLES,6*this.featureIds.length,e.UNSIGNED_SHORT,0)}}class ae{constructor(e,t){this.id="bubble",this.theme=e,this.layers=t.map((e=>T(e))),this.customLayers=new Map(t.map((e=>[e,new ie(y(e),e)])))}getVisibleLayers(e){return[_(e),T(e)]}onZoom(e){this.customLayers.forEach((t=>t.zoom=e))}getMaxZoom(e){return 50/this.theme.maxRadius[e]}addLayers(e,t){t.levels.forEach((t=>{e.addLayer(this.customLayers.get(t).asLayer(T(t)))}))}encode(e,{level:t,sensorType:n,valueMinMax:o,scale:i}){e.setPaintProperty(_(t),"fill-color",this.theme.countyFill);const a=this.theme.maxRadius[t],s=this.theme.radiusScale[n],l=(0,te.Ij)(s).domain([0,o[1]]).range([0,a]).clamp(!0);return this.customLayers.get(t).encode(l,i),l}updateSources(e,t,n,o){this.customLayers.get(t).updateSources(n,o)}}class se extends oe{constructor(e,t){super(e,t,"\nuniform mat4 u_matrix;\nuniform vec2 u_pixelToClip;\nuniform float u_zoom;\n\nuniform float u_size;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n  float height = (a_colorAndValue.a * u_zoom + 1.0);\n  float shift = a_pos.z * (u_size * u_zoom + 1.0);\n\n  p.y -= (1.0 - abs(a_pos.z)) * height * u_pixelToClip.y * p.w;\n  p.x += shift * u_pixelToClip.x * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n  float thickness = 1.0;\n  // encode the barycentric coordinate but such that the bottom line is not shown\n  v_data = vec4(-min(shift, 0.0), height, max(shift, 0.0), thickness);\n\n}","\n#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\nuniform float u_device_pixel_ratio;\nuniform float u_opacity;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\n// This is like\nfloat aastep (float threshold, float dist) {\n  float afwidth = fwidth(dist) * 0.5;\n  return smoothstep(threshold - afwidth, threshold + afwidth, dist);\n}\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n  vec3 barycentric = v_data.xyz;\n  float stroke_width = v_data.w;\n\n  // this will be our signed distance for the wireframe edge\n  float d = min(min(barycentric.x, barycentric.y), barycentric.z);\n  // compute the anti-aliased stroke edge\n  float edge = 1.0 - aastep(stroke_width, d);\n\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = mix(fill_color, stroke_color, edge);\n}")}_createVertices(e){return[e.x,e.y,-1,e.x,e.y,0,e.x,e.y,1]}asLayer(e){return{id:e,type:"custom",renderingMode:"2d",onAdd:(e,t)=>this.onAdd(e,t),render:(e,t)=>this.render(e,t),onRemove:(e,t)=>this.onRemove(e,t),prerender:(e,t)=>this.preRender(e,t)}}onAdd(e,t){t.getExtension("OES_standard_derivatives"),super.onAdd(e,t),this._uSize=t.getUniformLocation(this._program,"u_size")}onRemove(e,t){super.onRemove(e,t),t.deleteBuffer(this._indexBuffer)}render(e,t){super._prepareRender(e,t),e.uniform1f(this._uOpacity,m.GX.fillOpacity),e.uniform1f(this._uSize,m.GX.size[this._level]),e.drawArrays(e.TRIANGLES,0,this.featureIds.length*this._verticesPerFeatures)}}class le{constructor(e,t){this.id="spike",this.theme=e,this.layers=t.map((e=>w(e))),this.customLayers=new Map(t.map((e=>[e,new se(y(e),e)])))}getVisibleLayers(e){return[_(e),w(e)]}onZoom(e){this.customLayers.forEach((t=>t.zoom=e))}getMaxZoom(e){return 100/this.theme.maxHeight[e]}addLayers(e,t){t.levels.forEach((t=>{e.addLayer(this.customLayers.get(t).asLayer(w(t)))}))}encode(e,{level:t,sensorType:n,valueMinMax:o,scale:i}){e.setPaintProperty(_(t),"fill-color",this.theme.countyFill);const a=o[1],s=this.theme.maxHeight[t],l=this.theme.heightScale[n],r=(0,te.Ij)(l).range([0,s]).domain([0,a]).clamp(!0);return this.customLayers.get(t).encode(r,i),r}updateSources(e,t,n,o){this.customLayers.get(t).updateSources(n,o)}}const re=(0,a.AW)();class ce extends class{constructor(e,t){this.dispatch=e,this.map=null,this.mapSetupReady=!1,this.mapSetupReadyPromiseResolver=()=>{},this.mapSetupReadyPromise=new Promise((e=>{this.mapSetupReadyPromiseResolver=e})),this.mapDataReady=!1,this.mapEncodingReady=!1,this.animationDuration=0,this.interactive=null,this.level=t.level,this.levels=t.levels,this.hasMegaCountyLevel=t.hasMegaCountyLevel,this.encodings=t.encodings,this.encoding=this.encodings[0];const n=(0,W.Z)((e=>this.dispatch("zoom",e)),100);this.zoom=new X(((e,t)=>{const o="function"==typeof this.encoding.getMaxZoom?this.encoding.getMaxZoom(this.level):Number.POSITIVE_INFINITY;e=Math.min(o,e);for(const t of this.encodings)"function"==typeof t.onZoom&&t.onZoom(e);t&&this.map.triggerRepaint(),n(e)}),t.bounds)}initMap(e,t){this.map=new g.Map({attributionControl:!1,container:e,style:Y,bounds:this.zoom.resetBounds,fitBounds:this.zoom.resetBoundsOptions,doubleClickZoom:!1,dragRotate:!1,pitchWithRotate:!1,touchPitch:!1,touchZoomRotate:!0,renderWorldCopies:!1,antialias:!0,maxZoom:8,minZoom:1}),this.zoom.setMap(this.map),this.map.touchZoomRotate.disableRotation();let n=null;const o=new Promise((e=>{n=e}));return this.map.on("idle",(()=>{this.dispatch("idle")})),this.map.on("load",(()=>{this.addSprites(),this.addSources().then((()=>{this.addLayers(),this.interactive=new B(this.map,this)})).then((()=>{this._setupReady(),n(this)}))})),(0,C.Xp)(e,(()=>{this.map.resize()})),this.setTitle(t),o}_setupReady(){this.zoom.showStateLabels("state"===this.level),this.zoom.ready(),this.markReady("setup")}markReady(e){switch(e){case"data":if(this.mapDataReady)return;this.mapDataReady=!0,this.dispatch("readyData");break;case"setup":if(this.mapSetupReady)return;this.mapSetupReady=!0,this.mapSetupReadyPromiseResolver(),this.dispatch("readySetup");break;case"encoding":if(this.mapEncodingReady)return;this.mapEncodingReady=!0,this.dispatch("readyEncoding")}this.mapSetupReady&&this.mapEncodingReady&&this.mapDataReady&&(this.dispatch("ready"),this.map.getContainer().dataset.ready="ready")}addSprites(){const e=16,t=document.createElement("canvas");t.width=e,t.height=e;const n=t.getContext("2d");n.clearRect(0,0,e,e);const o=n.createLinearGradient(0,0,e,e);o.addColorStop(0,"white"),o.addColorStop(.25,m.Cr),o.addColorStop(.5,"white"),o.addColorStop(.75,m.Cr),o.addColorStop(1,"white"),n.fillStyle=o,n.fillRect(0,0,e,e);const i=n.getImageData(0,0,e,e);this.map.addImage("hatching",i,{sdf:!0})}addSources(){return Promise.resolve()}animationOptions(e){return this.animationDuration?{[e+"-transition"]:{duration:this.animationDuration,delay:0}}:{}}addLevelSource(e,t,n){this.map.addSource(b(e),{type:"geojson",data:t}),this.map.addSource(y(e),{type:"geojson",data:n})}addFillLevelLayer(e,t=!0){this.map.addLayer({id:_(e),source:b(e),type:"fill",layout:{visibility:"none"},paint:K(K({"fill-color":m.Y2.countyFill,"fill-opacity":["case",["==",["to-number",["feature-state","value"],f],f],0,1]},this.animationOptions("fill-color")),t?{"fill-outline-color":m.Y2.countyOutlineWhenFilled}:{})})}addBorderLevelLayer(e){this.map.addLayer({id:x(e),source:b(e),type:"line",layout:{visibility:"none"},paint:{"line-color":m.Y2.countyOutlineWhenFilled,"line-width":1}})}addHoverLevelLayer(e){this.map.addLayer({id:k(e),source:b(e),type:"line",layout:{visibility:"none"},paint:{"line-color":["case",["to-boolean",["feature-state","select"]],["feature-state","select"],m.Y2.hoverRegionOutline],"line-width":["case",["any",["to-boolean",["feature-state","hover"]],["to-boolean",["feature-state","select"]]],4,0]}})}addLayers(){}destroy(){this.mapSetupReady=!1,this.map&&((0,C.UR)(this.map.getContainer()),this.map.remove(),this.zoom.map=null,this.map=null)}validateLevel(e){return this.levels.includes(e)?e:this.levels[0]}getAllEncodingLayers(){const e=this.encodings.flatMap((e=>e.layers));return e.push(...this.levels.map((e=>_(e)))),this.hasMegaCountyLevel&&e.push(_(r.levelMegaCounty.id)),e}updateOptions(e,t,n,o,i,a,s,l){t=this.validateLevel(t);const r=this.level;if(this.level=t,this.encoding=this.encodings.find((t=>t.id===e)),this.hasMegaCountyLevel||(s=null),!this.map||!this.mapSetupReady)return;r!==t&&this.zoom.showStateLabels("state"===t);const c=this.getAllEncodingLayers(),u=new Set(this.encoding.getVisibleLayers(t));c.forEach((e=>{this.map.setLayoutProperty(e,"visibility",u.has(e)?"visible":"none")}));const d=this.encoding.encode(this.map,{level:t,sensorType:o,sensor:n,valueMinMax:i,stops:a,stopsMega:s,scale:l,baseZoom:this.zoom.stateZoom});return this.markReady("encoding"),d}updateSources(e,t,n="value"){e=this.validateLevel(e);const o=Math.random().toString(36);this._mapDataFlag=o,this.dispatch("loading",!0),Promise.all([t,this.mapSetupReadyPromise]).then((([t])=>{if(this._mapDataFlag!==o)return;this.map.once("idle",(()=>{this.dispatch("loading",!1)}));const i=new Map(t.map((e=>[e.geo_value.toUpperCase(),e])));this.interactive.setData(i),"county"===e&&this._updateSource(b(r.levelMegaCounty.id),i,n),this._updateSource(b(e),i,n),this._updateSource(y(e),i,n);for(const t of this.encodings)t.updateSources(this.map,e,i,n);t.length>0&&this.markReady("data")}))}_updateSource(e,t,n="value"){console.assert(null!=this.map);const o=this.map.getSource(e);o?o._data.features.forEach((o=>{const i=o.properties.id,a=t.get(i);this.map.setFeatureState({source:e,id:Number.parseInt(o.id,10)},{value:a?a[n]:f})})):console.error("invalid source")}selectMulti(e){if(this.map&&this.interactive){if(e.length<=1){const t=this.interactive.selection.slice();return this.select(e.length>0?e[0].info:null),t}return this.interactive.selectMulti(e)}}select(e){this.map&&this.interactive&&this.interactive.select(e)}focusOn(e){if(!e||!this.map)return;const t=this.map.getSource(b(e.level));if(!t)return;const n=t._data.features.find((t=>t.id===e.id));n&&this.zoom.focusOn(n)}isMissing(e){const t=this.map.getFeatureState({source:b(e.properties.level),id:"string"==typeof id?Number.parseInt(e.id,10):e.id});return null==t.value||t.value===f}selectRandom(){if(!this.map||!this.mapSetupReady)return;const e=this.map.getSource(b(this.level));if(!e)return;const t=r.defaultRegionOnStartup[this.level],n=e._data.features.find((e=>e.properties.id===t));if(n&&!this.isMissing(n))return void this.dispatch("select",{feature:n});const o=e._data.features.filter((e=>!this.isMissing(e)));if(0===o.length)return;const i=o[Math.floor(Math.random()*(o.length-1))];this.dispatch("select",{feature:i})}setTitle(e){if(!this.map)return;const t=this.map.getContainer().querySelector("canvas");t&&(t.setAttribute("role","figure"),t.setAttribute("aria-roledescription","visualization"),t.setAttribute("aria-label","US Map showing: ".concat(e)))}}{constructor(e){super(e,{bounds:p.$q,encodings:[new ee(r.levels),new ae(m.nm,r.levels),new le(m.GX,r.levels)],level:"county",levels:r.levels,hasMegaCountyLevel:!0})}addLevelSources(){const e=this.map;return re.then((t=>{e.addSource(b(r.levelMegaCounty.id),{type:"geojson",data:t.mega}),this.levels.forEach((e=>{this.addLevelSource(e,t[e].border,t[e].center)}))}))}addSources(){return Promise.all([(e=this.map,re.then((t=>{e.addSource(L,{type:"geojson",data:t.cities})}))),this.addLevelSources()]);var e}addLayers(){const e=this.map;e.addLayer({id:D,source:b("state"),type:"fill",paint:{"fill-color":m.Cr,"fill-outline-color":m.Y2.stateOutline,"fill-pattern":"hatching"}}),this.addFillLevelLayer(r.levelMegaCounty.id),this.levels.forEach((e=>{this.addFillLevelLayer(e,"county"!==e)})),this.addBorderLevelLayer("state"),this.addHoverLevelLayer(r.levelMegaCounty.id),this.levels.forEach((e=>{this.addHoverLevelLayer(e)})),this.encodings.forEach((t=>{t.addLayers(e,this)})),function(e){const t=(t,n,o={})=>{e.addLayer(R(R(R({id:t,source:L,type:"symbol"},n?{filter:n}:{}),o),{},{layout:{"text-field":["get","name"],"text-font":["Open Sans Regular"],"text-size":12},paint:{"text-halo-color":"#fff","text-halo-width":1.5}}))};t(S,["==","name","Pittsburgh"],{maxzoom:8}),t(S[1],[">","population",9e5],{maxzoom:4}),t(S[2],[">","population",5e5],{maxzoom:6,minzoom:4}),t(S[3],[">","population",1e5],{maxzoom:8,minzoom:6}),t(S[4],void 0,{minzoom:8})}(e),function(e){e.addLayer({id:O,source:y("state"),type:"symbol",maxzoom:8,layout:{"text-field":["upcase",["get","name"]],"text-font":["Open Sans Bold"],"text-size":11},paint:{"text-opacity":.5,"text-halo-color":"#fff","text-halo-width":1}})}(e)}getAllEncodingLayers(){const e=super.getAllEncodingLayers();return e.push(x("state")),e}}function ue(e){let t,n,i,a;return{c(){t=(0,o.bG)("button"),(0,o.Lj)(t,"title","Show sensor description"),(0,o.Lj)(t,"class",n="uk-icon-button "+e[2]),(0,o.Lj)(t,"data-uk-toggle","target: #info-dialog"),(0,o.Lj)(t,"data-uk-icon","icon: question-plain"),(0,o.VH)(t,"uk-icon-button-small",!e[1])},m(n,s){(0,o.$T)(n,t,s),i||(a=(0,o.oL)(t,"click",(0,o.XE)(e[3])),i=!0)},p(e,i){4&i&&n!==(n="uk-icon-button "+e[2])&&(0,o.Lj)(t,"class",n),6&i&&(0,o.VH)(t,"uk-icon-button-small",!e[1])},d(e){e&&(0,o.og)(t),i=!1,a()}}}function de(e){let t,n=null!=e[0]&&e[0].description&&ue(e);return{c(){n&&n.c(),t=(0,o.cS)()},m(e,i){n&&n.m(e,i),(0,o.$T)(e,t,i)},p(e,[o]){null!=e[0]&&e[0].description?n?n.p(e,o):(n=ue(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:o.ZT,o:o.ZT,d(e){n&&n.d(e),e&&(0,o.og)(t)}}}function he(e,t,n){let{sensor:o}=t,{large:a=!1}=t,{className:s=""}=t;return e.$$set=e=>{"sensor"in e&&n(0,o=e.sensor),"large"in e&&n(1,a=e.large),"className"in e&&n(2,s=e.className)},[o,a,s,()=>{i.sG.set(o)}]}class pe extends o.f_{constructor(e){super(),(0,o.S1)(this,e,he,de,o.N8,{sensor:0,large:1,className:2})}}const me=pe;function ge(e){let t,n,i=e[3].toLocaleDateString()+"";return{c(){t=(0,o.bG)("span"),n=(0,o.fL)(i),(0,o.Lj)(t,"data-testid","currentdate")},m(e,i){(0,o.$T)(e,t,i),(0,o.R3)(t,n)},p(e,t){8&t&&i!==(i=e[3].toLocaleDateString()+"")&&(0,o.rT)(n,i)},d(e){e&&(0,o.og)(t)}}}function fe(e){let t,n,i,a,s,l,r;s=new me({props:{sensor:e[2],className:"info"}});let c=e[0]&&ge(e);return{c(){t=(0,o.bG)("h2"),n=(0,o.bG)("span"),i=(0,o.fL)(e[1]),a=(0,o.Dh)(),(0,o.YC)(s.$$.fragment),l=(0,o.Dh)(),c&&c.c(),(0,o.Lj)(t,"class","banner svelte-11a77rv")},m(e,u){(0,o.$T)(e,t,u),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(n,a),(0,o.ye)(s,n,null),(0,o.R3)(t,l),c&&c.m(t,null),r=!0},p(e,[n]){(!r||2&n)&&(0,o.rT)(i,e[1]);const a={};4&n&&(a.sensor=e[2]),s.$set(a),e[0]?c?c.p(e,n):(c=ge(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i(e){r||((0,o.Ui)(s.$$.fragment,e),r=!0)},o(e){(0,o.et)(s.$$.fragment,e),r=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(s),c&&c.d()}}}function ve(e,t,n){let a,s,l;(0,o.FI)(e,i.ix,(e=>n(1,a=e))),(0,o.FI)(e,i.PC,(e=>n(2,s=e))),(0,o.FI)(e,i.tU,(e=>n(3,l=e)));let{showDate:r=!1}=t;return e.$$set=e=>{"showDate"in e&&n(0,r=e.showDate)},[r,a,s,l]}class be extends o.f_{constructor(e){super(),(0,o.S1)(this,e,ve,fe,o.N8,{showDate:0})}}const ye=be;var Le=n(5398);function $e(e){let t,n,i,a,s,l,r,c,u,d,h;return{c(){t=(0,o.bG)("div"),n=(0,o.bG)("button"),a=(0,o.Dh)(),s=(0,o.bG)("button"),r=(0,o.Dh)(),c=(0,o.bG)("button"),(0,o.Lj)(n,"aria-pressed",i="color"===e[4]?"true":"false"),(0,o.Lj)(n,"class","uk-button uk-button-default uk-button-small choropleth svelte-1eqd11i"),(0,o.Lj)(n,"data-uk-icon","icon: blank"),(0,o.Lj)(n,"title","Switch to Choropleth"),(0,o.VH)(n,"uk-active","color"===e[4]),(0,o.Lj)(s,"aria-pressed",l="bubble"===e[4]?"true":"false"),(0,o.Lj)(s,"class","uk-button uk-button-default uk-button-small bubble svelte-1eqd11i"),(0,o.Lj)(s,"data-uk-icon","icon: blank"),(0,o.Lj)(s,"title","Switch to Bubble Map"),(0,o.VH)(s,"uk-active","bubble"===e[4]),(0,o.Lj)(c,"aria-pressed",u="spike"===e[4]?"true":"false"),(0,o.Lj)(c,"class","uk-button uk-button-default uk-button-small spike svelte-1eqd11i"),(0,o.Lj)(c,"data-uk-icon","icon: blank"),(0,o.Lj)(c,"title","Switch to Spike Map"),(0,o.VH)(c,"uk-active","spike"===e[4]),(0,o.Lj)(t,"class","uk-vertical-button-group svelte-1eqd11i")},m(i,l){(0,o.$T)(i,t,l),(0,o.R3)(t,n),(0,o.R3)(t,a),(0,o.R3)(t,s),(0,o.R3)(t,r),(0,o.R3)(t,c),d||(h=[(0,o.oL)(n,"click",e[8]),(0,o.oL)(s,"click",e[9]),(0,o.oL)(c,"click",e[10])],d=!0)},p(e,t){16&t&&i!==(i="color"===e[4]?"true":"false")&&(0,o.Lj)(n,"aria-pressed",i),16&t&&(0,o.VH)(n,"uk-active","color"===e[4]),16&t&&l!==(l="bubble"===e[4]?"true":"false")&&(0,o.Lj)(s,"aria-pressed",l),16&t&&(0,o.VH)(s,"uk-active","bubble"===e[4]),16&t&&u!==(u="spike"===e[4]?"true":"false")&&(0,o.Lj)(c,"aria-pressed",u),16&t&&(0,o.VH)(c,"uk-active","spike"===e[4])},d(e){e&&(0,o.og)(t),d=!1,(0,o.j7)(h)}}}function Re(e){let t;return{c(){t=(0,o.bG)("div"),(0,o.Lj)(t,"class","loader loading svelte-1eqd11i")},m(e,n){(0,o.$T)(e,t,n)},d(e){e&&(0,o.og)(t)}}}function je(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b=e[2]&&$e(e),y=e[3]&&Re();return{c(){t=(0,o.bG)("div"),n=(0,o.bG)("div"),i=(0,o.bG)("button"),s=(0,o.Dh)(),l=(0,o.bG)("button"),c=(0,o.Dh)(),u=(0,o.bG)("div"),d=(0,o.bG)("button"),p=(0,o.Dh)(),b&&b.c(),m=(0,o.Dh)(),y&&y.c(),(0,o.Lj)(i,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),(0,o.Lj)(i,"data-uk-icon","icon: plus"),(0,o.Lj)(i,"type","button"),(0,o.Lj)(i,"title","Zoom in"),(0,o.Lj)(i,"aria-label","Zoom in"),i.disabled=a=!e[1]||e[1].getZoom()<=e[1].getMinZoom(),(0,o.Lj)(l,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),(0,o.Lj)(l,"data-uk-icon","icon: minus"),(0,o.Lj)(l,"type","button"),(0,o.Lj)(l,"title","Zoom out"),(0,o.Lj)(l,"aria-label","Zoom out"),l.disabled=r=!e[1]||e[1].getZoom()>=e[1].getMaxZoom(),(0,o.Lj)(n,"class","uk-vertical-button-group svelte-1eqd11i"),(0,o.Lj)(d,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),(0,o.Lj)(d,"type","button"),(0,o.Lj)(d,"data-uk-icon","icon: home"),(0,o.Lj)(d,"title","Show entire map"),(0,o.Lj)(d,"aria-label","Show entire map"),d.disabled=h=!e[1],(0,o.Lj)(u,"class","svelte-1eqd11i"),(0,o.Lj)(t,"class",g="root "+e[0]+" svelte-1eqd11i")},m(a,r){(0,o.$T)(a,t,r),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(n,s),(0,o.R3)(n,l),(0,o.R3)(t,c),(0,o.R3)(t,u),(0,o.R3)(u,d),(0,o.R3)(t,p),b&&b.m(t,null),(0,o.R3)(t,m),y&&y.m(t,null),f||(v=[(0,o.oL)(i,"click",e[5]),(0,o.oL)(l,"click",e[6]),(0,o.oL)(d,"click",e[7])],f=!0)},p(e,[n]){2&n&&a!==(a=!e[1]||e[1].getZoom()<=e[1].getMinZoom())&&(i.disabled=a),2&n&&r!==(r=!e[1]||e[1].getZoom()>=e[1].getMaxZoom())&&(l.disabled=r),2&n&&h!==(h=!e[1])&&(d.disabled=h),e[2]?b?b.p(e,n):(b=$e(e),b.c(),b.m(t,m)):b&&(b.d(1),b=null),e[3]?y||(y=Re(),y.c(),y.m(t,null)):y&&(y.d(1),y=null),1&n&&g!==(g="root "+e[0]+" svelte-1eqd11i")&&(0,o.Lj)(t,"class",g)},i:o.ZT,o:o.ZT,d(e){e&&(0,o.og)(t),b&&b.d(),y&&y.d(),f=!1,(0,o.j7)(v)}}}function _e(e,t,n){let a;(0,o.FI)(e,i.j6,(e=>n(4,a=e)));let{className:s=""}=t,{zoom:l}=t,{showEncodings:r=!1}=t,{loading:c=!1}=t;return e.$$set=e=>{"className"in e&&n(0,s=e.className),"zoom"in e&&n(1,l=e.zoom),"showEncodings"in e&&n(2,r=e.showEncodings),"loading"in e&&n(3,c=e.loading)},[s,l,r,c,a,()=>{(0,Le.L)("map","zoomIn"),l.zoomIn()},()=>{(0,Le.L)("map","zoomOut"),l.zoomOut()},()=>{(0,Le.L)("map","zoomReset"),l.resetZoom()},()=>{i.j6.set("color")},()=>{i.j6.set("bubble")},()=>{i.j6.set("spike")}]}class ke extends o.f_{constructor(e){super(),(0,o.S1)(this,e,_e,je,o.N8,{className:0,zoom:1,showEncodings:2,loading:3})}}const Te=ke;function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b,y,L,$,R;return{c(){t=(0,o.bG)("div"),n=(0,o.bG)("div"),i=(0,o.bG)("button"),a=(0,o.fL)("New"),l=(0,o.Dh)(),r=(0,o.bG)("button"),c=(0,o.fL)("Cumulative"),d=(0,o.Dh)(),h=(0,o.bG)("div"),p=(0,o.bG)("button"),m=(0,o.fL)("Ratios (per 100,000)"),f=(0,o.Dh)(),v=(0,o.bG)("button"),b=(0,o.fL)("Counts"),(0,o.Lj)(i,"type","button"),(0,o.Lj)(i,"aria-pressed",s=String(!e[3].cumulative)),(0,o.Lj)(i,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),(0,o.VH)(i,"uk-active",!e[3].cumulative),(0,o.Lj)(r,"type","button"),(0,o.Lj)(r,"aria-pressed",u=e[3].cumulative),(0,o.Lj)(r,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),(0,o.VH)(r,"uk-active",e[3].cumulative),(0,o.Lj)(n,"aria-label","display cumulative or new incidents"),(0,o.Lj)(n,"class","uk-button-group"),(0,o.Lj)(p,"type","button"),(0,o.Lj)(p,"aria-pressed",g=String(!e[3].incidence)),(0,o.Lj)(p,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),(0,o.VH)(p,"uk-active",!e[3].incidence),(0,o.Lj)(v,"type","button"),(0,o.Lj)(v,"aria-pressed",y=String(e[3].incidence)),(0,o.Lj)(v,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),(0,o.VH)(v,"uk-active",e[3].incidence),(0,o.Lj)(h,"aria-label","display counts or ratios per 100,000 people"),(0,o.Lj)(h,"class","uk-button-group"),(0,o.Lj)(t,"class",L="root "+e[2]+" svelte-1iknxf6"),(0,o.VH)(t,"center",e[0])},m(s,u){(0,o.$T)(s,t,u),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(i,a),(0,o.R3)(n,l),(0,o.R3)(n,r),(0,o.R3)(r,c),(0,o.R3)(t,d),(0,o.R3)(t,h),(0,o.R3)(h,p),(0,o.R3)(p,m),(0,o.R3)(h,f),(0,o.R3)(h,v),(0,o.R3)(v,b),$||(R=[(0,o.oL)(i,"click",e[4]),(0,o.oL)(r,"click",e[5]),(0,o.oL)(p,"click",e[6]),(0,o.oL)(v,"click",e[7])],$=!0)},p(e,n){8&n&&s!==(s=String(!e[3].cumulative))&&(0,o.Lj)(i,"aria-pressed",s),8&n&&(0,o.VH)(i,"uk-active",!e[3].cumulative),8&n&&u!==(u=e[3].cumulative)&&(0,o.Lj)(r,"aria-pressed",u),8&n&&(0,o.VH)(r,"uk-active",e[3].cumulative),8&n&&g!==(g=String(!e[3].incidence))&&(0,o.Lj)(p,"aria-pressed",g),8&n&&(0,o.VH)(p,"uk-active",!e[3].incidence),8&n&&y!==(y=String(e[3].incidence))&&(0,o.Lj)(v,"aria-pressed",y),8&n&&(0,o.VH)(v,"uk-active",e[3].incidence),4&n&&L!==(L="root "+e[2]+" svelte-1iknxf6")&&(0,o.Lj)(t,"class",L),5&n&&(0,o.VH)(t,"center",e[0])},d(e){e&&(0,o.og)(t),$=!1,(0,o.j7)(R)}}}function Se(e){let t,n=e[1].isCasesOrDeath&&Oe(e);return{c(){n&&n.c(),t=(0,o.cS)()},m(e,i){n&&n.m(e,i),(0,o.$T)(e,t,i)},p(e,[o]){e[1].isCasesOrDeath?n?n.p(e,o):(n=Oe(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:o.ZT,o:o.ZT,d(e){n&&n.d(e),e&&(0,o.og)(t)}}}function Ge(e,t,n){let a,s;(0,o.FI)(e,i.PC,(e=>n(8,a=e))),(0,o.FI)(e,i.V_,(e=>n(3,s=e)));let{center:l=!1}=t,{sensor:r=a}=t,{className:c=""}=t;return e.$$set=e=>{"center"in e&&n(0,l=e.center),"sensor"in e&&n(1,r=e.sensor),"className"in e&&n(2,c=e.className)},[l,r,c,s,()=>{s.cumulative&&i.V_.set(xe(xe({},s),{},{cumulative:!1}))},()=>{s.cumulative||i.V_.set(xe(xe({},s),{},{cumulative:!0}))},()=>{s.incidence&&i.V_.set(xe(xe({},s),{},{incidence:!1}))},()=>{s.incidence||i.V_.set(xe(xe({},s),{},{incidence:!0}))}]}class Ce extends o.f_{constructor(e){super(),(0,o.S1)(this,e,Ge,Se,o.N8,{center:0,sensor:1,className:2})}}const Ve=Ce;function ze(e,t,n){const o=e.slice();return o[7]=t[n],o}function Me(e){let t,n,i,a=e[0].high+"";return{c(){t=(0,o.bG)("li"),n=(0,o.fL)(a),(0,o.Lj)(t,"class","tick svelte-1u6a1mr"),(0,o.cz)(t,"background-image","linear-gradient(to right, "+e[7].color+", "+e[7].nextColor+")"),(0,o.Lj)(t,"title",i=e[7].label)},m(e,i){(0,o.$T)(e,t,i),(0,o.R3)(t,n)},p(e,s){1&s&&a!==(a=e[0].high+"")&&(0,o.rT)(n,a),1&s&&(0,o.cz)(t,"background-image","linear-gradient(to right, "+e[7].color+", "+e[7].nextColor+")"),1&s&&i!==(i=e[7].label)&&(0,o.Lj)(t,"title",i)},d(e){e&&(0,o.og)(t)}}}function Pe(e){let t,n,i,a,s,l,r,c,u,d,h,p=e[0].high+"",g=e[0].high+"",f=e[0].labels,v=[];for(let t=0;t<f.length;t+=1)v[t]=Me(ze(e,f,t));return{c(){t=(0,o.bG)("ul"),n=(0,o.bG)("li"),i=(0,o.fL)(p),a=(0,o.Dh)(),s=(0,o.bG)("li"),l=(0,o.fL)(g),c=(0,o.Dh)();for(let e=0;e<v.length;e+=1)v[e].c();u=(0,o.Dh)(),d=(0,o.bG)("li"),(0,o.Lj)(n,"class","tick tick-single svelte-1u6a1mr"),(0,o.cz)(n,"background","repeating-linear-gradient(-45deg, "+m.Cr+", white 30%)"),(0,o.Lj)(n,"title","NA"),(0,o.Lj)(s,"class","tick tick-single tick-space svelte-1u6a1mr"),(0,o.cz)(s,"background-color",m.ER),(0,o.Lj)(s,"title",r=e[0].low),(0,o.Lj)(d,"class","tick tick-last svelte-1u6a1mr"),(0,o.Lj)(d,"title",h=e[0].high),(0,o.Lj)(t,"data-testid","color-legend"),(0,o.Lj)(t,"class","svelte-1u6a1mr")},m(e,r){(0,o.$T)(e,t,r),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(t,a),(0,o.R3)(t,s),(0,o.R3)(s,l),(0,o.R3)(t,c);for(let e=0;e<v.length;e+=1)v[e].m(t,null);(0,o.R3)(t,u),(0,o.R3)(t,d)},p(e,[n]){if(1&n&&p!==(p=e[0].high+"")&&(0,o.rT)(i,p),1&n&&g!==(g=e[0].high+"")&&(0,o.rT)(l,g),1&n&&r!==(r=e[0].low)&&(0,o.Lj)(s,"title",r),1&n){let o;for(f=e[0].labels,o=0;o<f.length;o+=1){const i=ze(e,f,o);v[o]?v[o].p(i,n):(v[o]=Me(i),v[o].c(),v[o].m(t,u))}for(;o<v.length;o+=1)v[o].d(1);v.length=f.length}1&n&&h!==(h=e[0].high)&&(0,o.Lj)(d,"title",h)},i:o.ZT,o:o.ZT,d(e){e&&(0,o.og)(t),(0,o.RM)(v,e)}}}function Ne(e,t,n){let a,s,r,c,u,d,h;return(0,o.FI)(e,i.ot,(e=>n(1,s=e))),(0,o.FI)(e,i.PC,(e=>n(2,r=e))),(0,o.FI)(e,i.pk,(e=>n(3,c=e))),(0,o.FI)(e,i.OT,(e=>n(4,u=e))),(0,o.FI)(e,i.V_,(e=>n(5,d=e))),(0,o.FI)(e,i.s2,(e=>n(6,h=e))),e.$$.update=()=>{126&e.$$.dirty&&n(0,a=(0,l.CE)(s,r,c,u,d,h))},[a,s,r,c,u,d,h]}class Ae extends o.f_{constructor(e){super(),(0,o.S1)(this,e,Ne,Pe,o.N8,{})}}const Ie=Ae;function Fe(e,t,n){const o=e.slice();return o[9]=t[n],o}function Ee(e){let t,n,i,a,s,l,r=e[9].label+"";return{c(){t=(0,o.bG)("li"),n=(0,o.bG)("div"),i=(0,o.bG)("div"),a=(0,o.Dh)(),s=(0,o.bG)("span"),l=(0,o.fL)(r),(0,o.Lj)(i,"class","bubble svelte-19hi244"),(0,o.cz)(i,"width",2*e[2](e[9].value)*e[0]+"px"),(0,o.cz)(i,"height",2*e[2](e[9].value)*e[0]+"px"),(0,o.cz)(i,"background",(0,C.Zn)(e[9].color,m.nm.fillOpacity)),(0,o.cz)(i,"border-color",e[9].color),(0,o.Lj)(n,"class","bubble-wrapper svelte-19hi244"),(0,o.Lj)(t,"class","svelte-19hi244")},m(e,r){(0,o.$T)(e,t,r),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(t,a),(0,o.R3)(t,s),(0,o.R3)(s,l)},p(e,t){7&t&&(0,o.cz)(i,"width",2*e[2](e[9].value)*e[0]+"px"),7&t&&(0,o.cz)(i,"height",2*e[2](e[9].value)*e[0]+"px"),2&t&&(0,o.cz)(i,"background",(0,C.Zn)(e[9].color,m.nm.fillOpacity)),2&t&&(0,o.cz)(i,"border-color",e[9].color),2&t&&r!==(r=e[9].label+"")&&(0,o.rT)(l,r)},d(e){e&&(0,o.og)(t)}}}function Ze(e){let t,n,i,a,s,l,r,c,u,d,h,p,g,f,v=e[1].high+"",b=e[1].labels,y=[];for(let t=0;t<b.length;t+=1)y[t]=Ee(Fe(e,b,t));return{c(){t=(0,o.bG)("ul"),n=(0,o.bG)("li"),i=(0,o.bG)("div"),a=(0,o.bG)("div"),s=(0,o.Dh)(),l=(0,o.bG)("span"),l.textContent="NA",r=(0,o.Dh)();for(let e=0;e<y.length;e+=1)y[e].c();c=(0,o.Dh)(),u=(0,o.bG)("li"),d=(0,o.bG)("div"),h=(0,o.bG)("div"),p=(0,o.Dh)(),g=(0,o.bG)("span"),f=(0,o.fL)(v),(0,o.Lj)(a,"class","na svelte-19hi244"),(0,o.cz)(a,"background","repeating-linear-gradient(-45deg, "+m.Cr+", white 30%)"),(0,o.Lj)(i,"class","bubble-wrapper svelte-19hi244"),(0,o.Lj)(n,"class","svelte-19hi244"),(0,o.cz)(h,"width",2*e[2](e[1].highValue)*e[0]+"px"),(0,o.cz)(h,"height",2*e[2](e[1].highValue)*e[0]+"px"),(0,o.cz)(h,"background",(0,C.Zn)(e[1].highColor,m.nm.fillOpacity)),(0,o.cz)(h,"border-color",e[1].highColor),(0,o.Lj)(h,"class","bubble svelte-19hi244"),(0,o.Lj)(d,"class","bubble-wrapper svelte-19hi244"),(0,o.Lj)(u,"class","svelte-19hi244"),(0,o.Lj)(t,"data-testid","bubble-legend"),(0,o.Lj)(t,"class","svelte-19hi244")},m(e,m){(0,o.$T)(e,t,m),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(i,a),(0,o.R3)(n,s),(0,o.R3)(n,l),(0,o.R3)(t,r);for(let e=0;e<y.length;e+=1)y[e].m(t,null);(0,o.R3)(t,c),(0,o.R3)(t,u),(0,o.R3)(u,d),(0,o.R3)(d,h),(0,o.R3)(u,p),(0,o.R3)(u,g),(0,o.R3)(g,f)},p(e,[n]){if(7&n){let o;for(b=e[1].labels,o=0;o<b.length;o+=1){const i=Fe(e,b,o);y[o]?y[o].p(i,n):(y[o]=Ee(i),y[o].c(),y[o].m(t,c))}for(;o<y.length;o+=1)y[o].d(1);y.length=b.length}7&n&&(0,o.cz)(h,"width",2*e[2](e[1].highValue)*e[0]+"px"),7&n&&(0,o.cz)(h,"height",2*e[2](e[1].highValue)*e[0]+"px"),2&n&&(0,o.cz)(h,"background",(0,C.Zn)(e[1].highColor,m.nm.fillOpacity)),2&n&&(0,o.cz)(h,"border-color",e[1].highColor),2&n&&v!==(v=e[1].high+"")&&(0,o.rT)(f,v)},i:o.ZT,o:o.ZT,d(e){e&&(0,o.og)(t),(0,o.RM)(y,e)}}}function He(e,t,n){let a,s,r,c,u,d,h,p;(0,o.FI)(e,i.ot,(e=>n(3,s=e))),(0,o.FI)(e,i.PC,(e=>n(4,r=e))),(0,o.FI)(e,i.pk,(e=>n(5,c=e))),(0,o.FI)(e,i.OT,(e=>n(6,u=e))),(0,o.FI)(e,i.V_,(e=>n(7,d=e))),(0,o.FI)(e,i.s2,(e=>n(8,h=e))),(0,o.FI)(e,i.MV,(e=>n(2,p=e)));let{zoom:m=1}=t;return e.$$set=e=>{"zoom"in e&&n(0,m=e.zoom)},e.$$.update=()=>{504&e.$$.dirty&&n(1,a=(0,l.CE)(s,r,c,u,d,h))},[m,a,p,s,r,c,u,d,h]}class Ue extends o.f_{constructor(e){super(),(0,o.S1)(this,e,He,Ze,o.N8,{zoom:0})}}const Be=Ue;function Ye(e,t,n){const o=e.slice();return o[13]=t[n],o}function qe(e){let t,n,i,a,s,l,r,c,u,d,h,p,g=e[13].label+"";return{c(){t=(0,o.bG)("li"),n=(0,o.bi)("svg"),i=(0,o.bi)("g"),a=(0,o.bi)("path"),d=(0,o.Dh)(),h=(0,o.bG)("span"),p=(0,o.fL)(g),(0,o.Lj)(a,"d",s=e[3](e[13].value)),(0,o.Lj)(a,"class","spike svelte-f727e1"),(0,o.Lj)(a,"fill",l=(0,C.Zn)(e[13].color,m.GX.fillOpacity)),(0,o.Lj)(a,"stroke",r=(0,C.Zn)(e[13].color,m.GX.strokeOpacity)),(0,o.cz)(i,"transform","translate("+We+"px, "+We+"px)"),(0,o.Lj)(n,"width",c=2*e[1]+2*We),(0,o.Lj)(n,"height",u=e[2](e[13].value)*e[0]+2*We),(0,o.Lj)(n,"class","svelte-f727e1"),(0,o.Lj)(t,"class","legend-direct-tick svelte-f727e1")},m(e,s){(0,o.$T)(e,t,s),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(i,a),(0,o.R3)(t,d),(0,o.R3)(t,h),(0,o.R3)(h,p)},p(e,t){24&t&&s!==(s=e[3](e[13].value))&&(0,o.Lj)(a,"d",s),16&t&&l!==(l=(0,C.Zn)(e[13].color,m.GX.fillOpacity))&&(0,o.Lj)(a,"fill",l),16&t&&r!==(r=(0,C.Zn)(e[13].color,m.GX.strokeOpacity))&&(0,o.Lj)(a,"stroke",r),2&t&&c!==(c=2*e[1]+2*We)&&(0,o.Lj)(n,"width",c),21&t&&u!==(u=e[2](e[13].value)*e[0]+2*We)&&(0,o.Lj)(n,"height",u),16&t&&g!==(g=e[13].label+"")&&(0,o.rT)(p,g)},d(e){e&&(0,o.og)(t)}}}function Xe(e){let t,n,i,a,s,l,r,c,u,d,h,p,g,f,v,b,y,L,$,R=e[4].high+"",j=e[4].labels,_=[];for(let t=0;t<j.length;t+=1)_[t]=qe(Ye(e,j,t));return{c(){t=(0,o.bG)("ul"),n=(0,o.bG)("li"),i=(0,o.bG)("div"),a=(0,o.Dh)(),s=(0,o.bG)("span"),s.textContent="NA",l=(0,o.Dh)();for(let e=0;e<_.length;e+=1)_[e].c();r=(0,o.Dh)(),c=(0,o.bG)("li"),u=(0,o.bi)("svg"),d=(0,o.bi)("g"),h=(0,o.bi)("path"),y=(0,o.Dh)(),L=(0,o.bG)("span"),$=(0,o.fL)(R),(0,o.Lj)(i,"class","na svelte-f727e1"),(0,o.cz)(i,"background","repeating-linear-gradient(-45deg, "+m.Cr+", white 30%)"),(0,o.Lj)(n,"class","svelte-f727e1"),(0,o.Lj)(h,"d",p=e[3](e[4].highValue)),(0,o.Lj)(h,"class","spike svelte-f727e1"),(0,o.Lj)(h,"fill",g=(0,C.Zn)(e[4].highColor,m.GX.fillOpacity)),(0,o.Lj)(h,"stroke",f=(0,C.Zn)(e[4].highColor,m.GX.strokeOpacity)),(0,o.cz)(d,"transform","translate("+We+"px, "+We+"px)"),(0,o.Lj)(u,"width",v=2*e[1]+2*We),(0,o.Lj)(u,"height",b=e[2](e[4].highValue)*e[0]+2*We),(0,o.Lj)(u,"class","svelte-f727e1"),(0,o.Lj)(c,"class","legend-direct-tick svelte-f727e1"),(0,o.Lj)(t,"class","legend-ticks svelte-f727e1"),(0,o.Lj)(t,"data-testid","spike-legend")},m(e,p){(0,o.$T)(e,t,p),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(n,a),(0,o.R3)(n,s),(0,o.R3)(t,l);for(let e=0;e<_.length;e+=1)_[e].m(t,null);(0,o.R3)(t,r),(0,o.R3)(t,c),(0,o.R3)(c,u),(0,o.R3)(u,d),(0,o.R3)(d,h),(0,o.R3)(c,y),(0,o.R3)(c,L),(0,o.R3)(L,$)},p(e,[n]){if(31&n){let o;for(j=e[4].labels,o=0;o<j.length;o+=1){const i=Ye(e,j,o);_[o]?_[o].p(i,n):(_[o]=qe(i),_[o].c(),_[o].m(t,r))}for(;o<_.length;o+=1)_[o].d(1);_.length=j.length}24&n&&p!==(p=e[3](e[4].highValue))&&(0,o.Lj)(h,"d",p),16&n&&g!==(g=(0,C.Zn)(e[4].highColor,m.GX.fillOpacity))&&(0,o.Lj)(h,"fill",g),16&n&&f!==(f=(0,C.Zn)(e[4].highColor,m.GX.strokeOpacity))&&(0,o.Lj)(h,"stroke",f),2&n&&v!==(v=2*e[1]+2*We)&&(0,o.Lj)(u,"width",v),21&n&&b!==(b=e[2](e[4].highValue)*e[0]+2*We)&&(0,o.Lj)(u,"height",b),16&n&&R!==(R=e[4].high+"")&&(0,o.rT)($,R)},i:o.ZT,o:o.ZT,d(e){e&&(0,o.og)(t),(0,o.RM)(_,e)}}}const We=2;function Je(e,t,n){let a,s,r,c,u,d,h,p,g,f,v;(0,o.FI)(e,i.pk,(e=>n(5,u=e))),(0,o.FI)(e,i.ot,(e=>n(7,d=e))),(0,o.FI)(e,i.PC,(e=>n(8,h=e))),(0,o.FI)(e,i.OT,(e=>n(9,p=e))),(0,o.FI)(e,i.V_,(e=>n(10,g=e))),(0,o.FI)(e,i.s2,(e=>n(11,f=e))),(0,o.FI)(e,i.Ec,(e=>n(2,v=e)));let{zoom:b=1}=t,y=()=>"";return e.$$set=e=>{"zoom"in e&&n(0,b=e.zoom)},e.$$.update=()=>{if(33&e.$$.dirty&&n(1,a=m.GX.size[u]*b),33&e.$$.dirty&&n(6,s=m.GX.maxHeight[u]*b),4e3&e.$$.dirty&&n(4,r=(0,l.CE)(d,h,u,p,g,f)),64&e.$$.dirty&&(c=s+2*We),7&e.$$.dirty){const e=v,t=b,o=a;n(3,y=n=>"M 0 ".concat(e(n)*t," L ").concat(o," 0 L ").concat(2*o," ").concat(e(n)*t))}},[b,a,v,y,r,u,s,d,h,p,g,f]}class Ke extends o.f_{constructor(e){super(),(0,o.S1)(this,e,Je,Xe,o.N8,{zoom:0})}}const Qe=Ke;function et(e){let t,n,i,a,s=e[5](e[2])+"";return{c(){t=(0,o.bG)("div"),n=(0,o.fL)(s),i=(0,o.fL)("% Coverage"),(0,o.Lj)(t,"class","root base-font-size container-style svelte-9d0ztf"),(0,o.Lj)(t,"data-testid","coverage"),(0,o.Lj)(t,"title",a="Showing data for ".concat(e[2]," ").concat(e[4].labelPlural," out of ").concat(e[3]," ").concat(e[4].labelPlural," (").concat(e[5](e[2]),"%)")),(0,o.VH)(t,"hidden",!e[0]||!e[0].data),(0,o.VH)(t,"loading-bg",e[1])},m(e,a){(0,o.$T)(e,t,a),(0,o.R3)(t,n),(0,o.R3)(t,i)},p(e,[i]){4&i&&s!==(s=e[5](e[2])+"")&&(0,o.rT)(n,s),28&i&&a!==(a="Showing data for ".concat(e[2]," ").concat(e[4].labelPlural," out of ").concat(e[3]," ").concat(e[4].labelPlural," (").concat(e[5](e[2]),"%)"))&&(0,o.Lj)(t,"title",a),1&i&&(0,o.VH)(t,"hidden",!e[0]||!e[0].data),2&i&&(0,o.VH)(t,"loading-bg",e[1])},i:o.ZT,o:o.ZT,d(e){e&&(0,o.og)(t)}}}function tt(e,t,n){let o,i,{summary:a=null}=t,s=!0,l=0;return e.$$set=e=>{"summary"in e&&n(0,a=e.summary)},e.$$.update=()=>{1&e.$$.dirty&&n(3,o=a&&a.items?a.items.length:0),1&e.$$.dirty&&n(4,i=(0,r.getLevelInfo)(a?a.level:"county")),1&e.$$.dirty&&(n(1,s=!0),a&&a.data&&a.data.then((e=>{let t=0;for(const n of e)n.geo_value.endsWith("000")||null==n.value||Number.isNaN(n.value)||t++;n(1,s=!1),n(2,l=t)})))},[a,s,l,o,i,function(e){return Math.round(100*e/o)}]}class nt extends o.f_{constructor(e){super(),(0,o.S1)(this,e,tt,et,o.N8,{summary:0})}}const ot=nt;function it(e){let t,n;return t=new Qe({props:{zoom:e[3]}}),{c(){(0,o.YC)(t.$$.fragment)},m(e,i){(0,o.ye)(t,e,i),n=!0},p(e,n){const o={};8&n&&(o.zoom=e[3]),t.$set(o)},i(e){n||((0,o.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,o.et)(t.$$.fragment,e),n=!1},d(e){(0,o.vp)(t,e)}}}function at(e){let t,n;return t=new Be({props:{zoom:e[3]}}),{c(){(0,o.YC)(t.$$.fragment)},m(e,i){(0,o.ye)(t,e,i),n=!0},p(e,n){const o={};8&n&&(o.zoom=e[3]),t.$set(o)},i(e){n||((0,o.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,o.et)(t.$$.fragment,e),n=!1},d(e){(0,o.vp)(t,e)}}}function st(e){let t,n;return t=new Ie({}),{c(){(0,o.YC)(t.$$.fragment)},m(e,i){(0,o.ye)(t,e,i),n=!0},p:o.ZT,i(e){n||((0,o.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,o.et)(t.$$.fragment,e),n=!1},d(e){(0,o.vp)(t,e)}}}function lt(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b;i=new ye({props:{showDate:e[4]}}),l=new Te({props:{zoom:e[0]?e[0].zoom:null,showEncodings:!0,loading:e[1]}}),u=new Ve({props:{sensor:e[6],className:"container-bg container-style encoding-wrapper"}});const y=[st,at,it],L=[];function $(e,t){return"color"===e[7]?0:"bubble"===e[7]?1:"spike"===e[7]?2:-1}return~(p=$(e))&&(m=L[p]=y[p](e)),v=new ot({props:{summary:e[5]}}),{c(){t=(0,o.bG)("div"),n=(0,o.bG)("div"),(0,o.YC)(i.$$.fragment),a=(0,o.Dh)(),s=(0,o.bG)("div"),(0,o.YC)(l.$$.fragment),r=(0,o.Dh)(),c=(0,o.bG)("div"),(0,o.YC)(u.$$.fragment),d=(0,o.Dh)(),h=(0,o.bG)("div"),m&&m.c(),g=(0,o.Dh)(),f=(0,o.bG)("div"),(0,o.YC)(v.$$.fragment),(0,o.Lj)(n,"class","title-container container-bg svelte-as7l9m"),(0,o.Lj)(s,"class","map-controls-container svelte-as7l9m"),(0,o.Lj)(t,"class","map-top-overlay svelte-as7l9m"),(0,o.Lj)(h,"class","container-bg container-style legend-scale svelte-as7l9m"),(0,o.VH)(h,"loading-bg",e[2]),(0,o.Lj)(c,"class","legend-container base-font-size svelte-as7l9m"),(0,o.Lj)(c,"aria-label","map legend"),(0,o.Lj)(f,"class","summary-container svelte-as7l9m"),(0,o.Lj)(f,"aria-label","map data summary")},m(e,m){(0,o.$T)(e,t,m),(0,o.R3)(t,n),(0,o.ye)(i,n,null),(0,o.R3)(t,a),(0,o.R3)(t,s),(0,o.ye)(l,s,null),(0,o.$T)(e,r,m),(0,o.$T)(e,c,m),(0,o.ye)(u,c,null),(0,o.R3)(c,d),(0,o.R3)(c,h),~p&&L[p].m(h,null),(0,o.$T)(e,g,m),(0,o.$T)(e,f,m),(0,o.ye)(v,f,null),b=!0},p(e,[t]){const n={};16&t&&(n.showDate=e[4]),i.$set(n);const a={};1&t&&(a.zoom=e[0]?e[0].zoom:null),2&t&&(a.loading=e[1]),l.$set(a);const s={};64&t&&(s.sensor=e[6]),u.$set(s);let r=p;p=$(e),p===r?~p&&L[p].p(e,t):(m&&((0,o.dv)(),(0,o.et)(L[r],1,1,(()=>{L[r]=null})),(0,o.gb)()),~p?(m=L[p],m?m.p(e,t):(m=L[p]=y[p](e),m.c()),(0,o.Ui)(m,1),m.m(h,null)):m=null),4&t&&(0,o.VH)(h,"loading-bg",e[2]);const c={};32&t&&(c.summary=e[5]),v.$set(c)},i(e){b||((0,o.Ui)(i.$$.fragment,e),(0,o.Ui)(l.$$.fragment,e),(0,o.Ui)(u.$$.fragment,e),(0,o.Ui)(m),(0,o.Ui)(v.$$.fragment,e),b=!0)},o(e){(0,o.et)(i.$$.fragment,e),(0,o.et)(l.$$.fragment,e),(0,o.et)(u.$$.fragment,e),(0,o.et)(m),(0,o.et)(v.$$.fragment,e),b=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(i),(0,o.vp)(l),e&&(0,o.og)(r),e&&(0,o.og)(c),(0,o.vp)(u),~p&&L[p].d(),e&&(0,o.og)(g),e&&(0,o.og)(f),(0,o.vp)(v)}}}function rt(e,t,n){let a,s;(0,o.FI)(e,i.PC,(e=>n(6,a=e))),(0,o.FI)(e,i.j6,(e=>n(7,s=e)));let{map:l=null}=t,{mapLoading:r=!0}=t,{legendLoading:c=!0}=t,{zoom:u=1}=t,{showDate:d=!1}=t,{summary:h=null}=t;return e.$$set=e=>{"map"in e&&n(0,l=e.map),"mapLoading"in e&&n(1,r=e.mapLoading),"legendLoading"in e&&n(2,c=e.legendLoading),"zoom"in e&&n(3,u=e.zoom),"showDate"in e&&n(4,d=e.showDate),"summary"in e&&n(5,h=e.summary)},[l,r,c,u,d,h,a,s]}class ct extends o.f_{constructor(e){super(),(0,o.S1)(this,e,rt,lt,o.N8,{map:0,mapLoading:1,legendLoading:2,zoom:3,showDate:4,summary:5})}}const ut=ct;function dt(e){let t,n,i,a;t=new ut({props:{map:e[7],mapLoading:e[0],legendLoading:e[1],zoom:e[8],summary:e[2],showDate:e[3]}});let s={data:e[4],sensor:e[10],level:e[11],signalOptions:e[12],selections:e[5],focusOn:e[6],encoding:e[9],wrapperClass:ce,title:e[13]};return i=new h({props:s}),e[18](i),i.$on("zoom",e[19]),i.$on("updatedEncoding",e[20]),i.$on("loading",e[21]),i.$on("select",e[22]),i.$on("ready",e[16]),{c(){(0,o.YC)(t.$$.fragment),n=(0,o.Dh)(),(0,o.YC)(i.$$.fragment)},m(e,s){(0,o.ye)(t,e,s),(0,o.$T)(e,n,s),(0,o.ye)(i,e,s),a=!0},p(e,[n]){const o={};128&n&&(o.map=e[7]),1&n&&(o.mapLoading=e[0]),2&n&&(o.legendLoading=e[1]),256&n&&(o.zoom=e[8]),4&n&&(o.summary=e[2]),8&n&&(o.showDate=e[3]),t.$set(o);const a={};16&n&&(a.data=e[4]),1024&n&&(a.sensor=e[10]),2048&n&&(a.level=e[11]),4096&n&&(a.signalOptions=e[12]),32&n&&(a.selections=e[5]),64&n&&(a.focusOn=e[6]),512&n&&(a.encoding=e[9]),8192&n&&(a.title=e[13]),i.$set(a)},i(e){a||((0,o.Ui)(t.$$.fragment,e),(0,o.Ui)(i.$$.fragment,e),a=!0)},o(e){(0,o.et)(t.$$.fragment,e),(0,o.et)(i.$$.fragment,e),a=!1},d(a){(0,o.vp)(t,a),a&&(0,o.og)(n),e[18](null),(0,o.vp)(i,a)}}}function ht(e,t,n){let a,l,r,c,u,d;(0,o.FI)(e,i.j6,(e=>n(9,a=e))),(0,o.FI)(e,i._M,(e=>n(23,l=e))),(0,o.FI)(e,i.f8,(e=>n(10,r=e))),(0,o.FI)(e,i.pk,(e=>n(11,c=e))),(0,o.FI)(e,i.V_,(e=>n(12,u=e))),(0,o.FI)(e,i.ix,(e=>n(13,d=e)));const h=(0,s.x)();let p,m=1,{mapLoading:g=!1}=t,{legendLoading:f=!1}=t,{summary:v=null}=t,{showDate:b=!1}=t,{data:y}=t,{selections:L=[]}=t,{focusOn:$=null}=t,{selectRandomOnReady:R=!1}=t;function j(e){e&&(e.scale&&i.OT.set(e.scale),i.K3.set(e.stops),"bubble"===a&&e.custom&&i.MV.set(e.custom),"spike"===a&&e.custom&&i.Ec.set(e.custom))}return e.$$set=e=>{"mapLoading"in e&&n(0,g=e.mapLoading),"legendLoading"in e&&n(1,f=e.legendLoading),"summary"in e&&n(2,v=e.summary),"showDate"in e&&n(3,b=e.showDate),"data"in e&&n(4,y=e.data),"selections"in e&&n(5,L=e.selections),"focusOn"in e&&n(6,$=e.focusOn),"selectRandomOnReady"in e&&n(17,R=e.selectRandomOnReady)},[g,f,v,b,y,L,$,p,m,a,r,c,u,d,h,j,function(){!l&&R&&p.selectRandom()},R,function(e){o.Vn[e?"unshift":"push"]((()=>{p=e,n(7,p)}))},e=>n(8,m=e.detail),e=>j(e.detail),e=>h("loading",e.detail),e=>h("select",e.detail)]}class pt extends o.f_{constructor(e){super(),(0,o.S1)(this,e,ht,dt,o.N8,{mapLoading:0,legendLoading:1,summary:2,showDate:3,data:4,selections:5,focusOn:6,selectRandomOnReady:17})}}const mt=pt;var gt=n(1240),ft=n(8257),vt=n(6231),bt=n(3368);function yt(e){let t,n,i,a,s=e[2](e[0])+"";return{c(){t=(0,o.bG)("button"),n=(0,o.fL)(s),(0,o.Lj)(t,"aria-label","selected date"),(0,o.Lj)(t,"class","uk-input")},m(s,l){(0,o.$T)(s,t,l),(0,o.R3)(t,n),i||(a=(0,o.oL)(t,"",e[7]),i=!0)},p(e,t){5&t&&s!==(s=e[2](e[0])+"")&&(0,o.rT)(n,s)},i:o.ZT,o:o.ZT,d(e){e&&(0,o.og)(t),i=!1,a()}}}function Lt(e){let t,n,i;function a(t){e[8](t)}let s={className:"uk-width-1-1",start:e[3][0],end:e[3][1],formattedSelected:e[2](e[0]),$$slots:{default:[$t]},$$scope:{ctx:e}};return void 0!==e[0]&&(s.selected=e[0]),t=new vt.Z({props:s}),o.Vn.push((()=>(0,o.ak)(t,"selected",a))),{c(){(0,o.YC)(t.$$.fragment)},m(e,n){(0,o.ye)(t,e,n),i=!0},p(e,i){const a={};8&i&&(a.start=e[3][0]),8&i&&(a.end=e[3][1]),5&i&&(a.formattedSelected=e[2](e[0])),4101&i&&(a.$$scope={dirty:i,ctx:e}),!n&&1&i&&(n=!0,a.selected=e[0],(0,o.hj)((()=>n=!1))),t.$set(a)},i(e){i||((0,o.Ui)(t.$$.fragment,e),i=!0)},o(e){(0,o.et)(t.$$.fragment,e),i=!1},d(e){(0,o.vp)(t,e)}}}function $t(e){let t,n,i,a,s=e[2](e[0])+"";return{c(){t=(0,o.bG)("button"),n=(0,o.fL)(s),(0,o.Lj)(t,"aria-label","selected date"),(0,o.Lj)(t,"class","uk-input uk-text-nowrap")},m(s,l){(0,o.$T)(s,t,l),(0,o.R3)(t,n),i||(a=(0,o.oL)(t,"",e[6]),i=!0)},p(e,t){5&t&&s!==(s=e[2](e[0])+"")&&(0,o.rT)(n,s)},d(e){e&&(0,o.og)(t),i=!1,a()}}}function Rt(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b;const y=[Lt,yt],L=[];function $(e,t){return null!=e[0]&&0!==e[3].length?0:1}return n=$(e),i=L[n]=y[n](e),{c(){t=(0,o.bG)("div"),i.c(),a=(0,o.Dh)(),s=(0,o.bG)("div"),l=(0,o.bG)("button"),c=(0,o.Dh)(),u=(0,o.bG)("button"),h=(0,o.Dh)(),p=(0,o.bG)("button"),(0,o.Lj)(t,"class","uk-form-controls"),(0,o.Lj)(l,"class","uk-button uk-button-default svelte-qjzvyh"),l.disabled=r=null==e[0]||0===e[3].length||e[0]<=e[3][0],(0,o.Lj)(l,"title","Go to the previous day"),(0,o.Lj)(l,"data-uk-icon","icon: chevron-left"),(0,o.Lj)(u,"class","uk-button uk-button-default svelte-qjzvyh"),u.disabled=d=null==e[0]||0===e[3].length||e[0]>=e[3][1],(0,o.Lj)(u,"title","Go to the next day"),(0,o.Lj)(u,"data-uk-icon","icon: chevron-right"),(0,o.Lj)(p,"class","uk-button uk-button-default svelte-qjzvyh"),p.disabled=m=null==e[0]||0===e[3].length||e[0].valueOf()===e[3][1].valueOf(),(0,o.Lj)(p,"title",g="Go to the latest date for which '"+e[1].name+"' is available"),(0,o.Lj)(p,"data-uk-icon","icon: chevron-right-end"),(0,o.Lj)(s,"class","uk-button-group shortcuts svelte-qjzvyh")},m(i,r){(0,o.$T)(i,t,r),L[n].m(t,null),(0,o.$T)(i,a,r),(0,o.$T)(i,s,r),(0,o.R3)(s,l),(0,o.R3)(s,c),(0,o.R3)(s,u),(0,o.R3)(s,h),(0,o.R3)(s,p),f=!0,v||(b=[(0,o.oL)(l,"click",e[9]),(0,o.oL)(u,"click",e[10]),(0,o.oL)(p,"click",e[11])],v=!0)},p(e,[a]){let s=n;n=$(e),n===s?L[n].p(e,a):((0,o.dv)(),(0,o.et)(L[s],1,1,(()=>{L[s]=null})),(0,o.gb)(),i=L[n],i?i.p(e,a):(i=L[n]=y[n](e),i.c()),(0,o.Ui)(i,1),i.m(t,null)),(!f||9&a&&r!==(r=null==e[0]||0===e[3].length||e[0]<=e[3][0]))&&(l.disabled=r),(!f||9&a&&d!==(d=null==e[0]||0===e[3].length||e[0]>=e[3][1]))&&(u.disabled=d),(!f||9&a&&m!==(m=null==e[0]||0===e[3].length||e[0].valueOf()===e[3][1].valueOf()))&&(p.disabled=m),(!f||2&a&&g!==(g="Go to the latest date for which '"+e[1].name+"' is available"))&&(0,o.Lj)(p,"title",g)},i(e){f||((0,o.Ui)(i),f=!0)},o(e){(0,o.et)(i),f=!1},d(e){e&&(0,o.og)(t),L[n].d(),e&&(0,o.og)(a),e&&(0,o.og)(s),v=!1,(0,o.j7)(b)}}}function jt(e,t,n){let a,s,l,r;(0,o.FI)(e,i.s2,(e=>n(4,l=e))),(0,o.FI)(e,i.DZ,(e=>n(5,r=e)));let{sensor:c}=t,{value:u=null}=t;return e.$$set=e=>{"sensor"in e&&n(1,c=e.sensor),"value"in e&&n(0,u=e.value)},e.$$.update=()=>{if(16&e.$$.dirty&&n(2,a=l?(0,ft.i$)("%x"):(0,ft.i$)("%B %-d, %Y")),34&e.$$.dirty&&null!==r){const e=r.get(c.key);n(3,s=e?e.map(gt.oy):[])}},n(3,s=[]),[u,c,a,s,l,r,function(t){(0,o.cK)(e,t)},function(t){(0,o.cK)(e,t)},function(e){u=e,n(0,u)},()=>n(0,u=bt.Z.offset(u,-1)),()=>n(0,u=bt.Z.offset(u,1)),()=>n(0,u=s[1])]}class _t extends o.f_{constructor(e){super(),(0,o.S1)(this,e,jt,Rt,o.N8,{sensor:1,value:0})}}const kt=_t;function Tt(e,t,n){const o=e.slice();return o[13]=t[n],o}function wt(e,t,n){const o=e.slice();return o[16]=t[n],o}function xt(e,t,n){const o=e.slice();return o[19]=t[n],o}function Dt(e){let t,n,i,a,s,l=e[19].name+"";return{c(){t=(0,o.bG)("option"),n=(0,o.fL)(l),i=(0,o.Dh)(),(0,o.Lj)(t,"title",a="function"==typeof e[19].tooltipText?e[19].tooltipText():e[19].tooltipText),t.__value=s=e[19].key,t.value=t.__value},m(e,a){(0,o.$T)(e,t,a),(0,o.R3)(t,n),(0,o.R3)(t,i)},p(e,i){16&i&&l!==(l=e[19].name+"")&&(0,o.rT)(n,l),16&i&&a!==(a="function"==typeof e[19].tooltipText?e[19].tooltipText():e[19].tooltipText)&&(0,o.Lj)(t,"title",a),16&i&&s!==(s=e[19].key)&&(t.__value=s,t.value=t.__value)},d(e){e&&(0,o.og)(t)}}}function Ot(e){let t,n,i=e[16].sensors,a=[];for(let t=0;t<i.length;t+=1)a[t]=Dt(xt(e,i,t));return{c(){t=(0,o.bG)("optgroup");for(let e=0;e<a.length;e+=1)a[e].c();(0,o.Lj)(t,"label",n=e[16].label)},m(e,n){(0,o.$T)(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null)},p(e,s){if(16&s){let n;for(i=e[16].sensors,n=0;n<i.length;n+=1){const o=xt(e,i,n);a[n]?a[n].p(o,s):(a[n]=Dt(o),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}16&s&&n!==(n=e[16].label)&&(0,o.Lj)(t,"label",n)},d(e){e&&(0,o.og)(t),(0,o.RM)(a,e)}}}function St(e){let t,n,i,a,s,l=e[13].labelPlural+"";return{c(){t=(0,o.bG)("option"),n=(0,o.fL)(l),i=(0,o.Dh)(),t.__value=a=e[13].id,t.value=t.__value,t.disabled=s=!e[7].levels.includes(e[13].id)},m(e,a){(0,o.$T)(e,t,a),(0,o.R3)(t,n),(0,o.R3)(t,i)},p(e,i){1&i&&l!==(l=e[13].labelPlural+"")&&(0,o.rT)(n,l),1&i&&a!==(a=e[13].id)&&(t.__value=a,t.value=t.__value),129&i&&s!==(s=!e[7].levels.includes(e[13].id))&&(t.disabled=s)},d(e){e&&(0,o.og)(t)}}}function Gt(e){let t,n,i,a,s,l;function r(t){e[12](t)}let c={sensor:e[7]};return void 0!==e[3]&&(c.value=e[3]),a=new kt({props:c}),o.Vn.push((()=>(0,o.ak)(a,"value",r))),{c(){t=(0,o.bG)("div"),n=(0,o.bG)("span"),n.textContent="on",i=(0,o.Dh)(),(0,o.YC)(a.$$.fragment),(0,o.Lj)(n,"class","uk-form-label svelte-vpx6lo"),(0,o.Lj)(t,"class","uk-width-1-1 uk-width-1-3@m block svelte-vpx6lo")},m(e,s){(0,o.$T)(e,t,s),(0,o.R3)(t,n),(0,o.R3)(t,i),(0,o.ye)(a,t,null),l=!0},p(e,t){const n={};128&t&&(n.sensor=e[7]),!s&&8&t&&(s=!0,n.value=e[3],(0,o.hj)((()=>s=!1))),a.$set(n)},i(e){l||((0,o.Ui)(a.$$.fragment,e),l=!0)},o(e){(0,o.et)(a.$$.fragment,e),l=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(a)}}}function Ct(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b,y,L,$=e[4],R=[];for(let t=0;t<$.length;t+=1)R[t]=Ot(wt(e,$,t));let j=e[0],_=[];for(let t=0;t<j.length;t+=1)_[t]=St(Tt(e,j,t));let k=e[2]&&Gt(e);return{c(){t=(0,o.bG)("div"),n=(0,o.bG)("div"),i=(0,o.bG)("span"),i.textContent="Displaying",a=(0,o.Dh)(),s=(0,o.bG)("div"),l=(0,o.bG)("select");for(let e=0;e<R.length;e+=1)R[e].c();c=(0,o.Dh)(),u=(0,o.bG)("div"),d=(0,o.bG)("span"),d.textContent="for",h=(0,o.Dh)(),p=(0,o.bG)("div"),m=(0,o.bG)("select");for(let e=0;e<_.length;e+=1)_[e].c();f=(0,o.Dh)(),k&&k.c(),(0,o.Lj)(i,"class","uk-form-label svelte-vpx6lo"),(0,o.Lj)(l,"id","option-indicator"),(0,o.Lj)(l,"aria-label","indicator options"),(0,o.Lj)(l,"class","uk-select"),void 0===e[5]&&(0,o.P$)((()=>e[10].call(l))),(0,o.Lj)(s,"class","uk-form-controls svelte-vpx6lo"),(0,o.Lj)(n,"class",r="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"),(0,o.Lj)(d,"class","uk-form-label svelte-vpx6lo"),(0,o.Lj)(m,"id","option-geo-level"),(0,o.Lj)(m,"aria-label","geographic level"),(0,o.Lj)(m,"class","uk-select"),void 0===e[6]&&(0,o.P$)((()=>e[11].call(m))),(0,o.Lj)(p,"class","uk-form-controls svelte-vpx6lo"),(0,o.Lj)(u,"class",g="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"),(0,o.Lj)(t,"class",v="container-bg container-style uk-grid-small "+e[1]+" svelte-vpx6lo"),(0,o.Lj)(t,"data-uk-grid","")},m(r,g){(0,o.$T)(r,t,g),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(n,a),(0,o.R3)(n,s),(0,o.R3)(s,l);for(let e=0;e<R.length;e+=1)R[e].m(l,null);(0,o.oW)(l,e[5]),(0,o.R3)(t,c),(0,o.R3)(t,u),(0,o.R3)(u,d),(0,o.R3)(u,h),(0,o.R3)(u,p),(0,o.R3)(p,m);for(let e=0;e<_.length;e+=1)_[e].m(m,null);(0,o.oW)(m,e[6]),(0,o.R3)(t,f),k&&k.m(t,null),b=!0,y||(L=[(0,o.oL)(l,"change",e[10]),(0,o.oL)(m,"change",e[11])],y=!0)},p(e,[i]){if(16&i){let t;for($=e[4],t=0;t<$.length;t+=1){const n=wt(e,$,t);R[t]?R[t].p(n,i):(R[t]=Ot(n),R[t].c(),R[t].m(l,null))}for(;t<R.length;t+=1)R[t].d(1);R.length=$.length}if(48&i&&(0,o.oW)(l,e[5]),(!b||4&i&&r!==(r="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"))&&(0,o.Lj)(n,"class",r),129&i){let t;for(j=e[0],t=0;t<j.length;t+=1){const n=Tt(e,j,t);_[t]?_[t].p(n,i):(_[t]=St(n),_[t].c(),_[t].m(m,null))}for(;t<_.length;t+=1)_[t].d(1);_.length=j.length}65&i&&(0,o.oW)(m,e[6]),(!b||4&i&&g!==(g="uk-width-1-1 uk-width-1-"+(e[2]?"3":"2")+"@m block svelte-vpx6lo"))&&(0,o.Lj)(u,"class",g),e[2]?k?(k.p(e,i),4&i&&(0,o.Ui)(k,1)):(k=Gt(e),k.c(),(0,o.Ui)(k,1),k.m(t,null)):k&&((0,o.dv)(),(0,o.et)(k,1,1,(()=>{k=null})),(0,o.gb)()),(!b||2&i&&v!==(v="container-bg container-style uk-grid-small "+e[1]+" svelte-vpx6lo"))&&(0,o.Lj)(t,"class",v)},i(e){b||((0,o.Ui)(k),b=!0)},o(e){(0,o.et)(k),b=!1},d(e){e&&(0,o.og)(t),(0,o.RM)(R,e),(0,o.RM)(_,e),k&&k.d(),y=!1,(0,o.j7)(L)}}}function Vt(e,t,n){let a,s,l,r,c,u,d;(0,o.FI)(e,i.cQ,(e=>n(8,r=e))),(0,o.FI)(e,i.f8,(e=>n(5,c=e))),(0,o.FI)(e,i.pk,(e=>n(6,u=e))),(0,o.FI)(e,i.PC,(e=>n(7,d=e)));let{levels:h=i.Nz}=t,{className:p=""}=t,{showDate:m=!0}=t;return e.$$set=e=>{"levels"in e&&n(0,h=e.levels),"className"in e&&n(1,p=e.className),"showDate"in e&&n(2,m=e.showDate)},e.$$.update=()=>{256&e.$$.dirty&&n(3,a=(0,gt.oy)(r)),8&e.$$.dirty&&void 0!==a&&i.cQ.set((0,gt.NC)(a)),1&e.$$.dirty&&n(9,s=new Set(h.map((e=>e.id)))),512&e.$$.dirty&&n(4,l=i.a4.map((e=>({label:e.label,sensors:e.sensors.filter((e=>e.levels.some((e=>s.has(e)))))}))).filter((e=>e.sensors.length>0)))},[h,p,m,a,l,c,u,d,r,s,function(){c=(0,o.SA)(this),i.f8.set(c),n(4,l),n(9,s),n(0,h)},function(){u=(0,o.SA)(this),i.pk.set(u),n(0,h)},function(e){a=e,n(3,a),n(8,r)}]}class zt extends o.f_{constructor(e){super(),(0,o.S1)(this,e,Vt,Ct,o.N8,{levels:0,className:1,showDate:2})}}const Mt=zt;var Pt=n(8647),Nt=n(2754);function At(e){let t,n,i=e[2].displayName+"";return{c(){t=(0,o.fL)(i),n=(0,o.fL)(" on")},m(e,i){(0,o.$T)(e,t,i),(0,o.$T)(e,n,i)},p(e,n){4&n&&i!==(i=e[2].displayName+"")&&(0,o.rT)(t,i)},d(e){e&&(0,o.og)(t),e&&(0,o.og)(n)}}}function It(e){let t,n,i,a,s,l,r,c,u=e[0].yAxis+"",d=e[0].formatValue(e[2].value)+"",h=e[0].hasStdErr&&null!=e[2].stderr&&Et(e);return{c(){t=(0,o.bG)("tr"),n=(0,o.bG)("th"),i=(0,o.fL)(u),a=(0,o.Dh)(),s=(0,o.bG)("td"),l=(0,o.fL)(d),r=(0,o.Dh)(),h&&h.c(),c=(0,o.cS)(),(0,o.Lj)(n,"class","svelte-1icnyvz"),(0,o.Lj)(s,"class","right svelte-1icnyvz")},m(e,u){(0,o.$T)(e,t,u),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(t,a),(0,o.R3)(t,s),(0,o.R3)(s,l),(0,o.$T)(e,r,u),h&&h.m(e,u),(0,o.$T)(e,c,u)},p(e,t){1&t&&u!==(u=e[0].yAxis+"")&&(0,o.rT)(i,u),5&t&&d!==(d=e[0].formatValue(e[2].value)+"")&&(0,o.rT)(l,d),e[0].hasStdErr&&null!=e[2].stderr?h?h.p(e,t):(h=Et(e),h.c(),h.m(c.parentNode,c)):h&&(h.d(1),h=null)},d(e){e&&(0,o.og)(t),e&&(0,o.og)(r),h&&h.d(e),e&&(0,o.og)(c)}}}function Ft(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b,y,L,$,R,j,_,k,T,w,x,D,O,S,C,V,z,M,P,N,A,I=e[0].yAxis+"",F=(0,G.mn)(e[2].date_value)+"",E=e[0].formatValue(e[2].count)+"",Z=e[0].formatValue(e[2].countRatio)+"",H=e[0].formatValue(e[2].avg)+"",U=e[0].formatValue(e[2].avgRatio)+"",B=(0,G.mn)(e[2].date_value)+"",Y=e[0].formatValue(e[2].countCumulative)+"",q=e[0].formatValue(e[2].countRatioCumulative)+"";return{c(){t=(0,o.bG)("tr"),n=(0,o.bG)("th"),i=(0,o.fL)(I),a=(0,o.Dh)(),s=(0,o.bG)("th"),s.textContent="Count",l=(0,o.Dh)(),r=(0,o.bG)("th"),r.textContent="Ratios (per 100,000)",c=(0,o.Dh)(),u=(0,o.bG)("tr"),d=(0,o.bG)("th"),h=(0,o.fL)(F),p=(0,o.Dh)(),m=(0,o.bG)("td"),g=(0,o.fL)(E),f=(0,o.Dh)(),v=(0,o.bG)("td"),b=(0,o.fL)(Z),y=(0,o.Dh)(),L=(0,o.bG)("tr"),$=(0,o.bG)("th"),$.textContent="7-day average",R=(0,o.Dh)(),j=(0,o.bG)("td"),_=(0,o.fL)(H),k=(0,o.Dh)(),T=(0,o.bG)("td"),w=(0,o.fL)(U),x=(0,o.Dh)(),D=(0,o.bG)("tr"),O=(0,o.bG)("th"),S=(0,o.fL)(B),C=(0,o.fL)(" (cumulative)"),V=(0,o.Dh)(),z=(0,o.bG)("td"),M=(0,o.fL)(Y),P=(0,o.Dh)(),N=(0,o.bG)("td"),A=(0,o.fL)(q),(0,o.Lj)(n,"class","svelte-1icnyvz"),(0,o.Lj)(s,"class","area svelte-1icnyvz"),(0,o.Lj)(r,"class","area svelte-1icnyvz"),(0,o.Lj)(d,"class","svelte-1icnyvz"),(0,o.Lj)(m,"class","right svelte-1icnyvz"),(0,o.Lj)(v,"class","right svelte-1icnyvz"),(0,o.Lj)($,"class","svelte-1icnyvz"),(0,o.Lj)(j,"class","right svelte-1icnyvz"),(0,o.Lj)(T,"class","right svelte-1icnyvz"),(0,o.Lj)(O,"class","svelte-1icnyvz"),(0,o.Lj)(z,"class","right svelte-1icnyvz"),(0,o.Lj)(N,"class","right svelte-1icnyvz")},m(e,G){(0,o.$T)(e,t,G),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(t,a),(0,o.R3)(t,s),(0,o.R3)(t,l),(0,o.R3)(t,r),(0,o.$T)(e,c,G),(0,o.$T)(e,u,G),(0,o.R3)(u,d),(0,o.R3)(d,h),(0,o.R3)(u,p),(0,o.R3)(u,m),(0,o.R3)(m,g),(0,o.R3)(u,f),(0,o.R3)(u,v),(0,o.R3)(v,b),(0,o.$T)(e,y,G),(0,o.$T)(e,L,G),(0,o.R3)(L,$),(0,o.R3)(L,R),(0,o.R3)(L,j),(0,o.R3)(j,_),(0,o.R3)(L,k),(0,o.R3)(L,T),(0,o.R3)(T,w),(0,o.$T)(e,x,G),(0,o.$T)(e,D,G),(0,o.R3)(D,O),(0,o.R3)(O,S),(0,o.R3)(O,C),(0,o.R3)(D,V),(0,o.R3)(D,z),(0,o.R3)(z,M),(0,o.R3)(D,P),(0,o.R3)(D,N),(0,o.R3)(N,A)},p(e,t){1&t&&I!==(I=e[0].yAxis+"")&&(0,o.rT)(i,I),4&t&&F!==(F=(0,G.mn)(e[2].date_value)+"")&&(0,o.rT)(h,F),5&t&&E!==(E=e[0].formatValue(e[2].count)+"")&&(0,o.rT)(g,E),5&t&&Z!==(Z=e[0].formatValue(e[2].countRatio)+"")&&(0,o.rT)(b,Z),5&t&&H!==(H=e[0].formatValue(e[2].avg)+"")&&(0,o.rT)(_,H),5&t&&U!==(U=e[0].formatValue(e[2].avgRatio)+"")&&(0,o.rT)(w,U),4&t&&B!==(B=(0,G.mn)(e[2].date_value)+"")&&(0,o.rT)(S,B),5&t&&Y!==(Y=e[0].formatValue(e[2].countCumulative)+"")&&(0,o.rT)(M,Y),5&t&&q!==(q=e[0].formatValue(e[2].countRatioCumulative)+"")&&(0,o.rT)(A,q)},d(e){e&&(0,o.og)(t),e&&(0,o.og)(c),e&&(0,o.og)(u),e&&(0,o.og)(y),e&&(0,o.og)(L),e&&(0,o.og)(x),e&&(0,o.og)(D)}}}function Et(e){let t,n,i,a,s,l=e[0].formatValue(e[2].stderr)+"";return{c(){t=(0,o.bG)("tr"),n=(0,o.bG)("th"),n.textContent="Standard Error",i=(0,o.Dh)(),a=(0,o.bG)("td"),s=(0,o.fL)(l),(0,o.Lj)(n,"class","svelte-1icnyvz"),(0,o.Lj)(a,"class","right svelte-1icnyvz")},m(e,l){(0,o.$T)(e,t,l),(0,o.R3)(t,n),(0,o.R3)(t,i),(0,o.R3)(t,a),(0,o.R3)(a,s)},p(e,t){5&t&&l!==(l=e[0].formatValue(e[2].stderr)+"")&&(0,o.rT)(s,l)},d(e){e&&(0,o.og)(t)}}}function Zt(e){let t,n,i,a,s,l,r,c=(0,G.mn)(e[2].date_value)+"",u=e[2].displayName&&At(e);function d(e,t){return e[0].isCasesOrDeath?Ft:It}let h=d(e),p=h(e);return{c(){t=(0,o.bG)("div"),n=(0,o.bG)("h5"),u&&u.c(),i=(0,o.Dh)(),a=(0,o.fL)(c),s=(0,o.Dh)(),l=(0,o.bG)("table"),r=(0,o.bG)("tbody"),p.c(),(0,o.Lj)(n,"class","svelte-1icnyvz"),(0,o.Lj)(t,"aria-label","tooltip"),(0,o.Lj)(t,"class","tooltip svelte-1icnyvz"),(0,o.VH)(t,"hidden",e[1])},m(e,c){(0,o.$T)(e,t,c),(0,o.R3)(t,n),u&&u.m(n,null),(0,o.R3)(n,i),(0,o.R3)(n,a),(0,o.R3)(t,s),(0,o.R3)(t,l),(0,o.R3)(l,r),p.m(r,null)},p(e,[s]){e[2].displayName?u?u.p(e,s):(u=At(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),4&s&&c!==(c=(0,G.mn)(e[2].date_value)+"")&&(0,o.rT)(a,c),h===(h=d(e))&&p?p.p(e,s):(p.d(1),p=h(e),p&&(p.c(),p.m(r,null))),2&s&&(0,o.VH)(t,"hidden",e[1])},i:o.ZT,o:o.ZT,d(e){e&&(0,o.og)(t),u&&u.d(),p.d()}}}function Ht(e,t,n){let{sensor:o}=t,{hidden:i=!1}=t,{item:a}=t;return e.$$set=e=>{"sensor"in e&&n(0,o=e.sensor),"hidden"in e&&n(1,i=e.hidden),"item"in e&&n(2,a=e.item)},[o,i,a]}class Ut extends o.f_{constructor(e){super(),(0,o.S1)(this,e,Ht,Zt,o.N8,{sensor:0,hidden:1,item:2})}}const Bt=Ut;function Yt(e){let t,n,i;return n=new Nt.Z({props:{data:e[0].data,spec:e[0].spec,noDataText:e[0].noDataText,signals:{currentDate:e[4],highlightTimeValue:e[1]},signalListeners:["highlight"],eventListeners:["click"],tooltip:Bt,tooltipProps:{sensor:e[0].sensor}}}),n.$on("click",(function(){(0,o.sB)(e[2])&&e[2].apply(this,arguments)})),n.$on("signal",(function(){(0,o.sB)(e[3])&&e[3].apply(this,arguments)})),{c(){t=(0,o.bG)("div"),(0,o.YC)(n.$$.fragment),(0,o.Lj)(t,"class","single-sensor-chart vega-wrapper svelte-1dx38td")},m(e,a){(0,o.$T)(e,t,a),(0,o.ye)(n,t,null),i=!0},p(t,[o]){e=t;const i={};1&o&&(i.data=e[0].data),1&o&&(i.spec=e[0].spec),1&o&&(i.noDataText=e[0].noDataText),18&o&&(i.signals={currentDate:e[4],highlightTimeValue:e[1]}),1&o&&(i.tooltipProps={sensor:e[0].sensor}),n.$set(i)},i(e){i||((0,o.Ui)(n.$$.fragment,e),i=!0)},o(e){(0,o.et)(n.$$.fragment,e),i=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(n)}}}function qt(e,t,n){let a;(0,o.FI)(e,i.tU,(e=>n(4,a=e)));let{s}=t,{highlightTimeValue:l}=t,{onClick:r}=t,{onHighlight:c}=t;return e.$$set=e=>{"s"in e&&n(0,s=e.s),"highlightTimeValue"in e&&n(1,l=e.highlightTimeValue),"onClick"in e&&n(2,r=e.onClick),"onHighlight"in e&&n(3,c=e.onHighlight)},[s,l,r,c,a]}class Xt extends o.f_{constructor(e){super(),(0,o.S1)(this,e,qt,Yt,o.N8,{s:0,highlightTimeValue:1,onClick:2,onHighlight:3})}}const Wt=Xt;var Jt=n(5115),Kt=n(7278);function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){tn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nn={mark:{type:"area",interpolate:"monotone"},encoding:{color:{field:"geo_value"},opacity:{value:.25},y:{field:"value_lower_bound",type:"quantitative"},y2:{field:"value_upper_bound"}}},on=[{calculate:"datum.value == null ? null : datum.value - datum.stderr",as:"value_lower_bound"},{calculate:"datum.value == null ? null : datum.value + datum.stderr",as:"value_upper_bound"}],an={field:"date_value",type:"temporal",axis:{orient:"bottom",labels:!1,title:null}},sn=en(en({},an),{},{axis:{orient:"bottom",title:null,format:"%m/%d",formatType:"time",tickCount:"week",grid:!0,labelSeparation:10}});function ln(e){return e?{field:"geo_value",type:"nominal",scale:{domain:e.map((e=>e.info.propertyId)),range:e.map(((e,t)=>0===t?"grey":e.color))}}:{value:"grey"}}function rn(e,t){return(0,Jt.Z)({},e,{vconcat:[{height:Math.floor(t.height-40-110)},{height:40}]})}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hn(e,t,n,o){return Promise.all(t.map((t=>{const i=t.info;return i.level===r.levelMegaCounty.id?[]:(0,gt.Cg)(e,i.level,i.propertyId,n,o,!1,{geo_value:i.propertyId}).then((t=>(0,gt.nT)(t,e))).then((e=>e.map((e=>(e.displayName=i.displayName,e)))))}))).then((e=>e.flat()))}function pn(e,t,n,o){return t&&t.level!==r.levelMegaCounty.id?(0,gt.Cg)(e,t.level,t.propertyId,n,o,!1,{geo_value:t.propertyId}).then((t=>(0,gt.nT)(t,e))).then((e=>e.map((e=>(e.displayName=t.displayName,e))))):Promise.resolve([])}const mn=(0,n(8711).Z)((e=>{i.SB.set(e)}),1,{leading:!1,trailing:!0});function gn(e){const t=function(e){const t=e.detail.value;return t&&Array.isArray(t.date_value)&&t.date_value.length>0?Number.parseInt((0,gt.NC)(t.date_value[0]),10):null}(e);t&&mn(t)}const fn=[{calculate:"datum.value == null ? null : (datum.value - datum.stderr) / 100",as:"value_lower_bound"},{calculate:"datum.value == null ? null : (datum.value + datum.stderr) / 100",as:"value_upper_bound"}];function vn(e,t,n,o){const i="percent"===e.format,a=i?e=>e/100:e=>e,s=o&&o.field?o.field:i?"pValue":"value",l=!(!o||!o.domain),r=a(l?o.domain[1]:0),c=[{as:"clipped",calculate:"".concat(!l," || datum.").concat(s," == null ? false : datum.").concat(s," > ").concat(r)},{as:"clippedData",calculate:"datum.clipped ? datum.".concat(s," : null")}];return{$schema:"https://vega.github.io/schema/vega-lite/v4.json",data:{name:"values"},padding:{left:50,top:6,bottom:20,right:2},autosize:{type:"none",contains:"padding",resize:!0},transform:[...e.hasStdErr?i?fn:on:[],{as:"pValue",calculate:"datum.value == null ? null : datum.value / 100"},...l?c:[]],resolve:{scale:{y:"shared"}},encoding:{color:ln(t),x:{field:"date_value",type:"temporal",axis:{title:null,format:"%m/%d",formatType:"cachedTime",tickCount:"month"},scale:n?{domain:[n[0].getTime(),n[1].getTime()]}:{}}},layer:[...e.hasStdErr?[nn]:[],{mark:{type:"line",interpolate:"linear"},encoding:{y:{field:s,type:"quantitative",scale:{domainMin:l?a(o.domain[0]):0,domainMax:l?a(o.domain[1]):void 0,clamp:!0,nice:!l},axis:un(un({},i?{format:".1%",formatType:"cachedNumber"}:{}),{},{title:null,tickCount:3,minExtent:25})}}},...l?[{mark:{type:"text",text:"",size:12,baseline:"bottom",dx:-.3,dy:3.5,stroke:"#FFAAAA",strokeOpacity:.5},encoding:{y:{field:"clippedData",type:"quantitative"}}}]:[],{selection:{highlight:{type:"single",empty:"none",on:"mouseover",nearest:!0,encodings:["x"],clear:"mouseout"}},mark:{type:"rule",strokeWidth:2.5,color:"white",opacity:.001,tooltip:!0}},{mark:{type:"point",radius:1,stroke:null,fill:"grey"},encoding:{opacity:{condition:[{selection:"highlight",value:1},{test:"datum.time_value == highlightTimeValue",value:1}],value:0},y:{field:s,type:"quantitative"}}},{mark:{type:"rule"},encoding:{opacity:{condition:[{selection:"highlight",value:1},{test:"datum.time_value == highlightTimeValue",value:1}],value:0},y:{field:s,type:"quantitative"}}},Kt.Nc],config:{customFormatTypes:!0,legend:{disable:!0}}}}function bn(e,t,n){const o=e.slice();return o[15]=t[n],o}function yn(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b,y,L,$=e[15].sensor.plotTitleText+"";function R(){return e[13](e[15])}function j(){return e[14](e[15])}return d=new me({props:{sensor:e[15].sensor}}),g=new Wt({props:{s:e[15],highlightTimeValue:e[4],onClick:e[5],onHighlight:gn}}),{c(){t=(0,o.bG)("li"),n=(0,o.bG)("div"),i=(0,o.bG)("button"),a=(0,o.fL)($),l=(0,o.Dh)(),r=(0,o.bG)("div"),c=(0,o.Dh)(),u=(0,o.bG)("div"),(0,o.YC)(d.$$.fragment),h=(0,o.Dh)(),p=(0,o.bG)("button"),m=(0,o.Dh)(),(0,o.YC)(g.$$.fragment),f=(0,o.Dh)(),(0,o.Lj)(i,"class","uk-button uk-button-text svelte-1gbkhdb"),(0,o.Lj)(i,"title",s="function"==typeof e[15].sensor.tooltipText?e[15].sensor.tooltipText():e[15].sensor.tooltipText),(0,o.Lj)(r,"class","grow svelte-1gbkhdb"),(0,o.Lj)(p,"class","uk-icon-button uk-icon-button-small svelte-1gbkhdb"),(0,o.Lj)(p,"title","Show as detail view"),(0,o.Lj)(p,"data-uk-icon","icon: search; ratio: 0.8"),(0,o.VH)(p,"hidden",!e[1]),(0,o.VH)(p,"uk-active",e[0]===e[15].sensor),(0,o.Lj)(u,"class","toolbar svelte-1gbkhdb"),(0,o.Lj)(n,"class","header svelte-1gbkhdb"),(0,o.Lj)(t,"data-testid",v=e[15].sensor.key),(0,o.Lj)(t,"class","svelte-1gbkhdb"),(0,o.VH)(t,"selected",e[3]===e[15].sensor.key)},m(e,s){(0,o.$T)(e,t,s),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(i,a),(0,o.R3)(n,l),(0,o.R3)(n,r),(0,o.R3)(n,c),(0,o.R3)(n,u),(0,o.ye)(d,u,null),(0,o.R3)(u,h),(0,o.R3)(u,p),(0,o.R3)(t,m),(0,o.ye)(g,t,null),(0,o.R3)(t,f),b=!0,y||(L=[(0,o.oL)(i,"click",(0,o.AT)(R)),(0,o.oL)(p,"click",(0,o.XE)(j))],y=!0)},p(n,l){e=n,(!b||4&l)&&$!==($=e[15].sensor.plotTitleText+"")&&(0,o.rT)(a,$),(!b||4&l&&s!==(s="function"==typeof e[15].sensor.tooltipText?e[15].sensor.tooltipText():e[15].sensor.tooltipText))&&(0,o.Lj)(i,"title",s);const r={};4&l&&(r.sensor=e[15].sensor),d.$set(r),2&l&&(0,o.VH)(p,"hidden",!e[1]),5&l&&(0,o.VH)(p,"uk-active",e[0]===e[15].sensor);const c={};4&l&&(c.s=e[15]),16&l&&(c.highlightTimeValue=e[4]),g.$set(c),(!b||4&l&&v!==(v=e[15].sensor.key))&&(0,o.Lj)(t,"data-testid",v),12&l&&(0,o.VH)(t,"selected",e[3]===e[15].sensor.key)},i(e){b||((0,o.Ui)(d.$$.fragment,e),(0,o.Ui)(g.$$.fragment,e),b=!0)},o(e){(0,o.et)(d.$$.fragment,e),(0,o.et)(g.$$.fragment,e),b=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(d),(0,o.vp)(g),y=!1,(0,o.j7)(L)}}}function Ln(e){let t,n,i=e[2],a=[];for(let t=0;t<i.length;t+=1)a[t]=yn(bn(e,i,t));const s=e=>(0,o.et)(a[e],1,1,(()=>{a[e]=null}));return{c(){t=(0,o.bG)("ul");for(let e=0;e<a.length;e+=1)a[e].c();(0,o.Lj)(t,"class","root svelte-1gbkhdb")},m(e,i){(0,o.$T)(e,t,i);for(let e=0;e<a.length;e+=1)a[e].m(t,null);n=!0},p(e,[n]){if(63&n){let l;for(i=e[2],l=0;l<i.length;l+=1){const s=bn(e,i,l);a[l]?(a[l].p(s,n),(0,o.Ui)(a[l],1)):(a[l]=yn(s),a[l].c(),(0,o.Ui)(a[l],1),a[l].m(t,null))}for((0,o.dv)(),l=i.length;l<a.length;l+=1)s(l);(0,o.gb)()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)(0,o.Ui)(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)(0,o.et)(a[e]);n=!1},d(e){e&&(0,o.og)(t),(0,o.RM)(a,e)}}}function $n(e,t,n){let a,s,l,c,u,d,h;(0,o.FI)(e,i.r_,(e=>n(12,u=e))),(0,o.FI)(e,i.f8,(e=>n(3,d=e))),(0,o.FI)(e,i.SB,(e=>n(4,h=e)));let{detail:p=null}=t,{levels:m=r.levelList}=t,g=u[0],f=u[1],{selections:v=[]}=t;return e.$$set=e=>{"detail"in e&&n(0,p=e.detail),"levels"in e&&n(6,m=e.levels),"selections"in e&&n(7,v=e.selections)},e.$$.update=()=>{64&e.$$.dirty&&n(10,a=new Set(m.map((e=>e.id)))),1024&e.$$.dirty&&n(11,s=i.i7.filter((e=>e.levels.some((e=>a.has(e)))))),4864&e.$$.dirty&&(g.getTime()!==u[0].getTime()&&n(8,g=u[0]),f.getTime()!==u[1].getTime()&&n(9,f=u[1])),128&e.$$.dirty&&n(1,l=v.length>0),2944&e.$$.dirty&&n(2,c=s.map((e=>function(e,t,n,o){const i=t.length<2,a=0===t.length?null:t[0].info;return{sensor:e,data:i?pn(e,a,n,o):hn(e,t,n,o),spec:vn(e,t,[n,o]),noDataText:a?a.level===r.levelMegaCounty.id?"Please select a county":"No data available":"No location selected"}}(e,v,g,f))))},[p,l,c,d,h,function(e){const t=function(e){const t=e.detail.item;return t&&t.isVoronoi?t.datum.datum.time_value:null}(e);t&&((0,Le.L)("side-panel","set-date",t),i.cQ.set(t))},m,v,g,f,a,s,u,e=>{(0,Le.L)("side-panel","set-sensor",e.sensor.key),i.f8.set(e.sensor.key)},e=>{(0,Le.L)("side-panel",p===e.sensor?"hide-detail":"show-detail",e.sensor.key),n(0,p=p===e.sensor?null:e.sensor)}]}class Rn extends o.f_{constructor(e){super(),(0,o.S1)(this,e,$n,Ln,o.N8,{detail:0,levels:6,selections:7})}}const jn=Rn;var _n=n(6747);function kn(e){let t;return{c(){t=(0,o.bG)("div"),t.innerHTML='<div class="legend-avg svelte-feepaf"></div> \n    <div>7-day average</div> \n    <div class="legend-avg legend-count svelte-feepaf"></div> \n    <div>Raw data</div>',(0,o.Lj)(t,"class","legend svelte-feepaf")},m(e,n){(0,o.$T)(e,t,n)},d(e){e&&(0,o.og)(t)}}}function Tn(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b;s=new me({props:{sensor:e[0],large:!0}});let y={data:e[4],spec:e[5],patchSpec:rn,noDataText:e[3],signals:{currentDate:e[7]},signalListeners:["dateRange"],tooltip:Bt,tooltipProps:{sensor:e[0]}};d=new Nt.Z({props:y}),e[25](d),d.$on("signal",e[9]);let L=e[0].isCasesOrDeath&&!e[6]&&kn();return g=new Ve({props:{center:!0,sensor:e[0]}}),{c(){t=(0,o.bG)("div"),n=(0,o.bG)("button"),a=(0,o.Dh)(),(0,o.YC)(s.$$.fragment),l=(0,o.Dh)(),r=(0,o.bG)("button"),c=(0,o.Dh)(),u=(0,o.bG)("div"),(0,o.YC)(d.$$.fragment),h=(0,o.Dh)(),L&&L.c(),p=(0,o.Dh)(),m=(0,o.bG)("div"),(0,o.YC)(g.$$.fragment),(0,o.Lj)(n,"title","Download this view"),(0,o.Lj)(n,"class","uk-icon-button"),(0,o.Lj)(n,"data-uk-icon","icon: download"),n.disabled=i=!e[2],(0,o.Lj)(r,"class","uk-icon-button"),(0,o.Lj)(r,"data-uk-close",""),(0,o.Lj)(r,"title","Close this detail view"),(0,o.Lj)(t,"class","buttons svelte-feepaf"),(0,o.Lj)(u,"class","single-sensor-chart vega-wrapper svelte-feepaf"),(0,o.Lj)(m,"class","encoding svelte-feepaf")},m(i,y){(0,o.$T)(i,t,y),(0,o.R3)(t,n),(0,o.R3)(t,a),(0,o.ye)(s,t,null),(0,o.R3)(t,l),(0,o.R3)(t,r),e[23](r),(0,o.$T)(i,c,y),(0,o.$T)(i,u,y),(0,o.ye)(d,u,null),(0,o.$T)(i,h,y),L&&L.m(i,y),(0,o.$T)(i,p,y),(0,o.$T)(i,m,y),(0,o.ye)(g,m,null),f=!0,v||(b=[(0,o.oL)(window,"keydown",e[10]),(0,o.oL)(n,"click",e[12]),(0,o.oL)(r,"click",e[24])],v=!0)},p(e,[t]){(!f||4&t&&i!==(i=!e[2]))&&(n.disabled=i);const o={};1&t&&(o.sensor=e[0]),s.$set(o);const a={};16&t&&(a.data=e[4]),32&t&&(a.spec=e[5]),8&t&&(a.noDataText=e[3]),128&t&&(a.signals={currentDate:e[7]}),1&t&&(a.tooltipProps={sensor:e[0]}),d.$set(a),e[0].isCasesOrDeath&&!e[6]?L||(L=kn(),L.c(),L.m(p.parentNode,p)):L&&(L.d(1),L=null);const l={};1&t&&(l.sensor=e[0]),g.$set(l)},i(e){f||((0,o.Ui)(s.$$.fragment,e),(0,o.Ui)(d.$$.fragment,e),(0,o.Ui)(g.$$.fragment,e),f=!0)},o(e){(0,o.et)(s.$$.fragment,e),(0,o.et)(d.$$.fragment,e),(0,o.et)(g.$$.fragment,e),f=!1},d(n){n&&(0,o.og)(t),(0,o.vp)(s),e[23](null),n&&(0,o.og)(c),n&&(0,o.og)(u),e[25](null),(0,o.vp)(d),n&&(0,o.og)(h),L&&L.d(n),n&&(0,o.og)(p),n&&(0,o.og)(m),(0,o.vp)(g),v=!1,(0,o.j7)(b)}}}function wn(e,t,n){let a,l,c,u,d,h,p,m,g,f,v,b,y,L,$;(0,o.FI)(e,i.V_,(e=>n(15,y=e))),(0,o.FI)(e,i.r_,(e=>n(21,L=e))),(0,o.FI)(e,i.tU,(e=>n(7,$=e)));const R=(0,s.x)();let{sensor:j}=t,{selections:_=[]}=t,k=null,T=null;function w(){T&&(T.focus(),T=null)}(0,s.H3)((()=>{k&&(T=document.activeElement,k.focus())}));let x=null;return e.$$set=e=>{"sensor"in e&&n(0,j=e.sensor),"selections"in e&&n(13,_=e.selections)},e.$$.update=()=>{32769&e.$$.dirty&&n(14,a="function"==typeof j.mapTitleText?j.mapTitleText(y):j.mapTitleText),8192&e.$$.dirty&&n(16,l=_.length>0?_[0].info:null),8192&e.$$.dirty&&n(17,c=_.length>0),8192&e.$$.dirty&&n(18,u=_.length>1),65536&e.$$.dirty&&n(19,d=Boolean(l)&&l.level===r.levelMegaCounty.id),655360&e.$$.dirty&&n(3,h=c?d?"Please select a county":"No data available":"No location selected"),860161&e.$$.dirty&&n(4,p=u?function(e,t){return Promise.all(t.map((t=>{const n=t.info;return n.level===r.levelMegaCounty.id?[]:(0,_n.Cg)(e,n.level,n.propertyId,void 0,void 0,!1,{geo_value:n.propertyId}).then(_n.nT).then((e=>e.map((e=>(e.displayName=n.displayName,e)))))}))).then((e=>e.flat()))}(j,_):l&&!d?(0,_n.Cg)(j,l.level,l.propertyId,void 0,void 0,!1,{geo_value:l.propertyId}).then((e=>(0,_n.nT)(e,j))):[]),3145728&e.$$.dirty&&n(20,m=m||L),8193&e.$$.dirty&&n(22,g="".concat(j.name," in ").concat(_.length>0?_.map((e=>e.info.displayName)).join(", "):"Unknown")),32769&e.$$.dirty&&(f=(0,r.primaryValue)(j,y)),4251649&e.$$.dirty&&n(5,v=function(e,t,n,o,i){const a="countRatioCumulative"===t||"avgRatio"===t?" per 100,000 people":"",s=e.yAxis+a,l="countRatioCumulative"===t||"countCumulative"===t?60:50,r={$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:{text:i,font:'"Open Sans", Helvetica, sans-serif',fontSize:14.08,fontWeight:700,lineHeight:22,color:"#666"},data:{name:"values",values:o?[{date_value:o[0],value:0},{date_value:o[1],value:1}]:[]},autosize:{type:"none",contains:"padding",resize:!0},padding:{left:l,right:2,top:50,bottom:5},transform:e.hasStdErr?on:[],vconcat:[{encoding:{x:en(en({},an),{},{scale:{domain:{selection:"dateRange"}}})},resolve:{axis:{x:"independent"}},layer:[{mark:{type:"line",interpolate:"monotone"},encoding:{color:ln(n),x:en({},sn),y:{field:t,type:"quantitative",scale:{domainMin:0},axis:{minExtent:25,title:s}}}},{selection:{highlight:{type:"single",empty:"none",nearest:!0,encodings:["x"],on:"mouseover",clear:"mouseout"}},mark:{type:"circle",tooltip:!0},encoding:{color:{field:"geo_value"},x:en(en({},sn),{},{axis:en(en({},sn.axis),{},{labels:!1,grid:!1,tickCount:"day"})}),y:{field:t,type:"quantitative"}}},...e.hasStdErr?[nn]:[],{transform:[{filter:{selection:"highlight"}}],mark:"rule",encoding:{y:{field:t,type:"quantitative"}}},Kt.Nc]},{height:40,padding:{top:0},view:{cursor:"col-resize"},encoding:{color:{field:"geo_value"},x:en({},sn),y:{field:t,type:"quantitative",axis:{minExtent:25,tickCount:3,title:" "}}},layer:[{selection:{dateRange:{type:"interval",encodings:["x"],init:{x:[o[0].getTime(),o[1].getTime()]},mark:{cursor:"move"}}},mark:{type:"line",interpolate:"monotone"},encoding:{y:{field:t,type:"quantitative",axis:{minExtent:25,tickCount:3,title:" "}}}},...e.hasStdErr?[nn]:[],{selection:{highlight2:{type:"single",empty:"none",nearest:!0,encodings:["x"],on:"mouseover",clear:"mouseout"}},transform:[{filter:{selection:"highlight2"}}],mark:"rule",encoding:{y:{field:t,type:"quantitative"}}},Kt.Nc]}],config:{customFormatTypes:!0,legend:{disable:!0}}};if(e.isCasesOrDeath){const e={mark:{type:"line",interpolate:"monotone",opacity:.2},encoding:{y:{field:t.replace("avg","count"),type:"quantitative"},color:{field:"geo_value"}}};r.vconcat[0].layer.unshift(e),r.vconcat[1].layer.unshift(e)}return r}(j,(0,r.primaryValue)(j,y),_,(0===m.length&&n(20,m=L),m),[g,a])),32768&e.$$.dirty&&n(6,b=y.cumulative)},[j,k,x,h,p,v,b,$,R,function(e){if("dateRange"!==e.detail.name)return;const t=e.detail.value&&e.detail.value.date_value;t&&Array.isArray(t)&&t.length>0&&(!Number.isNaN(t[0])&&t[0]!==m[0].getTime()||!Number.isNaN(t[1])&&t[1]!==m[1].getTime())&&n(20,m=[new Date(t[0]),new Date(t[1])])},function(e){"Escape"!==e.key&&"Esc"!==e.key||((0,Le.L)("detail-view","close","keyboard"),w(),R("close"))},w,function(){x.vegaAccessor().then((e=>{const t=e.toImageURL("png",2),n=c?_.map((e=>e.info.displayName)).join(", "):"Unknown";t.then((e=>{(0,C.GR)(e,"".concat(j.name," in ").concat(n,".png"))}))}))},_,a,y,l,c,u,d,m,L,g,function(e){o.Vn[e?"unshift":"push"]((()=>{k=e,n(1,k)}))},()=>{(0,Le.L)("detail-view","close","button"),w(),R("close")},function(e){o.Vn[e?"unshift":"push"]((()=>{x=e,n(2,x)}))}]}class xn extends o.f_{constructor(e){super(),(0,o.S1)(this,e,wn,Tn,o.N8,{sensor:0,selections:13})}}const Dn=xn;function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gn(e,t,n){const o=e.slice();return o[16]=t[n],o}function Cn(e,t,n){const o=e.slice();return o[19]=t[n],o}function Vn(e){let t,n,i,a,s,l,r,c,u,d,h,p=e[19].displayName+"",m=e[6].formatValue(e[19].value)+"";function g(...t){return e[13](e[19],...t)}function f(){return e[14](e[19])}return{c(){t=(0,o.bG)("li"),n=(0,o.bG)("a"),i=(0,o.fL)(p),a=(0,o.fL)("\n          ("),s=(0,o.fL)(m),l=(0,o.fL)(")"),u=(0,o.Dh)(),(0,o.Lj)(n,"href",r="?region="+(e[19].info?e[19].info.propertyId:"")),(0,o.Lj)(n,"class","uk-link-text"),(0,o.Lj)(n,"disabled",c=!e[19].info||e[1].some(g))},m(e,r){(0,o.$T)(e,t,r),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(n,a),(0,o.R3)(n,s),(0,o.R3)(n,l),(0,o.R3)(t,u),d||(h=(0,o.oL)(n,"click",(0,o.AT)(f)),d=!0)},p(t,a){e=t,8&a&&p!==(p=e[19].displayName+"")&&(0,o.rT)(i,p),72&a&&m!==(m=e[6].formatValue(e[19].value)+"")&&(0,o.rT)(s,m),8&a&&r!==(r="?region="+(e[19].info?e[19].info.propertyId:""))&&(0,o.Lj)(n,"href",r),10&a&&c!==(c=!e[19].info||e[1].some(g))&&(0,o.Lj)(n,"disabled",c)},d(e){e&&(0,o.og)(t),d=!1,h()}}}function zn(e){let t,n,i,a=e[5].reverse(),s=[];for(let t=0;t<a.length;t+=1)s[t]=Mn(Gn(e,a,t));return{c(){t=(0,o.bG)("h5"),t.textContent="Select from recent locations",n=(0,o.Dh)(),i=(0,o.bG)("ul");for(let e=0;e<s.length;e+=1)s[e].c();(0,o.Lj)(i,"class","svelte-1i52rzm")},m(e,a){(0,o.$T)(e,t,a),(0,o.$T)(e,n,a),(0,o.$T)(e,i,a);for(let e=0;e<s.length;e+=1)s[e].m(i,null)},p(e,t){if(160&t){let n;for(a=e[5].reverse(),n=0;n<a.length;n+=1){const o=Gn(e,a,n);s[n]?s[n].p(o,t):(s[n]=Mn(o),s[n].c(),s[n].m(i,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=a.length}},d(e){e&&(0,o.og)(t),e&&(0,o.og)(n),e&&(0,o.og)(i),(0,o.RM)(s,e)}}}function Mn(e){let t,n,i,a,s,l,r,c=e[16].displayName+"";function u(){return e[15](e[16])}return{c(){t=(0,o.bG)("li"),n=(0,o.bG)("a"),i=(0,o.fL)(c),s=(0,o.Dh)(),(0,o.Lj)(n,"href",a="?region="+e[16].propertyId),(0,o.Lj)(n,"class","uk-link-text")},m(e,a){(0,o.$T)(e,t,a),(0,o.R3)(t,n),(0,o.R3)(n,i),(0,o.R3)(t,s),l||(r=(0,o.oL)(n,"click",(0,o.AT)(u)),l=!0)},p(t,s){e=t,32&s&&c!==(c=e[16].displayName+"")&&(0,o.rT)(i,c),32&s&&a!==(a="?region="+e[16].propertyId)&&(0,o.Lj)(n,"href",a)},d(e){e&&(0,o.og)(t),l=!1,r()}}}function Pn(e){let t,n,i,a,s,l,r,c,u,d,h,p,m,g,f,v,b,y,L=e[6].name+"";a=new Pt.Z({props:{className:"container-bg",placeholder:"Search by name...",selectedItem:(e[4],null),items:e[4],labelFieldName:"displayName",maxItemsToShowInList:"5"}}),a.$on("change",e[11]);let $=e[3],R=[];for(let t=0;t<$.length;t+=1)R[t]=Vn(Cn(e,$,t));let j=e[5].length>0&&zn(e);return{c(){t=(0,o.bG)("section"),n=(0,o.bG)("h4"),n.textContent="Add Another",i=(0,o.Dh)(),(0,o.YC)(a.$$.fragment),s=(0,o.Dh)(),l=(0,o.bG)("button"),r=(0,o.fL)("Select on map"),c=(0,o.Dh)(),u=(0,o.bG)("h5"),d=(0,o.fL)("Select from Top for "),h=(0,o.bG)("strong"),p=(0,o.fL)(L),m=(0,o.Dh)(),g=(0,o.bG)("ol");for(let e=0;e<R.length;e+=1)R[e].c();f=(0,o.Dh)(),j&&j.c(),(0,o.Lj)(n,"class","svelte-1i52rzm"),(0,o.Lj)(l,"class","uk-button uk-button-default uk-button-small uk-width-1-1 uk-margin-top"),(0,o.Lj)(l,"aria-pressed",e[0]),(0,o.VH)(l,"selected",e[0]),(0,o.Lj)(g,"class","svelte-1i52rzm"),(0,o.VH)(g,"loading",e[2]),(0,o.Lj)(t,"class","container-bg container-style root svelte-1i52rzm")},m(L,$){(0,o.$T)(L,t,$),(0,o.R3)(t,n),(0,o.R3)(t,i),(0,o.ye)(a,t,null),(0,o.R3)(t,s),(0,o.R3)(t,l),(0,o.R3)(l,r),(0,o.R3)(t,c),(0,o.R3)(t,u),(0,o.R3)(u,d),(0,o.R3)(u,h),(0,o.R3)(h,p),(0,o.R3)(t,m),(0,o.R3)(t,g);for(let e=0;e<R.length;e+=1)R[e].m(g,null);(0,o.R3)(t,f),j&&j.m(t,null),v=!0,b||(y=(0,o.oL)(l,"click",e[12]),b=!0)},p(e,[n]){const i={};if(16&n&&(i.selectedItem=(e[4],null)),16&n&&(i.items=e[4]),a.$set(i),(!v||1&n)&&(0,o.Lj)(l,"aria-pressed",e[0]),1&n&&(0,o.VH)(l,"selected",e[0]),(!v||64&n)&&L!==(L=e[6].name+"")&&(0,o.rT)(p,L),202&n){let t;for($=e[3],t=0;t<$.length;t+=1){const o=Cn(e,$,t);R[t]?R[t].p(o,n):(R[t]=Vn(o),R[t].c(),R[t].m(g,null))}for(;t<R.length;t+=1)R[t].d(1);R.length=$.length}4&n&&(0,o.VH)(g,"loading",e[2]),e[5].length>0?j?j.p(e,n):(j=zn(e),j.c(),j.m(t,null)):j&&(j.d(1),j=null)},i(e){v||((0,o.Ui)(a.$$.fragment,e),v=!0)},o(e){(0,o.et)(a.$$.fragment,e),v=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(a),(0,o.RM)(R,e),j&&j.d(),b=!1,y()}}}function Nn(e,t,n){let l,c,u,d;(0,o.FI)(e,i.fy,(e=>n(10,u=e))),(0,o.FI)(e,i.PC,(e=>n(6,d=e)));const h=(0,s.x)();let{mapData:p}=t,{regionSearchList:m}=t,{pickMapMode:g=!1}=t,{selections:f=[]}=t,v=!0,b=[];return e.$$set=e=>{"mapData"in e&&n(8,p=e.mapData),"regionSearchList"in e&&n(9,m=e.regionSearchList),"pickMapMode"in e&&n(0,g=e.pickMapMode),"selections"in e&&n(1,f=e.selections)},e.$$.update=()=>{514&e.$$.dirty&&n(4,l=m.filter((e=>e.level!==r.levelMegaCounty.id&&!f.some((t=>t.info.id===e.id))&&(0===f.length||f.some((t=>t.info.level===e.level)))))),1026&e.$$.dirty&&n(5,c=u.filter((e=>!f.some((t=>t.info.id===e.id))))),256&e.$$.dirty&&(n(2,v=!0),p.then((e=>{n(2,v=!1),n(3,b=e.map((e=>{const t=(0,a.KO)(e.geo_value);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){Sn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({displayName:t?t.displayName:e.geo_value,info:t},e)})).sort(((e,t)=>e.value!==t.value?e.value<t.value?1:-1:e.displayName.localeCompare(t.displayName))).slice(0,10))})))},[g,f,v,b,l,c,d,h,p,m,u,e=>{e.detail&&h("add",e.detail)},()=>n(0,g=!g),(e,t)=>t.info.id===e.info.id,e=>h("add",e.info),e=>h("add",e)]}class An extends o.f_{constructor(e){super(),(0,o.S1)(this,e,Nn,Pn,o.N8,{mapData:8,regionSearchList:9,pickMapMode:0,selections:1})}}const In=An;function Fn(e,t,n){const o=e.slice();return o[28]=t[n],o}function En(e){let t,n,i,s,l;function r(e,t){return e[10]?Zn:Hn}n=new Pt.Z({props:{placeholder:"Search for a location...",items:a.Ry,selectedItem:e[11],labelFieldName:"displayName",maxItemsToShowInList:"5"}}),n.$on("change",e[16]);let c=r(e),u=c(e);return{c(){t=(0,o.bG)("div"),(0,o.YC)(n.$$.fragment),i=(0,o.Dh)(),s=(0,o.bG)("div"),u.c(),(0,o.Lj)(t,"class","search-container container-bg container-style svelte-y06a60"),(0,o.Lj)(s,"class","view-switcher svelte-y06a60")},m(e,a){(0,o.$T)(e,t,a),(0,o.ye)(n,t,null),(0,o.$T)(e,i,a),(0,o.$T)(e,s,a),u.m(s,null),l=!0},p(e,t){const o={};2048&t&&(o.selectedItem=e[11]),n.$set(o),c===(c=r(e))&&u?u.p(e,t):(u.d(1),u=c(e),u&&(u.c(),u.m(s,null)))},i(e){l||((0,o.Ui)(n.$$.fragment,e),l=!0)},o(e){(0,o.et)(n.$$.fragment,e),l=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(n),e&&(0,o.og)(i),e&&(0,o.og)(s),u.d()}}}function Zn(e){let t,n,i,a,s,l,r,c;return{c(){t=(0,o.bG)("div"),n=(0,o.bG)("button"),a=(0,o.Dh)(),s=(0,o.bG)("button"),(0,o.Lj)(n,"aria-pressed",i=String(e[3])),(0,o.Lj)(n,"class","uk-button uk-button-default map-button svelte-y06a60"),(0,o.Lj)(n,"title","Switch to Map"),(0,o.Lj)(n,"data-uk-icon","icon: blank"),(0,o.VH)(n,"uk-active",e[3]),(0,o.Lj)(s,"aria-pressed",l=String(!e[3])),(0,o.Lj)(s,"class","uk-button uk-button-default chart-button svelte-y06a60"),(0,o.Lj)(s,"title","Switch to Line Charts"),(0,o.Lj)(s,"data-uk-icon","icon: chart-line"),(0,o.VH)(s,"uk-active",!e[3]),(0,o.Lj)(t,"class","uk-button-group")},m(i,l){(0,o.$T)(i,t,l),(0,o.R3)(t,n),(0,o.R3)(t,a),(0,o.R3)(t,s),r||(c=[(0,o.oL)(n,"click",e[18]),(0,o.oL)(s,"click",e[19])],r=!0)},p(e,t){8&t&&i!==(i=String(e[3]))&&(0,o.Lj)(n,"aria-pressed",i),8&t&&(0,o.VH)(n,"uk-active",e[3]),8&t&&l!==(l=String(!e[3]))&&(0,o.Lj)(s,"aria-pressed",l),8&t&&(0,o.VH)(s,"uk-active",!e[3])},d(e){e&&(0,o.og)(t),r=!1,(0,o.j7)(c)}}}function Hn(e){let t,n,i,a,s,l;return{c(){t=(0,o.bG)("button"),(0,o.Lj)(t,"aria-pressed",n=String(!e[4])),(0,o.Lj)(t,"class","uk-button uk-button-default chart-button single-toggle svelte-y06a60"),(0,o.Lj)(t,"title",i=(e[4]?"Hide":"Show")+" Line Charts panel"),(0,o.Lj)(t,"data-uk-icon",a="icon: "+(e[4]?"chart-line-ban":"chart-line"))},m(n,i){(0,o.$T)(n,t,i),s||(l=(0,o.oL)(t,"click",e[17]),s=!0)},p(e,s){16&s&&n!==(n=String(!e[4]))&&(0,o.Lj)(t,"aria-pressed",n),16&s&&i!==(i=(e[4]?"Hide":"Show")+" Line Charts panel")&&(0,o.Lj)(t,"title",i),16&s&&a!==(a="icon: "+(e[4]?"chart-line-ban":"chart-line"))&&(0,o.Lj)(t,"data-uk-icon",a)},d(e){e&&(0,o.og)(t),s=!1,l()}}}function Un(e){let t,n,i;return n=new Dn({props:{sensor:e[1],selections:e[9]}}),n.$on("close",e[22]),{c(){t=(0,o.bG)("div"),(0,o.YC)(n.$$.fragment),(0,o.Lj)(t,"class","detail-container container-bg container-style svelte-y06a60")},m(e,a){(0,o.$T)(e,t,a),(0,o.ye)(n,t,null),i=!0},p(e,t){const o={};2&t&&(o.sensor=e[1]),512&t&&(o.selections=e[9]),n.$set(o)},i(e){i||((0,o.Ui)(n.$$.fragment,e),i=!0)},o(e){(0,o.et)(n.$$.fragment,e),i=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(n)}}}function Bn(e){let t,n,a,s,l,r,c,u,d,h,p,m,g,f=e[8]?"Exit":"Open";function v(t){e[23](t)}let b={levels:i.Nz,selections:e[9]};return void 0!==e[1]&&(b.detail=e[1]),s=new jn({props:b}),o.Vn.push((()=>(0,o.ak)(s,"detail",v))),{c(){t=(0,o.bG)("div"),n=(0,o.bG)("div"),a=(0,o.bG)("div"),(0,o.YC)(s.$$.fragment),r=(0,o.Dh)(),c=(0,o.bG)("div"),u=(0,o.bG)("button"),d=(0,o.fL)(f),h=(0,o.fL)("\n          compare mode"),(0,o.Lj)(a,"class","panel-scroll-container svelte-y06a60"),(0,o.Lj)(n,"class","panel-wrapper container-bg container-style svelte-y06a60"),(0,o.Lj)(u,"class","uk-button uk-button-default uk-button-small"),(0,o.Lj)(c,"class","panel-bottom-wrapper mobileHide svelte-y06a60"),(0,o.Lj)(t,"class","panel-container svelte-y06a60")},m(i,l){(0,o.$T)(i,t,l),(0,o.R3)(t,n),(0,o.R3)(n,a),(0,o.ye)(s,a,null),(0,o.R3)(t,r),(0,o.R3)(t,c),(0,o.R3)(c,u),(0,o.R3)(u,d),(0,o.R3)(u,h),p=!0,m||(g=(0,o.oL)(u,"click",e[24]),m=!0)},p(e,t){const n={};512&t&&(n.selections=e[9]),!l&&2&t&&(l=!0,n.detail=e[1],(0,o.hj)((()=>l=!1))),s.$set(n),(!p||256&t)&&f!==(f=e[8]?"Exit":"Open")&&(0,o.rT)(d,f)},i(e){p||((0,o.Ui)(s.$$.fragment,e),p=!0)},o(e){(0,o.et)(s.$$.fragment,e),p=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(s),m=!1,g()}}}function Yn(e){let t,n,i,s,l,r,c,u=e[9],d=[];for(let t=0;t<u.length;t+=1)d[t]=qn(Fn(e,u,t));function h(t){e[26](t)}let p={regionSearchList:a.Ry,selections:e[9],mapData:e[7]};return void 0!==e[5]&&(p.pickMapMode=e[5]),l=new In({props:p}),o.Vn.push((()=>(0,o.ak)(l,"pickMapMode",h))),l.$on("add",e[27]),{c(){t=(0,o.bG)("div"),n=(0,o.bG)("div"),i=(0,o.bG)("ul");for(let e=0;e<d.length;e+=1)d[e].c();s=(0,o.Dh)(),(0,o.YC)(l.$$.fragment),(0,o.Lj)(i,"class","uk-list uk-list-square uk-margin-remove svelte-y06a60"),(0,o.Lj)(n,"class","selection-container container-bg container-style svelte-y06a60"),(0,o.Lj)(t,"class","add-container svelte-y06a60")},m(e,a){(0,o.$T)(e,t,a),(0,o.R3)(t,n),(0,o.R3)(n,i);for(let e=0;e<d.length;e+=1)d[e].m(i,null);(0,o.R3)(t,s),(0,o.ye)(l,t,null),c=!0},p(e,t){if(512&t){let n;for(u=e[9],n=0;n<u.length;n+=1){const o=Fn(e,u,n);d[n]?d[n].p(o,t):(d[n]=qn(o),d[n].c(),d[n].m(i,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}const n={};512&t&&(n.selections=e[9]),128&t&&(n.mapData=e[7]),!r&&32&t&&(r=!0,n.pickMapMode=e[5],(0,o.hj)((()=>r=!1))),l.$set(n)},i(e){c||((0,o.Ui)(l.$$.fragment,e),c=!0)},o(e){(0,o.et)(l.$$.fragment,e),c=!1},d(e){e&&(0,o.og)(t),(0,o.RM)(d,e),(0,o.vp)(l)}}}function qn(e){let t,n,i,a,s,l,r,c,u=e[28].info.displayName+"";function d(){return e[25](e[28])}return{c(){t=(0,o.bG)("li"),n=(0,o.bG)("button"),i=(0,o.Dh)(),a=(0,o.bG)("span"),s=(0,o.fL)(u),l=(0,o.Dh)(),(0,o.Lj)(n,"class","selection-toolbar uk-icon-button uk-icon-button-small svelte-y06a60"),(0,o.Lj)(n,"data-uk-icon","icon: close; ratio: 0.8"),(0,o.Lj)(n,"title","Remove selected"),(0,o.Lj)(t,"class","selection-legend svelte-y06a60"),(0,o.cz)(t,"color",e[28].color)},m(e,u){(0,o.$T)(e,t,u),(0,o.R3)(t,n),(0,o.R3)(t,i),(0,o.R3)(t,a),(0,o.R3)(a,s),(0,o.R3)(t,l),r||(c=(0,o.oL)(n,"click",d),r=!0)},p(n,i){e=n,512&i&&u!==(u=e[28].info.displayName+"")&&(0,o.rT)(s,u),512&i&&(0,o.cz)(t,"color",e[28].color)},d(e){e&&(0,o.og)(t),r=!1,c()}}}function Xn(e){let t,n,s,l,r,c,u,d,h,p;n=new Mt({props:{className:"options-container",levels:i.Nz}});let m=!e[8]&&En(e);c=new mt({props:{mapLoading:e[2],legendLoading:e[2],summary:{data:e[7],level:e[0],items:a.jJ[e[0]]||[]},data:e[7],selections:e[9],focusOn:e[6],selectRandomOnReady:!0}}),c.$on("loading",e[20]),c.$on("select",e[21]);let g=null!=e[1]&&!e[10]&&e[4]&&Un(e),f=(e[10]&&!e[3]||!e[10]&&e[4])&&Bn(e),v=e[8]&&Yn(e);return{c(){t=(0,o.bG)("main"),(0,o.YC)(n.$$.fragment),s=(0,o.Dh)(),m&&m.c(),l=(0,o.Dh)(),r=(0,o.bG)("div"),(0,o.YC)(c.$$.fragment),u=(0,o.Dh)(),g&&g.c(),d=(0,o.Dh)(),f&&f.c(),h=(0,o.Dh)(),v&&v.c(),(0,o.Lj)(r,"class","map-container svelte-y06a60"),(0,o.VH)(r,"mobileHide",!e[3]),(0,o.VH)(r,"pick",e[5]),(0,o.Lj)(t,"class","root base-font-size svelte-y06a60"),(0,o.VH)(t,"hiddenPanel",!e[10]&&!e[4]),(0,o.VH)(t,"compare",e[8])},m(e,i){(0,o.$T)(e,t,i),(0,o.ye)(n,t,null),(0,o.R3)(t,s),m&&m.m(t,null),(0,o.R3)(t,l),(0,o.R3)(t,r),(0,o.ye)(c,r,null),(0,o.R3)(r,u),g&&g.m(r,null),(0,o.R3)(t,d),f&&f.m(t,null),(0,o.R3)(t,h),v&&v.m(t,null),p=!0},p(e,[n]){e[8]?m&&((0,o.dv)(),(0,o.et)(m,1,1,(()=>{m=null})),(0,o.gb)()):m?(m.p(e,n),256&n&&(0,o.Ui)(m,1)):(m=En(e),m.c(),(0,o.Ui)(m,1),m.m(t,l));const i={};4&n&&(i.mapLoading=e[2]),4&n&&(i.legendLoading=e[2]),129&n&&(i.summary={data:e[7],level:e[0],items:a.jJ[e[0]]||[]}),128&n&&(i.data=e[7]),512&n&&(i.selections=e[9]),64&n&&(i.focusOn=e[6]),c.$set(i),null!=e[1]&&!e[10]&&e[4]?g?(g.p(e,n),1042&n&&(0,o.Ui)(g,1)):(g=Un(e),g.c(),(0,o.Ui)(g,1),g.m(r,null)):g&&((0,o.dv)(),(0,o.et)(g,1,1,(()=>{g=null})),(0,o.gb)()),8&n&&(0,o.VH)(r,"mobileHide",!e[3]),32&n&&(0,o.VH)(r,"pick",e[5]),e[10]&&!e[3]||!e[10]&&e[4]?f?(f.p(e,n),1048&n&&(0,o.Ui)(f,1)):(f=Bn(e),f.c(),(0,o.Ui)(f,1),f.m(t,h)):f&&((0,o.dv)(),(0,o.et)(f,1,1,(()=>{f=null})),(0,o.gb)()),e[8]?v?(v.p(e,n),256&n&&(0,o.Ui)(v,1)):(v=Yn(e),v.c(),(0,o.Ui)(v,1),v.m(t,null)):v&&((0,o.dv)(),(0,o.et)(v,1,1,(()=>{v=null})),(0,o.gb)()),1040&n&&(0,o.VH)(t,"hiddenPanel",!e[10]&&!e[4]),256&n&&(0,o.VH)(t,"compare",e[8])},i(e){p||((0,o.Ui)(n.$$.fragment,e),(0,o.Ui)(m),(0,o.Ui)(c.$$.fragment,e),(0,o.Ui)(g),(0,o.Ui)(f),(0,o.Ui)(v),p=!0)},o(e){(0,o.et)(n.$$.fragment,e),(0,o.et)(m),(0,o.et)(c.$$.fragment,e),(0,o.et)(g),(0,o.et)(f),(0,o.et)(v),p=!1},d(e){e&&(0,o.og)(t),(0,o.vp)(n),m&&m.d(),(0,o.vp)(c),g&&g.d(),f&&f.d(),v&&v.d()}}}function Wn(e,t,n){let s,l,r,c,u,d,h,p,m,g;(0,o.FI)(e,i.pk,(e=>n(0,c=e))),(0,o.FI)(e,i.PC,(e=>n(12,u=e))),(0,o.FI)(e,i.tU,(e=>n(13,d=e))),(0,o.FI)(e,i.cF,(e=>n(14,h=e))),(0,o.FI)(e,i.X6,(e=>n(15,p=e))),(0,o.FI)(e,i.s2,(e=>n(10,m=e))),(0,o.FI)(e,i.oI,(e=>n(11,g=e)));let f=null,v=!0,b=!0,y=!0,L=!1,$=null;return e.$$.update=()=>{1&e.$$.dirty&&(i.Nz.find((e=>e.id===c))||i.pk.set(i.Nz[0].id)),12289&e.$$.dirty&&n(7,s=(0,gt.Yy)(u,c,d,{stderr:null})),16384&e.$$.dirty&&n(8,l=null!=h),32768&e.$$.dirty&&n(9,r=p)},[c,f,v,b,y,L,$,s,l,r,m,g,u,d,h,p,e=>{(0,i.w3)(e.detail)&&n(6,$=e.detail||null),(0,Le.L)("search","select",e.detail?e.detail.id:"")},()=>{(0,Le.L)("overview","show-panel",String(!y)),n(4,y=!y)},()=>{(0,Le.L)("overview","show-map","true"),n(3,b=!0)},()=>{(0,Le.L)("overview","show-map","false"),n(3,b=!1)},e=>n(2,v=e.detail),e=>{if(null!=$&&n(6,$=null),L){const t=(0,a.KO)(e.detail.feature.properties.id);(0,i.qY)(t),n(5,L=!1)}else(0,i.C4)(e.detail.feature,!0),e.detail.feature&&(0,Le.L)("map","select",e.detail.feature.id)},()=>n(1,f=null),function(e){f=e,n(1,f)},()=>i.cF.set(l?null:[]),e=>(0,i.JY)(e.info),function(e){L=e,n(5,L)},e=>(0,i.qY)(e.detail)]}class Jn extends o.f_{constructor(e){super(),(0,o.S1)(this,e,Wn,Xn,o.N8,{})}}const Kn=Jn}}]);
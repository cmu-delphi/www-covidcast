/*! For license information please see m-timelapse.2977f9c2848566cb349c.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{299:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n(324),a=n(3);n(275);function r(t){let e,n;return{c(){e=Object(i.Y)("title"),n=Object(i.Z)(t[0])},m(t,o){Object(i.F)(t,e,o),Object(i.e)(e,n)},p(t,e){1&e&&Object(i.S)(n,t[0])},d(t){t&&Object(i.t)(e)}}}function s(t){let e,n,o,a=t[0]&&r(t);const s=t[3].default,c=Object(i.q)(s,t,t[2],null);return{c(){e=Object(i.Y)("svg"),a&&a.c(),n=Object(i.v)(),c&&c.c(),Object(i.g)(e,"xmlns","http://www.w3.org/2000/svg"),Object(i.g)(e,"viewBox",t[1]),Object(i.g)(e,"class","svelte-c8tyih")},m(t,r){Object(i.F)(t,e,r),a&&a.m(e,null),Object(i.e)(e,n),c&&c.m(e,null),o=!0},p(t,[l]){t[0]?a?a.p(t,l):(a=r(t),a.c(),a.m(e,n)):a&&(a.d(1),a=null),c&&c.p&&4&l&&Object(i.fb)(c,s,t,t[2],l,null,null),(!o||2&l)&&Object(i.g)(e,"viewBox",t[1])},i(t){o||(Object(i.cb)(c,t),o=!0)},o(t){Object(i.db)(c,t),o=!1},d(t){t&&Object(i.t)(e),a&&a.d(),c&&c.d(t)}}}function c(t,e,n){let{$$slots:i={},$$scope:o}=e,{title:a=null}=e,{viewBox:r}=e;return t.$$set=t=>{"title"in t&&n(0,a=t.title),"viewBox"in t&&n(1,r=t.viewBox),"$$scope"in t&&n(2,o=t.$$scope)},[a,r,o,i]}class l extends i.b{constructor(t){super(),Object(i.E)(this,t,c,s,i.P,{title:0,viewBox:1})}}var u=l;function b(t){let e;return{c(){e=Object(i.Y)("path"),Object(i.g)(e,"d","M96 448h106.7V64H96v384zM309.3 64v384H416V64H309.3z")},m(t,n){Object(i.F)(t,e,n)},d(t){t&&Object(i.t)(e)}}}function d(t){let e,n;const o=[{viewBox:"0 0 512 512"},t[0]];let a={$$slots:{default:[b]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)a=Object(i.f)(a,o[t]);return e=new u({props:a}),{c(){Object(i.n)(e.$$.fragment)},m(t,o){Object(i.I)(e,t,o),n=!0},p(t,[n]){const a=1&n?Object(i.y)(o,[o[0],Object(i.x)(t[0])]):{};2&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){n||(Object(i.cb)(e.$$.fragment,t),n=!0)},o(t){Object(i.db)(e.$$.fragment,t),n=!1},d(t){Object(i.r)(e,t)}}}function p(t,e,n){return t.$$set=t=>{n(0,e=Object(i.f)(Object(i.f)({},e),Object(i.w)(t)))},[e=Object(i.w)(e)]}class h extends i.b{constructor(t){super(),Object(i.E)(this,t,p,d,i.P,{})}}var O=h,m=n(59),f=n(373),j=n.n(f),g=(n(276),n(307));n(277);function v(t){let e,n;return{c(){e=Object(i.Y)("svg"),n=Object(i.Y)("path"),Object(i.g)(n,"d","M140 52v408l320-204L140 52z"),Object(i.g)(e,"xmlns","http://www.w3.org/2000/svg"),Object(i.g)(e,"viewBox","0 0 512 512"),Object(i.g)(e,"class","svelte-c8tyih")},m(t,o){Object(i.F)(t,e,o),Object(i.e)(e,n)},i:i.J,o:i.J,d(t){t&&Object(i.t)(e)}}}function y(t){let e,n;return e=new O({}),{c(){Object(i.n)(e.$$.fragment)},m(t,o){Object(i.I)(e,t,o),n=!0},i(t){n||(Object(i.cb)(e.$$.fragment,t),n=!0)},o(t){Object(i.db)(e.$$.fragment,t),n=!1},d(t){Object(i.r)(e,t)}}}function x(t){let e,n,o,a,r,s,c,l,u,b,d,p;const h=[y,v],O=[];function m(t,e){return t[1]?0:1}return o=m(t),a=O[o]=h[o](t),{c(){e=Object(i.u)("div"),n=Object(i.u)("button"),a.c(),c=Object(i.V)(),l=Object(i.u)("div"),Object(i.g)(n,"aria-pressed",r=t[1]?"true":"false"),Object(i.g)(n,"title",s=t[1]?"Stop timeline to a specific date":"Play timeline to see how data changes over time"),Object(i.g)(n,"class","play-button svelte-h2y8i3"),Object(i.g)(l,"class","slider svelte-h2y8i3"),Object(i.g)(e,"class",u="player container-bg container-style base-font-size "+t[0]+" svelte-h2y8i3")},m(a,r){Object(i.F)(a,e,r),Object(i.e)(e,n),O[o].m(n,null),t[10](n),Object(i.e)(e,c),Object(i.e)(e,l),t[11](l),b=!0,d||(p=[Object(i.H)(window,"keydown",t[5]),Object(i.H)(n,"click",t[4])],d=!0)},p(t,[c]){let l=o;o=m(t),o!==l&&(Object(i.B)(),Object(i.db)(O[l],1,1,(()=>{O[l]=null})),Object(i.k)(),a=O[o],a?a.p(t,c):(a=O[o]=h[o](t),a.c()),Object(i.cb)(a,1),a.m(n,null)),(!b||2&c&&r!==(r=t[1]?"true":"false"))&&Object(i.g)(n,"aria-pressed",r),(!b||2&c&&s!==(s=t[1]?"Stop timeline to a specific date":"Play timeline to see how data changes over time"))&&Object(i.g)(n,"title",s),(!b||1&c&&u!==(u="player container-bg container-style base-font-size "+t[0]+" svelte-h2y8i3"))&&Object(i.g)(e,"class",u)},i(t){b||(Object(i.cb)(a),b=!0)},o(t){Object(i.db)(a),b=!1},d(n){n&&Object(i.t)(e),O[o].d(),t[10](null),t[11](null),d=!1,Object(i.O)(p)}}}function w(t,e,n){let{className:o=""}=e;const a=864e5,r=Object(m.a)();let{running:s=!1}=e,{value:c=new Date}=e,{min:l=new Date}=e,{max:u=new Date}=e,b=null;function d(){r("toggle",!s)}function p(t){return Math.floor(t.getTime())/a}function h(t){return new Date(t*a)}let O=null,f=null;const v={to:t=>Object(g.b)(h(t)),from:t=>Number.parseInt(t,10)},y={to:t=>{const e=h(t);return e.getTime()===l.getTime()||e.getTime()===u.getTime()?Object(g.b)(e):Object(g.d)(e)},from:t=>Number.parseInt(t,10)};return Object(m.c)((()=>{n(9,f=j.a.create(O,{step:1,tooltips:[v],connect:"lower",range:{min:p(l),max:p(u)},start:p(c),pips:{mode:"positions",values:[0,25,50,75,100],density:4,format:y},ariaFormat:v})),f.on("change",(t=>{r("change",h(Number.parseInt(t[0],10)))}))})),Object(m.b)((()=>{f&&(f.destroy(),n(9,f=null))})),t.$$set=t=>{"className"in t&&n(0,o=t.className),"running"in t&&n(1,s=t.running),"value"in t&&n(6,c=t.value),"min"in t&&n(7,l=t.min),"max"in t&&n(8,u=t.max)},t.$$.update=()=>{if(576&t.$$.dirty){const t=p(c);f&&f.set(t)}384&t.$$.dirty&&function(t,e){if(!f)return;const n=p(t),i=p(e);f.updateOptions({range:{min:n,max:i},start:p(c)},!1)}(l,u)},[o,s,b,O,d,function(t){" "===t.key&&t.target!==b&&d()},c,l,u,f,function(t){i.i[t?"unshift":"push"]((()=>{b=t,n(2,b)}))},function(t){i.i[t?"unshift":"push"]((()=>{O=t,n(3,O)}))}]}class _ extends i.b{constructor(t){super(),Object(i.E)(this,t,w,x,i.P,{className:0,running:1,value:6,min:7,max:8})}}var S=_,k=n(55),$=n(105),E=n(108),P=n(162),C=n(349);n(278);function V(t){let e,n,a,r,s,c,l,u;return n=new o.a({props:{showDate:!1,className:"options-container"}}),r=new S({props:{className:"player-container",running:t[0],value:t[6],max:t[5],min:t[4]}}),r.$on("toggle",t[7]),r.$on("change",t[13]),l=new C.a({props:{mapLoading:t[0]||t[1],legendLoading:!1,showDate:!0,data:t[3]}}),l.$on("loading",t[14]),{c(){e=Object(i.u)("main"),Object(i.n)(n.$$.fragment),a=Object(i.V)(),Object(i.n)(r.$$.fragment),s=Object(i.V)(),c=Object(i.u)("div"),Object(i.n)(l.$$.fragment),Object(i.g)(c,"class","map-container svelte-227sr0"),Object(i.g)(e,"class","root svelte-227sr0")},m(t,o){Object(i.F)(t,e,o),Object(i.I)(n,e,null),Object(i.e)(e,a),Object(i.I)(r,e,null),Object(i.e)(e,s),Object(i.e)(e,c),Object(i.I)(l,c,null),u=!0},p(t,[e]){const n={};1&e&&(n.running=t[0]),64&e&&(n.value=t[6]),32&e&&(n.max=t[5]),16&e&&(n.min=t[4]),r.$set(n);const i={};3&e&&(i.mapLoading=t[0]||t[1]),8&e&&(i.data=t[3]),l.$set(i)},i(t){u||(Object(i.cb)(n.$$.fragment,t),Object(i.cb)(r.$$.fragment,t),Object(i.cb)(l.$$.fragment,t),u=!0)},o(t){Object(i.db)(n.$$.fragment,t),Object(i.db)(r.$$.fragment,t),Object(i.db)(l.$$.fragment,t),u=!1},d(t){t&&Object(i.t)(e),Object(i.r)(n),Object(i.r)(r),Object(i.r)(l)}}}function L(t,e,n){let o,r,s,c,l;Object(i.l)(t,a.G,(t=>n(9,o=t))),Object(i.l)(t,a.q,(t=>n(10,r=t))),Object(i.l)(t,a.k,(t=>n(11,s=t))),Object(i.l)(t,a.i,(t=>n(6,c=t))),Object(i.l)(t,a.C,(t=>n(12,l=t)));let u=3;const b=new Map;let d=-1,p=!1,h=!0,O=()=>{},f=Promise.resolve([]);function j(t){const e="".concat(t,"-").concat(r.key,"-").concat(s);if(b.has(e)){const t=b.get(e);return b.delete(t),t}return Object(E.b)(r,s,t,{stderr:null})}function g(t,e=!1){if(d=-1,!e)return n(0,p=!1),n(3,f=j(t)),void f.then((()=>{a.h.set(Object($.e)(t))}));const i=k.a.offset(t,1);!function(t){let e=k.a.offset(t,u);e>w&&(e=w);const n=k.a.range(k.a.floor(t),e);for(const t of n){const e="".concat(t,"-").concat(r.key,"-").concat(s);b.has(e)||b.set(e,Object(E.b)(r,s,t,{stderr:null}))}}(t);const o=new Promise((t=>n(2,O=t))),c=Date.now();n(3,f=j(t)),f.then((()=>{a.h.set(Object($.e)(t))})),o.then((()=>{if(!p)return;const t=Date.now()-c;t>250&&u<7&&u++,d=setTimeout((()=>{g(i,i<w)}),Math.max(0,250-t))}))}function v(){if(n(0,p=!p),!p)return Object(P.a)("player","stop"),d>=0&&(clearTimeout(d),d=-1),void b.clear();Object(P.a)("player","start"),w.getTime()===c.getTime()?g(x,!0):g(k.a.offset(c,1),!0)}function y(t){p&&v(),Object(P.a)("player","jump",t.toString()),g(t,!1)}Object(m.c)((()=>{g(c,!1)}));let x,w;return t.$$.update=()=>{1536&t.$$.dirty&&n(4,x=null!=o&&o.has(r.key)?Object($.g)(o.get(r.key)[0]):new Date(2020,1,1)),1536&t.$$.dirty&&n(5,w=null!=o&&o.has(r.key)?Object($.g)(o.get(r.key)[1]):new Date(2020,8,1)),7168&t.$$.dirty&&(p&&v(),g(c,!1))},[p,h,O,f,x,w,c,v,y,o,r,s,l,t=>y(t.detail),t=>{n(1,h=t.detail),t.detail||O()}]}class M extends i.b{constructor(t){super(),Object(i.E)(this,t,L,V,i.P,{})}}e.default=M},306:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"f",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return b})),n.d(e,"e",(function(){return d}));var i=n(15),o=n(323);function a(t){return Object(i.f)(t).l>.32?"#000":"#fff"}function r(t,e){return t.map(((t,n)=>[t,e[n]]))}function s(t,e){return Array.isArray(t)?t.map((t=>{const n=Object(i.g)(t);return n.opacity=e,n.toString()})):s([t],e)[0]}function c(t,e,n,i){null==i&&(i=n-e);const o={start:t-i/2,end:t.getTime()+i/2};let a=e-o.start;return a<=0&&(a=n-o.end,a>=0&&(a=0)),o.start=o.start+a,o.end=o.end+a,o}const l=new WeakMap,u=new o.a((t=>{for(const e of t){const t=l.get(e.target);t&&t(e.contentRect,e)}}));function b(t,e){l.set(t,e),u.observe(t)}function d(t){l.delete(t),u.unobserve(t)}},309:function(t,e,n){"use strict";var i=n(0),o=n(3);function a(t){let e,n,o,a;return{c(){e=Object(i.u)("button"),Object(i.g)(e,"title","Show sensor description"),Object(i.g)(e,"class",n="uk-icon-button "+t[2]),Object(i.g)(e,"data-uk-toggle","target: #info-dialog"),Object(i.g)(e,"data-uk-icon","icon: question-plain"),Object(i.bb)(e,"uk-icon-button-small",!t[1])},m(n,r){Object(i.F)(n,e,r),o||(a=Object(i.H)(e,"click",Object(i.W)(t[3])),o=!0)},p(t,o){4&o&&n!==(n="uk-icon-button "+t[2])&&Object(i.g)(e,"class",n),6&o&&Object(i.bb)(e,"uk-icon-button-small",!t[1])},d(t){t&&Object(i.t)(e),o=!1,a()}}}function r(t){let e,n=null!=t[0]&&t[0].description&&a(t);return{c(){n&&n.c(),e=Object(i.v)()},m(t,o){n&&n.m(t,o),Object(i.F)(t,e,o)},p(t,[i]){null!=t[0]&&t[0].description?n?n.p(t,i):(n=a(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:i.J,o:i.J,d(t){n&&n.d(t),t&&Object(i.t)(e)}}}function s(t,e,n){let{sensor:i}=e,{large:a=!1}=e,{className:r=""}=e;return t.$$set=t=>{"sensor"in t&&n(0,i=t.sensor),"large"in t&&n(1,a=t.large),"className"in t&&n(2,r=t.className)},[i,a,r,()=>{o.j.set(i)}]}class c extends i.b{constructor(t){super(),Object(i.E)(this,t,s,r,i.P,{sensor:0,large:1,className:2})}}e.a=c},324:function(t,e,n){"use strict";var i=n(0),o=n(3),a=n(105),r=n(159),s=n(322),c=n(55);n(248);function l(t){let e,n,o,a,r=t[2](t[0])+"";return{c(){e=Object(i.u)("button"),n=Object(i.Z)(r),Object(i.g)(e,"aria-label","selected date"),Object(i.g)(e,"class","uk-input")},m(r,s){Object(i.F)(r,e,s),Object(i.e)(e,n),o||(a=Object(i.H)(e,"",t[7]),o=!0)},p(t,e){5&e&&r!==(r=t[2](t[0])+"")&&Object(i.S)(n,r)},i:i.J,o:i.J,d(t){t&&Object(i.t)(e),o=!1,a()}}}function u(t){let e,n,o;function a(e){t[8].call(null,e)}let r={className:"uk-width-1-1",start:t[3][0],end:t[3][1],formattedSelected:t[2](t[0]),$$slots:{default:[b]},$$scope:{ctx:t}};return void 0!==t[0]&&(r.selected=t[0]),e=new s.a({props:r}),i.i.push((()=>Object(i.h)(e,"selected",a))),{c(){Object(i.n)(e.$$.fragment)},m(t,n){Object(i.I)(e,t,n),o=!0},p(t,o){const a={};8&o&&(a.start=t[3][0]),8&o&&(a.end=t[3][1]),5&o&&(a.formattedSelected=t[2](t[0])),4101&o&&(a.$$scope={dirty:o,ctx:t}),!n&&1&o&&(n=!0,a.selected=t[0],Object(i.c)((()=>n=!1))),e.$set(a)},i(t){o||(Object(i.cb)(e.$$.fragment,t),o=!0)},o(t){Object(i.db)(e.$$.fragment,t),o=!1},d(t){Object(i.r)(e,t)}}}function b(t){let e,n,o,a,r=t[2](t[0])+"";return{c(){e=Object(i.u)("button"),n=Object(i.Z)(r),Object(i.g)(e,"aria-label","selected date"),Object(i.g)(e,"class","uk-input uk-text-nowrap")},m(r,s){Object(i.F)(r,e,s),Object(i.e)(e,n),o||(a=Object(i.H)(e,"",t[6]),o=!0)},p(t,e){5&e&&r!==(r=t[2](t[0])+"")&&Object(i.S)(n,r)},d(t){t&&Object(i.t)(e),o=!1,a()}}}function d(t){let e,n,o,a,r,s,c,b,d,p,h,O,m,f,j,g,v;const y=[u,l],x=[];function w(t,e){return null!=t[0]&&0!==t[3].length?0:1}return n=w(t),o=x[n]=y[n](t),{c(){e=Object(i.u)("div"),o.c(),a=Object(i.V)(),r=Object(i.u)("div"),s=Object(i.u)("button"),b=Object(i.V)(),d=Object(i.u)("button"),h=Object(i.V)(),O=Object(i.u)("button"),Object(i.g)(e,"class","uk-form-controls"),Object(i.g)(s,"class","uk-button uk-button-default svelte-qjzvyh"),s.disabled=c=null==t[0]||0===t[3].length||t[0]<=t[3][0],Object(i.g)(s,"title","Go to the previous day"),Object(i.g)(s,"data-uk-icon","icon: chevron-left"),Object(i.g)(d,"class","uk-button uk-button-default svelte-qjzvyh"),d.disabled=p=null==t[0]||0===t[3].length||t[0]>=t[3][1],Object(i.g)(d,"title","Go to the next day"),Object(i.g)(d,"data-uk-icon","icon: chevron-right"),Object(i.g)(O,"class","uk-button uk-button-default svelte-qjzvyh"),O.disabled=m=null==t[0]||0===t[3].length||t[0].valueOf()===t[3][1].valueOf(),Object(i.g)(O,"title",f="Go to the latest date for which '"+t[1].name+"' is available"),Object(i.g)(O,"data-uk-icon","icon: chevron-right-end"),Object(i.g)(r,"class","uk-button-group shortcuts svelte-qjzvyh")},m(o,c){Object(i.F)(o,e,c),x[n].m(e,null),Object(i.F)(o,a,c),Object(i.F)(o,r,c),Object(i.e)(r,s),Object(i.e)(r,b),Object(i.e)(r,d),Object(i.e)(r,h),Object(i.e)(r,O),j=!0,g||(v=[Object(i.H)(s,"click",t[9]),Object(i.H)(d,"click",t[10]),Object(i.H)(O,"click",t[11])],g=!0)},p(t,[a]){let r=n;n=w(t),n===r?x[n].p(t,a):(Object(i.B)(),Object(i.db)(x[r],1,1,(()=>{x[r]=null})),Object(i.k)(),o=x[n],o?o.p(t,a):(o=x[n]=y[n](t),o.c()),Object(i.cb)(o,1),o.m(e,null)),(!j||9&a&&c!==(c=null==t[0]||0===t[3].length||t[0]<=t[3][0]))&&(s.disabled=c),(!j||9&a&&p!==(p=null==t[0]||0===t[3].length||t[0]>=t[3][1]))&&(d.disabled=p),(!j||9&a&&m!==(m=null==t[0]||0===t[3].length||t[0].valueOf()===t[3][1].valueOf()))&&(O.disabled=m),(!j||2&a&&f!==(f="Go to the latest date for which '"+t[1].name+"' is available"))&&Object(i.g)(O,"title",f)},i(t){j||(Object(i.cb)(o),j=!0)},o(t){Object(i.db)(o),j=!1},d(t){t&&Object(i.t)(e),x[n].d(),t&&Object(i.t)(a),t&&Object(i.t)(r),g=!1,Object(i.O)(v)}}}function p(t,e,n){let s,l;Object(i.l)(t,o.v,(t=>n(4,s=t))),Object(i.l)(t,o.G,(t=>n(5,l=t)));let{sensor:u}=e,{value:b=null}=e;let d,p;return t.$$set=t=>{"sensor"in t&&n(1,u=t.sensor),"value"in t&&n(0,b=t.value)},t.$$.update=()=>{if(16&t.$$.dirty&&n(2,d=s?Object(r.a)("%x"):Object(r.a)("%B %-d, %Y")),34&t.$$.dirty&&null!==l){const t=l.get(u.key);n(3,p=t?t.map(a.g):[])}},n(3,p=[]),[b,u,d,p,s,l,function(e){Object(i.j)(t,e)},function(e){Object(i.j)(t,e)},function(t){b=t,n(0,b)},()=>n(0,b=c.a.offset(b,-1)),()=>n(0,b=c.a.offset(b,1)),()=>n(0,b=p[1])]}class h extends i.b{constructor(t){super(),Object(i.E)(this,t,p,d,i.P,{sensor:1,value:0})}}var O=h;n(249);function m(t,e,n){const i=t.slice();return i[13]=e[n],i}function f(t,e,n){const i=t.slice();return i[16]=e[n],i}function j(t,e,n){const i=t.slice();return i[19]=e[n],i}function g(t){let e,n,o,a,r,s=t[19].name+"";return{c(){e=Object(i.u)("option"),n=Object(i.Z)(s),o=Object(i.V)(),Object(i.g)(e,"title",a="function"==typeof t[19].tooltipText?t[19].tooltipText():t[19].tooltipText),e.__value=r=t[19].key,e.value=e.__value},m(t,a){Object(i.F)(t,e,a),Object(i.e)(e,n),Object(i.e)(e,o)},p(t,o){16&o&&s!==(s=t[19].name+"")&&Object(i.S)(n,s),16&o&&a!==(a="function"==typeof t[19].tooltipText?t[19].tooltipText():t[19].tooltipText)&&Object(i.g)(e,"title",a),16&o&&r!==(r=t[19].key)&&(e.__value=r,e.value=e.__value)},d(t){t&&Object(i.t)(e)}}}function v(t){let e,n,o=t[16].sensors,a=[];for(let e=0;e<o.length;e+=1)a[e]=g(j(t,o,e));return{c(){e=Object(i.u)("optgroup");for(let t=0;t<a.length;t+=1)a[t].c();Object(i.g)(e,"label",n=t[16].label)},m(t,n){Object(i.F)(t,e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null)},p(t,r){if(16&r){let n;for(o=t[16].sensors,n=0;n<o.length;n+=1){const i=j(t,o,n);a[n]?a[n].p(i,r):(a[n]=g(i),a[n].c(),a[n].m(e,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}16&r&&n!==(n=t[16].label)&&Object(i.g)(e,"label",n)},d(t){t&&Object(i.t)(e),Object(i.s)(a,t)}}}function y(t){let e,n,o,a,r,s=t[13].labelPlural+"";return{c(){e=Object(i.u)("option"),n=Object(i.Z)(s),o=Object(i.V)(),e.__value=a=t[13].id,e.value=e.__value,e.disabled=r=!t[7].levels.includes(t[13].id)},m(t,a){Object(i.F)(t,e,a),Object(i.e)(e,n),Object(i.e)(e,o)},p(t,o){1&o&&s!==(s=t[13].labelPlural+"")&&Object(i.S)(n,s),1&o&&a!==(a=t[13].id)&&(e.__value=a,e.value=e.__value),129&o&&r!==(r=!t[7].levels.includes(t[13].id))&&(e.disabled=r)},d(t){t&&Object(i.t)(e)}}}function x(t){let e,n,o,a,r,s;function c(e){t[12].call(null,e)}let l={sensor:t[7]};return void 0!==t[3]&&(l.value=t[3]),a=new O({props:l}),i.i.push((()=>Object(i.h)(a,"value",c))),{c(){e=Object(i.u)("div"),n=Object(i.u)("span"),n.textContent="on",o=Object(i.V)(),Object(i.n)(a.$$.fragment),Object(i.g)(n,"class","uk-form-label svelte-vpx6lo"),Object(i.g)(e,"class","uk-width-1-1 uk-width-1-3@m block svelte-vpx6lo")},m(t,r){Object(i.F)(t,e,r),Object(i.e)(e,n),Object(i.e)(e,o),Object(i.I)(a,e,null),s=!0},p(t,e){const n={};128&e&&(n.sensor=t[7]),!r&&8&e&&(r=!0,n.value=t[3],Object(i.c)((()=>r=!1))),a.$set(n)},i(t){s||(Object(i.cb)(a.$$.fragment,t),s=!0)},o(t){Object(i.db)(a.$$.fragment,t),s=!1},d(t){t&&Object(i.t)(e),Object(i.r)(a)}}}function w(t){let e,n,o,a,r,s,c,l,u,b,d,p,h,O,j,g,w,_,S,k=t[4],$=[];for(let e=0;e<k.length;e+=1)$[e]=v(f(t,k,e));let E=t[0],P=[];for(let e=0;e<E.length;e+=1)P[e]=y(m(t,E,e));let C=t[2]&&x(t);return{c(){e=Object(i.u)("div"),n=Object(i.u)("div"),o=Object(i.u)("span"),o.textContent="Displaying",a=Object(i.V)(),r=Object(i.u)("div"),s=Object(i.u)("select");for(let t=0;t<$.length;t+=1)$[t].c();l=Object(i.V)(),u=Object(i.u)("div"),b=Object(i.u)("span"),b.textContent="for",d=Object(i.V)(),p=Object(i.u)("div"),h=Object(i.u)("select");for(let t=0;t<P.length;t+=1)P[t].c();j=Object(i.V)(),C&&C.c(),Object(i.g)(o,"class","uk-form-label svelte-vpx6lo"),Object(i.g)(s,"id","option-indicator"),Object(i.g)(s,"aria-label","indicator options"),Object(i.g)(s,"class","uk-select"),void 0===t[5]&&Object(i.d)((()=>t[10].call(s))),Object(i.g)(r,"class","uk-form-controls svelte-vpx6lo"),Object(i.g)(n,"class",c="uk-width-1-1 uk-width-1-"+(t[2]?"3":"2")+"@m block svelte-vpx6lo"),Object(i.g)(b,"class","uk-form-label svelte-vpx6lo"),Object(i.g)(h,"id","option-geo-level"),Object(i.g)(h,"aria-label","geographic level"),Object(i.g)(h,"class","uk-select"),void 0===t[6]&&Object(i.d)((()=>t[11].call(h))),Object(i.g)(p,"class","uk-form-controls svelte-vpx6lo"),Object(i.g)(u,"class",O="uk-width-1-1 uk-width-1-"+(t[2]?"3":"2")+"@m block svelte-vpx6lo"),Object(i.g)(e,"class",g="container-bg container-style uk-grid-small "+t[1]+" svelte-vpx6lo"),Object(i.g)(e,"data-uk-grid","")},m(c,O){Object(i.F)(c,e,O),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(n,a),Object(i.e)(n,r),Object(i.e)(r,s);for(let t=0;t<$.length;t+=1)$[t].m(s,null);Object(i.Q)(s,t[5]),Object(i.e)(e,l),Object(i.e)(e,u),Object(i.e)(u,b),Object(i.e)(u,d),Object(i.e)(u,p),Object(i.e)(p,h);for(let t=0;t<P.length;t+=1)P[t].m(h,null);Object(i.Q)(h,t[6]),Object(i.e)(e,j),C&&C.m(e,null),w=!0,_||(S=[Object(i.H)(s,"change",t[10]),Object(i.H)(h,"change",t[11])],_=!0)},p(t,[o]){if(16&o){let e;for(k=t[4],e=0;e<k.length;e+=1){const n=f(t,k,e);$[e]?$[e].p(n,o):($[e]=v(n),$[e].c(),$[e].m(s,null))}for(;e<$.length;e+=1)$[e].d(1);$.length=k.length}if(48&o&&Object(i.Q)(s,t[5]),(!w||4&o&&c!==(c="uk-width-1-1 uk-width-1-"+(t[2]?"3":"2")+"@m block svelte-vpx6lo"))&&Object(i.g)(n,"class",c),129&o){let e;for(E=t[0],e=0;e<E.length;e+=1){const n=m(t,E,e);P[e]?P[e].p(n,o):(P[e]=y(n),P[e].c(),P[e].m(h,null))}for(;e<P.length;e+=1)P[e].d(1);P.length=E.length}65&o&&Object(i.Q)(h,t[6]),(!w||4&o&&O!==(O="uk-width-1-1 uk-width-1-"+(t[2]?"3":"2")+"@m block svelte-vpx6lo"))&&Object(i.g)(u,"class",O),t[2]?C?(C.p(t,o),4&o&&Object(i.cb)(C,1)):(C=x(t),C.c(),Object(i.cb)(C,1),C.m(e,null)):C&&(Object(i.B)(),Object(i.db)(C,1,1,(()=>{C=null})),Object(i.k)()),(!w||2&o&&g!==(g="container-bg container-style uk-grid-small "+t[1]+" svelte-vpx6lo"))&&Object(i.g)(e,"class",g)},i(t){w||(Object(i.cb)(C),w=!0)},o(t){Object(i.db)(C),w=!1},d(t){t&&Object(i.t)(e),Object(i.s)($,t),Object(i.s)(P,t),C&&C.d(),_=!1,Object(i.O)(S)}}}function _(t,e,n){let r,s,c,l;Object(i.l)(t,o.h,(t=>n(8,r=t))),Object(i.l)(t,o.p,(t=>n(5,s=t))),Object(i.l)(t,o.k,(t=>n(6,c=t))),Object(i.l)(t,o.q,(t=>n(7,l=t)));let u,b,d,{levels:p=o.w}=e,{className:h=""}=e,{showDate:O=!0}=e;return t.$$set=t=>{"levels"in t&&n(0,p=t.levels),"className"in t&&n(1,h=t.className),"showDate"in t&&n(2,O=t.showDate)},t.$$.update=()=>{256&t.$$.dirty&&n(3,u=Object(a.g)(r)),8&t.$$.dirty&&void 0!==u&&o.h.set(Object(a.e)(u)),1&t.$$.dirty&&n(9,b=new Set(p.map((t=>t.id)))),512&t.$$.dirty&&n(4,d=o.t.map((t=>({label:t.label,sensors:t.sensors.filter((t=>t.levels.some((t=>b.has(t)))))}))).filter((t=>t.sensors.length>0)))},[p,h,O,u,d,s,c,l,r,b,function(){s=Object(i.R)(this),o.p.set(s),n(4,d),n(9,b),n(0,p)},function(){c=Object(i.R)(this),o.k.set(c),n(0,p)},function(t){u=t,n(3,u),n(8,r)}]}class S extends i.b{constructor(t){super(),Object(i.E)(this,t,_,w,i.P,{levels:0,className:1,showDate:2})}}e.a=S},328:function(t,e,n){"use strict";var i=n(0),o=n(3);n(259);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){let e,n,o,a,r,s,c,l,u,b,d,p,h,O,m,f,j,g,v,y,x;return{c(){e=Object(i.u)("div"),n=Object(i.u)("div"),o=Object(i.u)("button"),a=Object(i.Z)("New"),s=Object(i.V)(),c=Object(i.u)("button"),l=Object(i.Z)("Cumulative"),b=Object(i.V)(),d=Object(i.u)("div"),p=Object(i.u)("button"),h=Object(i.Z)("Ratios (per 100,000)"),m=Object(i.V)(),f=Object(i.u)("button"),j=Object(i.Z)("Counts"),Object(i.g)(o,"type","button"),Object(i.g)(o,"aria-pressed",r=String(!t[3].cumulative)),Object(i.g)(o,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(i.bb)(o,"uk-active",!t[3].cumulative),Object(i.g)(c,"type","button"),Object(i.g)(c,"aria-pressed",u=t[3].cumulative),Object(i.g)(c,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(i.bb)(c,"uk-active",t[3].cumulative),Object(i.g)(n,"aria-label","display cumulative or new incidents"),Object(i.g)(n,"class","uk-button-group"),Object(i.g)(p,"type","button"),Object(i.g)(p,"aria-pressed",O=String(!t[3].incidence)),Object(i.g)(p,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(i.bb)(p,"uk-active",!t[3].incidence),Object(i.g)(f,"type","button"),Object(i.g)(f,"aria-pressed",g=String(t[3].incidence)),Object(i.g)(f,"class","uk-button uk-button-default uk-button-small svelte-1iknxf6"),Object(i.bb)(f,"uk-active",t[3].incidence),Object(i.g)(d,"aria-label","display counts or ratios per 100,000 people"),Object(i.g)(d,"class","uk-button-group"),Object(i.g)(e,"class",v="root "+t[2]+" svelte-1iknxf6"),Object(i.bb)(e,"center",t[0])},m(r,u){Object(i.F)(r,e,u),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(o,a),Object(i.e)(n,s),Object(i.e)(n,c),Object(i.e)(c,l),Object(i.e)(e,b),Object(i.e)(e,d),Object(i.e)(d,p),Object(i.e)(p,h),Object(i.e)(d,m),Object(i.e)(d,f),Object(i.e)(f,j),y||(x=[Object(i.H)(o,"click",t[4]),Object(i.H)(c,"click",t[5]),Object(i.H)(p,"click",t[6]),Object(i.H)(f,"click",t[7])],y=!0)},p(t,n){8&n&&r!==(r=String(!t[3].cumulative))&&Object(i.g)(o,"aria-pressed",r),8&n&&Object(i.bb)(o,"uk-active",!t[3].cumulative),8&n&&u!==(u=t[3].cumulative)&&Object(i.g)(c,"aria-pressed",u),8&n&&Object(i.bb)(c,"uk-active",t[3].cumulative),8&n&&O!==(O=String(!t[3].incidence))&&Object(i.g)(p,"aria-pressed",O),8&n&&Object(i.bb)(p,"uk-active",!t[3].incidence),8&n&&g!==(g=String(t[3].incidence))&&Object(i.g)(f,"aria-pressed",g),8&n&&Object(i.bb)(f,"uk-active",t[3].incidence),4&n&&v!==(v="root "+t[2]+" svelte-1iknxf6")&&Object(i.g)(e,"class",v),5&n&&Object(i.bb)(e,"center",t[0])},d(t){t&&Object(i.t)(e),y=!1,Object(i.O)(x)}}}function l(t){let e,n=t[1].isCasesOrDeath&&c(t);return{c(){n&&n.c(),e=Object(i.v)()},m(t,o){n&&n.m(t,o),Object(i.F)(t,e,o)},p(t,[i]){t[1].isCasesOrDeath?n?n.p(t,i):(n=c(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:i.J,o:i.J,d(t){n&&n.d(t),t&&Object(i.t)(e)}}}function u(t,e,n){let a,s;Object(i.l)(t,o.q,(t=>n(8,a=t))),Object(i.l)(t,o.C,(t=>n(3,s=t)));let{center:c=!1}=e,{sensor:l=a}=e,{className:u=""}=e;return t.$$set=t=>{"center"in t&&n(0,c=t.center),"sensor"in t&&n(1,l=t.sensor),"className"in t&&n(2,u=t.className)},[c,l,u,s,()=>{s.cumulative&&o.C.set(r(r({},s),{},{cumulative:!1}))},()=>{s.cumulative||o.C.set(r(r({},s),{},{cumulative:!0}))},()=>{s.incidence&&o.C.set(r(r({},s),{},{incidence:!1}))},()=>{s.incidence||o.C.set(r(r({},s),{},{incidence:!0}))}]}class b extends i.b{constructor(t){super(),Object(i.E)(this,t,u,l,i.P,{center:0,sensor:1,className:2})}}e.a=b},337:function(t){t.exports=JSON.parse('{"states":[[-24.026114,-13.139448],[20.771771,12.76366]],"msa":[[-54.263546,-12.810824899501114],[20.443824516406067,12.76366]],"counties":[[-24.026114,-13.139448],[20.771771,12.76366]],"hrr":[[-22.371886914960523,-13.086989732096237],[20.69602138694648,12.765811283178328]]}')},338:function(t){t.exports=JSON.parse('{"version":8,"name":"Albers USA","metadata":{"mapbox:autocomposite":true,"mapbox:type":"template","mapbox:sdk-support":{"js":"1.6.0","android":"8.6.0","ios":"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},"center":[-1.9392753230472408,-1.4351091963094262],"zoom":4.035119632783768,"bearing":0,"pitch":0,"glyphs":"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf","sources":{},"layers":[]}')},349:function(t,e,n){"use strict";var i=n(0),o=n(59),a=n(3),r=n(238),s=n(351),c=n.n(s),l=n(37),u=n(306),b=n(1);const d={min:0,max:100,mean:50,std:10};function p(t,e){if(!t||!t.has(e))return d;const n=t.get(e);return[n.max,n.std,n.mean].some((t=>null==t||Number.isNaN(t)))?(console.warn("invalid stats detected for",e),d):n}function h(t,e,n,i,o=!1){let a=e.key;if("count"===e.getType(i)){a+="_".concat(n),e.isCasesOrDeath&&(a+="_".concat(Object(b.m)(e,i)));const r=p(t,a);return o?[0,r.max]:[Math.max(.14,r.mean-3*r.std),r.mean+3*r.std]}e.isCasesOrDeath&&(a+="_".concat(Object(b.m)(e,i)));const r=p(t,a);return o?[0,r.max]:[Math.max(0,r.mean-3*r.std),r.mean+3*r.std]}function O(t,e,n){return"count"===n?function(t,e){const n=Object(r.c)(e.colorScale).domain(t),i=c()(Math.log10(t[0]),Math.log10(t[1]),7),o=i.map((t=>n(t).toString()));return{stops:Object(u.f)(i,o),scale:n}}(t,e):"prop"===n?function(t,e){const n=Math.max(t[0],0),i=Math.max(n+.01,t[1]),o=n+(i-n)/2,a=n+(o-n)/2,s=o+(i-o)/2,c=Object(r.b)(e.colorScale).domain(t),l=[n,a,o,s,i],b=l.map((t=>c(t).toString()));return{stops:Object(u.f)(l,b),scale:c}}(t,e):function(t,e){const n=t[0]+(t[1]-t[0])/2,i=t[0]+(n-t[0])/2,o=n+(t[1]-n)/2,a=Object(r.b)(e.colorScale).domain(t),s=[t[0],i,n,o,t[1]],c=s.map((t=>a(t).toString()));return{stops:Object(u.f)(s,c),scale:a}}(t,e)}function m(t,e,n){const i=[t],o=(e-t)/n;for(let t=1;t<n;t++)i.push(i[t-1]+o);return i.push(e),i}function f(t,e,n,i,o,a=!1){const r=t?h(t,e,n,o):null;if(!r)return{labels:[],high:"",valueMinMax:[0,0]};const s=function(t,e,n,i){const o=i?5:7;if("count"===t.getType(e)){const t=Math.log10(Math.max(.01,n[0])),e=Math.log10(Math.max(.1,n[1]));return c()(t,e,o)}return"raw"===t.format?(n[0]=Math.max(0,n[0]),m(n[0],n[1],o)):(n[0]=Math.max(0,n[0]),n[1]=Math.min(100,n[1]),m(n[0],n[1],o))}(e,o,r,a);return{low:e.formatValue(0),lowValue:0,lowColor:l.e,labels:s.slice(0,-1).map(((t,n)=>({label:e.formatValue(t),value:t,color:i(t),nextColor:i(s[n+1])}))),high:"".concat(e.formatValue(r[1]),"+"),highValue:r[1],highColor:i(r[1]),valueMinMax:r}}n(254);function j(t){let e,n,o;return{c(){e=Object(i.u)("div"),Object(i.g)(e,"class","map-wrapper svelte-54x2e1")},m(a,r){Object(i.F)(a,e,r),t[17](e),n||(o=Object(i.H)(window,"resize",t[1]),n=!0)},p:i.J,i:i.J,o:i.J,d(a){a&&Object(i.t)(e),t[17](null),n=!1,o()}}}function g(t,e,n){let r;Object(i.l)(t,a.F,(t=>n(16,r=t)));let{wrapperClass:s}=e,c=null;const l=Object(o.a)(),u=new s(((t,e)=>l(t,e))),d=u.zoom;let{data:p=Promise.resolve([])}=e,{sensor:m=""}=e,{level:f="state"}=e,{encoding:j="color"}=e,{signalOptions:g={}}=e,{animationDuration:v=0}=e,{title:y=""}=e,{selections:x=[]}=e,{focusOn:w=null}=e,_=!1;return Object(o.c)((()=>{n(14,u.animationDuration=v,u),u.initMap(c,y).then((()=>{n(15,_=!0)}))})),Object(o.b)((()=>{u.destroy()})),t.$$set=t=>{"wrapperClass"in t&&n(2,s=t.wrapperClass),"data"in t&&n(5,p=t.data),"sensor"in t&&n(6,m=t.sensor),"level"in t&&n(7,f=t.level),"encoding"in t&&n(8,j=t.encoding),"signalOptions"in t&&n(9,g=t.signalOptions),"animationDuration"in t&&n(10,v=t.animationDuration),"title"in t&&n(11,y=t.title),"selections"in t&&n(12,x=t.selections),"focusOn"in t&&n(13,w=t.focusOn)},t.$$.update=()=>{17120&t.$$.dirty&&u.updateSources(f,p,Object(b.m)(b.p.get(m),g)),99264&t.$$.dirty&&r&&function(t,e,n,i,o){const a=b.p.get(n),r=a.getType(o),s=h(i,a,t,o),{stops:c,scale:d}=O(s,a,r),p="county"===t,m=u.updateOptions(e,t,n,r,s,c,p&&c,d);l("updatedEncoding",{range:s,custom:m,scale:d,stops:c})}(f,j,m,r,g),53248&t.$$.dirty&&u.selectMulti(x),57344&t.$$.dirty&&u.focusOn(w),18432&t.$$.dirty&&u.setTitle(y)},[c,function(){u.zoom.resized()},s,d,function(){u.selectRandom()},p,m,f,j,g,v,y,x,w,u,_,r,function(t){i.i[t?"unshift":"push"]((()=>{c=t,n(0,c)}))}]}class v extends i.b{constructor(t){super(),Object(i.E)(this,t,g,j,i.P,{wrapperClass:2,zoom:3,selectRandom:4,data:5,sensor:6,level:7,encoding:8,signalOptions:9,animationDuration:10,title:11,selections:12,focusOn:13})}get zoom(){return this.$$.ctx[3]}get selectRandom(){return this.$$.ctx[4]}}var y=v,x=n(60),w=n(337),_=n(317);n(255);const S=-100;function k(t){return["case",["==",["to-number",["feature-state","value"],S],S],l.d,["==",["to-number",["feature-state","value"],S],0],l.e,["interpolate",["linear"],["to-number",["feature-state","value"],0],...t.flat()]]}function $(t){return"".concat(t,"-border")}function E(t){return"".concat(t,"-centers")}const P="city-point";function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t){return"".concat(t,"-fill")}function A(t){return"".concat(t,"-hover")}function R(t){return"".concat(t,"-bubble")}function D(t){return"".concat(t,"-spike")}function z(t){return"".concat(t,"-border")}const N="state-stroke",F="state-names",Z={pit:"city-point-unclustered-pit",1:"city-point-unclustered-1",2:"city-point-unclustered-2",3:"city-point-unclustered-3",4:"city-point-unclustered-4",5:"city-point-unclustered-5"};var U=n(307);n(256);function T(t){let e,n,o,a,r,s,c,l,u,b,d,p=t[1].displayName+"",h=Object(U.f)(t[1])+"";function O(t,e){return t[4].isCasesOrDeath?q:I}let m=O(t),f=m(t);return{c(){e=Object(i.u)("h5"),n=Object(i.Z)(p),o=Object(i.V)(),a=Object(i.u)("table"),r=Object(i.u)("tbody"),s=Object(i.u)("tr"),c=Object(i.u)("th"),c.textContent="Population",l=Object(i.V)(),u=Object(i.u)("td"),b=Object(i.Z)(h),d=Object(i.V)(),f.c(),Object(i.g)(e,"class","svelte-1u8gn73"),Object(i.g)(c,"class","svelte-1u8gn73"),Object(i.g)(u,"class","right svelte-1u8gn73"),Object(i.g)(a,"class","svelte-1u8gn73")},m(t,p){Object(i.F)(t,e,p),Object(i.e)(e,n),Object(i.F)(t,o,p),Object(i.F)(t,a,p),Object(i.e)(a,r),Object(i.e)(r,s),Object(i.e)(s,c),Object(i.e)(s,l),Object(i.e)(s,u),Object(i.e)(u,b),Object(i.e)(r,d),f.m(r,null)},p(t,e){2&e&&p!==(p=t[1].displayName+"")&&Object(i.S)(n,p),2&e&&h!==(h=Object(U.f)(t[1])+"")&&Object(i.S)(b,h),m===(m=O(t))&&f?f.p(t,e):(f.d(1),f=m(t),f&&(f.c(),f.m(r,null)))},d(t){t&&Object(i.t)(e),t&&Object(i.t)(o),t&&Object(i.t)(a),f.d()}}}function B(t){let e,n,o,a=t[1].displayName+"";return{c(){e=Object(i.u)("h5"),n=Object(i.Z)("Estimate unavailable for rest of "),o=Object(i.Z)(a),Object(i.g)(e,"class","svelte-1u8gn73")},m(t,a){Object(i.F)(t,e,a),Object(i.e)(e,n),Object(i.e)(e,o)},p(t,e){2&e&&a!==(a=t[1].displayName+"")&&Object(i.S)(o,a)},d(t){t&&Object(i.t)(e)}}}function H(t){let e;return{c(){e=Object(i.u)("h5"),e.textContent="Estimate unavailable",Object(i.g)(e,"class","svelte-1u8gn73")},m(t,n){Object(i.F)(t,e,n)},p:i.J,d(t){t&&Object(i.t)(e)}}}function I(t){let e,n,o,a,r,s,c,l=t[4].yAxis+"",u=t[4].formatValue(t[2])+"";return{c(){e=Object(i.u)("tr"),n=Object(i.u)("th"),o=Object(i.Z)(l),a=Object(i.V)(),r=Object(i.u)("td"),s=Object(i.Z)(u),Object(i.g)(n,"class","svelte-1u8gn73"),Object(i.g)(r,"class","right svelte-1u8gn73"),Object(i.g)(r,"style",c=t[6](t[2]))},m(t,c){Object(i.F)(t,e,c),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(e,a),Object(i.e)(e,r),Object(i.e)(r,s)},p(t,e){16&e&&l!==(l=t[4].yAxis+"")&&Object(i.S)(o,l),20&e&&u!==(u=t[4].formatValue(t[2])+"")&&Object(i.S)(s,u),4&e&&c!==(c=t[6](t[2]))&&Object(i.g)(r,"style",c)},d(t){t&&Object(i.t)(e)}}}function q(t){let e,n,o,a,r,s,c,l,u,b,d,p,h,O,m,f,j,g,v,y,x,w,_,S,k,$,E,P,C,V,L,M,A,R,D,z,N,F,Z,T,B,H,I,q=t[4].yAxis+"",J=Object(U.c)(t[5])+"",Y=t[4].formatValue(t[1].count)+"",G=t[4].formatValue(t[1].countRatio)+"",W=t[4].formatValue(t[1].avg)+"",X=t[4].formatValue(t[1].avgRatio)+"",Q=Object(U.c)(t[5])+"",K=t[4].formatValue(t[1].countCumulative)+"",tt=t[4].formatValue(t[1].countRatioCumulative)+"";return{c(){e=Object(i.u)("tr"),n=Object(i.u)("th"),o=Object(i.Z)(q),a=Object(i.V)(),r=Object(i.u)("th"),r.textContent="Count",s=Object(i.V)(),c=Object(i.u)("th"),c.textContent="Ratios (per 100,000)",l=Object(i.V)(),u=Object(i.u)("tr"),b=Object(i.u)("th"),d=Object(i.Z)(J),p=Object(i.V)(),h=Object(i.u)("td"),O=Object(i.Z)(Y),f=Object(i.V)(),j=Object(i.u)("td"),g=Object(i.Z)(G),y=Object(i.V)(),x=Object(i.u)("tr"),w=Object(i.u)("th"),w.textContent="7-day avg",_=Object(i.V)(),S=Object(i.u)("td"),k=Object(i.Z)(W),E=Object(i.V)(),P=Object(i.u)("td"),C=Object(i.Z)(X),L=Object(i.V)(),M=Object(i.u)("tr"),A=Object(i.u)("th"),R=Object(i.Z)("Cumulative "),D=Object(i.Z)(Q),z=Object(i.V)(),N=Object(i.u)("td"),F=Object(i.Z)(K),T=Object(i.V)(),B=Object(i.u)("td"),H=Object(i.Z)(tt),Object(i.g)(n,"class","svelte-1u8gn73"),Object(i.g)(r,"class","area svelte-1u8gn73"),Object(i.g)(c,"class","area svelte-1u8gn73"),Object(i.g)(b,"class","svelte-1u8gn73"),Object(i.g)(h,"class","right svelte-1u8gn73"),Object(i.g)(h,"style",m=!t[3].cumulative&&t[3].incidence?t[6](t[1].count):""),Object(i.g)(j,"class","right svelte-1u8gn73"),Object(i.g)(j,"style",v=t[3].cumulative||t[3].incidence?"":t[6](t[1].countRatio)),Object(i.g)(w,"class","svelte-1u8gn73"),Object(i.g)(S,"class","right svelte-1u8gn73"),Object(i.g)(S,"style",$=!t[3].cumulative&&t[3].incidence?t[6](t[1].avg):""),Object(i.g)(P,"class","right svelte-1u8gn73"),Object(i.g)(P,"style",V=t[3].cumulative||t[3].incidence?"":t[6](t[1].avgRatio)),Object(i.g)(A,"class","svelte-1u8gn73"),Object(i.g)(N,"class","right svelte-1u8gn73"),Object(i.g)(N,"style",Z=t[3].cumulative&&t[3].incidence?t[6](t[1].countCumulative):""),Object(i.g)(B,"class","right svelte-1u8gn73"),Object(i.g)(B,"style",I=t[3].cumulative&&!t[3].incidence?t[6](t[1].countRatioCumulative):"")},m(t,m){Object(i.F)(t,e,m),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(e,a),Object(i.e)(e,r),Object(i.e)(e,s),Object(i.e)(e,c),Object(i.F)(t,l,m),Object(i.F)(t,u,m),Object(i.e)(u,b),Object(i.e)(b,d),Object(i.e)(u,p),Object(i.e)(u,h),Object(i.e)(h,O),Object(i.e)(u,f),Object(i.e)(u,j),Object(i.e)(j,g),Object(i.F)(t,y,m),Object(i.F)(t,x,m),Object(i.e)(x,w),Object(i.e)(x,_),Object(i.e)(x,S),Object(i.e)(S,k),Object(i.e)(x,E),Object(i.e)(x,P),Object(i.e)(P,C),Object(i.F)(t,L,m),Object(i.F)(t,M,m),Object(i.e)(M,A),Object(i.e)(A,R),Object(i.e)(A,D),Object(i.e)(M,z),Object(i.e)(M,N),Object(i.e)(N,F),Object(i.e)(M,T),Object(i.e)(M,B),Object(i.e)(B,H)},p(t,e){16&e&&q!==(q=t[4].yAxis+"")&&Object(i.S)(o,q),32&e&&J!==(J=Object(U.c)(t[5])+"")&&Object(i.S)(d,J),18&e&&Y!==(Y=t[4].formatValue(t[1].count)+"")&&Object(i.S)(O,Y),10&e&&m!==(m=!t[3].cumulative&&t[3].incidence?t[6](t[1].count):"")&&Object(i.g)(h,"style",m),18&e&&G!==(G=t[4].formatValue(t[1].countRatio)+"")&&Object(i.S)(g,G),10&e&&v!==(v=t[3].cumulative||t[3].incidence?"":t[6](t[1].countRatio))&&Object(i.g)(j,"style",v),18&e&&W!==(W=t[4].formatValue(t[1].avg)+"")&&Object(i.S)(k,W),10&e&&$!==($=!t[3].cumulative&&t[3].incidence?t[6](t[1].avg):"")&&Object(i.g)(S,"style",$),18&e&&X!==(X=t[4].formatValue(t[1].avgRatio)+"")&&Object(i.S)(C,X),10&e&&V!==(V=t[3].cumulative||t[3].incidence?"":t[6](t[1].avgRatio))&&Object(i.g)(P,"style",V),32&e&&Q!==(Q=Object(U.c)(t[5])+"")&&Object(i.S)(D,Q),18&e&&K!==(K=t[4].formatValue(t[1].countCumulative)+"")&&Object(i.S)(F,K),10&e&&Z!==(Z=t[3].cumulative&&t[3].incidence?t[6](t[1].countCumulative):"")&&Object(i.g)(N,"style",Z),18&e&&tt!==(tt=t[4].formatValue(t[1].countRatioCumulative)+"")&&Object(i.S)(H,tt),10&e&&I!==(I=t[3].cumulative&&!t[3].incidence?t[6](t[1].countRatioCumulative):"")&&Object(i.g)(B,"style",I)},d(t){t&&Object(i.t)(e),t&&Object(i.t)(l),t&&Object(i.t)(u),t&&Object(i.t)(y),t&&Object(i.t)(x),t&&Object(i.t)(L),t&&Object(i.t)(M)}}}function J(t){let e;function n(t,e){return t[1]?t[0]?B:T:H}let o=n(t),a=o(t);return{c(){e=Object(i.u)("div"),a.c(),Object(i.g)(e,"aria-label","tooltip"),Object(i.g)(e,"class","tooltip svelte-1u8gn73")},m(t,n){Object(i.F)(t,e,n),a.m(e,null)},p(t,[i]){o===(o=n(t))&&a?a.p(t,i):(a.d(1),a=o(t),a&&(a.c(),a.m(e,null)))},i:i.J,o:i.J,d(t){t&&Object(i.t)(e),a.d()}}}function Y(t,e,n){let o,r,s,c;Object(i.l)(t,a.C,(t=>n(7,o=t))),Object(i.l)(t,a.e,(t=>n(8,r=t))),Object(i.l)(t,a.q,(t=>n(4,s=t))),Object(i.l)(t,a.i,(t=>n(5,c=t)));let b,d,{invalid:p=!1}=e,{properties:h}=e;return t.$$set=t=>{"invalid"in t&&n(0,p=t.invalid),"properties"in t&&n(1,h=t.properties)},t.$$.update=()=>{2&t.$$.dirty&&n(2,b=h?h.value:0),128&t.$$.dirty&&n(3,d=o)},[p,h,b,d,s,c,function(t){const e=0===t?l.e:r(t);return"background-color: ".concat(e,"; color: ").concat(Object(u.b)(e))},o]}class G extends i.b{constructor(t){super(),Object(i.E)(this,t,Y,J,i.P,{invalid:0,properties:1})}}var W=G;function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){K(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class tt{constructor(t,e){this.adapter=e,this.map=t,this.data=new Map,this.popup=new _.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup"}),this.topPopup=new _.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup",anchor:"top"}),this.tooltipState=null,this.selection=[],this.hovered={id:null,level:null},this.tooltipElement=document.createElement("div"),this.tooltip=new W({target:this.tooltipElement,props:{properties:null,invalid:!0}}),this.initListeners()}setData(t){this.data=t,this.tooltipState=null}initListeners(){if(this.adapter.levels.forEach((t=>{const e=M(t);this.map.on("mouseleave",e,this._onLevelMouseLeave.bind(this)),this.map.on("mousemove",e,this._onLevelMouseMove.bind(this)),this.map.on("click",e,this._onLevelMouseClick.bind(this))})),this.adapter.hasMegaCountyLevel){const t=M(b.k.id);this.map.on("mouseleave",t,this._onMegaMouseLeave.bind(this)),this.map.on("mousemove",t,this._onMegaMouseMove.bind(this)),this.map.on("click",t,this._onMegaMouseClick.bind(this))}this.map.on("mouseenter",N,this._onMapMouseEnter.bind(this)),this.map.on("mouseleave",N,this._onMapMouseLeave.bind(this)),this.map.on("mousemove",N,this._onMapMouseMove.bind(this))}get activePopup(){return"spike"===this.adapter.encoding.id?this.topPopup:this.popup}_onMapMouseEnter(){this.map.getCanvas().style.cursor="pointer"}_onLevelMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMegaMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove(),this._updateHoverHighlight(null)}_onMapMouseLeave(){this.map.getCanvas().style.cursor="",this.activePopup.remove()}_onLevelMouseMove(t){const e=t.features[0];this.adapter.isMissing(e)||(t.preventDefault(),this._updateHoverHighlight(e.id,e.properties.level),this._renderTooltip(t))}_onMegaMouseMove(t){if(t.defaultPrevented)return;const e=t.features[0];this.adapter.isMissing(e)||(t.preventDefault(),this._updateHoverHighlight(e.id,e.properties.level),this._renderTooltip(t))}_onMapMouseMove(t){t.defaultPrevented||this._renderTooltip(t,!0)}_onLevelMouseClick(t){const e=t.features[0];this.adapter.isMissing(e)||(t.preventDefault(),this.adapter.dispatch("select",{feature:e,originalEvent:t.originalEvent}))}_onMegaMouseClick(t){if(t.defaultPrevented)return;const e=t.features[0];this.adapter.isMissing(e)||(t.preventDefault(),this.adapter.dispatch("select",{feature:e,originalEvent:t.originalEvent}))}_renderTooltip(t,e=!1){this.map.getCanvas().style.cursor="pointer";const n=t.features[0],i=this.activePopup;if(!this.tooltipState||this.tooltipState.id!==n.properties.id||this.tooltipState.invalid!==e){this.tooltipState={id:n.properties.id,invalid:e};let t={};n.properties.level===b.k.id&&this.adapter.hasMegaCountyLevel&&(t.population=Object(x.a)(n.properties,this.data)),this.tooltip.$set({properties:Q(Q(Q({},n.properties),t),this.data.get(n.properties.id)||{}),invalid:e})}i.setLngLat(t.lngLat).setDOMContent(this.tooltipElement).addTo(this.map)}_updateState(t,e,n){this.map.setFeatureState({source:t,id:"string"==typeof e?Number.parseInt(e,10):e},n)}_updateHoverLayerVisibility(){const t=new Set(this.selection.map((t=>t.level)));null!=this.hovered.id&&t.add(this.hovered.level);const e=e=>{"none"!==this.map.getLayoutProperty(A(e),"visibility")!==t.has(e)&&this.map.setLayoutProperty(A(e),"visibility",t.has(e)?"visible":"none")};for(const t of this.adapter.levels)e(t);this.adapter.hasMegaCountyLevel&&e(b.k.id)}_updateHoverHighlight(t=null,e=null){this.hovered.id!=t&&(this.hovered.id&&this._updateState($(this.hovered.level),this.hovered.id,{hover:!1}),t&&this._updateState($(e),t,{hover:!0}),this.hovered.id=t,this.hovered.level=e,this._updateHoverLayerVisibility())}select(t){return this.selectMulti(t?[{info:t,color:l.c.selectedRegionOutline}]:[])[0]}selectMulti(t){const e=this.selection.slice();for(const t of this.selection)this._updateState($(t.level),t.id,{select:!1});return this.selection=t.map((t=>{const e=Number(t.info.id);return this._updateState($(t.info.level),e,{select:t.color}),{id:e,level:t.info.level,color:t.color}})),this._updateHoverLayerVisibility(),e}forceHover(t){this._updateHoverHighlight(t.id,t.properties.level)}isHovered(t){return!!t&&(t.id==this.hovered.id&&t.level===this.hovered.level)}}var et=n(338),nt=n(352),it=n.n(nt);class ot{constructor(t,e){this.map=null,this.onZoom=t,this.resetBounds=e,this.resetBoundsOptions={padding:30,linear:!1},this.stateZoom=1,this.initialZoomView=!0}_triggerZoom(t){const e=this.map.getZoom(),n=this.stateZoom,i=Math.pow(2,.75*(e-n));this.onZoom(i,t)}setMap(t){this.map=t,this.stateZoom=this.map.getZoom(),this.map.setMinZoom(this.stateZoom-1),this.map.on("zoom",(()=>{this._triggerZoom()}))}ready(){this.stateZoom=this.map.getZoom(),this._triggerZoom()}getZoom(){return this.map?this.map.getZoom():0}getMaxZoom(){return this.map?this.map.getMaxZoom():100}getMinZoom(){return this.map?this.map.getMinZoom():-100}zoomIn(){this.map&&(this.initialZoomView=!1,this.map.zoomIn())}zoomOut(){this.map&&(this.initialZoomView=!1,this.map.zoomOut())}focusOn(t){if(!t||!this.map)return;this.initialZoomView=!1;const e=it()(t);this.map.fitBounds(e,{maxZoom:1.5*this.getZoom(),linear:!1,essential:!0})}resetZoom(){this.map&&(this.initialZoomView=!0,this.map.fitBounds(this.resetBounds,this.resetBoundsOptions),this.map.once("idle",(()=>{this.stateZoom=this.map.getZoom(),this.map.setMinZoom(this.stateZoom-1),this._triggerZoom(!0)})))}resized(){this.initialZoomView&&this.map&&requestAnimationFrame((()=>{this.map&&this.map.fitBounds(this.resetBounds,this.resetBoundsOptions)}))}showStateLabels(t){this.map&&this.map.getLayer(F)&&this.map.setLayoutProperty(F,"visibility",t?"visible":"none")}toggleStateLabels(){this.map&&this.map.getLayer(F)&&this.showStateLabels("visible"!==this.map.getLayoutProperty(F,"visibility"))}}var at=n(157);function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){ct(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class lt{constructor(){this.id="color",this.layers=[]}getVisibleLayers(t){return[M(t),"county"===t&&M(b.k.id),"county"===t&&z("state")].filter(Boolean)}addLayers(){}encode(t,{level:e,stops:n,stopsMega:i}){t.setPaintProperty(M(e),"fill-color",k(n)),i&&t.setPaintProperty(M(b.k.id),"fill-color",k(i))}updateSources(){}}var ut=n(75),bt=n(15);class dt{constructor(t,e,n,i){this._sourceId=t,this._level=e,this._colorsDirty=!0,this.featureIds=[],this._valueLookup=new Map,this._valuePrimaryValue="value",this._valueToColor=()=>l.d,this._valueToSize=()=>0,this._vertexSource=n,this._fragmentSource=i,this._map=null,this.zoom=1}asLayer(t){return{id:t,type:"custom",renderingMode:"2d",onAdd:(t,e)=>this.onAdd(t,e),render:(t,e)=>this.render(t,e),onRemove:(t,e)=>this.onRemove(t,e),prerender:(t,e)=>this.preRender(t,e)}}_createVertices(t){return[t.x,t.y]}onAdd(t,e){this._map=t,this._vertexShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertexShader,this._vertexSource),e.compileShader(this._vertexShader),this._fragmentShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragmentShader,this._fragmentSource),e.compileShader(this._fragmentShader),this._program=e.createProgram(),e.attachShader(this._program,this._vertexShader),e.attachShader(this._program,this._fragmentShader),e.linkProgram(this._program),this._uPos=e.getUniformLocation(this._program,"u_matrix"),this._uOpacity=e.getUniformLocation(this._program,"u_opacity"),this._uPixelToClip=e.getUniformLocation(this._program,"u_pixelToClip"),this._uZoom=e.getUniformLocation(this._program,"u_zoom"),this._uDevicePixelRatio=e.getUniformLocation(this._program,"u_device_pixel_ratio"),this._aPos=e.getAttribLocation(this._program,"a_pos"),this._centerBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._centerBuffer);const n=t.getSource(this._sourceId)._data.features.map((t=>{const e=t.geometry.coordinates,n=e[0],i=e[1];if(null==i||Number.isNaN(i))return[];this.featureIds.push(t.properties.id);const o=_.MercatorCoordinate.fromLngLat({lat:i,lng:n});return this._createVertices(o)})).flat();e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),this._verticesPerFeatures=n.length/3/this.featureIds.length,this._aColorAndValue=e.getAttribLocation(this._program,"a_colorAndValue"),this._colorAndValueBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._colorAndValueBuffer),this._colorAndValueData=new Float32Array(4*this.featureIds.length*this._verticesPerFeatures),this._colorAndValueData.fill(0),e.bufferData(e.ARRAY_BUFFER,this._colorAndValueData,e.STATIC_DRAW)}onRemove(t,e){this._map=null,e.deleteBuffer(this._centerBuffer),e.deleteBuffer(this._colorAndValueBuffer),e.deleteShader(this._fragmentShader),e.deleteShader(this._vertexShader),e.deleteProgram(this._program)}_prepareRender(t,e){t.useProgram(this._program),t.uniformMatrix4fv(this._uPos,!1,e);const n=this._map.painter.transform;t.uniform1f(this._uZoom,this.zoom),t.uniform2f(this._uPixelToClip,n.pixelsToGLUnits[0],n.pixelsToGLUnits[1]),t.uniform1f(this._uDevicePixelRatio,window.devicePixelRatio),t.bindBuffer(t.ARRAY_BUFFER,this._colorAndValueBuffer),t.enableVertexAttribArray(this._aColorAndValue),t.vertexAttribPointer(this._aColorAndValue,4,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._centerBuffer),t.enableVertexAttribArray(this._aPos),t.vertexAttribPointer(this._aPos,3,t.FLOAT,!1,0,0),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}preRender(t){if(this._colorsDirty){this._colorsDirty=!1;for(let t=0;t<this.featureIds.length;t++){const e=this.featureIds[t],n=this._valueLookup.has(e)?this._valueLookup.get(e)[this._valuePrimaryValue]:null,i=this._verticesPerFeatures;if(null==n||Number.isNaN(n)){for(let e=0;e<i;e++){const n=4*t*i+4*e;this._colorAndValueData[n]=0,this._colorAndValueData[n+1]=0,this._colorAndValueData[n+2]=0,this._colorAndValueData[n+3]=0}continue}const o=Object(bt.g)(this._valueToColor(n)),a=this._valueToSize(n);for(let e=0;e<i;e++){const n=4*t*i+4*e;this._colorAndValueData[n]=o.r,this._colorAndValueData[n+1]=o.g,this._colorAndValueData[n+2]=o.b,this._colorAndValueData[n+3]=a}}t.bindBuffer(t.ARRAY_BUFFER,this._colorAndValueBuffer),t.bufferData(t.ARRAY_BUFFER,this._colorAndValueData,t.STATIC_DRAW)}}encode(t,e){this._colorsDirty=!0,this._valueToSize=t,this._valueToColor=e}updateSources(t,e){this._colorsDirty=!0,this._valueLookup=t,this._valuePrimaryValue=e}}class pt extends dt{constructor(t,e){super(t,e,"\nuniform mat4 u_matrix;\nuniform float u_zoom;\nuniform vec2 u_pixelToClip;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n\n  vec2 pos = vec2(a_pos.z < 0.0 ? -1.0 : 1.0, abs(a_pos.z) < 2.0 ? -1.0 : 1.0);\n  p.xy += pos * u_pixelToClip * (u_zoom * a_colorAndValue.a + 1.0) * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n\n  v_data = vec4(pos, a_colorAndValue.a * u_zoom, 1.0);\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n}","\nprecision mediump float;\nuniform float u_opacity;\nuniform float u_device_pixel_ratio;\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n\n  float extrude_length = length(v_data.xy);\n  float radius = v_data.z;\n  float stroke_width = v_data.w;\n\n  float blur = -(1.0 / u_device_pixel_ratio / (radius + stroke_width));\n  float opacity_t = smoothstep(0.0, blur, extrude_length - 1.0);\n\n  float color_t = smoothstep(\n      blur,\n      0.0,\n      extrude_length - radius / (radius + stroke_width)\n  );\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = opacity_t * mix(fill_color, stroke_color, color_t);\n}")}_createVertices(t){return[t.x,t.y,-2,t.x,t.y,-1,t.x,t.y,1,t.x,t.y,2]}onAdd(t,e){super.onAdd(t,e),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer);const n=new Uint16Array(6*this.featureIds.length);for(let t=0;t<this.featureIds.length;t++){const e=6*t,i=4*t;n[e]=i,n[e+1]=i+1,n[e+2]=i+2,n[e+3]=i+2,n[e+4]=i+3,n[e+5]=i}e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}onRemove(t,e){super.onRemove(t,e),e.deleteBuffer(this._indexBuffer)}render(t,e){super._prepareRender(t,e),t.uniform1f(this._uOpacity,l.a.fillOpacity),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.drawElements(t.TRIANGLES,6*this.featureIds.length,t.UNSIGNED_SHORT,0)}}class ht{constructor(t,e){this.id="bubble",this.theme=t,this.layers=e.map((t=>R(t))),this.customLayers=new Map(e.map((t=>[t,new pt(E(t),t)])))}getVisibleLayers(t){return[M(t),R(t)]}onZoom(t){this.customLayers.forEach((e=>e.zoom=t))}getMaxZoom(t){return 50/this.theme.maxRadius[t]}addLayers(t,e){e.levels.forEach((e=>{t.addLayer(this.customLayers.get(e).asLayer(R(e)))}))}encode(t,{level:e,sensorType:n,valueMinMax:i,scale:o}){t.setPaintProperty(M(e),"fill-color",this.theme.countyFill);const a=this.theme.maxRadius[e],r=this.theme.radiusScale[n],s=Object(ut.c)(r).domain([0,i[1]]).range([0,a]).clamp(!0);return this.customLayers.get(e).encode(s,o),s}updateSources(t,e,n,i){this.customLayers.get(e).updateSources(n,i)}}class Ot extends dt{constructor(t,e){super(t,e,"\nuniform mat4 u_matrix;\nuniform vec2 u_pixelToClip;\nuniform float u_zoom;\n\nuniform float u_size;\n\nattribute vec3 a_pos;\nattribute vec4 a_colorAndValue;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\nvoid main() {\n  vec4 p = u_matrix * vec4(a_pos.xy, 0.0, 1.0);\n  float height = (a_colorAndValue.a * u_zoom + 1.0);\n  float shift = a_pos.z * (u_size * u_zoom + 1.0);\n\n  p.y -= (1.0 - abs(a_pos.z)) * height * u_pixelToClip.y * p.w;\n  p.x += shift * u_pixelToClip.x * p.w;\n\n  gl_Position = p;\n  v_color = a_colorAndValue.rgb / 255.0;\n  v_discard = a_colorAndValue.a == 0.0 ? 1.0 : 0.0;\n  float thickness = 1.0;\n  // encode the barycentric coordinate but such that the bottom line is not shown\n  v_data = vec4(-min(shift, 0.0), height, max(shift, 0.0), thickness);\n\n}","\n#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\nuniform float u_device_pixel_ratio;\nuniform float u_opacity;\n\nvarying vec3 v_color;\nvarying float v_discard;\nvarying vec4 v_data;\n\n// This is like\nfloat aastep (float threshold, float dist) {\n  float afwidth = fwidth(dist) * 0.5;\n  return smoothstep(threshold - afwidth, threshold + afwidth, dist);\n}\n\nvoid main() {\n  if (v_discard == 1.0) {\n    discard;\n  }\n  vec3 barycentric = v_data.xyz;\n  float stroke_width = v_data.w;\n\n  // this will be our signed distance for the wireframe edge\n  float d = min(min(barycentric.x, barycentric.y), barycentric.z);\n  // compute the anti-aliased stroke edge\n  float edge = 1.0 - aastep(stroke_width, d);\n\n  vec4 fill_color = vec4(v_color * u_opacity, u_opacity);\n  vec4 stroke_color = vec4(v_color, 1.0);\n\n  gl_FragColor = mix(fill_color, stroke_color, edge);\n}")}_createVertices(t){return[t.x,t.y,-1,t.x,t.y,0,t.x,t.y,1]}asLayer(t){return{id:t,type:"custom",renderingMode:"2d",onAdd:(t,e)=>this.onAdd(t,e),render:(t,e)=>this.render(t,e),onRemove:(t,e)=>this.onRemove(t,e),prerender:(t,e)=>this.preRender(t,e)}}onAdd(t,e){e.getExtension("OES_standard_derivatives"),super.onAdd(t,e),this._uSize=e.getUniformLocation(this._program,"u_size")}onRemove(t,e){super.onRemove(t,e),e.deleteBuffer(this._indexBuffer)}render(t,e){super._prepareRender(t,e),t.uniform1f(this._uOpacity,l.b.fillOpacity),t.uniform1f(this._uSize,l.b.size[this._level]),t.drawArrays(t.TRIANGLES,0,this.featureIds.length*this._verticesPerFeatures)}}class mt{constructor(t,e){this.id="spike",this.theme=t,this.layers=e.map((t=>D(t))),this.customLayers=new Map(e.map((t=>[t,new Ot(E(t),t)])))}getVisibleLayers(t){return[M(t),D(t)]}onZoom(t){this.customLayers.forEach((e=>e.zoom=t))}getMaxZoom(t){return 100/this.theme.maxHeight[t]}addLayers(t,e){e.levels.forEach((e=>{t.addLayer(this.customLayers.get(e).asLayer(D(e)))}))}encode(t,{level:e,sensorType:n,valueMinMax:i,scale:o}){t.setPaintProperty(M(e),"fill-color",this.theme.countyFill);const a=i[1],r=this.theme.maxHeight[e],s=this.theme.heightScale[n],c=Object(ut.c)(s).range([0,r]).domain([0,a]).clamp(!0);return this.customLayers.get(e).encode(c,o),c}updateSources(t,e,n,i){this.customLayers.get(e).updateSources(n,i)}}const ft=Object(x.d)();class jt extends class{constructor(t,e){this.dispatch=t,this.map=null,this.mapSetupReady=!1,this.mapSetupReadyPromiseResolver=()=>{},this.mapSetupReadyPromise=new Promise((t=>{this.mapSetupReadyPromiseResolver=t})),this.mapDataReady=!1,this.mapEncodingReady=!1,this.animationDuration=0,this.interactive=null,this.level=e.level,this.levels=e.levels,this.hasMegaCountyLevel=e.hasMegaCountyLevel,this.encodings=e.encodings,this.encoding=this.encodings[0];const n=Object(at.a)((t=>this.dispatch("zoom",t)),100);this.zoom=new ot(((t,e)=>{const i="function"==typeof this.encoding.getMaxZoom?this.encoding.getMaxZoom(this.level):Number.POSITIVE_INFINITY;t=Math.min(i,t);for(const e of this.encodings)"function"==typeof e.onZoom&&e.onZoom(t);e&&this.map.triggerRepaint(),n(t)}),e.bounds)}initMap(t,e){this.map=new _.Map({attributionControl:!1,container:t,style:et,bounds:this.zoom.resetBounds,fitBounds:this.zoom.resetBoundsOptions,doubleClickZoom:!1,dragRotate:!1,pitchWithRotate:!1,touchPitch:!1,touchZoomRotate:!0,renderWorldCopies:!1,antialias:!0,maxZoom:8,minZoom:1}),this.zoom.setMap(this.map),this.map.touchZoomRotate.disableRotation();let n=null;const i=new Promise((t=>{n=t}));return this.map.on("idle",(()=>{this.dispatch("idle")})),this.map.on("load",(()=>{this.addSprites(),this.addSources().then((()=>{this.addLayers(),this.interactive=new tt(this.map,this)})).then((()=>{this._setupReady(),n(this)}))})),Object(u.c)(t,(()=>{this.map.resize()})),this.setTitle(e),i}_setupReady(){this.zoom.showStateLabels("state"===this.level),this.zoom.ready(),this.markReady("setup")}markReady(t){switch(t){case"data":if(this.mapDataReady)return;this.mapDataReady=!0,this.dispatch("readyData");break;case"setup":if(this.mapSetupReady)return;this.mapSetupReady=!0,this.mapSetupReadyPromiseResolver(),this.dispatch("readySetup");break;case"encoding":if(this.mapEncodingReady)return;this.mapEncodingReady=!0,this.dispatch("readyEncoding")}this.mapSetupReady&&this.mapEncodingReady&&this.mapDataReady&&(this.dispatch("ready"),this.map.getContainer().dataset.ready="ready")}addSprites(){const t=16,e=document.createElement("canvas");e.width=t,e.height=t;const n=e.getContext("2d");n.clearRect(0,0,t,t);const i=n.createLinearGradient(0,0,t,t);i.addColorStop(0,"white"),i.addColorStop(.25,l.d),i.addColorStop(.5,"white"),i.addColorStop(.75,l.d),i.addColorStop(1,"white"),n.fillStyle=i,n.fillRect(0,0,t,t);const o=n.getImageData(0,0,t,t);this.map.addImage("hatching",o,{sdf:!0})}addSources(){return Promise.resolve()}animationOptions(t){return this.animationDuration?{[t+"-transition"]:{duration:this.animationDuration,delay:0}}:{}}addLevelSource(t,e,n){this.map.addSource($(t),{type:"geojson",data:e}),this.map.addSource(E(t),{type:"geojson",data:n})}addFillLevelLayer(t,e=!0){this.map.addLayer({id:M(t),source:$(t),type:"fill",layout:{visibility:"none"},paint:st(st({"fill-color":l.c.countyFill,"fill-opacity":["case",["==",["to-number",["feature-state","value"],S],S],0,1]},this.animationOptions("fill-color")),e?{"fill-outline-color":l.c.countyOutlineWhenFilled}:{})})}addBorderLevelLayer(t){this.map.addLayer({id:z(t),source:$(t),type:"line",layout:{visibility:"none"},paint:{"line-color":l.c.countyOutlineWhenFilled,"line-width":1}})}addHoverLevelLayer(t){this.map.addLayer({id:A(t),source:$(t),type:"line",layout:{visibility:"none"},paint:{"line-color":["case",["to-boolean",["feature-state","select"]],["feature-state","select"],l.c.hoverRegionOutline],"line-width":["case",["any",["to-boolean",["feature-state","hover"]],["to-boolean",["feature-state","select"]]],4,0]}})}addLayers(){}destroy(){this.mapSetupReady=!1,this.map&&(Object(u.e)(this.map.getContainer()),this.map.remove(),this.zoom.map=null,this.map=null)}validateLevel(t){return this.levels.includes(t)?t:this.levels[0]}getAllEncodingLayers(){const t=this.encodings.flatMap((t=>t.layers));return t.push(...this.levels.map((t=>M(t)))),this.hasMegaCountyLevel&&t.push(M(b.k.id)),t}updateOptions(t,e,n,i,o,a,r,s){e=this.validateLevel(e);const c=this.level;if(this.level=e,this.encoding=this.encodings.find((e=>e.id===t)),this.hasMegaCountyLevel||(r=null),!this.map||!this.mapSetupReady)return;c!==e&&this.zoom.showStateLabels("state"===e);const l=this.getAllEncodingLayers(),u=new Set(this.encoding.getVisibleLayers(e));l.forEach((t=>{this.map.setLayoutProperty(t,"visibility",u.has(t)?"visible":"none")}));const b=this.encoding.encode(this.map,{level:e,sensorType:i,sensor:n,valueMinMax:o,stops:a,stopsMega:r,scale:s,baseZoom:this.zoom.stateZoom});return this.markReady("encoding"),b}updateSources(t,e,n="value"){t=this.validateLevel(t);const i=Math.random().toString(36);this._mapDataFlag=i,this.dispatch("loading",!0),Promise.all([e,this.mapSetupReadyPromise]).then((([e])=>{if(this._mapDataFlag!==i)return;this.map.once("idle",(()=>{this.dispatch("loading",!1)}));const o=new Map(e.map((t=>[t.geo_value.toUpperCase(),t])));this.interactive.setData(o),"county"===t&&this._updateSource($(b.k.id),o,n),this._updateSource($(t),o,n),this._updateSource(E(t),o,n);for(const e of this.encodings)e.updateSources(this.map,t,o,n);e.length>0&&this.markReady("data")}))}_updateSource(t,e,n="value"){console.assert(null!=this.map);const i=this.map.getSource(t);if(!i)return void console.error("invalid source");i._data.features.forEach((i=>{const o=i.properties.id,a=e.get(o);this.map.setFeatureState({source:t,id:Number.parseInt(i.id,10)},{value:a?a[n]:S})}))}selectMulti(t){if(this.map&&this.interactive){if(t.length<=1){const e=this.interactive.selection.slice();return this.select(t.length>0?t[0].info:null),e}return this.interactive.selectMulti(t)}}select(t){this.map&&this.interactive&&this.interactive.select(t)}focusOn(t){if(!t||!this.map)return;const e=this.map.getSource($(t.level));if(!e)return;const n=e._data.features.find((e=>e.id===t.id));n&&this.zoom.focusOn(n)}isMissing(t){const e=this.map.getFeatureState({source:$(t.properties.level),id:"string"==typeof id?Number.parseInt(t.id,10):t.id});return null==e.value||e.value===S}selectRandom(){if(!this.map||!this.mapSetupReady)return;const t=this.map.getSource($(this.level));if(!t)return;const e=b.g[this.level],n=t._data.features.find((t=>t.properties.id===e));if(n&&!this.isMissing(n))return void this.dispatch("select",{feature:n});const i=t._data.features.filter((t=>!this.isMissing(t)));if(0===i.length)return;const o=i[Math.floor(Math.random()*(i.length-1))];this.dispatch("select",{feature:o})}setTitle(t){if(!this.map)return;const e=this.map.getContainer().querySelector("canvas");e&&(e.setAttribute("role","figure"),e.setAttribute("aria-roledescription","visualization"),e.setAttribute("aria-label","US Map showing: ".concat(t)))}}{constructor(t){super(t,{bounds:w.states,encodings:[new lt(b.l),new ht(l.a,b.l),new mt(l.b,b.l)],level:"county",levels:b.l,hasMegaCountyLevel:!0})}addLevelSources(){const t=this.map;return ft.then((e=>{t.addSource($(b.k.id),{type:"geojson",data:e.mega}),this.levels.forEach((t=>{this.addLevelSource(t,e[t].border,e[t].center)}))}))}addSources(){return Promise.all([(t=this.map,ft.then((e=>{t.addSource(P,{type:"geojson",data:e.cities})}))),this.addLevelSources()]);var t}addLayers(){const t=this.map;t.addLayer({id:N,source:$("state"),type:"fill",paint:{"fill-color":l.d,"fill-outline-color":l.c.stateOutline,"fill-pattern":"hatching"}}),this.addFillLevelLayer(b.k.id),this.levels.forEach((t=>{this.addFillLevelLayer(t,"county"!==t)})),this.addBorderLevelLayer("state"),this.addHoverLevelLayer(b.k.id),this.levels.forEach((t=>{this.addHoverLevelLayer(t)})),this.encodings.forEach((e=>{e.addLayers(t,this)})),function(t){const e=(e,n,i={})=>{t.addLayer(V(V(V({id:e,source:P,type:"symbol"},n?{filter:n}:{}),i),{},{layout:{"text-field":["get","name"],"text-font":["Open Sans Regular"],"text-size":12},paint:{"text-halo-color":"#fff","text-halo-width":1.5}}))};e(Z.pit,["==","name","Pittsburgh"],{maxzoom:8}),e(Z.pit[1],[">","population",9e5],{maxzoom:4}),e(Z.pit[2],[">","population",5e5],{maxzoom:6,minzoom:4}),e(Z.pit[3],[">","population",1e5],{maxzoom:8,minzoom:6}),e(Z.pit[4],void 0,{minzoom:8})}(t),function(t){t.addLayer({id:F,source:E("state"),type:"symbol",maxzoom:8,layout:{"text-field":["upcase",["get","name"]],"text-font":["Open Sans Bold"],"text-size":11},paint:{"text-opacity":.5,"text-halo-color":"#fff","text-halo-width":1}})}(t)}getAllEncodingLayers(){const t=super.getAllEncodingLayers();return t.push(z("state")),t}}var gt=n(309);n(257);function vt(t){let e,n,o=t[3].toLocaleDateString()+"";return{c(){e=Object(i.u)("span"),n=Object(i.Z)(o),Object(i.g)(e,"data-testid","currentdate")},m(t,o){Object(i.F)(t,e,o),Object(i.e)(e,n)},p(t,e){8&e&&o!==(o=t[3].toLocaleDateString()+"")&&Object(i.S)(n,o)},d(t){t&&Object(i.t)(e)}}}function yt(t){let e,n,o,a,r,s,c;r=new gt.a({props:{sensor:t[2],className:"info"}});let l=t[0]&&vt(t);return{c(){e=Object(i.u)("h2"),n=Object(i.u)("span"),o=Object(i.Z)(t[1]),a=Object(i.V)(),Object(i.n)(r.$$.fragment),s=Object(i.V)(),l&&l.c(),Object(i.g)(e,"class","banner svelte-11a77rv")},m(t,u){Object(i.F)(t,e,u),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(n,a),Object(i.I)(r,n,null),Object(i.e)(e,s),l&&l.m(e,null),c=!0},p(t,[n]){(!c||2&n)&&Object(i.S)(o,t[1]);const a={};4&n&&(a.sensor=t[2]),r.$set(a),t[0]?l?l.p(t,n):(l=vt(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(t){c||(Object(i.cb)(r.$$.fragment,t),c=!0)},o(t){Object(i.db)(r.$$.fragment,t),c=!1},d(t){t&&Object(i.t)(e),Object(i.r)(r),l&&l.d()}}}function xt(t,e,n){let o,r,s;Object(i.l)(t,a.r,(t=>n(1,o=t))),Object(i.l)(t,a.q,(t=>n(2,r=t))),Object(i.l)(t,a.i,(t=>n(3,s=t)));let{showDate:c=!1}=e;return t.$$set=t=>{"showDate"in t&&n(0,c=t.showDate)},[c,o,r,s]}class wt extends i.b{constructor(t){super(),Object(i.E)(this,t,xt,yt,i.P,{showDate:0})}}var _t=wt,St=n(162);n(258);function kt(t){let e,n,o,a,r,s,c,l,u,b,d;return{c(){e=Object(i.u)("div"),n=Object(i.u)("button"),a=Object(i.V)(),r=Object(i.u)("button"),c=Object(i.V)(),l=Object(i.u)("button"),Object(i.g)(n,"aria-pressed",o="color"===t[4]?"true":"false"),Object(i.g)(n,"class","uk-button uk-button-default uk-button-small choropleth svelte-1eqd11i"),Object(i.g)(n,"data-uk-icon","icon: blank"),Object(i.g)(n,"title","Switch to Choropleth"),Object(i.bb)(n,"uk-active","color"===t[4]),Object(i.g)(r,"aria-pressed",s="bubble"===t[4]?"true":"false"),Object(i.g)(r,"class","uk-button uk-button-default uk-button-small bubble svelte-1eqd11i"),Object(i.g)(r,"data-uk-icon","icon: blank"),Object(i.g)(r,"title","Switch to Bubble Map"),Object(i.bb)(r,"uk-active","bubble"===t[4]),Object(i.g)(l,"aria-pressed",u="spike"===t[4]?"true":"false"),Object(i.g)(l,"class","uk-button uk-button-default uk-button-small spike svelte-1eqd11i"),Object(i.g)(l,"data-uk-icon","icon: blank"),Object(i.g)(l,"title","Switch to Spike Map"),Object(i.bb)(l,"uk-active","spike"===t[4]),Object(i.g)(e,"class","uk-vertical-button-group svelte-1eqd11i")},m(o,s){Object(i.F)(o,e,s),Object(i.e)(e,n),Object(i.e)(e,a),Object(i.e)(e,r),Object(i.e)(e,c),Object(i.e)(e,l),b||(d=[Object(i.H)(n,"click",t[8]),Object(i.H)(r,"click",t[9]),Object(i.H)(l,"click",t[10])],b=!0)},p(t,e){16&e&&o!==(o="color"===t[4]?"true":"false")&&Object(i.g)(n,"aria-pressed",o),16&e&&Object(i.bb)(n,"uk-active","color"===t[4]),16&e&&s!==(s="bubble"===t[4]?"true":"false")&&Object(i.g)(r,"aria-pressed",s),16&e&&Object(i.bb)(r,"uk-active","bubble"===t[4]),16&e&&u!==(u="spike"===t[4]?"true":"false")&&Object(i.g)(l,"aria-pressed",u),16&e&&Object(i.bb)(l,"uk-active","spike"===t[4])},d(t){t&&Object(i.t)(e),b=!1,Object(i.O)(d)}}}function $t(t){let e;return{c(){e=Object(i.u)("div"),Object(i.g)(e,"class","loader loading svelte-1eqd11i")},m(t,n){Object(i.F)(t,e,n)},d(t){t&&Object(i.t)(e)}}}function Et(t){let e,n,o,a,r,s,c,l,u,b,d,p,h,O,m,f,j=t[2]&&kt(t),g=t[3]&&$t();return{c(){e=Object(i.u)("div"),n=Object(i.u)("div"),o=Object(i.u)("button"),r=Object(i.V)(),s=Object(i.u)("button"),l=Object(i.V)(),u=Object(i.u)("div"),b=Object(i.u)("button"),p=Object(i.V)(),j&&j.c(),h=Object(i.V)(),g&&g.c(),Object(i.g)(o,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),Object(i.g)(o,"data-uk-icon","icon: plus"),Object(i.g)(o,"type","button"),Object(i.g)(o,"title","Zoom in"),Object(i.g)(o,"aria-label","Zoom in"),o.disabled=a=!t[1]||t[1].getZoom()<=t[1].getMinZoom(),Object(i.g)(s,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),Object(i.g)(s,"data-uk-icon","icon: minus"),Object(i.g)(s,"type","button"),Object(i.g)(s,"title","Zoom out"),Object(i.g)(s,"aria-label","Zoom out"),s.disabled=c=!t[1]||t[1].getZoom()>=t[1].getMaxZoom(),Object(i.g)(n,"class","uk-vertical-button-group svelte-1eqd11i"),Object(i.g)(b,"class","uk-button uk-button-default uk-button-small svelte-1eqd11i"),Object(i.g)(b,"type","button"),Object(i.g)(b,"data-uk-icon","icon: home"),Object(i.g)(b,"title","Show entire map"),Object(i.g)(b,"aria-label","Show entire map"),b.disabled=d=!t[1],Object(i.g)(u,"class","svelte-1eqd11i"),Object(i.g)(e,"class",O="root "+t[0]+" svelte-1eqd11i")},m(a,c){Object(i.F)(a,e,c),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(n,r),Object(i.e)(n,s),Object(i.e)(e,l),Object(i.e)(e,u),Object(i.e)(u,b),Object(i.e)(e,p),j&&j.m(e,null),Object(i.e)(e,h),g&&g.m(e,null),m||(f=[Object(i.H)(o,"click",t[5]),Object(i.H)(s,"click",t[6]),Object(i.H)(b,"click",t[7])],m=!0)},p(t,[n]){2&n&&a!==(a=!t[1]||t[1].getZoom()<=t[1].getMinZoom())&&(o.disabled=a),2&n&&c!==(c=!t[1]||t[1].getZoom()>=t[1].getMaxZoom())&&(s.disabled=c),2&n&&d!==(d=!t[1])&&(b.disabled=d),t[2]?j?j.p(t,n):(j=kt(t),j.c(),j.m(e,h)):j&&(j.d(1),j=null),t[3]?g||(g=$t(),g.c(),g.m(e,null)):g&&(g.d(1),g=null),1&n&&O!==(O="root "+t[0]+" svelte-1eqd11i")&&Object(i.g)(e,"class",O)},i:i.J,o:i.J,d(t){t&&Object(i.t)(e),j&&j.d(),g&&g.d(),m=!1,Object(i.O)(f)}}}function Pt(t,e,n){let o;Object(i.l)(t,a.s,(t=>n(4,o=t)));let{className:r=""}=e,{zoom:s}=e,{showEncodings:c=!1}=e,{loading:l=!1}=e;return t.$$set=t=>{"className"in t&&n(0,r=t.className),"zoom"in t&&n(1,s=t.zoom),"showEncodings"in t&&n(2,c=t.showEncodings),"loading"in t&&n(3,l=t.loading)},[r,s,c,l,o,()=>{Object(St.a)("map","zoomIn"),s.zoomIn()},()=>{Object(St.a)("map","zoomOut"),s.zoomOut()},()=>{Object(St.a)("map","zoomReset"),s.resetZoom()},()=>{a.s.set("color")},()=>{a.s.set("bubble")},()=>{a.s.set("spike")}]}class Ct extends i.b{constructor(t){super(),Object(i.E)(this,t,Pt,Et,i.P,{className:0,zoom:1,showEncodings:2,loading:3})}}var Vt=Ct,Lt=n(328);n(260);function Mt(t,e,n){const i=t.slice();return i[7]=e[n],i}function At(t){let e,n,o,a=t[0].high+"";return{c(){e=Object(i.u)("li"),n=Object(i.Z)(a),Object(i.g)(e,"class","tick svelte-1u6a1mr"),Object(i.U)(e,"background-image","linear-gradient(to right, "+t[7].color+", "+t[7].nextColor+")"),Object(i.g)(e,"title",o=t[7].label)},m(t,o){Object(i.F)(t,e,o),Object(i.e)(e,n)},p(t,r){1&r&&a!==(a=t[0].high+"")&&Object(i.S)(n,a),1&r&&Object(i.U)(e,"background-image","linear-gradient(to right, "+t[7].color+", "+t[7].nextColor+")"),1&r&&o!==(o=t[7].label)&&Object(i.g)(e,"title",o)},d(t){t&&Object(i.t)(e)}}}function Rt(t){let e,n,o,a,r,s,c,u,b,d,p,h=t[0].high+"",O=t[0].high+"",m=t[0].labels,f=[];for(let e=0;e<m.length;e+=1)f[e]=At(Mt(t,m,e));return{c(){e=Object(i.u)("ul"),n=Object(i.u)("li"),o=Object(i.Z)(h),a=Object(i.V)(),r=Object(i.u)("li"),s=Object(i.Z)(O),u=Object(i.V)();for(let t=0;t<f.length;t+=1)f[t].c();b=Object(i.V)(),d=Object(i.u)("li"),Object(i.g)(n,"class","tick tick-single svelte-1u6a1mr"),Object(i.U)(n,"background","repeating-linear-gradient(-45deg, "+l.d+", white 30%)"),Object(i.g)(n,"title","NA"),Object(i.g)(r,"class","tick tick-single tick-space svelte-1u6a1mr"),Object(i.U)(r,"background-color",l.e),Object(i.g)(r,"title",c=t[0].low),Object(i.g)(d,"class","tick tick-last svelte-1u6a1mr"),Object(i.g)(d,"title",p=t[0].high),Object(i.g)(e,"data-testid","color-legend"),Object(i.g)(e,"class","svelte-1u6a1mr")},m(t,c){Object(i.F)(t,e,c),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(e,a),Object(i.e)(e,r),Object(i.e)(r,s),Object(i.e)(e,u);for(let t=0;t<f.length;t+=1)f[t].m(e,null);Object(i.e)(e,b),Object(i.e)(e,d)},p(t,[n]){if(1&n&&h!==(h=t[0].high+"")&&Object(i.S)(o,h),1&n&&O!==(O=t[0].high+"")&&Object(i.S)(s,O),1&n&&c!==(c=t[0].low)&&Object(i.g)(r,"title",c),1&n){let i;for(m=t[0].labels,i=0;i<m.length;i+=1){const o=Mt(t,m,i);f[i]?f[i].p(o,n):(f[i]=At(o),f[i].c(),f[i].m(e,b))}for(;i<f.length;i+=1)f[i].d(1);f.length=m.length}1&n&&p!==(p=t[0].high)&&Object(i.g)(d,"title",p)},i:i.J,o:i.J,d(t){t&&Object(i.t)(e),Object(i.s)(f,t)}}}function Dt(t,e,n){let o,r,s,c,l,u,b;return Object(i.l)(t,a.F,(t=>n(1,o=t))),Object(i.l)(t,a.q,(t=>n(2,r=t))),Object(i.l)(t,a.k,(t=>n(3,s=t))),Object(i.l)(t,a.e,(t=>n(4,c=t))),Object(i.l)(t,a.C,(t=>n(5,l=t))),Object(i.l)(t,a.v,(t=>n(6,u=t))),t.$$.update=()=>{126&t.$$.dirty&&n(0,b=f(o,r,s,c,l,u))},[b,o,r,s,c,l,u]}class zt extends i.b{constructor(t){super(),Object(i.E)(this,t,Dt,Rt,i.P,{})}}var Nt=zt;n(261);function Ft(t,e,n){const i=t.slice();return i[9]=e[n],i}function Zt(t){let e,n,o,a,r,s,c=t[9].label+"";return{c(){e=Object(i.u)("li"),n=Object(i.u)("div"),o=Object(i.u)("div"),a=Object(i.V)(),r=Object(i.u)("span"),s=Object(i.Z)(c),Object(i.g)(o,"class","bubble svelte-19hi244"),Object(i.U)(o,"width",2*t[2](t[9].value)*t[0]+"px"),Object(i.U)(o,"height",2*t[2](t[9].value)*t[0]+"px"),Object(i.U)(o,"background",Object(u.d)(t[9].color,l.a.fillOpacity)),Object(i.U)(o,"border-color",t[9].color),Object(i.g)(n,"class","bubble-wrapper svelte-19hi244"),Object(i.g)(e,"class","svelte-19hi244")},m(t,c){Object(i.F)(t,e,c),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(e,a),Object(i.e)(e,r),Object(i.e)(r,s)},p(t,e){7&e&&Object(i.U)(o,"width",2*t[2](t[9].value)*t[0]+"px"),7&e&&Object(i.U)(o,"height",2*t[2](t[9].value)*t[0]+"px"),2&e&&Object(i.U)(o,"background",Object(u.d)(t[9].color,l.a.fillOpacity)),2&e&&Object(i.U)(o,"border-color",t[9].color),2&e&&c!==(c=t[9].label+"")&&Object(i.S)(s,c)},d(t){t&&Object(i.t)(e)}}}function Ut(t){let e,n,o,a,r,s,c,b,d,p,h,O,m,f,j=t[1].high+"",g=t[1].labels,v=[];for(let e=0;e<g.length;e+=1)v[e]=Zt(Ft(t,g,e));return{c(){e=Object(i.u)("ul"),n=Object(i.u)("li"),o=Object(i.u)("div"),a=Object(i.u)("div"),r=Object(i.V)(),s=Object(i.u)("span"),s.textContent="NA",c=Object(i.V)();for(let t=0;t<v.length;t+=1)v[t].c();b=Object(i.V)(),d=Object(i.u)("li"),p=Object(i.u)("div"),h=Object(i.u)("div"),O=Object(i.V)(),m=Object(i.u)("span"),f=Object(i.Z)(j),Object(i.g)(a,"class","na svelte-19hi244"),Object(i.U)(a,"background","repeating-linear-gradient(-45deg, "+l.d+", white 30%)"),Object(i.g)(o,"class","bubble-wrapper svelte-19hi244"),Object(i.g)(n,"class","svelte-19hi244"),Object(i.U)(h,"width",2*t[2](t[1].highValue)*t[0]+"px"),Object(i.U)(h,"height",2*t[2](t[1].highValue)*t[0]+"px"),Object(i.U)(h,"background",Object(u.d)(t[1].highColor,l.a.fillOpacity)),Object(i.U)(h,"border-color",t[1].highColor),Object(i.g)(h,"class","bubble svelte-19hi244"),Object(i.g)(p,"class","bubble-wrapper svelte-19hi244"),Object(i.g)(d,"class","svelte-19hi244"),Object(i.g)(e,"data-testid","bubble-legend"),Object(i.g)(e,"class","svelte-19hi244")},m(t,l){Object(i.F)(t,e,l),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(o,a),Object(i.e)(n,r),Object(i.e)(n,s),Object(i.e)(e,c);for(let t=0;t<v.length;t+=1)v[t].m(e,null);Object(i.e)(e,b),Object(i.e)(e,d),Object(i.e)(d,p),Object(i.e)(p,h),Object(i.e)(d,O),Object(i.e)(d,m),Object(i.e)(m,f)},p(t,[n]){if(7&n){let i;for(g=t[1].labels,i=0;i<g.length;i+=1){const o=Ft(t,g,i);v[i]?v[i].p(o,n):(v[i]=Zt(o),v[i].c(),v[i].m(e,b))}for(;i<v.length;i+=1)v[i].d(1);v.length=g.length}7&n&&Object(i.U)(h,"width",2*t[2](t[1].highValue)*t[0]+"px"),7&n&&Object(i.U)(h,"height",2*t[2](t[1].highValue)*t[0]+"px"),2&n&&Object(i.U)(h,"background",Object(u.d)(t[1].highColor,l.a.fillOpacity)),2&n&&Object(i.U)(h,"border-color",t[1].highColor),2&n&&j!==(j=t[1].high+"")&&Object(i.S)(f,j)},i:i.J,o:i.J,d(t){t&&Object(i.t)(e),Object(i.s)(v,t)}}}function Tt(t,e,n){let o,r,s,c,l,u,b;Object(i.l)(t,a.F,(t=>n(3,o=t))),Object(i.l)(t,a.q,(t=>n(4,r=t))),Object(i.l)(t,a.k,(t=>n(5,s=t))),Object(i.l)(t,a.e,(t=>n(6,c=t))),Object(i.l)(t,a.C,(t=>n(7,l=t))),Object(i.l)(t,a.v,(t=>n(8,u=t))),Object(i.l)(t,a.d,(t=>n(2,b=t)));let d,{zoom:p=1}=e;return t.$$set=t=>{"zoom"in t&&n(0,p=t.zoom)},t.$$.update=()=>{504&t.$$.dirty&&n(1,d=f(o,r,s,c,l,u))},[p,d,b,o,r,s,c,l,u]}class Bt extends i.b{constructor(t){super(),Object(i.E)(this,t,Tt,Ut,i.P,{zoom:0})}}var Ht=Bt;n(262);function It(t,e,n){const i=t.slice();return i[13]=e[n],i}function qt(t){let e,n,o,a,r,s,c,b,d,p,h,O,m=t[13].label+"";return{c(){e=Object(i.u)("li"),n=Object(i.Y)("svg"),o=Object(i.Y)("g"),a=Object(i.Y)("path"),p=Object(i.V)(),h=Object(i.u)("span"),O=Object(i.Z)(m),Object(i.g)(a,"d",r=t[3](t[13].value)),Object(i.g)(a,"class","spike svelte-f727e1"),Object(i.g)(a,"fill",s=Object(u.d)(t[13].color,l.b.fillOpacity)),Object(i.g)(a,"stroke",c=Object(u.d)(t[13].color,l.b.strokeOpacity)),Object(i.U)(o,"transform","translate("+Yt+"px, "+Yt+"px)"),Object(i.g)(n,"width",b=2*t[1]+2*Yt),Object(i.g)(n,"height",d=t[2](t[13].value)*t[0]+2*Yt),Object(i.g)(n,"class","svelte-f727e1"),Object(i.g)(e,"class","legend-direct-tick svelte-f727e1")},m(t,r){Object(i.F)(t,e,r),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(o,a),Object(i.e)(e,p),Object(i.e)(e,h),Object(i.e)(h,O)},p(t,e){24&e&&r!==(r=t[3](t[13].value))&&Object(i.g)(a,"d",r),16&e&&s!==(s=Object(u.d)(t[13].color,l.b.fillOpacity))&&Object(i.g)(a,"fill",s),16&e&&c!==(c=Object(u.d)(t[13].color,l.b.strokeOpacity))&&Object(i.g)(a,"stroke",c),2&e&&b!==(b=2*t[1]+2*Yt)&&Object(i.g)(n,"width",b),21&e&&d!==(d=t[2](t[13].value)*t[0]+2*Yt)&&Object(i.g)(n,"height",d),16&e&&m!==(m=t[13].label+"")&&Object(i.S)(O,m)},d(t){t&&Object(i.t)(e)}}}function Jt(t){let e,n,o,a,r,s,c,b,d,p,h,O,m,f,j,g,v,y,x,w=t[4].high+"",_=t[4].labels,S=[];for(let e=0;e<_.length;e+=1)S[e]=qt(It(t,_,e));return{c(){e=Object(i.u)("ul"),n=Object(i.u)("li"),o=Object(i.u)("div"),a=Object(i.V)(),r=Object(i.u)("span"),r.textContent="NA",s=Object(i.V)();for(let t=0;t<S.length;t+=1)S[t].c();c=Object(i.V)(),b=Object(i.u)("li"),d=Object(i.Y)("svg"),p=Object(i.Y)("g"),h=Object(i.Y)("path"),v=Object(i.V)(),y=Object(i.u)("span"),x=Object(i.Z)(w),Object(i.g)(o,"class","na svelte-f727e1"),Object(i.U)(o,"background","repeating-linear-gradient(-45deg, "+l.d+", white 30%)"),Object(i.g)(n,"class","svelte-f727e1"),Object(i.g)(h,"d",O=t[3](t[4].highValue)),Object(i.g)(h,"class","spike svelte-f727e1"),Object(i.g)(h,"fill",m=Object(u.d)(t[4].highColor,l.b.fillOpacity)),Object(i.g)(h,"stroke",f=Object(u.d)(t[4].highColor,l.b.strokeOpacity)),Object(i.U)(p,"transform","translate("+Yt+"px, "+Yt+"px)"),Object(i.g)(d,"width",j=2*t[1]+2*Yt),Object(i.g)(d,"height",g=t[2](t[4].highValue)*t[0]+2*Yt),Object(i.g)(d,"class","svelte-f727e1"),Object(i.g)(b,"class","legend-direct-tick svelte-f727e1"),Object(i.g)(e,"class","legend-ticks svelte-f727e1"),Object(i.g)(e,"data-testid","spike-legend")},m(t,l){Object(i.F)(t,e,l),Object(i.e)(e,n),Object(i.e)(n,o),Object(i.e)(n,a),Object(i.e)(n,r),Object(i.e)(e,s);for(let t=0;t<S.length;t+=1)S[t].m(e,null);Object(i.e)(e,c),Object(i.e)(e,b),Object(i.e)(b,d),Object(i.e)(d,p),Object(i.e)(p,h),Object(i.e)(b,v),Object(i.e)(b,y),Object(i.e)(y,x)},p(t,[n]){if(31&n){let i;for(_=t[4].labels,i=0;i<_.length;i+=1){const o=It(t,_,i);S[i]?S[i].p(o,n):(S[i]=qt(o),S[i].c(),S[i].m(e,c))}for(;i<S.length;i+=1)S[i].d(1);S.length=_.length}24&n&&O!==(O=t[3](t[4].highValue))&&Object(i.g)(h,"d",O),16&n&&m!==(m=Object(u.d)(t[4].highColor,l.b.fillOpacity))&&Object(i.g)(h,"fill",m),16&n&&f!==(f=Object(u.d)(t[4].highColor,l.b.strokeOpacity))&&Object(i.g)(h,"stroke",f),2&n&&j!==(j=2*t[1]+2*Yt)&&Object(i.g)(d,"width",j),21&n&&g!==(g=t[2](t[4].highValue)*t[0]+2*Yt)&&Object(i.g)(d,"height",g),16&n&&w!==(w=t[4].high+"")&&Object(i.S)(x,w)},i:i.J,o:i.J,d(t){t&&Object(i.t)(e),Object(i.s)(S,t)}}}const Yt=2;function Gt(t,e,n){let o,r,s,c,u,b,d;Object(i.l)(t,a.k,(t=>n(5,o=t))),Object(i.l)(t,a.F,(t=>n(7,r=t))),Object(i.l)(t,a.q,(t=>n(8,s=t))),Object(i.l)(t,a.e,(t=>n(9,c=t))),Object(i.l)(t,a.C,(t=>n(10,u=t))),Object(i.l)(t,a.v,(t=>n(11,b=t))),Object(i.l)(t,a.E,(t=>n(2,d=t)));let p,h,O,m,{zoom:j=1}=e,g=()=>"";return t.$$set=t=>{"zoom"in t&&n(0,j=t.zoom)},t.$$.update=()=>{if(33&t.$$.dirty&&n(1,p=l.b.size[o]*j),33&t.$$.dirty&&n(6,h=l.b.maxHeight[o]*j),4e3&t.$$.dirty&&n(4,O=f(r,s,o,c,u,b)),64&t.$$.dirty&&(m=h+2*Yt),7&t.$$.dirty){const t=d,e=j,i=p;n(3,g=n=>"M 0 ".concat(t(n)*e," L ").concat(i," 0 L ").concat(2*i," ").concat(t(n)*e))}},[j,p,d,g,O,o,h,r,s,c,u,b]}class Wt extends i.b{constructor(t){super(),Object(i.E)(this,t,Gt,Jt,i.P,{zoom:0})}}var Xt=Wt;n(263);function Qt(t){let e,n,o,a,r=t[5](t[2])+"";return{c(){e=Object(i.u)("div"),n=Object(i.Z)(r),o=Object(i.Z)("% Coverage"),Object(i.g)(e,"class","root base-font-size container-style svelte-9d0ztf"),Object(i.g)(e,"data-testid","coverage"),Object(i.g)(e,"title",a="Showing data for ".concat(t[2]," ").concat(t[4].labelPlural," out of ").concat(t[3]," ").concat(t[4].labelPlural," (").concat(t[5](t[2]),"%)")),Object(i.bb)(e,"hidden",!t[0]||!t[0].data),Object(i.bb)(e,"loading-bg",t[1])},m(t,a){Object(i.F)(t,e,a),Object(i.e)(e,n),Object(i.e)(e,o)},p(t,[o]){4&o&&r!==(r=t[5](t[2])+"")&&Object(i.S)(n,r),28&o&&a!==(a="Showing data for ".concat(t[2]," ").concat(t[4].labelPlural," out of ").concat(t[3]," ").concat(t[4].labelPlural," (").concat(t[5](t[2]),"%)"))&&Object(i.g)(e,"title",a),1&o&&Object(i.bb)(e,"hidden",!t[0]||!t[0].data),2&o&&Object(i.bb)(e,"loading-bg",t[1])},i:i.J,o:i.J,d(t){t&&Object(i.t)(e)}}}function Kt(t,e,n){let i,o,{summary:a=null}=e,r=!0,s=0;return t.$$set=t=>{"summary"in t&&n(0,a=t.summary)},t.$$.update=()=>{1&t.$$.dirty&&n(3,i=a&&a.items?a.items.length:0),1&t.$$.dirty&&n(4,o=Object(b.h)(a?a.level:"county")),1&t.$$.dirty&&(n(1,r=!0),a&&a.data&&a.data.then((t=>{let e=0;for(const n of t)n.geo_value.endsWith("000")||null==n.value||Number.isNaN(n.value)||e++;n(1,r=!1),n(2,s=e)})))},[a,r,s,i,o,function(t){return Math.round(100*t/i)}]}class te extends i.b{constructor(t){super(),Object(i.E)(this,t,Kt,Qt,i.P,{summary:0})}}var ee=te;n(264);function ne(t){let e,n;return e=new Xt({props:{zoom:t[3]}}),{c(){Object(i.n)(e.$$.fragment)},m(t,o){Object(i.I)(e,t,o),n=!0},p(t,n){const i={};8&n&&(i.zoom=t[3]),e.$set(i)},i(t){n||(Object(i.cb)(e.$$.fragment,t),n=!0)},o(t){Object(i.db)(e.$$.fragment,t),n=!1},d(t){Object(i.r)(e,t)}}}function ie(t){let e,n;return e=new Ht({props:{zoom:t[3]}}),{c(){Object(i.n)(e.$$.fragment)},m(t,o){Object(i.I)(e,t,o),n=!0},p(t,n){const i={};8&n&&(i.zoom=t[3]),e.$set(i)},i(t){n||(Object(i.cb)(e.$$.fragment,t),n=!0)},o(t){Object(i.db)(e.$$.fragment,t),n=!1},d(t){Object(i.r)(e,t)}}}function oe(t){let e,n;return e=new Nt({}),{c(){Object(i.n)(e.$$.fragment)},m(t,o){Object(i.I)(e,t,o),n=!0},p:i.J,i(t){n||(Object(i.cb)(e.$$.fragment,t),n=!0)},o(t){Object(i.db)(e.$$.fragment,t),n=!1},d(t){Object(i.r)(e,t)}}}function ae(t){let e,n,o,a,r,s,c,l,u,b,d,p,h,O,m,f,j;o=new _t({props:{showDate:t[4]}}),s=new Vt({props:{zoom:t[0]?t[0].zoom:null,showEncodings:!0,loading:t[1]}}),u=new Lt.a({props:{sensor:t[6],className:"container-bg container-style encoding-wrapper"}});const g=[oe,ie,ne],v=[];function y(t,e){return"color"===t[7]?0:"bubble"===t[7]?1:"spike"===t[7]?2:-1}return~(p=y(t))&&(h=v[p]=g[p](t)),f=new ee({props:{summary:t[5]}}),{c(){e=Object(i.u)("div"),n=Object(i.u)("div"),Object(i.n)(o.$$.fragment),a=Object(i.V)(),r=Object(i.u)("div"),Object(i.n)(s.$$.fragment),c=Object(i.V)(),l=Object(i.u)("div"),Object(i.n)(u.$$.fragment),b=Object(i.V)(),d=Object(i.u)("div"),h&&h.c(),O=Object(i.V)(),m=Object(i.u)("div"),Object(i.n)(f.$$.fragment),Object(i.g)(n,"class","title-container container-bg svelte-azwlie"),Object(i.g)(r,"class","map-controls-container svelte-azwlie"),Object(i.g)(e,"class","map-top-overlay svelte-azwlie"),Object(i.g)(d,"class","container-bg container-style"),Object(i.bb)(d,"loading-bg",t[2]),Object(i.g)(l,"class","legend-container base-font-size svelte-azwlie"),Object(i.g)(l,"aria-label","map legend"),Object(i.g)(m,"class","summary-container svelte-azwlie"),Object(i.g)(m,"aria-label","map data summary")},m(t,h){Object(i.F)(t,e,h),Object(i.e)(e,n),Object(i.I)(o,n,null),Object(i.e)(e,a),Object(i.e)(e,r),Object(i.I)(s,r,null),Object(i.F)(t,c,h),Object(i.F)(t,l,h),Object(i.I)(u,l,null),Object(i.e)(l,b),Object(i.e)(l,d),~p&&v[p].m(d,null),Object(i.F)(t,O,h),Object(i.F)(t,m,h),Object(i.I)(f,m,null),j=!0},p(t,[e]){const n={};16&e&&(n.showDate=t[4]),o.$set(n);const a={};1&e&&(a.zoom=t[0]?t[0].zoom:null),2&e&&(a.loading=t[1]),s.$set(a);const r={};64&e&&(r.sensor=t[6]),u.$set(r);let c=p;p=y(t),p===c?~p&&v[p].p(t,e):(h&&(Object(i.B)(),Object(i.db)(v[c],1,1,(()=>{v[c]=null})),Object(i.k)()),~p?(h=v[p],h?h.p(t,e):(h=v[p]=g[p](t),h.c()),Object(i.cb)(h,1),h.m(d,null)):h=null),4&e&&Object(i.bb)(d,"loading-bg",t[2]);const l={};32&e&&(l.summary=t[5]),f.$set(l)},i(t){j||(Object(i.cb)(o.$$.fragment,t),Object(i.cb)(s.$$.fragment,t),Object(i.cb)(u.$$.fragment,t),Object(i.cb)(h),Object(i.cb)(f.$$.fragment,t),j=!0)},o(t){Object(i.db)(o.$$.fragment,t),Object(i.db)(s.$$.fragment,t),Object(i.db)(u.$$.fragment,t),Object(i.db)(h),Object(i.db)(f.$$.fragment,t),j=!1},d(t){t&&Object(i.t)(e),Object(i.r)(o),Object(i.r)(s),t&&Object(i.t)(c),t&&Object(i.t)(l),Object(i.r)(u),~p&&v[p].d(),t&&Object(i.t)(O),t&&Object(i.t)(m),Object(i.r)(f)}}}function re(t,e,n){let o,r;Object(i.l)(t,a.q,(t=>n(6,o=t))),Object(i.l)(t,a.s,(t=>n(7,r=t)));let{map:s=null}=e,{mapLoading:c=!0}=e,{legendLoading:l=!0}=e,{zoom:u=1}=e,{showDate:b=!1}=e,{summary:d=null}=e;return t.$$set=t=>{"map"in t&&n(0,s=t.map),"mapLoading"in t&&n(1,c=t.mapLoading),"legendLoading"in t&&n(2,l=t.legendLoading),"zoom"in t&&n(3,u=t.zoom),"showDate"in t&&n(4,b=t.showDate),"summary"in t&&n(5,d=t.summary)},[s,c,l,u,b,d,o,r]}class se extends i.b{constructor(t){super(),Object(i.E)(this,t,re,ae,i.P,{map:0,mapLoading:1,legendLoading:2,zoom:3,showDate:4,summary:5})}}var ce=se;function le(t){let e,n,o,a;e=new ce({props:{map:t[7],mapLoading:t[0],legendLoading:t[1],zoom:t[8],summary:t[2],showDate:t[3]}});let r={data:t[4],sensor:t[10],level:t[11],signalOptions:t[12],selections:t[5],focusOn:t[6],encoding:t[9],wrapperClass:jt,title:t[13]};return o=new y({props:r}),t[18](o),o.$on("zoom",t[19]),o.$on("updatedEncoding",t[20]),o.$on("loading",t[21]),o.$on("select",t[22]),o.$on("ready",t[16]),{c(){Object(i.n)(e.$$.fragment),n=Object(i.V)(),Object(i.n)(o.$$.fragment)},m(t,r){Object(i.I)(e,t,r),Object(i.F)(t,n,r),Object(i.I)(o,t,r),a=!0},p(t,[n]){const i={};128&n&&(i.map=t[7]),1&n&&(i.mapLoading=t[0]),2&n&&(i.legendLoading=t[1]),256&n&&(i.zoom=t[8]),4&n&&(i.summary=t[2]),8&n&&(i.showDate=t[3]),e.$set(i);const a={};16&n&&(a.data=t[4]),1024&n&&(a.sensor=t[10]),2048&n&&(a.level=t[11]),4096&n&&(a.signalOptions=t[12]),32&n&&(a.selections=t[5]),64&n&&(a.focusOn=t[6]),512&n&&(a.encoding=t[9]),8192&n&&(a.title=t[13]),o.$set(a)},i(t){a||(Object(i.cb)(e.$$.fragment,t),Object(i.cb)(o.$$.fragment,t),a=!0)},o(t){Object(i.db)(e.$$.fragment,t),Object(i.db)(o.$$.fragment,t),a=!1},d(a){Object(i.r)(e,a),a&&Object(i.t)(n),t[18](null),Object(i.r)(o,a)}}}function ue(t,e,n){let r,s,c,l,u,b;Object(i.l)(t,a.s,(t=>n(9,r=t))),Object(i.l)(t,a.n,(t=>n(23,s=t))),Object(i.l)(t,a.p,(t=>n(10,c=t))),Object(i.l)(t,a.k,(t=>n(11,l=t))),Object(i.l)(t,a.C,(t=>n(12,u=t))),Object(i.l)(t,a.r,(t=>n(13,b=t)));const d=Object(o.a)();let p,h=1,{mapLoading:O=!1}=e,{legendLoading:m=!1}=e,{summary:f=null}=e,{showDate:j=!1}=e,{data:g}=e,{selections:v=[]}=e,{focusOn:y=null}=e,{selectRandomOnReady:x=!1}=e;function w(t){t&&(t.scale&&a.e.set(t.scale),a.f.set(t.stops),"bubble"===r&&t.custom&&a.d.set(t.custom),"spike"===r&&t.custom&&a.E.set(t.custom))}return t.$$set=t=>{"mapLoading"in t&&n(0,O=t.mapLoading),"legendLoading"in t&&n(1,m=t.legendLoading),"summary"in t&&n(2,f=t.summary),"showDate"in t&&n(3,j=t.showDate),"data"in t&&n(4,g=t.data),"selections"in t&&n(5,v=t.selections),"focusOn"in t&&n(6,y=t.focusOn),"selectRandomOnReady"in t&&n(17,x=t.selectRandomOnReady)},[O,m,f,j,g,v,y,p,h,r,c,l,u,b,d,w,function(){!s&&x&&p.selectRandom()},x,function(t){i.i[t?"unshift":"push"]((()=>{p=t,n(7,p)}))},t=>n(8,h=t.detail),t=>w(t.detail),t=>d("loading",t.detail),t=>d("select",t.detail)]}class be extends i.b{constructor(t){super(),Object(i.E)(this,t,ue,le,i.P,{mapLoading:0,legendLoading:1,summary:2,showDate:3,data:4,selections:5,focusOn:6,selectRandomOnReady:17})}}e.a=be},373:function(t,e,n){var i,o,a;o=[],void 0===(a="function"==typeof(i=function(){"use strict";var t="14.6.3";function e(t){return"object"==typeof t&&"function"==typeof t.to&&"function"==typeof t.from}function n(t){t.parentElement.removeChild(t)}function i(t){return null!=t}function o(t){t.preventDefault()}function a(t){return t.filter((function(t){return!this[t]&&(this[t]=!0)}),{})}function r(t,e){return Math.round(t/e)*e}function s(t,e){var n=t.getBoundingClientRect(),i=t.ownerDocument,o=i.documentElement,a=m(i);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),e?n.top+a.y-o.clientTop:n.left+a.x-o.clientLeft}function c(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function l(t,e,n){n>0&&(p(t,e),setTimeout((function(){h(t,e)}),n))}function u(t){return Math.max(Math.min(t,100),0)}function b(t){return Array.isArray(t)?t:[t]}function d(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function p(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function h(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function O(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function m(t){var e=void 0!==window.pageXOffset,n="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop}}function f(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function j(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}function g(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function v(t,e){return 100/(e-t)}function y(t,e,n){return 100*e/(t[n+1]-t[n])}function x(t,e){return y(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function w(t,e){return e*(t[1]-t[0])/100+t[0]}function _(t,e){for(var n=1;t>=e[n];)n+=1;return n}function S(t,e,n){if(n>=t.slice(-1)[0])return 100;var i=_(n,t),o=t[i-1],a=t[i],r=e[i-1],s=e[i];return r+x([o,a],n)/v(r,s)}function k(t,e,n){if(n>=100)return t.slice(-1)[0];var i=_(n,e),o=t[i-1],a=t[i],r=e[i-1];return w([o,a],(n-r)*v(r,e[i]))}function $(t,e,n,i){if(100===i)return i;var o=_(i,t),a=t[o-1],s=t[o];return n?i-a>(s-a)/2?s:a:e[o-1]?t[o-1]+r(i-t[o-1],e[o-1]):i}function E(e,n,i){var o;if("number"==typeof n&&(n=[n]),!Array.isArray(n))throw new Error("noUiSlider ("+t+"): 'range' contains invalid value.");if(!c(o="min"===e?0:"max"===e?100:parseFloat(e))||!c(n[0]))throw new Error("noUiSlider ("+t+"): 'range' value isn't numeric.");i.xPct.push(o),i.xVal.push(n[0]),o?i.xSteps.push(!isNaN(n[1])&&n[1]):isNaN(n[1])||(i.xSteps[0]=n[1]),i.xHighestCompleteStep.push(0)}function P(t,e,n){if(e)if(n.xVal[t]!==n.xVal[t+1]){n.xSteps[t]=y([n.xVal[t],n.xVal[t+1]],e,0)/v(n.xPct[t],n.xPct[t+1]);var i=(n.xVal[t+1]-n.xVal[t])/n.xNumSteps[t],o=Math.ceil(Number(i.toFixed(3))-1),a=n.xVal[t]+n.xNumSteps[t]*o;n.xHighestCompleteStep[t]=a}else n.xSteps[t]=n.xHighestCompleteStep[t]=n.xVal[t]}function C(t,e,n){var i;this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var o=[];for(i in t)t.hasOwnProperty(i)&&o.push([t[i],i]);for(o.length&&"object"==typeof o[0][0]?o.sort((function(t,e){return t[0][0]-e[0][0]})):o.sort((function(t,e){return t[0]-e[0]})),i=0;i<o.length;i++)E(o[i][1],o[i][0],this);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)P(i,this.xNumSteps[i],this)}C.prototype.getDistance=function(e){var n,i=[];for(n=0;n<this.xNumSteps.length-1;n++){var o=this.xNumSteps[n];if(o&&e/o%1!=0)throw new Error("noUiSlider ("+t+"): 'limit', 'margin' and 'padding' of "+this.xPct[n]+"% range must be divisible by step.");i[n]=y(this.xVal,e,n)}return i},C.prototype.getAbsoluteDistance=function(t,e,n){var i,o=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[o+1];)o++;else t===this.xPct[this.xPct.length-1]&&(o=this.xPct.length-2);n||t!==this.xPct[o+1]||o++;var a=1,r=e[o],s=0,c=0,l=0,u=0;for(i=n?(t-this.xPct[o])/(this.xPct[o+1]-this.xPct[o]):(this.xPct[o+1]-t)/(this.xPct[o+1]-this.xPct[o]);r>0;)s=this.xPct[o+1+u]-this.xPct[o+u],e[o+u]*a+100-100*i>100?(c=s*i,a=(r-100*i)/e[o+u],i=1):(c=e[o+u]*s/100*a,a=0),n?(l-=c,this.xPct.length+u>=1&&u--):(l+=c,this.xPct.length-u>=1&&u++),r=e[o+u]*a;return t+l},C.prototype.toStepping=function(t){return t=S(this.xVal,this.xPct,t)},C.prototype.fromStepping=function(t){return k(this.xVal,this.xPct,t)},C.prototype.getStep=function(t){return t=$(this.xPct,this.xSteps,this.snap,t)},C.prototype.getDefaultStep=function(t,e,n){var i=_(t,this.xPct);return(100===t||e&&t===this.xPct[i-1])&&(i=Math.max(i-1,1)),(this.xVal[i]-this.xVal[i-1])/n},C.prototype.getNearbySteps=function(t){var e=_(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},C.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(d);return Math.max.apply(null,t)},C.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var V={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number},L={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},M={tooltips:".__tooltips",aria:".__aria"};function A(n){if(e(n))return!0;throw new Error("noUiSlider ("+t+"): 'format' requires 'to' and 'from' methods.")}function R(e,n){if(!c(n))throw new Error("noUiSlider ("+t+"): 'step' is not numeric.");e.singleStep=n}function D(e,n){if(!c(n))throw new Error("noUiSlider ("+t+"): 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=n}function z(e,n){if(!c(n))throw new Error("noUiSlider ("+t+"): 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=n}function N(e,n){if("object"!=typeof n||Array.isArray(n))throw new Error("noUiSlider ("+t+"): 'range' is not an object.");if(void 0===n.min||void 0===n.max)throw new Error("noUiSlider ("+t+"): Missing 'min' or 'max' in 'range'.");if(n.min===n.max)throw new Error("noUiSlider ("+t+"): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new C(n,e.snap,e.singleStep)}function F(e,n){if(n=b(n),!Array.isArray(n)||!n.length)throw new Error("noUiSlider ("+t+"): 'start' option is incorrect.");e.handles=n.length,e.start=n}function Z(e,n){if(e.snap=n,"boolean"!=typeof n)throw new Error("noUiSlider ("+t+"): 'snap' option must be a boolean.")}function U(e,n){if(e.animate=n,"boolean"!=typeof n)throw new Error("noUiSlider ("+t+"): 'animate' option must be a boolean.")}function T(e,n){if(e.animationDuration=n,"number"!=typeof n)throw new Error("noUiSlider ("+t+"): 'animationDuration' option must be a number.")}function B(e,n){var i,o=[!1];if("lower"===n?n=[!0,!1]:"upper"===n&&(n=[!1,!0]),!0===n||!1===n){for(i=1;i<e.handles;i++)o.push(n);o.push(!1)}else{if(!Array.isArray(n)||!n.length||n.length!==e.handles+1)throw new Error("noUiSlider ("+t+"): 'connect' option doesn't match handle count.");o=n}e.connect=o}function H(e,n){switch(n){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+t+"): 'orientation' option is invalid.")}}function I(e,n){if(!c(n))throw new Error("noUiSlider ("+t+"): 'margin' option must be numeric.");0!==n&&(e.margin=e.spectrum.getDistance(n))}function q(e,n){if(!c(n))throw new Error("noUiSlider ("+t+"): 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(n),!e.limit||e.handles<2)throw new Error("noUiSlider ("+t+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function J(e,n){var i;if(!c(n)&&!Array.isArray(n))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(n)&&2!==n.length&&!c(n[0])&&!c(n[1]))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==n){for(Array.isArray(n)||(n=[n,n]),e.padding=[e.spectrum.getDistance(n[0]),e.spectrum.getDistance(n[1])],i=0;i<e.spectrum.xNumSteps.length-1;i++)if(e.padding[0][i]<0||e.padding[1][i]<0)throw new Error("noUiSlider ("+t+"): 'padding' option must be a positive number(s).");var o=n[0]+n[1],a=e.spectrum.xVal[0];if(o/(e.spectrum.xVal[e.spectrum.xVal.length-1]-a)>1)throw new Error("noUiSlider ("+t+"): 'padding' option must not exceed 100% of the range.")}}function Y(e,n){switch(n){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+t+"): 'direction' option was not recognized.")}}function G(e,n){if("string"!=typeof n)throw new Error("noUiSlider ("+t+"): 'behaviour' must be a string containing options.");var i=n.indexOf("tap")>=0,o=n.indexOf("drag")>=0,a=n.indexOf("fixed")>=0,r=n.indexOf("snap")>=0,s=n.indexOf("hover")>=0,c=n.indexOf("unconstrained")>=0;if(a){if(2!==e.handles)throw new Error("noUiSlider ("+t+"): 'fixed' behaviour must be used with 2 handles");I(e,e.start[1]-e.start[0])}if(c&&(e.margin||e.limit))throw new Error("noUiSlider ("+t+"): 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:i||r,drag:o,fixed:a,snap:r,hover:s,unconstrained:c}}function W(e,n){if(!1!==n)if(!0===n){e.tooltips=[];for(var i=0;i<e.handles;i++)e.tooltips.push(!0)}else{if(e.tooltips=b(n),e.tooltips.length!==e.handles)throw new Error("noUiSlider ("+t+"): must pass a formatter for all handles.");e.tooltips.forEach((function(e){if("boolean"!=typeof e&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider ("+t+"): 'tooltips' must be passed a formatter or 'false'.")}))}}function X(t,e){t.ariaFormat=e,A(e)}function Q(t,e){t.format=e,A(e)}function K(e,n){if(e.keyboardSupport=n,"boolean"!=typeof n)throw new Error("noUiSlider ("+t+"): 'keyboardSupport' option must be a boolean.")}function tt(t,e){t.documentElement=e}function et(e,n){if("string"!=typeof n&&!1!==n)throw new Error("noUiSlider ("+t+"): 'cssPrefix' must be a string or `false`.");e.cssPrefix=n}function nt(e,n){if("object"!=typeof n)throw new Error("noUiSlider ("+t+"): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix)for(var i in e.cssClasses={},n)n.hasOwnProperty(i)&&(e.cssClasses[i]=e.cssPrefix+n[i]);else e.cssClasses=n}function it(e){var n={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:V,format:V},o={step:{r:!1,t:R},keyboardPageMultiplier:{r:!1,t:D},keyboardDefaultStep:{r:!1,t:z},start:{r:!0,t:F},connect:{r:!0,t:B},direction:{r:!0,t:Y},snap:{r:!1,t:Z},animate:{r:!1,t:U},animationDuration:{r:!1,t:T},range:{r:!0,t:N},orientation:{r:!1,t:H},margin:{r:!1,t:I},limit:{r:!1,t:q},padding:{r:!1,t:J},behaviour:{r:!0,t:G},ariaFormat:{r:!1,t:X},format:{r:!1,t:Q},tooltips:{r:!1,t:W},keyboardSupport:{r:!0,t:K},documentElement:{r:!1,t:tt},cssPrefix:{r:!0,t:et},cssClasses:{r:!0,t:nt}},a={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:L,keyboardPageMultiplier:5,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(o).forEach((function(r){if(!i(e[r])&&void 0===a[r]){if(o[r].r)throw new Error("noUiSlider ("+t+"): '"+r+"' is required.");return!0}o[r].t(n,i(e[r])?e[r]:a[r])})),n.pips=e.pips;var r=document.createElement("div"),s=void 0!==r.style.msTransform,c=void 0!==r.style.transform;n.transformRule=c?"transform":s?"msTransform":"webkitTransform";var l=[["left","top"],["right","bottom"]];return n.style=l[n.dir][n.ort],n}function ot(e,i,r){var c,d,v,y,x,w,_=f(),S=g()&&j(),k=e,$=i.spectrum,E=[],P=[],C=[],V=0,L={},A=e.ownerDocument,R=i.documentElement||A.documentElement,D=A.body,z=-1,N=0,F=1,Z=2,U="rtl"===A.dir||1===i.ort?0:100;function T(t,e){var n=A.createElement("div");return e&&p(n,e),t.appendChild(n),n}function B(t,e){var n=T(t,i.cssClasses.origin),o=T(n,i.cssClasses.handle);return T(o,i.cssClasses.touchArea),o.setAttribute("data-handle",e),i.keyboardSupport&&(o.setAttribute("tabindex","0"),o.addEventListener("keydown",(function(t){return mt(t,e)}))),o.setAttribute("role","slider"),o.setAttribute("aria-orientation",i.ort?"vertical":"horizontal"),0===e?p(o,i.cssClasses.handleLower):e===i.handles-1&&p(o,i.cssClasses.handleUpper),n}function H(t,e){return!!e&&T(t,i.cssClasses.connect)}function I(t,e){var n=T(e,i.cssClasses.connects);d=[],(v=[]).push(H(n,t[0]));for(var o=0;o<i.handles;o++)d.push(B(e,o)),C[o]=o,v.push(H(n,t[o+1]))}function q(t){return p(t,i.cssClasses.target),0===i.dir?p(t,i.cssClasses.ltr):p(t,i.cssClasses.rtl),0===i.ort?p(t,i.cssClasses.horizontal):p(t,i.cssClasses.vertical),p(t,"rtl"===getComputedStyle(t).direction?i.cssClasses.textDirectionRtl:i.cssClasses.textDirectionLtr),T(t,i.cssClasses.base)}function J(t,e){return!!i.tooltips[e]&&T(t.firstChild,i.cssClasses.tooltip)}function Y(){return k.hasAttribute("disabled")}function G(t){return d[t].hasAttribute("disabled")}function W(){x&&(vt("update"+M.tooltips),x.forEach((function(t){t&&n(t)})),x=null)}function X(){W(),x=d.map(J),jt("update"+M.tooltips,(function(t,e,n){if(x[e]){var o=t[e];!0!==i.tooltips[e]&&(o=i.tooltips[e].to(n[e])),x[e].innerHTML=o}}))}function Q(){vt("update"+M.aria),jt("update"+M.aria,(function(t,e,n,o,a){C.forEach((function(t){var e=d[t],o=xt(P,t,0,!0,!0,!0),r=xt(P,t,100,!0,!0,!0),s=a[t],c=i.ariaFormat.to(n[t]);o=$.fromStepping(o).toFixed(1),r=$.fromStepping(r).toFixed(1),s=$.fromStepping(s).toFixed(1),e.children[0].setAttribute("aria-valuemin",o),e.children[0].setAttribute("aria-valuemax",r),e.children[0].setAttribute("aria-valuenow",s),e.children[0].setAttribute("aria-valuetext",c)}))}))}function K(e,n,i){if("range"===e||"steps"===e)return $.xVal;if("count"===e){if(n<2)throw new Error("noUiSlider ("+t+"): 'values' (>= 2) required for mode 'count'.");var o=n-1,a=100/o;for(n=[];o--;)n[o]=o*a;n.push(100),e="positions"}return"positions"===e?n.map((function(t){return $.fromStepping(i?$.getStep(t):t)})):"values"===e?i?n.map((function(t){return $.fromStepping($.getStep($.toStepping(t)))})):n:void 0}function tt(t,e,n){function i(t,e){return(t+e).toFixed(7)/1}var o={},r=$.xVal[0],s=$.xVal[$.xVal.length-1],c=!1,l=!1,u=0;return(n=a(n.slice().sort((function(t,e){return t-e}))))[0]!==r&&(n.unshift(r),c=!0),n[n.length-1]!==s&&(n.push(s),l=!0),n.forEach((function(a,r){var s,b,d,p,h,O,m,f,j,g,v=a,y=n[r+1],x="steps"===e;if(x&&(s=$.xNumSteps[r]),s||(s=y-v),!1!==v)for(void 0===y&&(y=v),s=Math.max(s,1e-7),b=v;b<=y;b=i(b,s)){for(f=(h=(p=$.toStepping(b))-u)/t,g=h/(j=Math.round(f)),d=1;d<=j;d+=1)o[(O=u+d*g).toFixed(5)]=[$.fromStepping(O),0];m=n.indexOf(b)>-1?F:x?Z:N,!r&&c&&b!==y&&(m=0),b===y&&l||(o[p.toFixed(5)]=[b,m]),u=p}})),o}function et(t,e,n){var o=A.createElement("div"),a=[];a[N]=i.cssClasses.valueNormal,a[F]=i.cssClasses.valueLarge,a[Z]=i.cssClasses.valueSub;var r=[];r[N]=i.cssClasses.markerNormal,r[F]=i.cssClasses.markerLarge,r[Z]=i.cssClasses.markerSub;var s=[i.cssClasses.valueHorizontal,i.cssClasses.valueVertical],c=[i.cssClasses.markerHorizontal,i.cssClasses.markerVertical];function l(t,e){var n=e===i.cssClasses.value,o=n?a:r;return e+" "+(n?s:c)[i.ort]+" "+o[t]}function u(t,a,r){if((r=e?e(a,r):r)!==z){var s=T(o,!1);s.className=l(r,i.cssClasses.marker),s.style[i.style]=t+"%",r>N&&((s=T(o,!1)).className=l(r,i.cssClasses.value),s.setAttribute("data-value",a),s.style[i.style]=t+"%",s.innerHTML=n.to(a))}}return p(o,i.cssClasses.pips),p(o,0===i.ort?i.cssClasses.pipsHorizontal:i.cssClasses.pipsVertical),Object.keys(t).forEach((function(e){u(e,t[e][0],t[e][1])})),o}function nt(){y&&(n(y),y=null)}function ot(t){nt();var e=t.mode,n=t.density||1,i=t.filter||!1,o=tt(n,e,K(e,t.values||!1,t.stepped||!1)),a=t.format||{to:Math.round};return y=k.appendChild(et(o,i,a))}function at(){var t=c.getBoundingClientRect(),e="offset"+["Width","Height"][i.ort];return 0===i.ort?t.width||c[e]:t.height||c[e]}function rt(t,e,n,o){var a=function(a){return!!(a=st(a,o.pageOffset,o.target||e))&&!(Y()&&!o.doNotReject)&&!(O(k,i.cssClasses.tap)&&!o.doNotReject)&&!(t===_.start&&void 0!==a.buttons&&a.buttons>1)&&(!o.hover||!a.buttons)&&(S||a.preventDefault(),a.calcPoint=a.points[i.ort],void n(a,o))},r=[];return t.split(" ").forEach((function(t){e.addEventListener(t,a,!!S&&{passive:!0}),r.push([t,a])})),r}function st(t,e,n){var i,o,a=0===t.type.indexOf("touch"),r=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(s=!0),"mousedown"===t.type&&!t.buttons&&!t.touches)return!1;if(a){var c=function(t){return t.target===n||n.contains(t.target)||t.target.shadowRoot&&t.target.shadowRoot.contains(n)};if("touchstart"===t.type){var l=Array.prototype.filter.call(t.touches,c);if(l.length>1)return!1;i=l[0].pageX,o=l[0].pageY}else{var u=Array.prototype.find.call(t.changedTouches,c);if(!u)return!1;i=u.pageX,o=u.pageY}}return e=e||m(A),(r||s)&&(i=t.clientX+e.x,o=t.clientY+e.y),t.pageOffset=e,t.points=[i,o],t.cursor=r||s,t}function ct(t){var e=100*(t-s(c,i.ort))/at();return e=u(e),i.dir?100-e:e}function lt(t){var e=100,n=!1;return d.forEach((function(i,o){if(!G(o)){var a=P[o],r=Math.abs(a-t);(r<e||r<=e&&t>a||100===r&&100===e)&&(n=o,e=r)}})),n}function ut(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&dt(t,e)}function bt(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return dt(t,e);var n=(i.dir?-1:1)*(t.calcPoint-e.startCalcPoint);_t(n>0,100*n/e.baseSize,e.locations,e.handleNumbers)}function dt(t,e){e.handle&&(h(e.handle,i.cssClasses.active),V-=1),e.listeners.forEach((function(t){R.removeEventListener(t[0],t[1])})),0===V&&(h(k,i.cssClasses.drag),$t(),t.cursor&&(D.style.cursor="",D.removeEventListener("selectstart",o))),e.handleNumbers.forEach((function(t){yt("change",t),yt("set",t),yt("end",t)}))}function pt(t,e){if(e.handleNumbers.some(G))return!1;var n;1===e.handleNumbers.length&&(n=d[e.handleNumbers[0]].children[0],V+=1,p(n,i.cssClasses.active)),t.stopPropagation();var a=[],r=rt(_.move,R,bt,{target:t.target,handle:n,listeners:a,startCalcPoint:t.calcPoint,baseSize:at(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:P.slice()}),s=rt(_.end,R,dt,{target:t.target,handle:n,listeners:a,doNotReject:!0,handleNumbers:e.handleNumbers}),c=rt("mouseout",R,ut,{target:t.target,handle:n,listeners:a,doNotReject:!0,handleNumbers:e.handleNumbers});a.push.apply(a,r.concat(s,c)),t.cursor&&(D.style.cursor=getComputedStyle(t.target).cursor,d.length>1&&p(k,i.cssClasses.drag),D.addEventListener("selectstart",o,!1)),e.handleNumbers.forEach((function(t){yt("start",t)}))}function ht(t){t.stopPropagation();var e=ct(t.calcPoint),n=lt(e);if(!1===n)return!1;i.events.snap||l(k,i.cssClasses.tap,i.animationDuration),Et(n,e,!0,!0),$t(),yt("slide",n,!0),yt("update",n,!0),yt("change",n,!0),yt("set",n,!0),i.events.snap&&pt(t,{handleNumbers:[n]})}function Ot(t){var e=ct(t.calcPoint),n=$.getStep(e),i=$.fromStepping(n);Object.keys(L).forEach((function(t){"hover"===t.split(".")[0]&&L[t].forEach((function(t){t.call(w,i)}))}))}function mt(t,e){if(Y()||G(e))return!1;var n=["Left","Right"],o=["Down","Up"],a=["PageDown","PageUp"],r=["Home","End"];i.dir&&!i.ort?n.reverse():i.ort&&!i.dir&&(o.reverse(),a.reverse());var s,c=t.key.replace("Arrow",""),l=c===a[0],u=c===a[1],b=c===o[0]||c===n[0]||l,d=c===o[1]||c===n[1]||u,p=c===r[0],h=c===r[1];if(!(b||d||p||h))return!0;if(t.preventDefault(),d||b){var O=i.keyboardPageMultiplier,m=b?0:1,f=Dt(e)[m];if(null===f)return!1;!1===f&&(f=$.getDefaultStep(P[e],b,i.keyboardDefaultStep)),(u||l)&&(f*=O),f=Math.max(f,1e-7),f*=b?-1:1,s=E[e]+f}else s=h?i.spectrum.xVal[i.spectrum.xVal.length-1]:i.spectrum.xVal[0];return Et(e,$.toStepping(s),!0,!0),yt("slide",e),yt("update",e),yt("change",e),yt("set",e),!1}function ft(t){t.fixed||d.forEach((function(t,e){rt(_.start,t.children[0],pt,{handleNumbers:[e]})})),t.tap&&rt(_.start,c,ht,{}),t.hover&&rt(_.move,c,Ot,{hover:!0}),t.drag&&v.forEach((function(e,n){if(!1!==e&&0!==n&&n!==v.length-1){var o=d[n-1],a=d[n],r=[e];p(e,i.cssClasses.draggable),t.fixed&&(r.push(o.children[0]),r.push(a.children[0])),r.forEach((function(t){rt(_.start,t,pt,{handles:[o,a],handleNumbers:[n-1,n]})}))}}))}function jt(t,e){L[t]=L[t]||[],L[t].push(e),"update"===t.split(".")[0]&&d.forEach((function(t,e){yt("update",e)}))}function gt(t){return t===M.aria||t===M.tooltips}function vt(t){var e=t&&t.split(".")[0],n=e?t.substring(e.length):t;Object.keys(L).forEach((function(t){var i=t.split(".")[0],o=t.substring(i.length);e&&e!==i||n&&n!==o||gt(o)&&n!==o||delete L[t]}))}function yt(t,e,n){Object.keys(L).forEach((function(o){var a=o.split(".")[0];t===a&&L[o].forEach((function(t){t.call(w,E.map(i.format.to),e,E.slice(),n||!1,P.slice(),w)}))}))}function xt(t,e,n,o,a,r){var s;return d.length>1&&!i.events.unconstrained&&(o&&e>0&&(s=$.getAbsoluteDistance(t[e-1],i.margin,0),n=Math.max(n,s)),a&&e<d.length-1&&(s=$.getAbsoluteDistance(t[e+1],i.margin,1),n=Math.min(n,s))),d.length>1&&i.limit&&(o&&e>0&&(s=$.getAbsoluteDistance(t[e-1],i.limit,0),n=Math.min(n,s)),a&&e<d.length-1&&(s=$.getAbsoluteDistance(t[e+1],i.limit,1),n=Math.max(n,s))),i.padding&&(0===e&&(s=$.getAbsoluteDistance(0,i.padding[0],0),n=Math.max(n,s)),e===d.length-1&&(s=$.getAbsoluteDistance(100,i.padding[1],1),n=Math.min(n,s))),!((n=u(n=$.getStep(n)))===t[e]&&!r)&&n}function wt(t,e){var n=i.ort;return(n?e:t)+", "+(n?t:e)}function _t(t,e,n,i){var o=n.slice(),a=[!t,t],r=[t,!t];i=i.slice(),t&&i.reverse(),i.length>1?i.forEach((function(t,n){var i=xt(o,t,o[t]+e,a[n],r[n],!1);!1===i?e=0:(e=i-o[t],o[t]=i)})):a=r=[!0];var s=!1;i.forEach((function(t,i){s=Et(t,n[t]+e,a[i],r[i])||s})),s&&i.forEach((function(t){yt("update",t),yt("slide",t)}))}function St(t,e){return i.dir?100-t-e:t}function kt(t,e){P[t]=e,E[t]=$.fromStepping(e);var n="translate("+wt(10*(St(e,0)-U)+"%","0")+")";d[t].style[i.transformRule]=n,Pt(t),Pt(t+1)}function $t(){C.forEach((function(t){var e=P[t]>50?-1:1,n=3+(d.length+e*t);d[t].style.zIndex=n}))}function Et(t,e,n,i,o){return o||(e=xt(P,t,e,n,i,!1)),!1!==e&&(kt(t,e),!0)}function Pt(t){if(v[t]){var e=0,n=100;0!==t&&(e=P[t-1]),t!==v.length-1&&(n=P[t]);var o=n-e,a="translate("+wt(St(e,o)+"%","0")+")",r="scale("+wt(o/100,"1")+")";v[t].style[i.transformRule]=a+" "+r}}function Ct(t,e){return null===t||!1===t||void 0===t?P[e]:("number"==typeof t&&(t=String(t)),t=i.format.from(t),!1===(t=$.toStepping(t))||isNaN(t)?P[e]:t)}function Vt(t,e,n){var o=b(t),a=void 0===P[0];e=void 0===e||!!e,i.animate&&!a&&l(k,i.cssClasses.tap,i.animationDuration),C.forEach((function(t){Et(t,Ct(o[t],t),!0,!1,n)}));for(var r=1===C.length?0:1;r<C.length;++r)C.forEach((function(t){Et(t,P[t],!0,!0,n)}));$t(),C.forEach((function(t){yt("update",t),null!==o[t]&&e&&yt("set",t)}))}function Lt(t){Vt(i.start,t)}function Mt(e,n,i,o){if(!((e=Number(e))>=0&&e<C.length))throw new Error("noUiSlider ("+t+"): invalid handle number, got: "+e);Et(e,Ct(n,e),!0,!0,o),yt("update",e),i&&yt("set",e)}function At(){var t=E.map(i.format.to);return 1===t.length?t[0]:t}function Rt(){for(var t in vt(M.aria),vt(M.tooltips),i.cssClasses)i.cssClasses.hasOwnProperty(t)&&h(k,i.cssClasses[t]);for(;k.firstChild;)k.removeChild(k.firstChild);delete k.noUiSlider}function Dt(t){var e=P[t],n=$.getNearbySteps(e),o=E[t],a=n.thisStep.step,r=null;if(i.snap)return[o-n.stepBefore.startValue||null,n.stepAfter.startValue-o||null];!1!==a&&o+a>n.stepAfter.startValue&&(a=n.stepAfter.startValue-o),r=o>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&o-n.stepBefore.highestStep,100===e?a=null:0===e&&(r=null);var s=$.countStepDecimals();return null!==a&&!1!==a&&(a=Number(a.toFixed(s))),null!==r&&!1!==r&&(r=Number(r.toFixed(s))),[r,a]}function zt(){return C.map(Dt)}function Nt(t,e){var n=At(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];o.forEach((function(e){void 0!==t[e]&&(r[e]=t[e])}));var a=it(r);o.forEach((function(e){void 0!==t[e]&&(i[e]=a[e])})),$=a.spectrum,i.margin=a.margin,i.limit=a.limit,i.padding=a.padding,i.pips?ot(i.pips):nt(),i.tooltips?X():W(),P=[],Vt(t.start||n,e)}function Ft(){c=q(k),I(i.connect,c),ft(i.events),Vt(i.start),i.pips&&ot(i.pips),i.tooltips&&X(),Q()}return Ft(),w={destroy:Rt,steps:zt,on:jt,off:vt,get:At,set:Vt,setHandle:Mt,reset:Lt,__moveHandles:function(t,e,n){_t(t,e,P,n)},options:r,updateOptions:Nt,target:k,removePips:nt,removeTooltips:W,getTooltips:function(){return x},getOrigins:function(){return d},pips:ot}}function at(e,n){if(!e||!e.nodeName)throw new Error("noUiSlider ("+t+"): create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider ("+t+"): Slider was already initialized.");var i=ot(e,it(n,e),n);return e.noUiSlider=i,i}return{__spectrum:C,version:t,cssClasses:L,create:at}})?i.apply(e,o):i)||(t.exports=a)}}]);